"use strict";(()=>{function ue(){return["/web/v2/dashboard/metadata"]}var q=class{constructor(e=0,t=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=n,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){let t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){return e.map(t=>[t,this.get(t)])}evict(e=!1){if(e||this.size>0){let t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){let t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){let e=[],t=this.first;for(;t!==null;)e.push(t.key),t=t.next;return e}setWithEvicted(e,t,n=this.resetTtl){let i=null;if(this.has(e))this.set(e,t,!0,n);else{this.max>0&&this.size===this.max&&(i={...this.first},this.evict(!0));let o=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=o:this.last.next=o,this.last=o}return i}set(e,t,n=!1,i=this.resetTtl){let o=this.items[e];return n||o!==void 0?(o.value=t,n===!1&&i&&(o.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(o)):(this.max>0&&this.size===this.max&&this.evict(!0),o=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=o:this.last.next=o,this.last=o),this}values(e=this.keys()){return e.map(t=>this.get(t))}};function de(r=1e3,e=0,t=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new q(r,e,t)}function m(r,e){r.waitUntil(e)}function w(r,...e){if(r)return;let t=Error("Assertion Error"+(e.length>0?": "+e.join(" "):""));if(t.stack)try{let n=t.stack.split(`
`);n[1]?.includes("assert")?(n.splice(1,1),t.stack=n.join(`
`)):n[0]?.includes("assert")&&(n.splice(0,1),t.stack=n.join(`
`))}catch{}throw t}var Wt=Symbol("missing");var Ct=Object.freeze([]);var fe;function pe({error:r,tags:e,extras:t,critical:n,caller:i}){w(fe,"Set up an error callback with setErrorReporter, or configure Sentry with initializeEnvironment");let o=J(r,i);return fe({error:o,tags:{...o.tags,...e},extras:{...o.extras,...t},critical:!!n}),o}function J(r,e=J){return r instanceof Error?r:new G(r,e)}var G=class extends Error{constructor(e,t){let n=e?JSON.stringify(e):"No error message provided";if(super(n),this.message=n,t&&Error.captureStackTrace)Error.captureStackTrace(this,t);else try{throw new Error}catch(i){this.stack=i.stack}}};var R=typeof window<"u"?window.location.hostname:void 0,he=!!(R&&["web.framerlocal.com","localhost","127.0.0.1","[::1]"].includes(R)),Y=(()=>{if(!R)return;if(he)return{main:R,previewLink:void 0};let r=/^(([^.]+\.)?beta\.)?((?:development\.)?framer\.com)$/u,e=R.match(r);if(!(!e||!e[3]))return{previewLink:e[2]&&e[0],main:e[3]}})(),ge={hosts:Y,isDevelopment:Y?.main==="development.framer.com",isProduction:Y?.main==="framer.com",isLocal:he};var N;function B(){return typeof window>"u"?{}:N||(N=Ce(),N)}function Ce(){let r=window.location,e=window?.bootstrap?.services;if(e)return e;let t;try{if(t=window.top.location.origin,e=window.top?.bootstrap?.services,e)return e}catch{}if(t&&t!==r.origin)throw Error(`Unexpectedly embedded by ${t} (expected ${r.origin})`);if(r.origin.endsWith("framer.com")||r.origin.endsWith("framer.dev"))throw Error("ServiceMap data was not provided in document");try{let n=new URLSearchParams(r.search).get("services")||new URLSearchParams(r.hash.substring(1)).get("services");n&&(e=JSON.parse(n))}catch{}if(e&&typeof e=="object"&&e.api)return e;throw Error("ServiceMap requested but not available")}function A(r,e=0,t=new Set){if(r===null)return r;if(typeof r=="function")return`[Function: ${r.name??"unknown"}]`;if(typeof r!="object")return r;if(r instanceof Error)return`[${r.toString()}]`;if(t.has(r))return"[Circular]";if(e>2)return"...";t.add(r);try{if("toJSON"in r&&typeof r.toJSON=="function")return A(r.toJSON(),e+1,t);if(Array.isArray(r))return r.map(n=>A(n,e+1,t));if(Object.getPrototypeOf(r)!==Object.prototype)return`[Object: ${"__class"in r&&r.__class||r.constructor?.name}]`;{let n={};for(let[i,o]of Object.entries(r))n[i]=A(o,e+1,t);return n}}catch(n){return`[Throws: ${n instanceof Error?n.message:n}]`}finally{t.delete(r)}}var Ue=["trace","debug","info","warn","error"],je=[":trace",":debug",":info",":warn",":error"];function xe(r,e){let t=[];for(let n of r.split(/[ ,]/u)){let i=n.trim();if(i.length===0)continue;let o=1,s=!1;i.startsWith("-")&&(i=i.slice(1),o=3,s=!0);for(let g=0;g<=4;g++){let I=je[g];if(I&&i.endsWith(I)){o=g,s&&(o+=1),i=i.slice(0,i.length-I.length),i.length===0&&(i="*");break}}let d=new RegExp("^"+qe(i).replace(/\\\*/gu,".*")+"$"),h=0;for(let g of e)g.id.match(d)&&(g.level=o,++h);h===0&&t.push(n)}return t}var P=class r{constructor(e,t,n){this.logger=e;this.level=t;this.parts=n;this.id=r.nextId++,this.time=Date.now()}static nextId=0;id;time;stringPrefix;toMessage(){if(this.stringPrefix)return this.parts;let e=[new Date(this.time).toISOString().substr(-14,14),Ue[this.level]+": ["+this.logger.id+"]"],t=0;for(;t<this.parts.length;t++){let n=this.parts[t];if(typeof n=="string"){e.push(n);continue}break}return this.stringPrefix=e.join(" "),this.parts.splice(0,t,this.stringPrefix),this.parts}toString(){return this.toMessage().map(e=>{let t=typeof e;if(t==="string")return e;if(t==="function")return`[Function: ${e.name??"unknown"}]`;if(e instanceof Error)return e.stack??e.toString();let n=JSON.stringify(A(e));return n?.length>253?n.slice(0,250)+"...":n}).join(" ")}},x="*:app:info,app:info",ye=typeof process<"u"&&!!process.kill,$e=ye&&!!process.env.CI;$e?x="-:warn":ye&&(x="");try{typeof window<"u"&&window.localStorage&&(x=window.localStorage.logLevel||x)}catch{}try{typeof process<"u"&&(x=process.env.DEBUG||x)}catch{}try{typeof window<"u"&&Object.assign(window,{setLogLevel:Ee})}catch{}try{typeof window<"u"&&window.postMessage&&window.top===window&&window.addEventListener("message",r=>{if(!r.data||typeof r.data!="object")return;let{loggerId:e,level:t,parts:n,printed:i}=r.data;if(typeof e!="string"||!Array.isArray(n)||n.length<1||typeof t!="number")return;let o=E(e);if(t<0||t>5)return;n[0]=n[0].replace("[","*[");let s=new P(o,t,n);s.stringPrefix=n[0],y.push(s),!i&&(o.level>t||console?.log(...s.toMessage()))})}catch{}var Z;try{typeof window<"u"&&window.postMessage&&window.parent!==window&&!window.location.pathname.startsWith("/edit")&&(Z=r=>{try{let e=r.toMessage().map(s=>A(s)),t=r.logger,n=r.level,i=t.level<=r.level,o={loggerId:t.id,level:n,parts:e,printed:i};window.parent?.postMessage(o,B().app)}catch{}})}catch{}var Q={},y=[],we=1e3;function b(r,e,t){let n=new P(r,e,t);for(y.push(n),Z?.(n);y.length>we;)y.shift();return n}function be(r){return typeof r=="number"&&(we=r),y}var Ve=/\/(?<filename>[^/.]+)(?=\.(?:debug\.)?html$)/u,me;function ze(){if(!(typeof window>"u"||!window.location))return me??=Ve.exec(window.location.pathname)?.groups?.filename,me}function E(r){let e=ze();r=(e?e+":":"")+r;let t=Q[r];if(t)return t;let n=new F(r);return Q[r]=n,xe(x,[n]),Z?.(new P(n,-1,[])),n}function Ee(r,e=!0){try{typeof window<"u"&&window.localStorage&&(window.localStorage.logLevel=r)}catch{}let t=x;x=r;let n=Object.values(Q);for(let o of n)o.level=3;let i=xe(r,n);if(i.length>0&&console?.warn("Some log level specs matched no loggers:",i),e&&y.length>0){console?.log("--- LOG REPLAY ---");for(let o of y)o.logger.level>o.level||(o.level>=3?console?.warn(...o.toMessage()):console?.log(...o.toMessage()));console?.log("--- END OF LOG REPLAY ---")}return t}var Ke=r=>{let e={...r,logs:be().slice(-50).map(t=>t.toString().slice(0,600)).join(`
`)};return r.logs&&console?.warn("extras.logs is reserved for log replay buffer, use another key"),e},F=class{constructor(e,t){this.id=e;this.errorIsCritical=t??(e==="fatal"||e.endsWith(":fatal"))}level=3;didLog={};errorIsCritical;extend(e){let t=this.id+":"+e;return E(t)}getBufferedMessages(){return y.filter(e=>e.logger===this)}setLevel(e){let t=this.level;return this.level=e,t}isLoggingTraceMessages(){return this.level>=0}trace=(...e)=>{if(this.level>0)return;let t=b(this,0,e);console?.log(...t.toMessage())};debug=(...e)=>{let t=b(this,1,e);this.level>1||console?.log(...t.toMessage())};info=(...e)=>{let t=b(this,2,e);this.level>2||console?.info(...t.toMessage())};warn=(...e)=>{let t=b(this,3,e);this.level>3||console?.warn(...t.toMessage())};warnOncePerMinute=(e,...t)=>{let n=this.didLog[e];if(n&&n>Date.now())return;this.didLog[e]=Date.now()+1e3*60,t.unshift(e);let i=b(this,3,t);this.level>3||console?.warn(...i.toMessage())};error=(...e)=>{let t=b(this,4,e);this.level>4||console?.error(...t.toMessage())};errorOncePerMinute=(e,...t)=>{let n=this.didLog[e];if(n&&n>Date.now())return;this.didLog[e]=Date.now()+1e3*60,t.unshift(e);let i=b(this,4,t);this.level>4||console?.error(...i.toMessage())};reportWithoutLogging=(e,t,n,i)=>{let o=Ke(t??{}),s=pe({caller:this.reportWithoutLogging,error:e,tags:{...n,handler:"logger",where:this.id},extras:t,critical:i??this.errorIsCritical});return[o,s]};reportError=(e,t,n,i)=>{let[o,s]=this.reportWithoutLogging(e,t,n,i);o?this.error(s,o):this.error(s)};reportErrorOncePerMinute=(e,t)=>{if(!He(e))return;let n=this.didLog[e.message];n&&n>Date.now()||(this.didLog[e.message]=Date.now()+1e3*60,this.reportError(e,t))};reportCriticalError=(e,t,n)=>this.reportError(e,t,n,!0)};function He(r){return Object.prototype.hasOwnProperty.call(r,"message")}function qe(r){return r.replace(/[/\-\\^$*+?.()|[\]{}]/gu,"\\$&")}var Ge=Symbol("Mixed");var Me="dependencies",Ie="config",X=`${Ie}/${Me}`,Ye="importMap.json",Qe="dependencies.json",Ze=`${X}/${Ye}`,Xe=`${X}/${Qe}`;var ve;(Mt=>{function r(l,...a){return l.concat(a)}Mt.push=r;function e(l){return l.slice(0,-1)}Mt.pop=e;function t(l,...a){return a.concat(l)}Mt.unshift=t;function n(l,a,...c){let p=l.length;if(a<0||a>p)throw Error("index out of range: "+a);let u=l.slice();return u.splice(a,0,...c),u}Mt.insert=n;function i(l,a,c){let p=l.length;if(a<0||a>=p)throw Error("index out of range: "+a);let u=Array.isArray(c)?c:[c],L=l.slice();return L.splice(a,1,...u),L}Mt.replace=i;function o(l,a){let c=l.length;if(a<0||a>=c)throw Error("index out of range: "+a);let p=l.slice();return p.splice(a,1),p}Mt.remove=o;function s(l,a,c){let p=l.length;if(a<0||a>=p)throw Error("from index out of range: "+a);if(c<0||c>=p)throw Error("to index out of range: "+c);let u=l.slice();if(c===a)return u;let L=u[a];return a<c?(u.splice(c+1,0,L),u.splice(a,1)):(u.splice(a,1),u.splice(c,0,L)),u}Mt.move=s;function d(l,a){let c=[],p=Math.min(l.length,a.length);for(let u=0;u<p;u++)c.push([l[u],a[u]]);return c}Mt.zip=d;function h(l,a,c){let p=l.slice(),u=p[a];return u===void 0||(p[a]=c(u)),p}Mt.update=h;function g(l){return Array.from(new Set(l))}Mt.unique=g;function I(l,...a){return Array.from(new Set([...l,...a.flat()]))}Mt.union=I;function Et(l,a){return l.filter(a)}Mt.filter=Et})(ve||={});var et=Object.prototype.hasOwnProperty;function tt(r,e){return et.call(r,e)}var Te;(n=>{function r(i,o){for(let s of Object.keys(i))tt(o,s)||delete i[s];for(let s of Object.keys(o))i[s]===void 0&&(i[s]=o[s]);return Object.setPrototypeOf(i,Object.getPrototypeOf(o)),i}n.morphUsingTemplate=r;function e(i,o){o&&Object.assign(i,o)}n.writeOnce=e;function t(i,o){return Object.assign(Object.create(Object.getPrototypeOf(i)),i,o)}n.update=t})(Te||={});var ke;(i=>{function r(o,...s){return new Set([...o,...s])}i.add=r;function e(o,...s){let d=new Set(o);for(let h of s)d.delete(h);return d}i.remove=e;function t(...o){let s=new Set;for(let d of o)for(let h of d)s.add(h);return s}i.union=t;function n(o,s){return o.has(s)?i.remove(o,s):i.add(o,s)}i.toggle=n})(ke||={});var Se;(n=>{function r(i,...o){let s=new Map;i.forEach((h,g)=>s.set(g,h));let d=!1;for(let h of o)h&&(h.forEach((g,I)=>s.set(I,g)),d=!0);return d?s:i}n.merge=r;function e(i,o,s){let d=new Map(i);return d.set(o,s),d}n.set=e;function t(i,o){let s=new Map(i);return s.delete(o),s}n.remove=t})(Se||={});var W=class extends Promise{_state="initial";resolve;reject;get state(){return this._state}pending(){return this._state="pending",this}isResolved(){return this._state==="fulfilled"||this._state==="rejected"}constructor(){let e,t;super((n,i)=>{e=n,t=i}),this.resolve=n=>{this._state="fulfilled",e(n)},this.reject=n=>{this._state="rejected",t(n)}}};W.prototype.constructor=Promise;var rt=!1,nt=!1,ot=!1;typeof window<"u"&&window.scheduler&&(rt="yield"in window.scheduler,nt="postTask"in window.scheduler,ot="isInputPending"in window.scheduler);var br=E("task-queue");function it(){var r=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!r||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)})}var Le=it;function _(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function Re(r,e,t){let n=indexedDB.open(r,t);return n.onupgradeneeded=()=>n.result.createObjectStore(e),_(n)}function st(r,e){let t=Le().then(()=>Re(r,e)).then(n=>n.objectStoreNames.contains(e)?n:(n.close(),Re(r,e,n.version+1)));return(n,i)=>t.then(o=>i(o.transaction(e,n).objectStore(e)))}var ee;function te(){return ee||(ee=st("keyval-store","keyval")),ee}function C(r,e=te()){return e("readonly",t=>_(t.get(r)))}function U(r,e,t=te()){return t("readwrite",n=>(n.put(e,r),_(n.transaction)))}function j(r,e=te()){return e("readwrite",t=>(t.delete(r),_(t.transaction)))}var M=class extends Error{};M.prototype.name="InvalidTokenError";function at(r){return decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function lt(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return at(e)}catch{return atob(e)}}function Pe(r,e){if(typeof r!="string")throw new M("Invalid token specified: must be a string");e||(e={});let t=e.header===!0?0:1,n=r.split(".")[t];if(typeof n!="string")throw new M(`Invalid token specified: missing part #${t+1}`);let i;try{i=lt(n)}catch(o){throw new M(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(i)}catch(o){throw new M(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}var v=class r{scopes;constructor(e){if(this.scopes=BigInt(0),typeof e=="string"){this.scopes=BigInt(e).valueOf();return}if(typeof e=="bigint"){this.scopes=e;return}if(typeof e=="number"){this.addScope(e);return}if(Array.isArray(e)){this.addScope(...e);return}}addScope(...e){for(let t of e){if(t<0)throw new Error("Scope must be 0 or bigger.");this.scopes=this.scopes|BigInt(1<<t).valueOf()}}hasScope(e){if(e<0)throw new Error("Scope must be 0 or bigger.");return!!(this.scopes>>BigInt(e)&BigInt(1))}intersection(e){return new r(this.scopes&e.valueOf())}matches(e){return this.intersection(e).valueOf()===this.scopes}valueOf(){return this.scopes}toString(){return this.scopes.toString()}};var re=new v([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),Oe=new v([4,5,6,7,10,11]);var V=class r extends Error{message;code;data;isTemporary;ref;status;skipSentry;constructor({message:e,code:t,data:n={},isTemporary:i,ref:o,status:s,skipSentry:d,cause:h}){super(),Error.captureStackTrace&&Error.captureStackTrace(this,r),this.message=e,this.code=t,this.data=n,this.isTemporary=!0,this.ref=o,this.status=s,this.skipSentry=!!d,this.cause=h,i!==void 0?this.isTemporary=i:s&&(this.isTemporary=s!==$.BadRequest)}toString(){return this.message}isUnauthorized(){return this.status===$.Unauthorized}isNotFound(){return this.status===$.NotFound}isForbidden(){return this.status===$.Forbidden}isClientError(){return this.status&&this.status>=400&&this.status<500}isServerError(){return this.status&&this.status>=500}},$={Ok:200,BadRequest:400,Unauthorized:401,PaymentDeclined:402,Forbidden:403,NotFound:404,Conflict:409};var f=E("accessTokenRefresher"),ct=401,ne="access_token",oe="access_token.edit",ut=90*1e3,dt=30*1e3,z=class{constructor(e,t){this.options=t;this.url=`${e}/auth/web/access-token`;try{typeof window<"u"&&window.top?.location.href}catch{this.isEmbeddedCrossOrigin=!0}}_accessToken;_accessTokenExpiry;_accessTokenStorageKey;timer=null;url;accessTokenWaitList=[];retryAttempt=0;MaxRetryDelay=60*1e3;BaseRetryDelay=1e3;isUnauthorized=!1;hasStarted=!1;isEmbeddedCrossOrigin=!1;async start(){w(!this.hasStarted,"Attempt to start AccessTokenRefresher more than once."),this.hasStarted=!0;let e=await this.loadAccessTokenFromStorage();if(e){let{accessToken:t,expiry:n,storageKey:i}=e;this.setToken(t,n,i),this.scheduleRefreshAt(ie(n))}else await this.refreshAccessTokenAndScheduleNextRefresh()}registerForNewToken(e){f.debug("Adding waiter for new token"),this.accessTokenWaitList.push(e)}flushWaitList(){let e=this.accessTokenWaitList;this.accessTokenWaitList=[],f.debug("Flushing waitlist, contains",e.length,"waiters");for(let t of e)t(this._accessToken)}isUnauthorizedResponse(e){return e.status===ct}handleServerError=e=>{if(!this.isUnauthorizedResponse(e))throw f.debug("Error response status:",e.status,"with text:",e.statusText),this.retryWithBackoff(),new V({status:e.status,message:e.statusText})};async refreshAccessTokenAndScheduleNextRefresh(){f.debug("Renewing access token"),this.hasStarted||(this.hasStarted=!0);let e;try{e=await fetch(this.url,{credentials:"include"})}catch{f.error("Connection error, retrying\u2026"),this.retryWithBackoff();return}if(!e.ok){this.handleServerError(e),this.isUnauthorizedResponse(e)&&(f.debug("Turning on unauthorized mode"),this.isUnauthorized=!0,this.flushWaitList());return}f.debug("Received access token"),this.retryAttempt=0;let t=await e.json(),{accessToken:n}=t,i=Pe(n),o=new v(i.scopes);if(!this.isEmbeddedCrossOrigin&&!this.isValidAccessToken(i.scope,o)){await this.discardAccessToken(),f.reportError(`Received access token has insufficient scopes. Wanted: ${re.valueOf()}, got: ${o.valueOf()}`,void 0,void 0,!0),this.options?.onInsufficientScopes?.(this),this.retryWithBackoff();return}let s;if(t.expiresInSeconds?(s=Date.now()+t.expiresInSeconds*1e3,f.debug("Received expiry seconds:",t.expiresInSeconds)):s=t.expiresAt,!n){f.error("Unable to authenticate client"),this.retryWithBackoff();return}let d=new Date(s);if(Number.isNaN(d.getTime())){f.error("Access Token expiry date is invalid"),this.retryWithBackoff();return}this.setToken(n,d,this.isEmbeddedCrossOrigin?oe:ne),this.scheduleRefreshAt(ie(d))}setToken(e,t,n){f.debug("Setting acccess token"),this._accessToken=e,this._accessTokenExpiry=t,this._accessTokenStorageKey=n,this.flushWaitList(),this.saveAccessTokenInStorage(n,{accessToken:e,expiresAt:t.toISOString()})}clearRefreshTimer(){this.timer&&(f.debug("Clearing refresh timer"),clearTimeout(this.timer),this.timer=null)}retryWithBackoff(){this.clearRefreshTimer(),this.retryAttempt+=1;let e=Math.floor(Math.random()*Math.min(this.MaxRetryDelay,this.BaseRetryDelay*2**this.retryAttempt));f.debug("Retrying after",e),this.scheduleRefreshAfter(e)}scheduleRefreshAfter(e){this.clearRefreshTimer(),this.timer=setTimeout(()=>this.refreshAccessTokenAndScheduleNextRefresh(),e)}scheduleRefreshAt(e){let t=e.getTime()-new Date().getTime();if(t<=0)throw new Error("Refresh time is not valid");this.scheduleRefreshAfter(t)}async saveAccessTokenInStorage(e,t){try{await U(e,t)}catch(n){f.debug("Error in storing access token",n)}}async loadAccessTokenFromStorage(){let e=this.isEmbeddedCrossOrigin?oe:ne;try{let t=await C(e);if(!t)return null;let{accessToken:n,expiresAt:i}=t,o=new Date(i);return new Date>=ie(o)?null:{accessToken:n,expiry:o,storageKey:e}}catch(t){return f.warn("Warning: failed to read the access token from IndexedDB (via idb-keyval):",t),null}}hasAccessTokenExpired(){return this._accessTokenExpiry?new Date().getTime()>=this._accessTokenExpiry.getTime()-dt:!1}isAccessTokenValid(){return this._accessToken&&!this.isUnauthorized&&!this.hasAccessTokenExpired()}async getAccessToken(){if(this.isUnauthorized)return Promise.resolve(void 0);if(this.isAccessTokenValid())return Promise.resolve(this._accessToken);let e=new Promise(t=>this.registerForNewToken(t));return this.hasAccessTokenExpired()&&await this.discardAccessToken(!0),this.hasStarted||await this.start(),e}async getAuthorizationHeaderValue(){let e=await this.getAccessToken();if(e)return`Bearer ${e}`}async stopAuthentication(){try{await this.discardAccessToken(!1),this.hasStarted=!1,await j(ne),await j(oe)}catch{}}async discardAccessToken(e=!1){try{f.debug("Discarding access token with renewal",e),this.clearRefreshTimer(),this._accessToken=void 0,this._accessTokenExpiry=void 0,this._accessTokenStorageKey&&await j(this._accessTokenStorageKey),this._accessTokenStorageKey=void 0,e&&!this.isUnauthorized&&this.scheduleRefreshAfter(0)}catch{}}async withAuthorizationHeader(e){let t=await this.getAuthorizationHeaderValue();return t&&(e.headers=new Headers(e.headers),e.headers.set("authorization",t)),e}isValidAccessToken(e,t){return e==="public-api"?Oe.matches(t):re.matches(t)}};function ie(r){return new Date(r.getTime()-ut)}var K;T();async function T(){if(!K)try{K=await C("apiBaseURL")}catch(r){console.log("Unable to get apiBaseURL from IndexedDB",r)}return K}async function De(r){K=r,await U("apiBaseURL",r)}var k;se();async function se(){let r=await T();r&&(k=new z(r))}var ft=100,pt=2*60*1e3,ae=de(ft,pt);async function ht(r,e){try{return await r.responsePromise}catch(t){return console.error(`The prefetch request failed for some reason. Maybe the prefetching implementation got outdated, and we\u2019re sending incorrect requests?

`,t),fetch(e)}}async function gt(){if(!k)return;let r=await T();if(!r)throw new Error("The service worker has the access token but doesn\u2019t have the API server. This isn\u2019t supposed to happen because accessTokenRefresher also depends on the API server.");let e=await k.withAuthorizationHeader({mode:"cors",credentials:"include",redirect:"error"}),t=mt(r,...ue());return{dashboard:{url:t,responsePromise:fetch(t,e)}}}function mt(r,e,t){let n=new URL(e,r);return t&&(n.search=`?${new URLSearchParams(t)}`),n.href}function xt(r){let e=new URL(r).pathname;return e==="/projects"||e==="/projects/"||e.startsWith("/projects/folder")||e.startsWith("/domains")}var O={fetch(r){let e=r.clientId||r.resultingClientId;if(!e)return;if(r.request.mode==="navigate"&&xt(r.request.url)){m(r,gt().then(n=>{n&&ae.set(e,n.dashboard)}));return}let t=ae.get(e);if(t&&r.request.url===t.url){r.respondWith(ht(t,r.request)),ae.delete(e);return}},message(r){let e=r.data;if(e.type==="refreshApiServer"){let t=e.payload.api;r.waitUntil(T().then(n=>{if(n!==t)return De(t).then(()=>se())}))}e.type==="signOut"&&k&&r.waitUntil(k.stopAuthentication())}};var le="/s/offline-CLNI44DO.html";var H="service-worker",Fe=["https://app.framerstatic.com/service-worker-assets/Inter-Regular.a3742754.woff2?src=offline","https://app.framerstatic.com/service-worker-assets/Inter-Bold.ba58d2af.woff2?src=offline"],ce=[le,...Fe];function Ne(r,e){return e.findIndex(t=>r.endsWith(t))!==-1}async function Be({force:r}={}){let e=await caches.open(H);if(r)return e.addAll(ce);let t=async n=>{if(!await e.match(n))return e.add(n)};await Promise.all(ce.map(n=>t(n)))}async function wt(r){try{return await fetch(r.request,{referrer:r.request.referrer})}catch(e){console.error(`Unable to load ${r.request.url}`,e);let t=e instanceof TypeError,n=e instanceof DOMException&&e.name==="NetworkError";if(!(t||n))throw e;return await(await caches.open(H)).match(le)}}function bt(r){let t=new URL(r).pathname;return t.startsWith("/projects")||t.startsWith("/share")}var D={install(r){m(r,Be({force:!0}))},activate(r){m(r,(async()=>{let t=await caches.open(H),n=await t.keys();await Promise.all(n.map(i=>{if(!Ne(i.url,ce))return t.delete(i)}))})())},fetch(r){if(r.request.mode==="navigate"&&bt(r.request.url))r.respondWith(wt(r)),m(r,Be().catch(e=>{console.warn("Unable to re-cache the offline page",e)}));else if(Ne(r.request.url,Fe)){let e=caches.open(H).then(t=>t.match(r.request));r.respondWith(e)}}};var S=self;S.addEventListener("install",function(r){D.install?.(r),O.install?.(r),m(r,S.skipWaiting())});S.addEventListener("activate",function(r){D.activate?.(r),O.activate?.(r),m(r,S.registration.navigationPreload?.disable()??Promise.resolve())});S.addEventListener("fetch",function(r){D.fetch?.(r),O.fetch?.(r)});S.addEventListener("message",function(r){D.message?.(r),O.message?.(r)});})();
/*! Bundled license information:

tiny-lru/dist/tiny-lru.js:
  (**
   * tiny-lru
   *
   * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
   * @license BSD-3-Clause
   * @version 11.4.5
   *)
*/
