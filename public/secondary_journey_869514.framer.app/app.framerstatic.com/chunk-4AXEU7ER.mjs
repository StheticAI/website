import{g as nP,i as iP,k as dP}from"https://app.framerstatic.com/chunk-5UXO7EDE.mjs";import{$ as oV,$a as tR,$b as DR,A as DP,Aa as RV,Ab as Eh,Ac as Fp,B as FP,Ba as kV,Bb as Mh,Bc as Ap,C as AP,Ca as wV,Cb as sR,Cc as Ep,D as EP,Da as LV,Db as lR,Dc as Mp,E as MP,Ea as DV,Eb as cR,Ec as BR,F as OP,Fa as FV,Fb as dR,Fc as $R,G as WP,Ga as AV,Gb as pR,Gc as GR,H as zP,Ha as EV,Hb as uR,Hc as HR,I as na,Ia as MV,Ib as mR,Ic as _R,J as BP,Ja as OV,Jb as fR,Jc as jR,K as hh,Ka as WV,Kb as hR,Kc as $l,L as gh,La as zV,Lb as gR,Lc as UR,M as $P,Ma as BV,Mb as yR,Mc as Ii,N as GP,Na as $V,Nb as CR,O as HP,Oa as GV,Ob as SR,P as _P,Pa as HV,Pb as vR,Q as jP,Qa as _V,Qb as TR,R as UP,Ra as jV,Rb as bR,S as JP,Sa as UV,Sb as IR,T as XP,Ta as JV,Tb as NR,U as ZP,Ua as XV,Ub as xR,V as QP,Va as ZV,Vb as PR,W as KP,Wa as QV,Wb as VR,X as qP,Xa as KV,Xb as RR,Y as YP,Ya as qV,Yb as kR,Z as eV,Za as YV,Zb as wR,_ as tV,_a as eR,_b as LR,aa as rV,ab as oR,ac as FR,ba as nV,bb as rR,bc as AR,ca as iV,cb as nR,cc as aa,da as aV,db as ia,dc as yn,ea as sV,eb as iR,ec as sa,f as IP,fa as lV,fb as aR,fc as kr,g as ee,ga as cV,gb as yh,gc as ER,h as mh,ha as dV,hb as bp,hc as MR,i as NP,ia as pV,ib as Ch,ic as OR,j as bi,ja as uV,jb as Sh,jc as WR,k as fh,ka as mV,kb as vh,kc as ys,l as Ol,la as fV,lb as Th,lc as Wl,m as je,ma as hV,mb as Ip,mc as Cs,n as xP,na as gV,nb as bh,nc as Np,o as vp,oa as yV,ob as Ih,oc as zl,p as Tp,pa as CV,pb as Nh,pc as la,q as PP,qa as SV,qb as xh,qc as Bl,r as VP,ra as vV,rb as Ph,rc as xp,s as RP,sa as TV,sb as Vh,sc as Pp,ta as bV,tb as Rh,tc as Vp,u as kP,ua as IV,ub as kh,uc as Rp,va as NV,vb as wh,vc as kp,w as wP,wa as xV,wb as Lh,wc as wp,xb as Dh,xc as zR,y as LP,ya as PV,yb as Fh,yc as Lp,za as VV,zb as Ah,zc as Dp}from"https://app.framerstatic.com/chunk-VDQCPMA7.mjs";import{h as sP}from"https://app.framerstatic.com/chunk-3QRSBZ5D.mjs";import{d as cP}from"https://app.framerstatic.com/chunk-IXOQ7SRR.mjs";import{b as fs,c as aP}from"https://app.framerstatic.com/chunk-U2NF2DFM.mjs";import{j as pP}from"https://app.framerstatic.com/chunk-7WYK4RQK.mjs";import{L as rP,e as oP,g as ch}from"https://app.framerstatic.com/chunk-5HXGPRCU.mjs";import{a as hs,c as fP,e as uh,f as yP,h as Op}from"https://app.framerstatic.com/chunk-26ZI4URE.mjs";import{a as uP,b as dh,c as mP,f as ph,h as hP,k as gP,l as yp,m as gs,n as Cp,o as Sp,p as TP,q as bP,r as JR}from"https://app.framerstatic.com/chunk-XLWENXPN.mjs";import{$a as Kf,$b as ap,$d as dp,$f as Dx,$g as ih,Ac as En,Ad as qN,Af as bx,B as wf,Ba as Tb,Bb as TN,Bd as YN,Bf as On,Ca as vl,Cb as Ll,Cd as vi,Ce as dx,Cf as Ix,Cg as Ox,D as rb,Db as bN,Dd as Mn,De as px,Df as Nx,Dg as Wx,E as Ad,Ea as Tl,Eb as IN,Ee as ux,Eg as zx,F as Md,Fa as zd,Fe as th,G as lb,Gb as NN,Gf as xx,H as cb,Hb as xN,Hg as nh,If as oh,Jd as ds,Jf as Px,K as Od,Kg as Bx,L as Df,Lc as zN,Ld as ex,Md as tx,Mf as Vx,Mg as ra,Nd as ox,Ng as $x,Oc as BN,Od as rx,Og as Gx,Pc as $N,Pd as ps,Pe as up,Pg as Hx,Qb as Dl,Qc as sp,Qf as oa,Rb as PN,Rc as Al,Sa as bb,Sb as Fl,Se as mx,Sg as _x,Td as El,Te as fx,Tg as jx,Ua as kl,Uc as GN,Ue as hx,Ug as Ux,Vd as Eo,Vf as rh,Vg as Jx,Wb as VN,Wg as Xx,Xf as Rx,Xh as hp,Ya as uN,Yb as ip,Ye as gx,Yf as kx,Yg as Zx,Yh as qx,Za as mN,Zf as wx,Zg as Qx,_b as Ao,_d as nx,_f as Lx,a as gl,ab as qf,af as yx,ag as ms,ah as fp,bb as fN,bf as Cx,bg as Fx,cb as hN,db as gN,de as ix,ee as ax,ei as Yx,fi as eP,gb as np,gd as HN,ge as sx,gf as Sx,gg as Ax,gi as gp,ha as pb,hb as wl,hc as RN,hd as _N,he as lx,hf as vx,hg as mp,ia as ub,ic as kN,ii as tP,ja as Wd,jc as wN,jd as jN,ka as mb,kc as LN,kf as ta,lc as DN,ld as UN,lf as Qr,lh as ah,m as Nf,mb as yN,mc as Yf,mh as Kx,n as xf,nd as lp,ng as Ex,nh as Ml,o as Ki,oa as hb,oc as FN,od as cp,oh as sh,p as Pf,pa as gb,pc as AN,q as Vf,r as Cl,ra as yb,rc as EN,rd as JN,s as Rf,sc as MN,sg as Mx,t as kf,tc as ON,td as XN,te as pp,u as Sl,uc as eh,ud as ZN,ue as cx,v as Ya,va as Cb,vb as CN,vc as WN,wa as vb,wd as QN,wh as lh,x as YT,xb as SN,y as eb,yf as us,zb as vN,zc as An,zd as KN,zf as Tx}from"https://app.framerstatic.com/chunk-COMKKZLF.mjs";import{a as pO,f as Lt}from"https://app.framerstatic.com/chunk-L7VKNP5U.mjs";import{d as Sf,f as Qf,g as Fn}from"https://app.framerstatic.com/chunk-75ILXMIH.mjs";import{k as Ti}from"https://app.framerstatic.com/chunk-I3Y5XHS3.mjs";import{$h as Mf,$j as Bf,$l as fI,$m as WI,Ab as un,Ad as MT,Af as Qi,Ak as Ub,Am as SI,An as iN,Bf as kn,Bh as Bd,Bk as Jb,Cc as Qt,Ce as JT,Cj as Jd,Cm as vI,D as ff,Db as Td,Dh as Ib,Di as rs,Dj as yi,Ed as ut,Ee as XT,Ef as Ro,Ei as Vb,Ej as zb,El as aI,En as Rl,F as Za,Fb as ul,Fg as vo,Fj as Bb,Fm as jf,Gb as ml,Gf as bf,Gk as Xb,Gl as sI,Gm as TI,Hb as bd,He as Fo,Hf as If,Hm as bI,Ib as st,Ie as Nr,Ij as $b,Ik as xl,Il as dI,Im as Uf,In as aN,Jb as gT,Jc as xd,Jd as Cf,Jf as mt,Jk as Gf,Jm as II,Kb as yT,Kc as hf,Kd as fi,Kf as es,Kg as Ur,Kj as Gb,Kk as Zb,Km as NI,Kn as sN,Lh as Nb,Lj as Hb,Mc as IT,Md as kd,Me as ZT,Mk as Hf,Ml as Zr,Mm as xI,Nc as NT,Nd as qa,Nf as ts,Nh as $d,Nm as PI,Ob as Id,Oc as xT,Od as Rn,Of as lo,Ok as Pl,Om as kI,Pc as PT,Pf as jr,Pi as zf,Pl as pI,Pm as wI,Qc as VT,Qf as tb,Ql as Yd,Rc as Vd,Re as so,Rf as hi,Rk as Jr,Rl as Ci,Sd as OT,Sf as Dd,Si as ns,Sj as Xd,Sk as as,Sl as ep,Sm as LI,Tc as Qa,Td as WT,Tf as Fd,Ti as Gd,Tl as uI,Ub as fl,Uf as ob,Ui as Hd,Uj as qi,Ul as ss,Um as DI,Vd as yl,Ve as Ld,Vf as os,Vi as Rb,Vj as fn,Vm as FI,Wc as ui,Wd as wd,We as QT,Wg as mr,Wi as _d,Wn as lN,Xd as vf,Xe as KT,Xh as xb,Xk as Qb,Xl as mI,Xm as AI,Xn as cN,Yc as DT,Ye as Tf,Yf as xr,Ym as EI,Z as vd,Zh as Ef,Zk as Kb,Zm as MI,_m as OI,_n as dN,ag as Pr,an as zI,b as Re,bd as mi,bj as kb,bn as BI,bo as ea,c as ES,cg as St,ch as db,cj as wb,cl as qb,cn as $I,co as pN,d as aT,dg as Ed,dh as fb,dj as wt,dn as GI,e as sT,ec as Yo,ee as zT,en as HI,eo as cs,fe as BT,fj as Ab,fl as fe,fn as _I,gc as hl,gd as mn,ge as $T,gj as Eb,gl as to,gn as jI,h as lT,hc as ST,hk as To,i as yd,ic as vT,id as Zi,ie as GT,ig as Lf,ik as Nl,im as hI,in as UI,j as cT,jh as Ff,jj as Mb,jl as eI,jm as tp,jn as JI,kc as Xi,kj as wn,km as Vl,kn as XI,lf as qT,ll as Ln,mh as Af,mm as gI,nc as ze,ni as bl,nk as $f,nl as tI,nn as rN,ol as Dn,on as nN,pg as nb,pj as Ud,pl as nI,pm as op,qd as gf,qj as Ob,qm as yI,re as HT,rg as ib,rk as Zd,rn as Jf,sc as er,se as _T,sg as ab,sh as Sb,si as Of,sj as gi,sl as tr,sm as CI,sn as Xf,tg as sb,th as Xe,ti as Wf,tj as co,tk as _b,tn as Zf,uc as Nd,ui as Pb,vc as TT,vd as yf,w as dT,wd as FT,wj as Il,xb as di,xd as AT,xe as jT,xj as Wb,xk as jb,xl as iI,xn as rp,yb as hT,yd as ET,ym as _f,zc as bT,zd as _r,ze as UT}from"https://app.framerstatic.com/chunk-XTLBFCBM.mjs";import{b as pT}from"https://app.framerstatic.com/chunk-6YI2XN42.mjs";import{a as lP}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import{b as Pd}from"https://app.framerstatic.com/chunk-GZI43NW3.mjs";import{a as CP,b as SP,c as vP,f as Oh}from"https://app.framerstatic.com/chunk-LZDNIQ2U.mjs";import{$ as Oa,$b as Xt,$c as Lo,$d as nn,$i as re,$j as av,$n as Lv,$o as hd,$s as qI,A as go,Aa as rS,Ag as Ks,Ah as Km,Aj as Ir,Ak as ao,Ao as Ui,As as Rr,Bb as mS,Be as MS,Bh as XS,Bj as Po,Bk as il,Bn as md,Bs as lI,C as Gm,Cb as fS,Ck as Bt,Cs as qd,D as Le,Dg as _S,Dj as Ne,Dp as Uv,Ds as cI,Eb as hS,Eo as Pn,Er as Lb,Es as VI,Fd as Xc,Fj as Ha,Fn as ja,Fr as Db,Gd as VS,Gi as qS,Gj as Ym,Gl as ur,Gr as jd,Gs as RI,Hi as Zo,Hk as uv,Hn as fd,Hr as Fb,Hs as ZI,Ik as mv,Il as yv,In as Vv,J as ZC,Jg as jS,Jn as Vo,K as de,Kb as gS,Kd as Zc,Kg as td,Kh as nd,Ki as Gi,Kk as fv,Kr as is,L as Hm,Lc as rn,Lh as id,Lj as ai,Lm as dd,Ls as Yi,Me as OS,Mj as ef,Mk as ld,Ml as Cv,Mm as Ht,Mn as qo,Mp as Jv,Ng as US,Ni as ge,Nm as pd,Nn as lf,Nr as Yb,O as _m,Oc as _c,Od as Qc,Oh as qs,Oi as I,Om as Tv,Or as Vr,Os as QI,Pc as Jo,Pd as RS,Pi as No,Pk as hv,Pm as ji,Pr as Qd,Qc as ti,Qd as Kc,Qi as Y,Qk as xn,Qm as bv,Qq as _t,Rc as Um,Rd as $a,Rg as $i,Ri as el,Rn as Rv,Sc as bS,Sd as qc,Si as It,Sj as rv,Sl as al,Sm as sf,Sp as Xv,Sq as Cd,Sr as hn,Ss as KI,Tb as yS,Tc as At,Td as io,Tg as Gr,Ti as p,Tj as tf,Tp as Zv,Tq as Ji,Ts as Si,Ud as Ga,Ui as nt,Un as Ua,Up as Qv,Uq as uT,Va as Wi,Vc as Gt,Vd as kS,Vk as _i,Vp as Kv,Vq as Vn,Vs as gn,W as Io,Wc as qe,Wd as Do,Wg as od,Wi as pt,Wj as ol,Wn as kv,Wp as qv,Wq as mT,Xc as IS,Xd as ri,Xi as YS,Xj as nv,Xn as wv,Xp as Yv,Xq as pn,Yc as NS,Yd as Yc,Yi as ye,Yl as nf,Yp as eT,Zc as Js,Zd as wS,Zi as ev,Zj as iv,Zo as Bv,Zs as ls,_b as CS,_j as sd,_o as $v,ac as SS,ad as Fe,ae as pr,aj as zt,ap as ci,at as YI,bb as aS,bc as tn,bd as Br,be as bn,bf as WS,bj as Hi,bo as cf,bq as tT,bt as eN,cc as vS,cd as xS,ce as LS,cl as gv,cm as li,cn as cl,co as Dv,cp as Xa,ct as tN,d as Yn,db as sS,dd as jc,de as an,dk as rl,dt as oN,eb as $c,ec as B,ed as br,ee as In,ej as tv,er as fT,fa as ei,fd as Uc,fm as sl,fn as Iv,fo as Ev,fp as Gv,g as GC,gd as Ft,ge as sn,gp as gd,gq as oT,hb as lS,hc as za,hd as ue,he as DS,hn as Nv,i as HC,ic as xt,id as Be,if as Xm,in as ud,ir as Sd,jd as Zt,je as ed,jj as ln,jo as Mv,k as zm,ka as KC,kb as cS,kd as z,ke as FS,kf as zS,kk as sv,km as ll,kn as Hr,ko as Ja,l as _C,ld as PS,le as AS,lf as BS,lg as Qs,li as Xo,lk as lv,lm as Sv,lo as dl,lr as CT,md as Ct,ml as cd,mn as dn,mo as Ov,mp as pf,mr as Rd,n as De,nb as zi,nd as Ye,nf as $S,ni as ZS,nk as cv,no as pl,nq as rT,nr as RT,od as Xs,of as GS,oh as rd,or as kT,pd as Zs,ph as ii,pj as ov,pk as Ko,pq as nT,qa as qC,qb as en,qc as TS,qd as Ve,qf as HS,qi as QS,qk as cn,qm as vv,qq as iT,qr as Ka,rb as dS,rc as Gc,rd as Z,re as ni,rh as Qm,ri as Ys,rj as Ee,rk as dv,rr as lt,s as Us,sb as Tn,sc as dr,sd as Ba,se as Bi,sj as xo,sn as xv,sr as wT,ss as Kd,t as Bm,tb as q,td as et,tg as Zm,ti as qm,tk as nl,tp as Hv,tq as uf,tr as LT,ua as YC,ub as $t,uc as Hc,ud as oi,uj as ad,uo as Wv,up as _v,ur as pi,us as rI,va as eS,vb as pS,vc as Co,vd as Rt,vj as Qo,vk as Nn,vl as of,vn as Pv,vo as zv,vp as jv,wa as tS,wc as no,wd as $r,we as Ae,wh as JS,wm as af,x as jC,xa as oS,xb as uS,xc as eo,xd as $e,yc as on,yd as Jm,yk as si,ym as kt,yq as mf,zd as Jc,zg as So,zi as KS,zj as tl,zk as pv,zl as rf,zm as _a,zs as Xr}from"https://app.framerstatic.com/chunk-NBRM3IAP.mjs";import{S as XC,U as QC,ca as df,d as UC,e as zc,g as Bc,ga as Fv,h as $m,ha as Av,i as JC}from"https://app.framerstatic.com/chunk-3CHH3HAB.mjs";import{a as oI}from"https://app.framerstatic.com/chunk-REJ2XCEK.mjs";import{a as qt,b as ho}from"https://app.framerstatic.com/chunk-BUC334RG.mjs";import{a as Wa,p as at}from"https://app.framerstatic.com/chunk-7QB5YDW7.mjs";import{b as jo}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{a as zr,b as A,e as te,f as Ue,g as Ze,h as nS,i as iS,j as F,k as Uo,m as We,n as Yt,o as jm,p as yo}from"https://app.framerstatic.com/chunk-CMAEAGWD.mjs";import{a as dO}from"https://app.framerstatic.com/chunk-M6MHZBU3.mjs";import{g as Yr}from"https://app.framerstatic.com/chunk-JLNGOKO7.mjs";import{B as WC,Ga as rt,Ka as Wr,Na as $C,T as vr,W as Wt,aa as Je,f as Wm,fa as js,ga as zC,ia as Tr,j as qn,ja as fo,ka as ot,ma as Oc,oa as cr,qa as Oi,ra as he,sa as BC,ta as Wc}from"https://app.framerstatic.com/chunk-5V7XAOIL.mjs";import{a as S,b as G}from"https://app.framerstatic.com/chunk-YOOGIIWU.mjs";import{a as Mc}from"https://app.framerstatic.com/chunk-HMF7T2NG.mjs";import{d as Om,e as Ec,j as D,k as E,l as ce,m as le,n as U}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var ZR=Ec(pO(),1);var QR=Ec(dO(),1);var IU=QR.default.createContext("not-defined");var XR={store_internal:2,store_browse:2,store_use_installed:2},Wh={},Wp=new ZR.FramerTracking({sourceName:"framer-x",trackingURL:Mc().events+"/track",verbose:window.localStorage&&window.localStorage.getItem("debug-metrics")==="active",addContext:e=>{let t;for(t in Wh)F(e[t])&&(e[t]=Wh[t])}}),uO;(r=>(r.init=function(n){let{appVersion:i,projectId:a}=n;Object.assign(Wh,{appVersion:i,projectId:a}),Wp.setUserId(n.userId)},r.push=function(n){let{name:i,type:a,...s}=n;n.type==="store_internal"?(delete s.action,Wp.track({type:"track",event:i,version:2,...s})):Wp.track({type:"track",event:a,version:XR[a],name:i,...s})},r.pushEvent=function(n){let{event:i,...a}=n;Wp.track({...a,type:"track",event:i,version:XR[i]})}))(uO||={});var mO=new Set(cS({allItemsLabelLocalized:!0,booleanTrueLabelLocalized:!0,booleanFalseLabelLocalized:!0,fillImageLocalized:!0,formInputPlaceholderLocalized:!0,htmlLocalized:!0,altAttributeLocalized:!0,titleLocalized:!0,descriptionLocalized:!0,linkLocalized:!0}));function zh(e){return mO.has(e)}function zp(e){return e.map(t=>Ue(t)?Bp(t):Ze(t)?zp(t):t)}function fO(e){return e.endsWith("Localized")}function Bp(e){let t={};for(let o in e){if(fO(o))continue;let r=e[o];Ue(r)?t[o]=Bp(r):Ze(r)?t[o]=zp(r):t[o]=r}return t}function wU(e){let t={},o;for(o in e){if(zh(o))continue;if(!af(o)){t[o]=e[o];continue}let r=e[o];Ue(r)?t[o]=Bp(r):Ze(r)?t[o]=zp(r):t[o]=r}return t}function KR(e){let t={};for(let o in e){if(zh(o))continue;if(!af(o)){t[o]=e[o];continue}let r=e[o];Ue(r)?t[o]=Bp(r):Ze(r)?t[o]=zp(r):t[o]=r}return t}var hO={track:!0};function qR(e){let t={...e,event:"canvas_page_add"};jo(t,hO)}var gO={track:!0};function YR(e){let t={...e,event:"component_canvas_create"};jo(t,gO)}var yO={track:!0};function ek(e){let t={...e,event:"component_canvas_enter"};jo(t,yO)}var CO={track:!0};function tk(e){let t={...e,event:"component_canvas_variant_create"};jo(t,CO)}var SO={track:!0};function Bh(e){let t={...e,event:"component_design_instance"};jo(t,SO)}var vO={track:!0};function ok(e){let t={...e,event:"property_layout_update"};jo(t,vO)}var TO={track:!0};function rk(e){let t={...e,event:"variable_reference_create"};jo(t,TO)}function nk(e,t){return zr(t)?t:Re(e)?e.constraintsLocked:!1}function dJ(e,t,o,r){let n=e.tree,i={x:Math.round(o.x-r.width/2),y:Math.round(o.y-r.height/2)},a=n.getNode(t);if(!t||!a)return{left:i.x,top:i.y};let s=AT(e.tree,t),l=s?e.tree.getViewportRect(s):null,c=n.getRect(a),d=n.convertPointToNode(a,i),u={x:d.x,y:d.y,width:r.width,height:r.height},m=u.width/u.height,h=Ef(u,{sizing:c,positioning:c,viewport:l,layout:rn(a)},null,{aspectRatio:m,shouldGuessPinToBottom:ta(n,null,a),shouldGuessPinToRight:Qr(n,null,a)});return h.aspectRatio=m,h}var $h=(e,t,o,r)=>{let n=t.getGroundNodes().map(i=>e.getRect(i));return r!==void 0&&n.push(...r),n.find(i=>de.intersects(o,i))===void 0},bO=(e,t,o,r,n)=>{let i=t.getGroundNodes().map(l=>e.getRect(l));r!==void 0&&i.push(...r);let s=i.sort((l,c)=>de.maxX(l)>de.maxX(c)?-1:1)[0];return s!==void 0?_h(s,o,n):null},IO=(e,t,o,r,n)=>{let i=t.getGroundNodes().map(c=>e.getRect(c));r!==void 0&&i.push(...r);let l=i.filter(c=>c.width===o.width&&c.height===o.height||c.height===o.width&&c.width===o.height).sort((c,d)=>de.maxX(c)>de.maxX(d)?-1:1)[0];return l!==void 0?_h(l,o,n):null},NO=(e,t,o)=>t.map(r=>e.getNode(r)).filter(r=>td.equals(r.rect(null),o));function Hh({tree:e,activeScope:t,node:o,size:r,filledRects:n,offsetDistance:i}){let a={...e.getRect(o),...r},s=t.getGroundNodes().map(d=>d.rect());n&&s.push(...n);let l=a,c=0;for(;l;){if(F(i.x)||(a.x=Gh("x",l,i.x)),F(i.y)||(a.y=Gh("y",l,i.y)),l=s.find(d=>de.intersects(d,a)),c>s.length)return a;c++}return a}var ak=(e,t,o,r,n={x:100,y:void 0},i)=>Hh({tree:e,activeScope:t,node:o,size:r,filledRects:i,offsetDistance:n}),Gl=(e,t,o,r,n=100,i)=>Hh({tree:e,activeScope:t,node:o,size:r,filledRects:i,offsetDistance:{x:n}}),pJ=(e,t,o,r,n=100,i)=>Hh({tree:e,activeScope:t,node:o,size:r,filledRects:i,offsetDistance:{y:n}});function Gh(e,t,o){return(e==="x"?de.maxX:de.maxY)(t)+o}function _h(e,t,o=100){return{...e,x:Gh("x",e,o),...t}}var xO=(e,t,o,r,n,i,a)=>{if(i){let c=e.getNode(i);if(c)return Gl(e,t,c,o,a,n)}if(r){let c=NO(e,r,o);if(c.length){let u=c.map(h=>_h(h.rect(),o,a)).find(h=>$h(e,t,h,n));if(u)return u;let m=c[0];return S(m,"Equal frame must be defined"),Gl(e,t,m,o,a,n)}}let s=IO(e,t,o,n,a);if(s!==null&&$h(e,t,s,n))return s;let l=bO(e,t,o,n,a);return l!==null&&$h(e,t,l,n)?l:{...o,x:0,y:0}},uJ=(e,t,o,r,n)=>{let i=e.getRect(o),a=e.getParent(o.id),s;$e(o)&&(s=Math.min(i.width,100));let l=xO(e,t,i,r,n,o.id,s);return n.push(l),Ef(l,null,Ka(o)?pi(o):null,{shouldGuessPinToBottom:!0,shouldGuessPinToRight:Qr(e,o,a)})},mJ=(e,t,o,r)=>{if(o.length>0){let n=o[o.length-1],i=e.getGroundFrameAncestor(n,!0);if(i)return i.id}for(let n of e.sortVisually(e.getNodesAtPoint(t,r)).reverse())if(n instanceof An&&e.getParent(n.id)===ao){if(qe(n))continue;return n.id}return ao},fJ=(e,t,o)=>{let n=e.tree.newId(),i={top:t.y,left:t.x,width:t.width,height:t.height,overflow:"clip",isScreen:!0};return i.framePreset=o,e.createFrame(ao,{id:n,...i}),n},hJ=(e,t)=>{let o=e.tree,r=o.newId(),n={top:t.y,left:t.x,width:t.width,height:t.height,overflow:"clip",isScreen:!0};return e.createFrame(ao,{id:r,...n}),e.stores.scopeStore.active.getGroundNodes(a=>{let s=o.getRect(a);return a.id!==r&&de.containsRect(t,s)}).forEach(a=>{let s=o.getParent(a.id),l=o.getRect(a),c=de.offset(l,Le.reverse(t));e.moveNode(a.id,r),e.tree.current(a)?.set(a.updateForRect({rect:c,parentSizeInfo:{sizing:t,positioning:t,viewport:null,layout:rn(s)},constraintsLocked:nk(a),shouldGuessPinToBottom:!0,shouldGuessPinToRight:Qr(e.tree,a,s)}))}),r},ik=["#9ef","#4cf","#3af","#38f","#26f"],gJ=(()=>{let e=-1,t=ik.length;return()=>(e++,ik[e%t])})();function TJ(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);if(!VS(r)&&!Xc(r)&&!(!r&&o.added==="RedirectRouteNode"))return!1}return!0}function sk(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);return!r||!qo(r)?!1:"variables"in o.from}return!0}function lk(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);if(!Lo(r))return!1;let n="locales";return!!(n in o.from||o.from._deleted?.includes(n))}return!0}var ck=class extends hn{constructor(){super(...arguments);D(this,"active",0)}};var PO=Je("EngineChanges");var dk=class{constructor(){D(this,"changes",new Set);D(this,"addChanges",(...t)=>{for(let o of t)this.changes.add(o)});D(this,"changeObserverFlags",[]);D(this,"changeObservers",[]);D(this,"inSignalAllObservers",!1);D(this,"observersToRemove",[])}get flags(){return this.changes}has(...t){for(let o of t)if(this.changes.has(o))return!0;return!1}observe(...t){let o=t.pop(),r=t;return Yr.isDebugBuild&&r.some(n=>n===void 0)&&PO.warn("changes.observe was called with undefined as one of the flags. It might be caused by observing a store that hasn't been instantiated yet."),this.changeObserverFlags.push(r),this.changeObservers.push(o),o}observeWithComponent(t,o,r){this.changeObserverFlags.push(t);let n=()=>{Yr.benchmarkSkipRendering||o.setState(r())};return this.changeObservers.push(n),n}removeObserver(t){if(this.inSignalAllObservers){this.observersToRemove.push(t);return}let o=this.changeObservers.indexOf(t);o!==-1&&(this.changeObserverFlags.splice(o,1),this.changeObservers.splice(o,1))}signalAllObservers(){if(!this.changes)return;let t=this.changes,o=this.changeObserverFlags,r=this.changeObservers;this.inSignalAllObservers=!0;for(let n=0;n<o.length;n++){let i=o[n];for(let a of i)if(t.has(a)){r[n]();break}}if(this.inSignalAllObservers=!1,this.observersToRemove.length>0){for(let n of this.observersToRemove)this.removeObserver(n);this.observersToRemove.length=0}this.changes.clear()}signalObserversFor(...t){let o=new Set(t),r=this.changeObserverFlags,n=this.changeObservers;for(let i=0;i<r.length;i++){let a=r[i];for(let s of a)if(o.has(s)){n[i]();break}}o.forEach(i=>this.changes.delete(i))}};function Uh(e){return e.userIsViewer?ch:Yr.isAutomation||Yr.isTest?oP:e.acl.find(o=>o.user.id===e.userId)?.permissions??ch}var Hl=class{constructor(t){this.aclPermissions=t}get canDesign(){return this.aclPermissions.canDesign==="on"}get canEditContent(){return this.aclPermissions.canEditContent==="on"}get canPublish(){return this.aclPermissions.canPublish==="on"}get canEditSiteSettings(){return this.canDesign&&this.canEditContent&&this.canPublish}get canPublishToStaging(){return this.canDesign||this.canEditContent||this.canPublish}get canInviteCollaborators(){return this.canDesign||this.canEditContent||this.canPublish}get canEditVariables(){return this.canDesign}get canAddCollections(){return this.canDesign}get canEditAnalytics(){return this.canDesign||this.canEditContent}get canEditLocales(){return this.canDesign}get canEditLocalizedValues(){return this.canEditContent}get canSendDiffs(){return this.canDesign||this.canEditContent}},MJ=tv({canDesign:"Design",canEditContent:"Content",canPublish:"Deploy",canEditSiteSettings:"Design and Content and Deploy",canPublishToStaging:"Design or Content or Deploy",canInviteCollaborators:"Design or Content or Deploy",canEditVariables:"Design",canAddCollections:"Design",canEditAnalytics:"Design or Content",canEditLocales:"Design",canEditLocalizedValues:"Content",canSendDiffs:"Design or Content"});function OJ(e){let t=Uh(e);return new Hl(t)}var Jh=e=>[e.chromeStore,e.projectStore,e.sessionStore],$p=([e,t,o])=>({userIsViewer:e.userIsViewer,userIsAccountSharing:e.userIsAccountSharing,acl:t.acl,userId:o.user.id});function WJ(e,t,o,{signal:r}){let n=Jh(e),i=$p(n),a=t.changes.observe(...n,()=>{let s=$p(n);en(i,s)||(i=s,o(s))});r.addEventListener("abort",()=>{t.changes.removeObserver(a)},{once:!0})}function GJ(){let e=pT();return S(Xh(e),"Expected OnPageEngine"),e}function Xh(e){return e.name==="OnPageEngine"}var pk=e=>[e.loadingStore,...Jh(e)],Zh=([e,...t])=>({isReady:e.isReady,...$p(t)});function VO(e,t){if(!e.isReady||e.userIsViewer||e.userIsAccountSharing&&t!=="canInviteCollaborators")return!0;let o=Uh(e);return!new Hl(o)[t]}function _l(e,t){return Za(e)?VO(Zh(pk(e.stores)),t):!Xh(e)}function XJ(e,t,o,{signal:r}){let n=pk(e),i=Zh(n),a=t.changes.observe(...n,()=>{let s=Zh(n);en(i,s)||(i=s,o(s))});r.addEventListener("abort",()=>{t.changes.removeObserver(a)},{once:!0})}function Ss(e){return Ks(e)}var qJ=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;let o=new Set(e);for(let r of t)if(!o.has(r))return!1;return!0},YJ=(e,t,o)=>{let r=[];for(let n of e)Qh(t,n,o)!==-1&&r.push(n);return r},uk=(e,t,o)=>{if(!o)return Array.from(new Set([...e,...t]));let r=[...e];for(let n of t)Qh(r,n,o)===-1&&r.push(n);return r},e1=(e,t,o)=>e.filter(r=>Qh(t,r,o)===-1);function Qh(e,t,o){return o?e.findIndex(r=>o(r,t)):e.indexOf(t)}function kO(e,t){let o=[];for(let n of t.segmentSelection){let i=e.getNode(n.id);!i||n.index>=i.pathSegments.length||o.push(n)}let r=t.segmentHandle;if(r){let n=e.getNode(r.id);(!n||r.index>=n.pathSegments.length)&&(r=null)}return{...t,segmentSelection:o,segmentHandle:r}}var mk=class{constructor(t){this.addChanges=t;D(this,"state",{segmentSelection:[],selectionType:0,segmentHandle:null,segmentHovered:null,closestCurve:null,pointRounding:.5,snapConstraint:null})}validateSegmentSelection(t){this.state=kO(t,this.state),this.addChanges("PathSelection")}setSegmentSelection(t,o){this.state={...this.state,segmentSelection:t,selectionType:o},this.addChanges("PathSelection")}toggleSegmentSelection(t,o){this.state.selectionType!==o&&(this.state={...this.state,segmentSelection:t,selectionType:o});let r=t.filter(i=>this.state.segmentSelection.find(a=>i.id===a.id&&i.index===a.index)===void 0),n=this.state.segmentSelection.filter(i=>t.find(a=>a.id===i.id&&a.index===i.index)===void 0);this.state={...this.state,segmentSelection:uk(r,n)},this.addChanges("PathSelection")}setSegmentHandle(t){this.state={...this.state,segmentHandle:t},this.addChanges("PathSelection")}setHoveredSegment(t){this.state={...this.state,segmentHovered:t},this.addChanges("PathSelection")}setClosestCurve(t){this.state={...this.state,closestCurve:t},this.addChanges("PathSelection")}setPathPointRounding(t){this.state={...this.state,pointRounding:t},this.addChanges("PathSelection")}setPathConstraint(t){this.state={...this.state,snapConstraint:t},this.addChanges("PathSelection")}};var jl=Ec(ES(),1);function hk(e,t){return _l(e,"canDesign")||t.length===0?!1:t.find(o=>!(!Ss(o)&&Pr(o)&&!Jc(o)&&!o.originalid))===void 0}function D1(e,t,o,r){let n=t.map(i=>qh(e,i,o,r)[0]);e.stores.selectionStore.set(n)}function qh(e,t,o,r){let n=e.tree,i;ah.isBasicShape(t)?i=ah.createPath(t):i=t.calculatedPaths();let a=rb(t,i),s=ca(n,t,i),l=n.newId(),c=vo.boundingBox(a),d=Ck(t),u=hI(t);if(d.fillType==="linear-gradient"&&d.fillLinearGradient){d.fillType="linear-gradient";let h=te(t.rotation)?t.rotation:0;d.fillLinearGradient=d.fillLinearGradient.updated({angle:d.fillLinearGradient.angle+h})}if(a.length===1){let h=a[0];S(h!==void 0,"Expected first path after length === 1 check");let C=vo.offset(h,Le.reverse(c));e.createPath(t.parentid,{id:l,...C,...c,...d,...u})}else{let h=[],C=new fp({id:l,parentid:t.parentid,pathBoolean:4,...c,...d,...u});h.push(C);for(let T of a){let N=vo.boundingBox(T),P={...N,...Le.subtract(N,c)},R=vo.offset(T,Le.reverse(N)),W=new Ml({parentid:l,...P,...R,...d});h.push(W)}e.tree.insertNodes(h)}let m=n.getParent(t.id);if(m!==null&&mt(m)){let h=m.children.indexOf(t);e.moveNode(l,m.id,h)}return e.deleteNode(t.id),r||e.stores.selectionStore.set(l),o===!0&&e.setTool(40),[l,s]}function LO(e){let t={};return e.forEach(o=>{let r=t[o.id]??[];r.push(o.index),t[o.id]=r}),t}function F1(e,t){let o=1/t;return{x:Math.round(e.x*o)/o,y:Math.round(e.y*o)/o}}function A1(e,t){let o=e.getNode(t.id);if(!o||!o.pathSegments)return null;let r=o.pathSegments[t.index];if(!r)return null;let n=t.handle===0?So.calculatedHandleIn(r):So.calculatedHandleOut(r);return e.convertPointToCanvas(o,n)}function fk(e,t){return t.handle===0?{x:e.handleOutX,y:e.handleOutY}:{x:e.handleInX,y:e.handleInY}}function E1(e,t,o,r,n){let i=e.getNode(t.id),a=i.pathSegments[t.index];return S(a!==void 0,"Expected segment at handleSelector.index"),o=e.convertPointToNode(i,o),o=Le.subtract(o,a),Wr.update(i.pathSegments,t.index,s=>{let l=fk(s,t),c=s.handleMirroring==="straight",d=s.handleMirroring;r&&(l=fk(r,t),c=r.handleMirroring==="straight",d=r.handleMirroring),c&&(d="symmetric"),r&&n&&(d==="disconnected"||d==="asymmetric"?d="symmetric":d="disconnected"),d==="symmetric"&&(l=Le.reverse(o));let u=t.handle===0,m=u?o.x:l.x,h=u?o.y:l.y,C=u?l.x:o.x,T=u?l.y:o.y;return s.merge({handleOutX:C,handleOutY:T,handleInX:m,handleInY:h,handleMirroring:d})})}function Ul(e,t,o=!1,r){let n=e.tree,i=(0,jl.Map)(),a=(0,jl.Map)();if(!Pr(t)&&!$e(t))return{descendantPaths:i,descendantBasicShapes:a};let s={};Yh(n,t,s);let l=Object.keys(s);for(let u=0,m=l.length;u<m;u++){let h=l[u];S(h!==void 0,"Expected id at index within loop bounds");let C=s[h];S(C!==void 0,"Expected path for id from Object.keys"),i=i.set(h,C)}let c={};eg(n,t,c,o);let d=Object.keys(c);for(let u=0,m=d.length;u<m;u++){let h=d[u];S(h!==void 0,"Expected id at index within loop bounds");let C=c[h];S(C!==void 0,"Expected points for id from Object.keys"),a=a.set(h,C)}return a.forEach((u,m)=>{if(u!==null)return;let h=n.getNode(m);if(!h||!hk(e,[h]))return;let[C,T]=qh(e,h,!1,!0),N=T[0];S(N!==void 0,"Expected pathSegment from flattenShape"),i=i.set(C,N),r&&r.includes(m)&&e.stores.selectionStore.toggle(C)}),{descendantPaths:i,descendantBasicShapes:a}}function gk(e,t){let o=e.tree,r=(0,jl.Map)(),n=(0,jl.Map)();if(!$e(t))return{shapeContainerDescendantPaths:r,shapeContainerDescendantBasicShapes:n};let i={};Yh(o,t,i,t);let a=Object.keys(i);for(let c=0,d=a.length;c<d;c++){let u=a[c];S(u!==void 0,"Expected id at index within loop bounds");let m=i[u];S(m!==void 0,"Expected path for id from Object.keys"),r=r.set(u,m)}let s={};eg(o,t,s,!1,!1,t);let l=Object.keys(s);for(let c=0,d=l.length;c<d;c++){let u=l[c];S(u!==void 0,"Expected id at index within loop bounds");let m=s[u];S(m!==void 0,"Expected points for id from Object.keys"),n=n.set(u,m)}return n.forEach((c,d)=>{if(c!==null)return;let u=o.getNode(d);if(!u||!hk(e,[u]))return;let[m,h]=qh(e,u,!1,!0),C=h[0];S(C!==void 0,"Expected pathSegment from flattenShape");let N=Ni(o,t,[C])[0];S(N!==void 0,"Expected converted path segments at index 0"),r=r.set(m,{pathSegments:N,pathClosed:!0})}),{shapeContainerDescendantPaths:r,shapeContainerDescendantBasicShapes:n}}function Yh(e,t,o,r){if(Jc(t)||Jm(t)||$e(t))for(let n of t.children)Pr(n)&&Yh(e,n,o,r);else if(Ss(t)){let i=ca(e,t,t)[0];S(i!==void 0,"Expected path from convertPathToCanvas");let a=i.pathSegments;if(r){let l=Ni(e,r,[{pathSegments:a,pathClosed:t.pathClosed}])[0];S(l!==void 0,"Expected converted path at index 0"),a=l}o[t.id]={pathSegments:a,pathClosed:t.pathClosed}}}function eg(e,t,o,r=!1,n=!1,i){if(Jc(t)||Jm(t)||$e(t))for(let a of t.children){let l=xr(a)&&te(a.rotation)&&a.rotation%90!==0||r;Pr(a)&&eg(e,a,o,l,n,i)}else if(!Ss(t)&&Pr(t))if(r||n)o[t.id]=null;else{let a=de.pointsAtOrigin(e.getRect(t));o[t.id]=a.map(s=>{let l=e.convertPointToCanvas(t,s);return i?e.convertPointToNode(i,l,!0):l})}}function ca(e,t,o,r=1){let n=[];return Array.isArray(o)?n=o:n=[o],n.map(({pathSegments:i,pathClosed:a})=>({pathSegments:i.map(l=>Kh(e,t,l,r,void 0)),pathClosed:a}))}function Kh(e,t,o,r=1,n){let i=Le.multiply(e.convertPointToCanvas(t,o,!0,n),r),a=Le.multiply(e.convertPointToCanvas(t,So.calculatedHandleIn(o),!0,n),r),s=Le.multiply(e.convertPointToCanvas(t,So.calculatedHandleOut(o),!0,n),r),l=Le.subtract(a,i),c=Le.subtract(s,i);return o.merge({...i,handleOutX:c.x,handleOutY:c.y,handleInX:l.x,handleInY:l.y})}function Ni(e,t,o){return o.map(({pathSegments:r})=>r.map(n=>{let i=e.convertPointToNode(t,n),a=e.convertPointToNode(t,So.calculatedHandleIn(n)),s=e.convertPointToNode(t,So.calculatedHandleOut(n)),l=Le.subtract(a,i),c=Le.subtract(s,i);return n.merge({...i,handleOutX:c.x,handleOutY:c.y,handleInX:l.x,handleInY:l.y})}))}function yk(e,t,o,r){return r.map(({pathSegments:n})=>n.map(i=>{let a={x:i.x,y:i.y},s=e.convertPointFromNodeToDescendant(t,o,a),l=e.convertPointFromNodeToDescendant(t,o,So.calculatedHandleIn(i)),c=e.convertPointFromNodeToDescendant(t,o,So.calculatedHandleOut(i)),d=Le.subtract(l,s),u=Le.subtract(c,s);return i.merge({...s,handleOutX:u.x,handleOutY:u.y,handleInX:d.x,handleInY:d.y})}))}function tg(e,t){return t.map(({pathSegments:o})=>o.map(r=>{let n=St.convertPoint(e,r),i=St.convertPoint(e,So.calculatedHandleIn(r)),a=St.convertPoint(e,So.calculatedHandleOut(r)),s=Le.subtract(i,n),l=Le.subtract(a,n);return r.merge({...n,handleOutX:l.x,handleOutY:l.y,handleInX:s.x,handleInY:s.y})}))}function DO(e,t,o){let r=t.updateForPath(o);e.tree.current(t)?.set(r)}function M1(e,t,o,r,n){let i=e.getParent(o.id),a=o.updateForPath(r);t.createPath(i?i.id:ao,{...a,id:n,rotation:o.rotation,...Ck(o)})}function O1(e,t,o){if(o===0)return t;let r=[],n=LO(t),i=Object.keys(n);for(let a=0,s=i.length;a<s;a++){let l=i[a];S(l!==void 0,"Expected id at index within loop bounds");let c=[],d=e.getNode(l),u=n[l];S(u!==void 0,"Expected selectors for id from grouped object");let m=d.pathSegments.length;for(let h=0,C=u.length;h<C;h++){let T=u[h];S(T!==void 0,"Expected value at index of selectors within loop bounds"),c.push(T);let N=T+1;N===m?c.push(0):c.push(N)}for(let h=0,C=c.length;h<C;h++){let T=c[h];S(T!==void 0,"Expected value in indexes array within loop bounds"),r.push({id:d.id,index:T})}}return r}function W1(e,t,o){for(let r of e)if(r.id===t&&r.index===o)return!0;return!1}function z1(e,t,o,r,n,i){let a=ca(e,n,n),l=Ni(e,o,a)[0];S(l!==void 0,"Expected converted path at index 0");let c=l,d=!vo.isLastSegment(o.pathSegments,o.pathClosed,r.index),u=vo.isLastSegment(n.pathSegments,n.pathClosed,i.index);(!d&&u||d&&!u)&&(c=vo.reverse(c));let h;d?h=Wr.unshift(o.pathSegments,...c):h=Wr.push(o.pathSegments,...c),t.deleteNode(n.id),DO(t,o,{pathSegments:h})}function FO(e,t,o){let r=_S(e,t);if(o===0){if(r)return Le.subtract(t,e);if(e.handleOutX!==0||e.handleOutY!==0){let i=So.calculatedHandleOut(e);return Le.subtract(i,e)}let n=So.calculatedHandleIn(t);return Le.subtract(n,e)}else{if(r)return Le.subtract(e,t);if(t.handleInX!==0||t.handleInY!==0){let i=So.calculatedHandleIn(t);return Le.subtract(i,t)}let n=So.calculatedHandleOut(e);return Le.subtract(n,t)}}function B1(e,t){let o=e.getNode(t.id);if(!o)return null;let r=o.pathSegments[t.segmentIndex];if(!r)return null;let n=o.pathSegments[t.segmentIndex+1];if(!n)return null;let i=Kh(e,o,r),a=Kh(e,o,n),l=t.projectedTime<.5?So.point(i):So.point(a),c=FO(i,a,0);return ZC(l,Le.add(l,c))}var AO=15;function $1(e,t,o,r){let n=5/r,i=AO/r,a=t.cache.canvasRect;if(a&&(a.x-o.x>n||a.y-o.y>n||o.x-(a.x+a.width)>n||o.y-(a.y+a.height)>n))return null;let s=vo.toBezierJS(t,t),l=e.convertPointToNode(t,o),c=-1,d=1/0,u=0;for(let N=0,P=s.length;N<P;N++){let R=s[N];S(R!==void 0,"Expected bezierCurve at index within loop bounds");let W=R.project(l),M=W.d,H=W.t;M>=d||H===0||H===1||(d=M,c=N,u=H)}if(c===-1)return null;let m=s[c];S(m!==void 0,"Expected curve at shortestIndex");let h=m.get(u),C=m.get(.5),T=Le.distance(l,C)<i;return{id:t.id,segmentIndex:c,distance:d,projectedPoint:h,projectedTime:u,midPoint:C,midPointInRange:T}}function Ck(e){return{strokeEnabled:e.strokeEnabled,strokeAlignment:e.strokeAlignment,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,lineJoin:e.lineJoin,lineCap:e.lineCap,strokeMiterLimit:e.strokeMiterLimit,strokeDashArray:e.strokeDashArray,strokeDashOffset:e.strokeDashOffset,fillEnabled:e.fillEnabled,fillType:e.fillType,fillColor:e.fillColor,fillLinearGradient:e.fillLinearGradient,fillRadialGradient:e.fillRadialGradient,fillImage:e.fillImage,fillImageResize:e.fillImageResize,fillImageOriginalName:e.fillImageOriginalName,fillImagePixelWidth:e.fillImagePixelWidth,fillImagePixelHeight:e.fillImagePixelHeight,fillImagePositionX:e.fillImagePositionX,fillImagePositionY:e.fillImagePositionY,fillImageTileSize:e.fillImageTileSize,boxShadows:e.boxShadows,opacity:e.opacity}}var og=Je("ToolStore"),Sk=class extends hn{constructor(o,r){super();this.addChanges=o;this.effectsStore=r;D(this,"update",0);D(this,"tooltip");D(this,"shapeToolActive",!1);D(this,"feedbackModeActive",!1);D(this,"handle",null);D(this,"straightLineAnchorIndex",0);D(this,"proseMirrorView",null);D(this,"proseMirrorState",null);D(this,"textLink",null);D(this,"editedTextLink");D(this,"stackInsertionIndicator",null);D(this,"replaceableFloatingPositionNode",null);D(this,"activeTool",4);D(this,"nodeInTextEditorId",ao);D(this,"nodeInPathEditorOffset",null);D(this,"dragAndDropPlaceholders",null);D(this,"codeComponentInProgressInsertionIndicatorNodeIDs",new Set);D(this,"cachedSelectionFrame",new Map)}get tool(){return this.activeTool}postProcess(o){this.update=o}get isDefaultToolActive(){return this.tool===4||this.tool===5}updateDragAndDropPlaceholder(o){if(o){let r=o.cache.placeholders,n=r?{id:o.id,placeholders:r}:null;if(ei(n,this.dragAndDropPlaceholders))return;this.dragAndDropPlaceholders=n}else this.dragAndDropPlaceholders=null}setTool(o){Ed.canEditTree(o)&&o!==10&&this.effectsStore.exitPreview(),this.shapeToolActive=MO(o),OO(o)||(this.feedbackModeActive=!1),this.tool===10&&o!==10&&this.addChanges("ExitMove"),this.tool!==o&&this.addChanges("Tool"),this.activeTool=o}getZoomAdjustedSelectionFrames(o,r,n,i=at.isOn("agent")){if(r.length){if(i){let a=vk(o.tree.root.update,o.stores.treeStore.domLayoutUpdate,r,n),s=this.cachedSelectionFrame.get(a);if(s)return og.debug("using cached selection frames",a,s),s}return this.calculateZoomAdjustedSelectionFrames(o,r,n)}}setCachedSelectionFrames(o,r,n,i,a,s){this.cachedSelectionFrame.size>100&&this.cachedSelectionFrame.clear(),this.cachedSelectionFrame.set(vk(o,r,n,i),{merged:a,frames:s})}calculateZoomAdjustedSelectionFrames(o,r,n){let i=o.tree,a=i.root.update,s=o.stores.treeStore.domLayoutUpdate;og.debug("calculate selection frames",{update:a,domLayoutUpdate:s,selection:r,zoom:n});let l=[],c=r.reduce((d,u)=>{let m=i.getNode(u);if(!m?.cache.visible)return d;let h;if(jS(m)){let T=m.calculatedPaths(),N=ca(i,m,T);h=vo.boundingBox(N,0)}else h=i.convertFrameToCanvas(m);let C=de.roundToOutside(de.multiply(h,n));return l.push(C),d?de.merge(d,C):C},void 0);if(c)return this.setCachedSelectionFrames(a,s,r,n,c,l),og.debug("calculated selection frames",{merged:c,frames:l}),{merged:c,frames:l}}};function vk(e,t,o,r){return e+":"+t+":"+o.join(",")+":"+r}function EO(e){switch(e){case 36:case 25:case 14:case 26:case 28:case 27:case 29:case 16:case 15:case 24:case 17:case 23:case 18:case 52:case 34:case 35:case 46:case 51:case 32:case 45:case 33:case 30:return!1;case 2:case 0:case 1:case 3:case 47:case 48:case 19:case 21:case 20:case 22:case 5:case 43:case 39:case 49:case 4:case 50:case 13:case 44:case 10:case 37:case 7:case 40:case 42:case 11:case 31:case 12:case 41:case 53:case 6:case 54:case 38:case 8:case 9:return!0;default:G(e)}}function MO(e){switch(e){case 2:case 0:case 1:case 3:case 36:case 47:case 48:case 25:case 14:case 26:case 28:case 27:case 29:case 16:case 15:case 24:case 17:case 23:case 18:case 52:case 5:case 43:case 39:case 49:case 4:case 50:case 46:case 51:case 44:case 10:case 37:case 7:case 42:case 11:case 31:case 32:case 33:case 34:case 35:case 12:case 41:case 53:case 6:case 45:case 30:case 54:case 38:case 8:case 9:return!1;case 19:case 21:case 20:case 22:case 13:case 40:return!0;default:G(e)}}function OO(e){switch(e){case 47:case 48:case 7:case 8:case 9:return!0;case 2:case 0:case 1:case 3:case 4:case 5:case 6:case 10:case 11:case 53:case 12:case 13:case 36:case 14:case 15:case 16:case 52:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 28:case 27:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 37:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 49:case 54:case 38:case 50:case 51:return!1;default:G(e)}}function oX(e){switch(e){case 8:case 9:return!0;case 2:case 0:case 1:case 3:case 4:case 5:case 6:case 7:case 10:case 11:case 53:case 12:case 13:case 36:case 14:case 15:case 16:case 52:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 28:case 27:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 37:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 54:case 38:case 50:case 51:return!1;default:G(e)}}function Tk(e){switch(e){case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 47:case 48:case 54:case 51:return!0;case 2:case 0:case 1:case 3:case 11:case 53:case 12:case 13:case 36:case 14:case 15:case 16:case 52:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 28:case 27:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 37:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 49:case 38:case 50:return!1;default:G(e)}}function rX(e){switch(e){case 7:case 8:case 51:return!0;case 2:case 0:case 1:case 3:case 9:case 10:case 4:case 5:case 6:case 47:case 48:case 54:case 11:case 53:case 12:case 13:case 36:case 14:case 15:case 16:case 52:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 28:case 27:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 37:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 49:case 38:case 50:return!1;default:G(e)}}function bk(e){switch(e){case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 54:return!0;case 2:case 0:case 1:case 3:case 47:case 48:case 11:case 53:case 12:case 13:case 36:case 14:case 15:case 16:case 52:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 28:case 27:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 37:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 49:case 38:case 50:case 51:return!1;default:G(e)}}function nX(e,t){return e.stores.historyStore.isLoadingDocument?t===51:_l(e,"canDesign")?Tk(t):e.stores.chromeStore.isPreviewingFeaturedTemplate?bk(t):!0}function iX(e,t){return t==="VectorSet"?EO(e):!(t==="WebPage"&&e===46)}function aX(e,t){if(_l(e,"canDesign")&&!Tk(t))throw Error("Viewer mode: Tool "+t+" is a forbidden action.");if(e.stores.chromeStore.isPreviewingFeaturedTemplate&&!bk(t))throw Error("Previwing template mode: Tool "+t+" is a forbidden action.")}var sX=e=>e===24||e===25||e===26||e===28||e===27||e===29||e===23;function lX(e){return e===12||e===11||e===53||e===37||e===39}var WO={0:!0,1:!0,2:!0,3:!0,4:!0,6:!0,5:!0};function uX(e){return te(e)&&WO[e]===!0}var rg=new Map;function fX(e,t){rg.set(e,t)}function hX(e){rg.delete(e)}function Ik(e){rg.get(e)?.()}var zO="__page_input";function BO(e){return`${zO}_${e}`}function Gp(e){let t=BO(e);Ik(t)}function Hp(e){let t={},o=e.getPresetsListNode();if(!o)return t;for(let r of o.children)if(!At(r)){if(io(r)){let n=tx(r.tag);t[n]??=r.id;continue}if(Do(r)){t.stylePresetLink??=r.id;continue}if(pr(r)){t.stylePresetInlineCode??=r.id;continue}if(nn(r)){t.stylePresetImage??=r.id;continue}if(ri(r)){t.stylePresetBlockquote??=r.id;continue}if(Yc(r)){t.stylePresetTable??=r.id;continue}if($a(r)){let n=fl(r.componentIdentifier);t[n]??=r.id;continue}G(r)}return t}function FX(e,t){let o=Hp(e),r={},n=Wa(o);for(let i of n){let a=t[i];e.get(a)||(r[i]=o[i])}Object.keys(r).length>0&&t.set(r)}function AX({tree:e,tag:t,text:o="",textColor:r,attributes:n={}}){let i=document.createElement(t);i.innerText=o;let a=pp(e,t);if(a)lT(i,a.id),r&&mf(i.style,uf.transforms,{textColor:r});else{let s=Cb[t],l=s.fontSize,c;rd(l)?c=$i(l):te(l)&&(c=[l,"px"]);let d={...s,fontSize:c,textColor:r??s.textColor};mf(i.style,uf.transforms,d)}return new up({html:i.outerHTML,...Hp(e),...n})}function _p(e){return ue(e)||z(e)}function Nk(e,t,o,r){let n=`${r}/${o.segment}`;e.add(n);for(let i of o.children)Nk(e,t,i,n)}function xk(e){let t=new Set,o=e.getRouteSegmentRootNode();for(let r of o.children)Nk(t,e,r,"");return t}var Pk=":missing-slug";function $O(e,t,o){let r=pn(t,e);if(r)return r.getSlugVariable();let n=o.dataForIdentifier(e);if(!n)return;let i=n.annotations?.framerSlug;if(!i)return;let a=n.properties[i];if(a?.type==="string")return{id:i,name:a.title??"Slug".toLowerCase()}}function ng(e,t,o,r){if(!t)return"/unknown";let n=$O(e,o,r),i=0,a=t.replace(aS,(s,l)=>(i++,n?`:${n.id}`:Pk));return i>0?a:(a.endsWith("/")||(a+="/"),n?a+`:${n.id}`:a+Pk)}function GO(e){let t=e.split("/"),o=t[t.length-1];return o?Sd(o):!1}var ig=(e,t,o,r,n=!1)=>{e=hx(e);let i=xk(t),a=t.root.homePageNodeId,s=!!r&&r.id===a;e==="/"&&!s&&(e="/page"),r?.dataIdentifier&&(e=ng(r.dataIdentifier,e,t,o));let l=e.endsWith("/")&&!s,c=e;l&&(c=e.slice(0,-1));let d=Si(t,r);return i.has(e)&&(n||e!==d)&&(i.add(c),GO(c)&&(c+="/copy"),c=Eo(c,i,{withDash:!0})),{path:l?`${c}/`:c,suggestedName:ms(e)}};function HO(e){if(e.length>=255)throw new TypeError("Alphabet too long");let t=new Uint8Array(256);for(let c=0;c<t.length;c++)t[c]=255;for(let c=0;c<e.length;c++){let d=e.charAt(c),u=d.charCodeAt(0);if(t[u]!==255)throw new TypeError(d+" is ambiguous");t[u]=c}let o=e.length,r=e.charAt(0),n=Math.log(o)/Math.log(256),i=Math.log(256)/Math.log(o);function a(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let d=0,u=0,m=0,h=c.length;for(;m!==h&&c[m]===0;)m++,d++;let C=(h-m)*i+1>>>0,T=new Uint8Array(C);for(;m!==h;){let R=c[m],W=0;for(let M=C-1;(R!==0||W<u)&&M!==-1;M--,W++)R+=256*T[M]>>>0,T[M]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");u=W,m++}let N=C-u;for(;N!==C&&T[N]===0;)N++;let P=r.repeat(d);for(;N<C;++N)P+=e.charAt(T[N]);return P}function s(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let d=0,u=0,m=0;for(;c[d]===r;)u++,d++;let h=(c.length-d)*n+1>>>0,C=new Uint8Array(h);for(;d<c.length;){let R=c.charCodeAt(d);if(R>255)return;let W=t[R];if(W===255)return;let M=0;for(let H=h-1;(W!==0||M<m)&&H!==-1;H--,M++)W+=o*C[H]>>>0,C[H]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");m=M,d++}let T=h-m;for(;T!==h&&C[T]===0;)T++;let N=new Uint8Array(u+(h-T)),P=u;for(;T!==h;)N[P++]=C[T++];return N}function l(c){let d=s(c);if(d)return d;throw new Error("Non-base"+o+" character")}return{encode:a,decodeUnsafe:s,decode:l}}var jp=HO;function Vk(e){return(typeof jp=="function"?jp:jp.default)(e)}var ag="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",_O=Vk(ag),jO=8/Math.log2(62),tZ=e=>_O.encode(e).padStart(Math.ceil(e.length*jO),"0"),Up=(e=20)=>Array(e).fill(0).map(()=>ag[Math.floor(Math.random()*ag.length)]).join("");var UO=Je("update-tree-cache-for-vekter");function JO(e,t){return t?iS(t)?t.has(e):t===e:!0}var sg=[];Object.freeze(sg);var lg=[];Object.freeze(lg);function XO(e,t,o,r){return ut(e)?et(e)?r??o??St.identity():!o||!t?St.identity():St.boundingRectMatrix(o,t):o??St.identity()}function ZO(e,t,o,r,n,i,a,s,l){let c=e.root,d=c.cache,u=c.getLocale(a);d.visible=!0,d.lockedByParent=!1,d.renderId=c.id,Xp(d);let m=c.children;for(let h of m)if(!(l&&!JO(h.id,l))){if(Ro(h)){if(!h.isLoaded())continue;QO(e,h,c,t,o,r,n,i,u,s)}else cg(e,h,c,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,null,null,sg,lg,void 0,void 0,t,o,r,n,i,u,void 0,void 0,void 0,s,void 0);vs(c,h)}return e}function wZ(e,t,o){return ZO(t.treeStore.tree,t.layoutCache,t.treeStore.sandboxRepeaterData,t.treeStore.sandboxVisibility,e,e.activeBundleHash,t.chromeStore.canvasLocaleId,t.effectStore.getState(),o)}function QO(e,t,o,r,n,i,a,s,l,c){let d=t.cache;d.visible=!0,d.lockedByParent=!1,d.renderId=t.id,d.parentRenderId=o.id,Xp(d);let u=t.children,{combinedVariableValueMap:m,combinedVariableControlMap:h}=t.combineVariableValueAndControlMaps(e,void 0,void 0,void 0,a,n,s,l),C=z(t);for(let T of u)cg(e,T,t,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,null,null,sg,lg,m,h,r,n,i,a,s,l,void 0,void 0,void 0,c,C),vs(t,T)}function cg(e,t,o,r,n,i,a,s,l,c,d,u,m,h,C,T,N,P,R,W,M,H,J,K,oe,me,j,Pe,pe,Ie,we){let k=t.cache,ne=k.activeVekterLocale;k.activeVekterLocale=me;let{combinedVariableMapsAreEqual:ae}=t.combineVariableValueAndControlMaps(e,void 0,R,W,K,H,oe,me),Te=Ft(t),gt=Te?H.isEmpty(t.id):!1,[yt,be]=tW(e,t,o,a,s,M,H,J);k.groundNodeAncestorId=j?.groundNodeId,k.masterAncestorId=c,k.replicaAncestorId=d,k.overlayAncestorId=u,k.formContainerAncestorId=h,k.tickerAncestorId=C;let se=n&&!!yt,Nt=!j||St.equals(k.groundNodeMatrix,j.groundNodeMatrix),Ut=!dr(t)||k.layout===t.layout,oo=ne===k.activeVekterLocale,Cr=yf(t,j),sr=!!Ie?.nodes.has(t.id),uo=sr===k.isEffectPreview&&ei(Ie?.effectIds??null,k.effectIds)&&(Ie?.type??null)===k.effectType&&k.webPageEffect===we,lr=gf(t)||de.equals(k.viewportRect,Cr);r||=Ee(t);let Go=Ut&&oo&&lr&&uo&&ae&&k.insideVariant===r&&k.visible===se&&k.repeaterIsEmpty===gt&&k.lockedByParent===i&&k.lastUpdate===t.update&&k.parentDirected===Pe&&k.parentDirectedRowHeightType===pe&&k.flowEffectAncestorId===T&&k.tickerAncestorId===C&&Dk(t.cache.getRenderInstance(t.id),yt)&&eW(t.cache.secondaryRenderInstances,be)&&Gv(e,t)===k.usesLayoutTemplateRectForModuleIdentifier;if(Go&&Nt)return;k.isEffectPreview=sr,k.effectIds=Ie?.effectIds??null,k.effectType=Ie?.type??null,k.webPageEffect=we,k.ancestorRepeaterIds=N,k.repeatedAncestorRepeaterIds=P;let Zn=!1;Zn&&Zn.cacheUpdated(),Go?k.canvasRect=void 0:(Zn&&Zn.cacheReset(),k.reset(),k.groundNodeAncestorId=j?.groundNodeId,k.masterAncestorId=c,k.replicaAncestorId=d,k.overlayAncestorId=u,k.slotPropertyAncestorId=m,k.formContainerAncestorId=h,k.tickerAncestorId=C,k.flowEffectAncestorId=T,k.activeVekterLocale=me,k.visible=se,k.repeaterIsEmpty=gt,k.insideVariant=r,k.lockedByParent=i,k.lastUpdate=t.update,k.parentDirected=Pe,k.parentDirectedRowHeightType=pe,k.viewportRect=Cr,k.layout=dr(t)?t.layout:void 0,k.ancestorRepeaterIds=N,k.repeatedAncestorRepeaterIds=P,k.usesLayoutTemplateRectForModuleIdentifier=Xa(t)?t.usesLayoutTemplateRectForModuleIdentifier():void 0,yt&&(k.renderId=t.id,Object.assign(k,yt)),k.secondaryRenderInstances=be);let{parentRectByRenderIdForChildren:La,parentMatrixByRenderIdForChildren:Ho,parentUsesDOMRectForChildren:qr,groundNodeContextForChildren:Da}=Lk(e,t,l,j,M),Fi=t.children;if(!Fi)return;let wc=Co(t)?t.layout:void 0,IC=eo(t)?t.gridRowHeightType:void 0,Lc=c;!Lc&&Jo(t)&&(Lc=t.id);let Dc=d;!Dc&&At(t)&&(Dc=t.id);let NC=Jp(t,N);for(let Ai of Fi){if(!Ut)for(let[,Ac]of Ai.cache.iterateRenderInstances())Ac.parentRect=void 0;let Fa=Te&&is(e,Ai,t),xC=Fa&&gt,Ei=at.isOn("visibilityFromSandbox")?se:Fa?!xC&&se:se,{combinedVariableControlMap:PC,combinedVariableValueMap:Fc}=t.combineVariableValueAndControlMaps(e,Ai,R,W,K,H,oe,me);cg(e,Ai,t,r,Ei,fn(t),La,Ho,qr,Lc,Dc,ut(t)?t.id:u,In(t)?t.id:m,er(t)?t.id:h,li(t)?t.id:C,Ci(t)?t.id:T,NC,Fa?Jp(t,P):P,Fc,PC,M,H,J,K,oe,me,Da,wc,IC,Ie,we),vs(t,Ai)}}function LZ(e,t,o){let r=KO(e,o),n=e.root,i=n.cache;i.visible=!0,i.renderId=n.id,Xp(i);let a=n.children;for(let s of a){if(Ro(s)){if(!s.isLoaded())continue;qO(e,s,n,t,r)}else dg(e,s,n,new Map,new Map,!1,t,r,void 0,void 0,void 0);vs(n,s)}return r}function KO(e,t){let o=new Set,r=new Set;function n(a){r.has(a.id)||(o.add(a.id),r.add(a.id),a.children&&a.children.forEach(n))}function i(a){let s=a.id;for(;s&&!o.has(s);)o.add(s),s=e.getNode(s)?.parentid}for(let a of t){let s=e.getNode(a);s&&(i(s),s.children&&s.children.forEach(n))}return o}function Jp(e,t){return Ft(e)?t.length===0?[e.id]:[...t,e.id]:t}function qO(e,t,o,r,n){let i=t.cache;i.visible=!0,i.renderId=t.id,i.parentRenderId=o.id,Xp(i);let a=t.children;for(let s of a)dg(e,s,t,new Map,new Map,!1,r,n,void 0,void 0,void 0),vs(t,s)}function dg(e,t,o,r,n,i,a,s,l,c,d){if(!s.has(t.id))return;let u=t.cache;if(u.parentDirected=l,u.parentDirectedRowHeightType=c,u.viewportRect=yf(t,d),!u.visible)return;for(let[W,M]of u.iterateRenderInstances()){let H=M.parentRenderId;S(H,"Missing `parentRenderId`"),M.parentRect=r.get(H),M.parentMatrix=n.get(H),M.parentDirectedRect=Fk(t,W,o,a)}let{parentRectByRenderIdForChildren:m,parentMatrixByRenderIdForChildren:h,parentUsesDOMRectForChildren:C,groundNodeContextForChildren:T}=Lk(e,t,i,d,a),N=t.children;if(!N)return;let P=Co(t)?t.layout:void 0,R=eo(t)?t.gridRowHeightType:void 0;for(let W of N)dg(e,W,t,m,h,C,a,s,P,R,T),vs(t,W)}function YO(e,t){if(!t||!Re(e)||!Ne(e))return;let o=new Map;for(let[r,n]of t){let i=n.originX??$f*n.width,a=n.originY??$f*n.height,s=St.identity();WC()||(s=s.translate(e.left??0,e.top??0));let l=s.translate(i,a).multiplySelf(St.identity().translate(n.x,n.y).multiplySelf(n.matrix)).translateSelf(-i,-a),c=St.convertPointsWithClipping(l,de.pointsAtOrigin({width:n.width,height:n.height}));o.set(r,{domRect:n,canvasCorners:c,canvasRect:de.boundingRectFromPoints(c)})}return o}function Lk(e,t,o,r,n){let i=t.cache,a=n.getRects(t.id);a&&(i.domRects=new Map(a));let s=Xa(t)&&!!i.usesLayoutTemplateRectForModuleIdentifier;s&&(i.layoutTemplateRects=YO(t,n.getLayoutTemplateRects(t.id))),i.groundNodeMatrix=r?.groundNodeMatrix??null;let l=Xa(t)&&t.usesDOMRectCached(),c=!(l||o),d=!!i.viewportRect||!gf(t),u,m=new Map,h=new Map;for(let[C,T]of i.iterateRenderInstances()){let{parentRect:N,parentMatrix:P,parentDirectedRect:R}=T,W=e.getParentSizeInfo(t,void 0,c,d,C),M=R??t.rect(W,c,void 0,C);m.set(C,M);let H=t.originAdjustedMatrix(W,M,C),J=XO(t,N,P,r?.groundNodeMatrix),K;try{K=J.multiply(H)}catch(Pe){UO.reportErrorOncePerMinute(Pe,{parentRect:N,frame:M,parentMatrix:J,transformMatrix:H}),K=new DOMMatrix}let oe=Nl(t)?K:St.flatProjectionMatrix(K);h.set(C,oe),T.matrix=K;let me=e.convertCornerPointsToCanvas(t,!1,void 0,C);T.cornerPoints=me;let j=de.boundingRectFromPoints(me);if(T.canvasRect=j,Pr(t)&&tr(t)&&t.strokeEnabled){let Pe=t.resolveValue("strokeWidth")??0;j=de.inflate(j,Pe/2)}s?wk(T,i.getLayoutTemplateContainerRect()?.canvasRect??j):wk(T,j),uP(C)&&(u=r??FT(t,M,{groundNodeId:t.id,groundNodeMatrix:oe}))}return{parentRectByRenderIdForChildren:m,parentMatrixByRenderIdForChildren:h,parentUsesDOMRectForChildren:l,groundNodeContextForChildren:u}}function Rk(e,t,o){if(at.isOn("visibilityFromSandbox"))return o.getVisible(t);let r=ut(e)&&!e.cache.overlayVisible;return e.isVisible()&&!ti(e)&&!r}function Dk(e,t){return!e&&!t?!0:!e||!t?!1:de.equals(e.parentRect??null,t.parentRect??null)&&St.equals(e.parentMatrix??null,t.parentMatrix??null)&&de.equals(e.parentDirectedRect??null,t.parentDirectedRect??null)&&en(e.repeaterItemIds,t.repeaterItemIds)&&e.repeaterItemId===t.repeaterItemId}function eW(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;for(let[o,r]of t){let n=e.get(o);if(!Dk(r,n))return!1}return!0}function kk(e,t,o,r,n,i,a,s,l){return{parentRenderId:r,parentRect:i.get(r),parentMatrix:a.get(r),parentDirectedRect:Fk(e,t,o,s),matrix:void 0,canvasRect:void 0,cornerPoints:void 0,repeaterItemIds:l.getItemIds(t),repeaterItemId:n,minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}}function tW(e,t,o,r,n,i,a,s){let l=new Map;if(Ft(o)&&is(e,t,o))for(let[u,m]of o.cache.iterateRenderInstances()){let h=m.repeaterItemIds;if(h)for(let C=0;C<h.length;C++){let T=h[C];if(!T)continue;let N=mP(u,o.id,T,C),P=dh(N,t.id);Rk(t,P,s)&&l.set(P,kk(t,P,o,u,T??m.repeaterItemId,r,n,i,a))}}else for(let[u,m]of o.cache.iterateRenderInstances()){let h=dh(u,t.id);Rk(t,h,s)&&l.set(h,kk(t,h,o,u,m.repeaterItemId,r,n,i,a))}let c=l.get(t.id);l.delete(t.id);let d=l.size>0?l:void 0;return[c,d]}function Xp(e){e.minX=1/0,e.maxX=-1/0,e.minY=1/0,e.maxY=-1/0}function wk(e,t){e.minX=t.x,e.maxX=t.x+t.width,e.minY=t.y,e.maxY=t.y+t.height}function oW(e,t){e.minX>t.minX&&(e.minX=t.minX),e.maxX<t.maxX&&(e.maxX=t.maxX),e.minY>t.minY&&(e.minY=t.minY),e.maxY<t.maxY&&(e.maxY=t.maxY)}function vs(e,t){for(let[,o]of t.cache.iterateRenderInstances()){let r=o.parentRenderId;S(r,"Missing `parentRenderId`");let n=e.cache.getRenderInstance(r);n&&oW(n,o)}}function Fk(e,t,o,r){if(Co(o)&&hi(e,o))return r.getRect(t)}function Xl(e,t){if(F(e))return e;let o=[];for(let r of e)o.push(t.get(r)??r);return o.length>0?o:void 0}function Cn(e,t){if(!Po(t))return null;let o=e.getNode(t.originalid);return S(o,"The original variant node should exist"),o}function rW(e,t,o){let r=ze.inheritedReplicaNode(e,t.replicaInfo.inheritsFrom),n=Xi(t.replicaInfo.overrides,r?.replicaInfo.overrides);for(let i of o.walk()){let a=n[i.id];if(!a)continue;let{_deleted:s,itemsOrder:l,...c}=a;s?.forEach(d=>c[d]=void 0),e.current(i)?.set(c)}}function Ak(e,t){let o=e.getNode(t.originalid),r=ze.getReplicaForTemplateNode(e,t);if(!o||!r||!Ee(r))return[];if(!r.replicaInfo.inheritsFrom)return[o];let n=e.getNode(r.replicaInfo.inheritsFrom);if(!n)return[o];let i=Yo(n.id,o.id),a=e.getNode(i);return a?[o,a]:[o]}function _Z(e,t,o,r){let n=ze.getReplicaForTemplateNode(e.tree,t);S(n,"replica should exist when moving node out of replica"),S(Ee(n),"replica must be a variant"),rW(e.tree,n,o),t.isVisible()&&!o.isVisible()&&e.tree.current(o)?.set({visible:!0}),r.delete(t.id),r.add(o.id)}function pg(e,t,o,r,n){if(!o||!r)return t.id;S(qe(o),"Fail to update variant nodes: parent must be a replica");let i=ze.getReplicaForTemplateNode(e.tree,o);if(S(i,"Fail to update variant nodes: replica should exist"),S(Ee(i),"Fail to update variant nodes: replica must be an variant"),kd(e.tree,o)){e.tree.current(t)?.set({visible:!1});let s={visible:!0};Rn(t)&&n&&(s.itemsOrder=Xl(t.itemsOrder,n)),gl(e.tree,i,t.id,s)}return Yo(i.id,t.id)}function ug(e,t,o,r,n,i){let a=pg(e,t,o,r,i);return n.delete(t.id),n.add(a),a}function jZ(e,t,o){let r=Ak(e.tree,t),n=Ak(e.tree,o),i=r.find((a,s)=>!a.isVisible()||a.cache.visible===!0?!1:n[s]?.cache.visible??!1);i&&(e.tree.get(i.id)?.set({visible:!1}),t.set({visible:!0},e.tree,!0))}function Ek(e,t,o){fi(e.tree,t).forEach(({replicaRoot:r})=>{if(Object.keys(r.replicaInfo.overrides).every(l=>!o.has(l)))return;let a={...r.replicaInfo},s={...a.overrides};a.overrides=s,o.forEach((l,c)=>{if(c in s){let d={...s[c]},u=d.itemsOrder;"itemsOrder"in d&&Array.isArray(u)&&(d.itemsOrder=Xl(u,o)),s[l]=KR(d)}}),e.tree.get(r.id)?.set({replicaInfo:a})})}var nW={type:{type:Us.type,value:Bm.type},variantId:{type:Us.variantId,value:void 0},pauseOffscreen:{type:Us.pauseOffscreen,value:Bm.pauseOffscreen}},eQ={type:"type",variantId:"variantId",pauseOffscreen:"pauseOffscreen"},iW={cycle:!0,set:!0};function Mk(e){return A(e)&&e in iW}function Kr(e){return si(e)&&e.actionIdentifier==="framer/useSetVariant"}function Ok(e){return e.controls.type?.value!=="set"?null:e.controls.variantId?.value??null}function tQ(e){return Array.isArray(e)&&e.some(t=>Kr(t)&&t.controls.type?.value==="set"&&!t.controls.variantId?.value)}function oQ(e,t){return PT(e,Kr,t)}function rQ(e,t,o){let r=xT(t,Kr,o),n=[];return r.forEach(i=>{switch(i.controls.type?.value){case"set":{let s=i.controls.variantId?.value;s&&n.push(s);break}case"cycle":{let s=e.getScopeNodeFor(t);if(!ue(s))return;let l=s.getTopLevelVariants();if(l.length<=1)return;let c=e.getGroundNodeFor(t),d=l.findIndex(C=>C.id===c.id);if(d===-1)return;let u=d+1,m=u>=l.length?0:u,h=l[m];h&&n.push(h.id);break}}}),n}function nQ(e){let t={};return Object.entries(e).forEach(([o,r])=>{t[o]=r?.value}),t}function aW(e,t){return!(e?.inputValue!==t?.inputValue||e?.delay!==t?.delay||e?.key!==t?.key)}function iQ(e,t,o){let r=Array.isArray(e)?[...e]:[],n=r.findIndex(Kr),i=r[n];if(Kr(i)&&aW(i.meta,o)){let a={...i.controls,...Wk(t)},s={...i,controls:a,meta:{...i.meta,...o}};r[n]=s}else{let a=sW(t,void 0,o);r.push(a)}return r}function Wk(e){let t={};return Object.entries(e).forEach(([o,r])=>{t[o]={type:Us[o],value:r}}),t}function sW(e,t,o){let r=Wk({...e}),n={identifier:t||Pd(),actionIdentifier:"framer/useSetVariant",controls:{...nW,...r}};return o&&Object.assign(n,{meta:o}),n}function aQ(e,t){let o={...e.controls,...t};return{...e,controls:o}}function zk(e,t){let o=t.get(e);return Zc(o)?o:null}function mg(e,t,o="transparent"){if(F(e))return o;if(!Hr(e))return e;let r=ud(e);return(r?zk(r,t):null)?.light??o}function da(e,t,o,r=!1){if(eb(t)){e.has(t)||e.ensureEntityTypeRootNode(t);return}let n=r?zd(o):Tl(o);if(e.has(n))return;let i=new vl({id:n});e.insertNode(i,t)}function lW(e,t){let o=e.tree.get(t);if(We(o))return;let r=e.tree.get(o.parentid);if(!We(r))return r.children?.findIndex(n=>n.id===t)}function CQ(e,t,o){let r=e.tree.getEntityReferenceNode(t);if(We(r))return;let n=Tl(o),i=new vl({id:n}),a=lW(e,r.id),s=Uo(a)?a+1:void 0;e.tree.insertNode(i,r.parentid,s)}function SQ(e,t){let o=e.get(t);We(o)||(e.removeNode(o),cW(e,t))}function cW(e,t,o){let{isCodeFile:r=!1}=o??{},n=r?zd(t):Tl(t);e.remove(n)}function Zp(e,t){return e===Ki?zd(t):Tl(t)}function dW(e){return t=>sn(t)&&t.name===e}function Bk(e,t){return e.children.find(dW(t))??null}function kQ(e,t){return e.children.find(o=>sn(o)&&o.getName()===t)??null}function wQ(e,t){let r=mW(e.tree,t).map(a=>e.tree.get(a));S(r.length>0,"unreferenced nodes parent node must exist");let n=r.flatMap(a=>a?.children??[]);if(!n||n.length===0)return;let i=pW[t];e.tree.beginAllowPartialScopeAccess();for(let a of n){if(!i(a))continue;let s=Zp(t,a.id);if(e.tree.get(s))continue;let l=new vl({id:s});e.tree.insertNode(l,t)}e.tree.endAllowPartialScopeAccess()}function $k(e){return rp(e)&&e.save.type==="codeFile"}var pW={[Nf]:e=>wS(e),[Pf]:e=>pr(e),[Rf]:e=>Do(e),[kf]:e=>Ga(e),[xf]:e=>nn(e)||Yc(e)||$a(e),[Ki]:e=>$k(e),[Cl]:e=>ue(e)||$k(e),[Vf]:e=>Zc(e),[Sl]:e=>Be(e),[Ya]:e=>Zt(e)},uW={[Nf]:vi,[Pf]:vi,[Rf]:vi,[kf]:vi,[xf]:vi,[Ki]:Zf,[Vf]:mN};function mW(e,t){return t===Sl||t===Ya?[e.root.id]:t===Cl?[e.root.id,Zf]:[uW[t]]}var fW="__entity_input";function LQ(e,t){return`${fW}_${e}_${t?"popout":"panel"}`}function fg(e){return YT(e)||sn(e)}function DQ(e,t,o){let r=o;for(let[n,i]of t.entries()){let a=n===t.length-1,s=e.getNode(r);if(!s||!fg(s))return!1;let l=!1;for(let c of s.children){if(DS(c)&&i===c.getName())return!0;if(sn(c)&&i===c.getName()){if(a)return!0;l=!0,r=c.id;break}}if(!l)return!1}return!1}function hg(e){if(Tb(e))return Xf(e.getName());let t=e.resolveValue("name");return Bd(e)&&t?Xf(t):"Unknown"}function Qp(e,t,o){let r=Ze(t)?t:gW(t);if(r.length===0)return o;let n=e.get(o);S(n&&fg(n),"A reference must be in a folder.");for(let i of r){let a=Bk(n,i);if(a){n=a;continue}n=e.insertNode(new gN({name:i}),n.id)}return n.id}function XQ(e,t){let o=e.tree.get(t);if(!sn(o))return"";let r=[o.name];for(let n of o.ancestors()){if(!sn(n))break;r.unshift(n.name)}return`/${r.join("/")}`}function Gk(e,t,o){let r=Zp(o,t.id),n=e.get(r),i=[hg(t)];if(n)for(let a of n.ancestors()){if(!sn(a))break;i.unshift(hg(a))}return i}function ZQ(e,t,o){let r=e.get(t);return S(r,"Node must exist"),Gk(e,r,o)}function QQ(e,t,o,r={leadingSlash:!0}){let n=e.get(t);return S(n,"Node must exist"),hW(e,n,o,r)}function hW(e,t,o,r={leadingSlash:!0}){let i=Gk(e,t,o).join("/");return r.leadingSlash?`/${i}`:i}function gW(e){return Jf(e).slice(0,-1)}function KQ(e,t,o,r){let n=Jf(o);if(n.length===0)return;let i=n.pop(),a=Qp(e,o,r),s=r===Ki;return da(e,a,t.id,s),t.set({name:i}),a}function Hk(e,t){if(!Xo(t))return!1;let o=vf(t.codeComponentIdentifier);if(!o)return!1;let r=e.getNode(o);return!!(r&&z(r))}function rK(e,t){let o=vf(t.codeComponentIdentifier);S(o,"WebPageInstance should have a local canvas component id");let r=e.getNode(o);return S(r,"SmartComponentInstance should have a local WebPageNode"),S(z(r),"WebPageInstance its WebPageNode should be a web page"),r}var Zl=(e,t)=>e.length===0?[]:typeof e[0]=="string"?t.withoutDescendants(t.getNodes(e)):e;function Kp(e,t){let o=t.getPropertyControlsForIdentifier(e.codeComponentIdentifier);return o?eN(o,e.getControlProps(o)):{}}var yW={type:"None",source:"undefined"},_k=class extends hn{constructor(){super(...arguments);D(this,"_stack",[]);D(this,"dismiss",()=>{this._stack=Wr.pop(this._stack)});D(this,"isVisible",()=>this.active.type!=="None");D(this,"shouldBlockUndoRedo",(o,r)=>{switch(this.active.type){case"None":return!1;case"Variables":return!sk(o,r);case"LocaleSettings":return!lk(o,r);default:return!0}})}get stack(){return this._stack}get active(){return this._stack[this._stack.length-1]??yW}trackModalOpen({type:o,source:r}){Lt("modal_open",{modalType:o,source:r})}push(o){this._stack=Wr.push(this._stack,o),this.trackModalOpen(o)}set(o){this._stack=[o],this.trackModalOpen(o)}dismissAll(){this._stack.length!==0&&(this._stack=[])}dismissModal(o){this._stack=Wr.filter(this._stack,r=>r.type!==o)}displayComponentIsolationModal({source:o}){let r="componentIsolationModal",n="1";Yr.isAutomation||Yr.isE2E||Yr.isTest||localStorage.getItem(r)!==n&&(localStorage.setItem(r,n),setTimeout(()=>{this.scheduler.processWhenReady(()=>{this.set({type:"ComponentIsolationModal",source:o})})},0))}};function jk(e){if(A(e))return[e];if("id"in e)return[e.id];let t=[];for(let o of e)A(o)?t.push(o):t.push(o.id);return t}function Ql(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;let o=new Set(e);for(let r of t)if(!o.has(r))return!1;return!0}var Uk=class extends hn{constructor(o,r,n){super();this.guides=o;this.chromeStore=r;this.overlayStore=n;D(this,"_previousIds",[]);D(this,"_ids",[]);D(this,"_nodes",[]);D(this,"_isSticky",!1);D(this,"_commonGroundNode");D(this,"gradientStopId")}get ids(){return this._ids}get nodes(){return this._nodes}get isSticky(){return this._isSticky}get commonGroundNode(){return this._commonGroundNode}get commonGroundNodeId(){return this._commonGroundNode?.id??null}get previousIds(){return this._previousIds}set(o,r={}){let n=jk(o);if(Ql(this._ids,n))return;this._previousIds=this._ids,this._ids=n,this._isSticky=r.sticky??n.length>1,n.length>0&&this.guides.clearSelected();let{switchToLayers:a=!1,switchToProperties:s=!1,tree:l}=r;this.chromeStore.onCanvasSelectionChange(n,a,s),this.overlayStore.onCanvasSelectionChange(n,{tree:l})}toggle(o,{switchToLayers:r=!1,switchToProperties:n=!1}={}){let i=jk(o),a=new Set(this.ids);for(let s of i)a.has(s)?a.delete(s):a.add(s);this._ids=Array.from(a),this.chromeStore.onCanvasSelectionChange(this.ids,r,n),this.overlayStore.onCanvasSelectionChange(a,{toggle:!0})}clear(){this.set([])}updateNodes(o){let r=o.getNodes(this.ids),n=!zi(this.nodes,r);n&&(this._nodes=r),(n||this.commonGroundNode&&!o.isGroundNode(this.commonGroundNode))&&this.updateCommonGroundNode(o)}updateCommonGroundNode(o){let r;for(let n of this.nodes){let i=o.getGroundNodeFor(n);if(!r)r=i;else if(r!==i){r=void 0;break}}this._commonGroundNode=r}postProcess(o,r,n,i=this.gradientStopId,a=this._ids){this.gradientStopId=i;let s=[];for(let l of a){let c=o.getNode(l);if(c){o.isAncestorOfNode(c,r.id)&&s.push(l);continue}let d=n.getNode(l);if(!$r(d))continue;let u=o.getNode(d.parentid);if(Rt(u)){s.splice(0,s.length,u.id);break}}this.set(s,{tree:o}),this.updateNodes(o)}};function CW(e,t){let o=e.componentForIdentifier(t.codeComponentIdentifier);if(!o?.properties)return null;let r=Object.entries(o.properties).find(([,s])=>s&&s.title==="Variant"&&s.type==="enum");if(!r)return null;let[n,i]=r;if(i.options.length<=1)return null;let a=i.defaultValue??i.options[0];return A(a)?{key:n,control:i,defaultVariant:a}:null}function SW(e,{control:t}){let o=e.toLowerCase().trim(),n=(t.optionTitles??t.options).findIndex(a=>A(a)&&a.toLowerCase()===o);if(n===-1)return null;let i=t.options[n];return A(i)?i:null}function Jk(e,t,o,r){let n={};for(let i of r.walk()){if(!Z(i))continue;let a=CW(e,i);if(!a)continue;let s=SW(o,a);if(!s)continue;let l=i;if(Gt(i)&&(l=t.tree.getNode(i.originalid)),!l||(l.getRawControlProp(a.key)??a.defaultVariant)===s)continue;let d={type:"enum",value:s};n[l.id]={[kt(a.key)]:d}}return Object.keys(n).length>0?n:null}var Xk=["blur","backgroundBlur","brightness","contrast","grayscale","hueRotate","invert","saturate","sepia"];var Yp={left:"position",right:"position",top:"position",bottom:"position",centerAnchorX:"position",centerAnchorY:"position",constraintsLocked:"position",x:"position",y:"position",width:"size",widthType:"size",height:"size",heightType:"size",aspectRatio:"size",itemsOrder:"itemsOrder",layout:"layout",gap:"layout",gridAlignment:"layout",gridColumnCount:"layout",gridColumnWidthType:"layout",gridColumnWidth:"layout",gridColumnMinWidth:"layout",gridRowHeightType:"layout",gridRowHeight:"layout",gridRowCount:"layout",stackDirection:"layout",stackDistribution:"layout",stackAlignment:"layout",stackWrapEnabled:"layout",gridType:"layout",gridItemFillCellWidth:"size",gridItemFillCellHeight:"size",gridItemHorizontalAlignment:"position",gridItemVerticalAlignment:"position",gridItemColumnSpan:"size",gridItemRowSpan:"size",minHeight:"sizeConstraints",minWidth:"sizeConstraints",maxHeight:"sizeConstraints",maxWidth:"sizeConstraints",paragraphSpacing:"paragraphSpacing",position:"positionType",positionStickyTop:"positionType",positionStickyRight:"positionType",positionStickyBottom:"positionType",positionStickyLeft:"positionType",intrinsicWidth:"intrinsicSize",intrinsicHeight:"intrinsicSize",fillColor:"fill",fillEnabled:"fill",fillImage:"fill",fillImageOriginalName:"fill",fillImagePixelHeight:"fill",fillImagePixelWidth:"fill",fillImageResize:"fill",fillImagePositionX:"fill",fillImagePositionY:"fill",fillImageTileSize:"fill",fillImageAlts:"fillImageAlts",fillType:"fill",fillRadialGradient:"fill",fillLinearGradient:"fill",fillConicGradient:"fill",tapHighlightColor:"tapHighlight",textSelection:"textSelection",masks:"mask",radius:"radius",radiusBottomLeft:"radius",radiusBottomRight:"radius",radiusIsRelative:"radius",radiusPerCorner:"radius",radiusTopLeft:"radius",radiusTopRight:"radius",cornerShape:"cornerShape",borderTop:"border",borderBottom:"border",borderLeft:"border",borderRight:"border",borderEnabled:"border",borderWidth:"border",borderStyle:"border",borderColor:"border",borderPerSide:"border",rotation:"rotation",rotate3d:"rotation",rotateX:"rotation",rotateY:"rotation",blendingMode:"blending",opacity:"opacity",backgroundBlur:"backgroundBlur",overflow:"overflow",overflowY:"overflowY",overflowX:"overflowX",overscrollBehavior:"overscroll",visible:"visibility",brightness:"brightness",contrast:"contrast",grayscale:"grayscale",hueRotate:"hueRotate",invert:"invert",saturate:"saturate",sepia:"sepia",blur:"blur",boxShadows:"shadows",shadows:"shadows",guidesX:"canvasSettings",guidesY:"canvasSettings",exportOptions:"canvasSettings",overlayGrid:"canvasSettings",gesture:"canvasSettings",sizeToFit:"canvasSettings",framePreset:"canvasSettings",isVariant:"canvasSettings",onTap:"action",onTapStart:"action",onClick:"action",onMouseUp:"action",onMouseDown:"action",onMouseEnter:"action",onMouseLeave:"action",onAppear:"action",onKeyDown:"action",padding:"padding",paddingPerSide:"padding",paddingTop:"padding",paddingRight:"padding",paddingBottom:"padding",paddingLeft:"padding",name:"name",strokeEnabled:"stroke",strokeAlignment:"stroke",strokeWidth:"stroke",strokeColor:"stroke",lineJoin:"stroke",lineCap:"stroke",strokeMiterLimit:"stroke",strokeDashArray:"stroke",strokeDashOffset:"stroke",html:"richText",htmlLocalized:"richText",htmlContent:"richText",textFitScale:"richText",textFitViewBoxSize:"richText",textFitViewBoxSizeLocalized:"richText",stylePresetHeading1:"stylePresets",stylePresetHeading2:"stylePresets",stylePresetHeading3:"stylePresets",stylePresetHeading4:"stylePresets",stylePresetHeading5:"stylePresets",stylePresetHeading6:"stylePresets",stylePresetParagraph:"stylePresets",stylePresetLink:"stylePresets",stylePresetAnchorLink:"stylePresets",stylePresetBlockquote:"stylePresets",stylePresetTable:"stylePresets",stylePresetInlineCode:"stylePresets",stylePresetImage:"stylePresets",anchorLinkOffsetY:"anchorLinkOffsetY",styledText:"styledText",getStyledText:"styledText",font:"font",rootFontSize:"rootFontSize",textColor:"textColor",textBackgroundColor:"textBackgroundColor",textBackgroundRadius:"textBackgroundRadius",textBackgroundCornerShape:"textBackgroundCornerShape",textBackgroundPadding:"textBackgroundPadding",fontSize:"fontSize",letterSpacing:"letterSpacing",textTransform:"textTransform",textDecoration:"textDecoration",textDecorationColor:"textDecoration",textDecorationThickness:"textDecoration",textDecorationStyle:"textDecoration",textDecorationSkipInk:"textDecoration",textDecorationOffset:"textDecoration",lineHeight:"lineHeight",textAlignment:"textAlignment",textStrokeWidth:"textStroke",textStrokeColor:"textStroke",textWrapBalance:"textWrapBalance",openTypeFontFeatures:"openTypeFontFeatures",link:"link",linkOpenInNewTab:"link",linkSmoothScroll:"link",linkClickTrackingId:"link",linkLocalized:"link",linkRelValues:"link",linkPreserveParams:"link",getLink:"link",linkFont:"linkStyle",linkTextColor:"linkStyle",linkFontSize:"linkStyle",linkTextTransform:"linkStyle",linkTextDecoration:"linkStyle",linkTextDecorationColor:"linkStyle",linkTextDecorationThickness:"linkStyle",linkTextDecorationStyle:"linkStyle",linkTextDecorationSkipInk:"linkStyle",linkTextDecorationOffset:"linkStyle",linkTextBackgroundColor:"linkStyle",linkTextBackgroundRadius:"linkStyle",linkTextBackgroundCornerShape:"linkStyle",linkTextBackgroundPadding:"linkStyle",linkHoverFont:"linkStyle",linkHoverTextColor:"linkStyle",linkHoverFontSize:"linkStyle",linkHoverTextTransform:"linkStyle",linkHoverTextDecoration:"linkStyle",linkHoverTextDecorationColor:"linkStyle",linkHoverTextDecorationThickness:"linkStyle",linkHoverTextDecorationStyle:"linkStyle",linkHoverTextDecorationSkipInk:"linkStyle",linkHoverTextDecorationOffset:"linkStyle",linkHoverTextBackgroundColor:"linkStyle",linkHoverTextBackgroundRadius:"linkStyle",linkHoverTextBackgroundCornerShape:"linkStyle",linkHoverTextBackgroundPadding:"linkStyle",linkCurrentFont:"linkStyle",linkCurrentTextColor:"linkStyle",linkCurrentFontSize:"linkStyle",linkCurrentTextTransform:"linkStyle",linkCurrentTextDecoration:"linkStyle",linkCurrentTextDecorationColor:"linkStyle",linkCurrentTextDecorationThickness:"linkStyle",linkCurrentTextDecorationStyle:"linkStyle",linkCurrentTextDecorationSkipInk:"linkStyle",linkCurrentTextDecorationOffset:"linkStyle",linkCurrentTextBackgroundColor:"linkStyle",linkCurrentTextBackgroundRadius:"linkStyle",linkCurrentTextBackgroundCornerShape:"linkStyle",linkCurrentTextBackgroundPadding:"linkStyle",textContent:"textContent",textVerticalAlignment:"textVerticalAlignment",variantTransition:"transition",pathSegments:"vectorPath",pathClosed:"vectorPath",spikeCount:"vectorPath",spikeDepth:"vectorPath",polygonSides:"vectorPath",elementId:"scrollTarget",scrollMarginTop:"scrollTarget",scrollTargetEnabled:"scrollTarget",altAttribute:"accessibility",altAttributeLocalized:"accessibility",cursor:"cursor",customCursorSmartComponentId:"customCursor",customCursorFollow:"customCursor",customCursorOffsetX:"customCursor",customCursorOffsetY:"customCursor",customCursorVariant:"customCursor",customCursorType:"customCursor",customCursorTransitionEnabled:"customCursor",customCursorTransition:"customCursor",customCursorPlacement:"customCursor",customCursorAlignment:"customCursor",pointerEvents:"pointerEvents",userSelect:"userSelect",zIndex:"zIndex",draggable:"draggable",imageRendering:"imageRendering",viewportHeight:"canvasSettings",isBreakpoint:"canvasSettings",backdropFill:"overlay",backdropFillEnabled:"overlay",backdropDismissible:"overlay",blockDocumentScrolling:"overlay",backdropExitTransition:"overlayTransition",backdropEnterTransition:"overlayTransition",backdropTransitionLocked:"overlayTransition",hideScrollbars:"scrollbars",customizations:"customizations",customizationsDescription:"customizations",customizationsSectionId:"customizations",customizationsCategory:"customizations",customizationsRules:"customizations",isApplyingCustomizations:"customizations",translateZ:"translateZ",scale:"scale",skewX:"skew",skewY:"skew",backfaceVisibility:"backfaceVisibility",perspective:"perspective",transformStylePreserve3d:"transformStylePreserve3d",transformOriginX:"transformOrigin",transformOriginY:"transformOrigin",transition:"transition",formInputFontSize:"formInputFont",formInputFontFamily:"formInputFont",formInputFontSelector:"formInputFont",formInputFontWeight:"formInputFont",formInputFontStyle:"formInputFont",formInputPlaceholderColor:"formPlaceholderColor",formInputFontColor:"formInputColor",formInputFontLetterSpacing:"formInputFont",formInputFontLetterSpacingUnit:"formInputFont",formInputFontLineHeight:"formInputFont",formInputFontLineHeightUnit:"formInputFont",formInputFontTextAlignment:"formInputFont",formInputOpenTypeFontFeatures:"formInputFont",formInputVariationAxes:"formInputFont",formTextInputType:"formTextInputType",formTextAreaResizable:"formInputTextAreaResize",formTextInputMinNumber:"formTextInputTypeMin",formTextInputMaxNumber:"formTextInputTypeMax",formInputMaxLength:"formInputMaxLength",formInputStep:"formInputStep",formBooleanInputType:"formBooleanInputType",formBooleanInputValue:"formBooleanInputValue",formBooleanInputCheckedBorderColor:"formBooleanInputCheckedEffect",formBooleanInputCheckedBorderWidth:"formBooleanInputCheckedEffect",formBooleanInputCheckedBorderStyle:"formBooleanInputCheckedEffect",formBooleanInputCheckedBoxShadow:"formBooleanInputCheckedEffect",formBooleanInputCheckedFillColor:"formBooleanInputCheckedEffect",formBooleanInputCheckedTransition:"formBooleanInputCheckedEffect",formInputFocusedBackgroundColor:"formInputFocusedFill",formInputFocusedBorderColor:"formInputFocusedBorder",formInputFocusedBorderStyle:"formInputFocusedBorder",formInputFocusedBorderWidth:"formInputFocusedBorder",formInputFocusedBoxShadow:"formInputFocusedBoxShadow",formInputFocusedTransition:"formInputFocusedTransition",formInputInvalidTextColor:"formInputInvalidTextColor",formInputIconImage:"formInputIcon",formInputIconColor:"formInputIcon",viewTransitionNone:"viewTransitionNone"};function LK(e){let t=[],o;for(o in Yp){let r=Yp[o];e.includes(r)&&t.push(o)}return t}function Zk(e,t,o){let r=e.componentForIdentifier(o.codeComponentIdentifier);if(!r?.properties)return{};let n={};return Object.entries(r.properties).forEach(([i,a])=>{if(!a||Ir(o)&&a.type==="slot")return;let s=kt(i),l=t[s];sd(l)&&l.type&&jv(a.type,l.type)&&(a.type==="enum"&&!gv(a,l.value)||(n[s]=l))}),n}function ie(e,t){return t?new Set(Ze(t)?t:[t]).has(e):!0}function eu(e,t,o,r,n,i,a){let s=e.getScopeNodeFor(r);function l(d){return!q(d)||s&&qo(s)&&s.hasVariable(d.id)?d:i?.[d.id]??d}let c={};if(ET(e,r)||st(o)&&(o.widthType===4&&(c.widthType=1),o.heightType===4&&(c.heightType=1)),ie("visibility",a)&&Jr(o)&&Jr(r)&&(c.visible=l(o.visible)),ie("border",a)&&Ur(o)&&Ur(r)&&(c.borderEnabled=o.borderEnabled,c.borderWidth=o.borderWidth,c.borderColor=o.borderColor,c.borderStyle=o.borderStyle,c.borderPerSide=o.borderPerSide,c.borderLeft=o.borderLeft,c.borderTop=o.borderTop,c.borderRight=o.borderRight,c.borderBottom=o.borderBottom),ie("border",a)&&Ur(o)&&tr(r))if(B(o.borderEnabled)){let d=o.resolveValue("borderEnabled");_i(d)?(c.strokeEnabled=!0,c.strokeWidth=d.borderWidth,c.strokeColor=d.borderColor):c.strokeEnabled=!1}else c.strokeEnabled=o.borderEnabled,c.strokeWidth=o.borderWidth,c.strokeColor=o.borderColor;if(ie("stroke",a)&&tr(o)&&tr(r)&&(c.strokeEnabled=o.strokeEnabled,c.strokeColor=o.strokeColor,c.strokeWidth=o.strokeWidth,c.strokeAlignment=o.strokeAlignment,c.lineJoin=o.lineJoin,c.lineCap=o.lineCap,c.strokeMiterLimit=o.strokeMiterLimit,c.strokeDashArray=o.strokeDashArray,c.strokeDashOffset=o.strokeDashOffset),ie("stroke",a)&&tr(o)&&Ur(r)&&(c.borderEnabled=o.strokeEnabled,c.borderWidth=o.resolveValue("strokeWidth"),c.borderColor=o.resolveValue("strokeColor")),ie("formInputTextAreaResize",a)&&vv(o)&&(c.formTextAreaResizable=o.formTextAreaResizable),ie("formInputFocusedFill",a)&&Pn(o)&&Pn(r)&&(c.formInputFocusedBackgroundColor=o.formInputFocusedBackgroundColor),ie("formInputFocusedBorder",a)&&Pn(o)&&Pn(r)&&(c.formInputFocusedBorderColor=o.formInputFocusedBorderColor,c.formInputFocusedBorderWidth=o.formInputFocusedBorderWidth,c.formInputFocusedBorderStyle=o.formInputFocusedBorderStyle),ie("formInputFocusedBoxShadow",a)&&Pn(o)&&Pn(r)&&(c.formInputFocusedBoxShadow=o.formInputFocusedBoxShadow?[...o.formInputFocusedBoxShadow]:void 0),ie("formInputFocusedTransition",a)&&Pn(o)&&Pn(r)&&(c.formInputFocusedTransition=o.formInputFocusedTransition),ie("formInputColor",a)&&ra(o)&&ra(r)&&(c.formInputFontColor=o.formInputFontColor),ie("formPlaceholderColor",a)&&nh(o)&&nh(r)&&(c.formInputPlaceholderColor=o.formInputPlaceholderColor),ie("formInputPadding",a)&&Zo(o)&&Zo(r)&&(c.padding=o.padding,c.paddingPerSide=o.paddingPerSide,c.paddingTop=o.paddingTop,c.paddingRight=o.paddingRight,c.paddingBottom=o.paddingBottom,c.paddingLeft=o.paddingLeft),ie("shadows",a)&&ji(o)&&ji(r)){let d=l(o.boxShadows);Tv(r)?c.boxShadows=d:B(d)||(c.boxShadows=d?.filter(u=>u.type!=="realistic"))}if(ie("shadows",a)&&sf(o)&&sf(r)&&(c.shadows=o.shadows),ie("rotation",a)&&xr(o)&&xr(r)&&(c.rotation=o.rotation,To(r)&&To(o)&&(c.rotate3d=o.rotate3d,c.rotateX=o.rotateX,c.rotateY=o.rotateY)),ie("overflow",a)&&ur(o)&&ur(r)&&(c.overflow=l(o.overflow)),ie("overscroll",a)&&al(o)&&al(r)&&(c.overscrollBehavior=l(o.overscrollBehavior)),ie("cursor",a)&&Ui(o)&&Ui(r)&&(c.cursor=l(o.cursor)),ie("customCursor",a)&&Ui(o)&&Ui(r)&&(c.customCursorType=o.customCursorType,c.customCursorSmartComponentId=o.customCursorSmartComponentId,c.customCursorVariant=o.customCursorVariant,c.customCursorFollow=o.customCursorFollow,c.customCursorOffsetX=o.customCursorOffsetX,c.customCursorOffsetY=o.customCursorOffsetY,c.customCursorTransitionEnabled=o.customCursorTransitionEnabled,c.customCursorTransition=o.customCursorTransition,c.customCursorPlacement=o.customCursorPlacement,c.customCursorAlignment=o.customCursorAlignment),bl(o)&&bl(r))for(let d of Xk){let u=Yp[d];ie(u,a)&&(c[d]=l(o[d]))}if(ie("blending",a)&&of(o)&&of(r)&&(c.blendingMode=l(o.blendingMode)),ie("transition",a)&&xl(o)&&xl(r)){let d=Ee(o)?o.variantTransition:o.transition;Ee(r)?c.variantTransition=d:c.transition=d}if(ie("fill",a)&&Fo(o)&&Fo(r)){c.fillColor=l(o.fillColor),c.fillType=o.fillType,c.fillLinearGradient=o.fillLinearGradient,c.fillRadialGradient=o.fillRadialGradient,c.fillConicGradient=o.fillConicGradient,c.fillType==="conic-gradient"&&!ZT(r)&&(c.fillType=r.fillType??"color");let d=l(o.fillImage);B(d)?B(d)&&r.supportsDynamicValues()&&(c.fillImage=d):c.fillImage=d,ie("fillImageAlts",a)&&QT(e,r)&&Ld(o)&&(c.fillImageAlts=o.fillImageAlts?[...o.fillImageAlts]:void 0),c.fillImageResize=o.fillImageResize,c.fillImagePixelWidth=o.fillImagePixelWidth,c.fillImagePixelHeight=o.fillImagePixelHeight,c.fillImagePositionX=o.fillImagePositionX,c.fillImagePositionY=o.fillImagePositionY,c.fillImageTileSize=o.fillImageTileSize}if(ie("fill",a)&&Nr(o)&&Nr(r)&&(c.fillEnabled=o.fillEnabled),(ie("size",a)||ie("fill",a))&&st(o)&&st(r)){let d=c.fillType??(Fo(r)?r.fillType:void 0),u=c.heightType??r.heightType;(c.widthType??r.widthType)===5&&d!=="image"&&(c.width=r.rect().width,c.widthType=0),u===5&&d!=="image"&&(c.height=r.rect().height,c.heightType=0)}if(ie("opacity",a)&&Bf(o)&&Bf(r)&&(c.opacity=l(o.opacity)),ie("radius",a)&&ai(o)&&ai(r)&&(c.radius=l(o.radius),ef(o)&&ef(r)&&(c.radiusIsRelative=o.radiusIsRelative),Gi(o)&&Gi(r)&&(c.radiusPerCorner=o.radiusPerCorner,c.radiusBottomLeft=o.radiusBottomLeft,c.radiusBottomRight=o.radiusBottomRight,c.radiusTopLeft=o.radiusTopLeft,c.radiusTopRight=o.radiusTopRight)),ie("cornerShape",a)&&qm(o)&&qm(r)&&(c.cornerShape=l(o.cornerShape)),ie("pointerEvents",a)&&nf(o)&&nf(r)&&!Ye(s)&&(c.pointerEvents=l(o.pointerEvents)),ie("draggable",a)&&Il(o)&&Il(r)&&(c.draggable=l(o.draggable)),ie("userSelect",a)&&ll(o)&&ll(r)&&(c.userSelect=l(o.userSelect)),ie("imageRendering",a)&&rf(o)&&rf(r)&&(c.imageRendering=l(o.imageRendering)),ie("overflowX",a)&&ur(o)&&ur(r)&&(c.overflowX=l(o.overflowX)),ie("overflowY",a)&&ur(o)&&ur(r)&&(c.overflowY=l(o.overflowY)),ie("zIndex",a)&&cf(o)&&cf(r)&&(c.zIndex=l(o.zIndex)),ie("scrollbars",a)&&Fl(o)&&Fl(r)&&(c.hideScrollbars=l(o.hideScrollbars)),ie("textVerticalAlignment",a)&&El(o)&&El(r)&&(c.textVerticalAlignment=o.textVerticalAlignment),ie("textWrapBalance",a)&&Af(o)&&Af(r)&&(c.textWrapBalance=o.textWrapBalance),ie("styledText",a)&&Xe(o)&&Id(r)){c.font=o.getFonts(!1)[0],c.textColor=o.getTextColors(!1)[0];let d=o.getFontSizes(!1)[0];c.fontSize=ii(d)?d[0]:d;let u=o.getLetterSpacings(!1)[0];c.letterSpacing=F(u)?u:JS(u),c.textTransform=o.getTextTransforms(!1)[0],c.textDecoration=o.getTextDecorations(!1)[0],c.lineHeight=o.getLineHeights(!1)[0],c.textAlignment=o.getTextAlignments(!1)[0],c.styledText=r.styledText.setFont(void 0,!1).setTextColor(void 0,!1).setFontSize(void 0,!1).setLetterSpacing(void 0,!1).setTextTransform(void 0,!1).setTextDecoration(void 0,!1).setLineHeight(void 0).setTextAlignment(void 0)}if(ie("link",a)&&Xe(o)&&Xe(r)&&(c.linkFont=o.linkFont,c.linkTextColor=o.linkTextColor,c.linkFontSize=o.linkFontSize,c.linkTextTransform=o.linkTextTransform,c.linkTextDecoration=o.linkTextDecoration,c.linkHoverFont=o.linkHoverFont,c.linkHoverTextColor=o.linkHoverTextColor,c.linkHoverFontSize=o.linkHoverFontSize,c.linkHoverTextTransform=o.linkHoverTextTransform,c.linkHoverTextDecoration=o.linkHoverTextDecoration,c.linkCurrentFont=o.linkCurrentFont,c.linkCurrentTextColor=o.linkCurrentTextColor,c.linkCurrentFontSize=o.linkCurrentFontSize,c.linkCurrentTextTransform=o.linkCurrentTextTransform,c.linkCurrentTextDecoration=o.linkCurrentTextDecoration),ie("mask",a)&&Lf(o)&&Lf(r)&&(c.masks=o.masks),Ve(o)&&Ve(r)){if(ie("fontSize",a)&&(c.textFitScale=o.textFitScale,c.textFitViewBoxSize=o.textFitViewBoxSize),ie("paragraphSpacing",a)&&(c.paragraphSpacing=o.paragraphSpacing),ie("styledText",a)){let d=o.getTextStrokeWidths(!1)[0],u=o.getTextStrokeColors(!1)[0];F(d)||(c.textStrokeWidth=d),u&&(c.textStrokeColor=u)}if(ie("richText",a))for(let d of ps){let u=o[d];e.has(u)&&(c[d]=u)}}if(ie("codeComponentProps",a)&&Xo(o)&&Xo(r)){let d=Zk(t,o,r);Object.assign(c,d)}if(ie("codeOverride",a)&&di(o)&&di(r)&&(c.codeOverrideEnabled=o.codeOverrideEnabled,c.codeOverrideIdentifier=o.codeOverrideIdentifier),ie("formInputFont",a)&&ra(o)&&ra(r)&&(c.formInputFontFamily=o.formInputFontFamily,c.formInputFontWeight=o.formInputFontWeight,c.formInputFontStyle=o.formInputFontStyle,c.formInputFontSize=o.formInputFontSize,c.formInputFontSelector=o.formInputFontSelector,c.formInputFontLetterSpacing=o.formInputFontLetterSpacing,c.formInputFontLetterSpacingUnit=o.formInputFontLetterSpacingUnit,c.formInputFontLineHeight=o.formInputFontLineHeight,c.formInputFontLineHeightUnit=o.formInputFontLineHeightUnit,c.formInputFontTextAlignment=o.formInputFontTextAlignment,c.formInputOpenTypeFontFeatures=o.formInputOpenTypeFontFeatures,c.formInputVariationAxes=o.formInputVariationAxes),ie("layout",a)&&Fe(r)){let d=Br(o),u=xS(o);(d||u)&&(Po(r)||(c.layout=o.layout),c.gap=o.gap,c.padding=o.padding,c.paddingPerSide=o.paddingPerSide,c.paddingTop=o.paddingTop,c.paddingRight=o.paddingRight,c.paddingBottom=o.paddingBottom,c.paddingLeft=o.paddingLeft,d&&(c.stackDirection=o.stackDirection,c.stackDistribution=o.stackDistribution,c.stackAlignment=o.stackAlignment),u&&(c.gridAlignment=o.gridAlignment,c.gridColumnCount=o.gridColumnCount,c.gridColumnWidthType=o.gridColumnWidthType,c.gridColumnWidth=o.gridColumnWidth,c.gridColumnMinWidth=o.gridColumnMinWidth,c.gridRowHeightType=o.gridRowHeightType,c.gridRowHeight=o.gridRowHeight,c.gridRowCount=o.gridRowCount,c.gridType=o.gridType))}if(ie("position",a)&&Object.assign(c,os(o,n)),ie("perspective",a)&&To(o)&&To(r)&&(c.perspective=l(o.perspective)),ie("overlay",a)&&lt(o)&&lt(r)&&n){let d=pi(o);Object.assign(c,d)}if(ie("effects",a)&&Vl(o)&&Vl(r)&&Object.assign(c,gI(r,o)),ie("transformOrigin",a)&&To(o)&&To(r)&&Object.assign(c,{transformOriginX:o.transformOriginX,transformOriginY:o.transformOriginY}),ie("backfaceVisibility",a)&&To(o)&&To(r)&&Object.assign(c,{backfaceVisibility:o.backfaceVisibility}),ie("transformStylePreserve3d",a)&&To(o)&&To(r)&&Object.assign(c,{transformStylePreserve3d:o.transformStylePreserve3d}),ie("translateZ",a)&&To(o)&&To(r)&&Object.assign(c,{translateZ:o.translateZ}),ie("scale",a)&&To(o)&&To(r)&&Object.assign(c,{scale:o.scale}),ie("skew",a)&&To(o)&&To(r)&&Object.assign(c,{skewX:o.skewX,skewY:o.skewY}),ie("formBooleanInputType",a)&&oa(o)&&oa(r)&&Object.assign(c,{formBooleanInputType:o.formBooleanInputType}),ie("formBooleanInputValue",a)&&oa(o)&&oa(r)&&Object.assign(c,{formBooleanInputValue:o.formBooleanInputValue}),ie("formBooleanInputCheckedEffect",a)&&oa(o)&&oa(r)){let d={formBooleanInputCheckedBorderColor:o.formBooleanInputCheckedBorderColor,formBooleanInputCheckedBorderWidth:o.formBooleanInputCheckedBorderWidth,formBooleanInputCheckedBorderStyle:o.formBooleanInputCheckedBorderStyle,formBooleanInputCheckedFillColor:o.formBooleanInputCheckedFillColor,formBooleanInputCheckedBoxShadow:o.formBooleanInputCheckedBoxShadow,formBooleanInputCheckedTransition:o.formBooleanInputCheckedTransition};Object.assign(c,d)}return ie("formInputIcon",a)&&rh(o)&&rh(r)&&Object.assign(c,{formInputIconImage:o.formInputIconImage,formInputIconColor:o.formInputIconColor}),ie("viewTransitionNone",a)&&Pl(o)&&Pl(r)&&(c.viewTransitionNone=o.viewTransitionNone),c}var Qk=e=>{let t=[];return e.forEach((o,r)=>{for(let n=r+1;n<e.length;n++){let i=e[n];t.push([o,i])}}),t};function Kk(e,t,o){let r=t.map(u=>e.convertFrameToCanvas(u));if(r.length===2){let[u,m]=r,h=bW(u,m),C=IW(u,m);if(h&&!C)return"vertical";if(C&&!h)return"horizontal"}let n=r.map(u=>de.center(u));if(n.length<=1){if(r.length===1){let[u]=r,m=o.width/Math.max(1,u.width),h=o.height/Math.max(1,u.height);return m<h?"vertical":"horizontal"}return o.width<o.height?"vertical":"horizontal"}let i=Qk(n),a=[],s=[];i.forEach(([u,m])=>{a.push(Math.abs(u.x-m.x)),s.push(Math.abs(u.y-m.y))});let l=a.reduce((u,m)=>u+m,0),c=s.reduce((u,m)=>u+m,0);return l>c?"horizontal":"vertical"}function qk(e,t,o){return[...t].sort((r,n)=>{let i=e.tree.getRect(r),a=e.tree.getRect(n);return o==="horizontal"?i.x-a.x:i.y-a.y})}function vW(e){if(B(e))return!0;switch(e){case"start":case"center":case"end":return!0;default:return!1}}function gg(e,t,o){let r=Kk(e.tree,t,o),n=e.stores.persistedUserDefaults.layoutGap;return{layout:"stack",stackDirection:r,gap:n,stackDistribution:TS,stackAlignment:Gc,stackWrapEnabled:!1,padding:0,paddingPerSide:!1,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}}function TW(e,t){t.forEach((o,r)=>{e.tree.moveNodeIndex(o,r)})}function Yk(e,t,o,r,n){o==="horizontal"&&t.heightType===2||o==="vertical"&&t.widthType===2||ew(e,r,o,n,{})}function ew(e,t,o,r,n){if(o==="horizontal"||B(n.padding))return;let i={...r};if(n.paddingPerSide)n.paddingLeft&&(i.width-=n.paddingLeft),n.paddingRight&&(i.width-=n.paddingRight),n.paddingTop&&(i.height-=n.paddingTop),n.paddingBottom&&(i.height-=n.paddingBottom);else if(n.padding){let s=n.padding*2;i.width-=s,i.height-=s}i.width=Math.max(0,i.width),i.height=Math.max(0,i.height);let a=i.width;a>0&&t.forEach(s=>{if(!Re(s)||$e(s)||jr(s)||lo(s)||s.widthType===2||s.widthType===4)return;if(e.tree.getRect(s).width/a>.96){let d=e.tree.getParent(s.id),u=e.tree.getParentSizeInfo(s);u.sizing&&s.heightType===4&&(u.sizing={...i,height:u.sizing.height});let m=e.tree.getRect(s),h=s.updateForRect({rect:m,parentSizeInfo:u,constraintsLocked:!0,shouldGuessPinToBottom:ta(e.tree,s),shouldGuessPinToRight:Qr(e.tree,s,d)});h.width=1,s.width!==1&&(h.widthType=3),s.set(h)}})}function tw(e,t,o,r,n){if(!e.tree.getNode(t))return;qk(e,r,n).forEach(s=>{if(dd(s)&&fn(s)||Ys(s))return;let l=e.tree.getParent(s.id),c=e.tree.getRect(s),d=de.offset(c,Le.reverse(o));e.moveNode(s.id,t);let u={...o},m=e.tree.getParentSizeInfo(s);gT(s)&&m.sizing&&(u.width=m.sizing.width),yT(s)&&m.sizing&&(u.height=m.sizing.height),e.tree.current(s)?.set({...s.updateForRect({rect:d,parentSizeInfo:{sizing:u,positioning:o,viewport:m?.viewport??null,layout:rn(l)},constraintsLocked:!1,shouldGuessPinToBottom:!0,shouldGuessPinToRight:Qr(e.tree,s,l)}),top:null,left:null,bottom:null,right:null,position:void 0}),fi(e.tree,s).forEach(({replicaRoot:C,relatedNode:T})=>{ze.resetOverridesByProperty(e.tree,C,T,["position"])})})}function bW(e,t){let o=de.maxX(e),r=de.maxX(t);return o>t.x&&r>e.x}function IW(e,t){let o=de.maxY(e),r=de.maxY(t);return o>t.y&&r>e.y}function yg(e,t,o){if(!mt(o))return;let r=t==="width"?"widthType":"heightType";o.children.forEach(n=>{if(Re(n)&&(n[r]===3||n[r]===1)){let i=e.getRect(n),a={[r]:0,[t]:i[t]};mi(n)&&(a.aspectRatio=null),e.current(n)?.set(a)}})}function yY(e,t){if(!mt(t)||!Re(t))return;let o=new Set;t.children.forEach(r=>{if(!Re(r)||!mn(r))return;let n=e.getRect(r),i={};t.widthType===2&&(r.widthType===3||r.widthType===1)&&(i.minWidth=n.width,o.add(r)),t.heightType===2&&(r.heightType===3||r.heightType===1)&&(i.minHeight=n.height),Object.keys(i).length>0&&(o.add(r),e.current(r)?.set(i))}),o.size>0&&NW()}function NW(){fs({type:"add",variant:"info",key:"setting-stack-direction-causes-children-change",text:"Layers in this stack received min-sizing to prevent a collapse",icon:"thumbnail",duration:5e3,showCloseButton:"always"})}function tu(e,t,o={}){if(!dr(t)||!mt(t)||no(t))return;let r={layout:"stack",...o},n=e.tree.getRect(t),i=e.tree.getScopeNodeFor(t),a=PN(t)||Ee(t)&&z(i)||t.__unsafeIsGroundNode(e.tree)&&Ct(i),s=a?"vertical":Kk(e.tree,t.children,n),l=qk(e,t.children,s);qe(t)||TW(e,l);let c=eo(t),d=t.gap??e.stores.persistedUserDefaults.layoutGap,u=a?"start":"center";r.stackDirection=c?t.stackDirection??s:s,r.stackDistribution=c?t.stackDistribution??u:u,r.gap=c||vW(u)?d:0,r.stackAlignment=c?t.stackAlignment??Gc:Gc,r.stackWrapEnabled=c?t.stackWrapEnabled??!1:!1;let m=c&&Zo(t)?{padding:t.padding,paddingPerSide:t.paddingPerSide,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom}:{...qS};if(s==="horizontal"&&o.heightType===2||s==="vertical"&&o.widthType===2||ew(e,t.children,s,n,m),m.paddingPerSide){let{paddingTop:C,paddingRight:T,paddingBottom:N,paddingLeft:P}=m;C===T&&C===N&&C===P&&(m.paddingPerSide=!1,m.padding=C)}t.set({...r,...m})}var nw=900;function OY(e){return e.intrinsicWidth>=nw}function ou(e,t,o){if(Xe(t))return!1;let r=o??e.getParent(t.id);return!!(r&&Ne(r))}function WY(e){return e<=.5}function xW(e,t,o){if(!Fe(t)||!xo(t)||!Ne(t)||Co(t)||!ou(e,o,t))return!1;let r=Ae(o)&&st(o)&&o.widthType===1&&o.width===1;if(Ae(o)&&o.width<nw&&!r)return!1;let n=t.children.filter(d=>d.id!==o.id);if(n.length===0)return!0;let a=e.getRect(t).width||1,s=n.map(d=>e.getRect(d));return s.some(d=>d.width/a<.5)?!1:s.every((d,u)=>s.every((m,h)=>u===h?!0:!de.intersects(d,m)))}function zY(e,t,o,r){if(!dr(t)||!xW(e.tree,t,o))return;let n={};r.height>500&&(n.heightType=2),tu(e,t,n),t.set({gap:0})}function ow(e,t){for(let o of Object.values(e.variables))if(o?.type==="collectionreference"&&o.dataIdentifier===t)return o}function rw(e,t){return Object.values(e.variables).find(o=>o?.type==="multicollectionreference"&&o.dataIdentifier===t)}function PW(e,t){let o=jd(t);if(br(o))return{targetDataIdentifier:o.dataIdentifier,targetProviderId:o.id};let r=e.stores.scopeStore.active;if(xt(r))return{targetDataIdentifier:r.dataIdentifier,targetProviderId:r.id}}function BY(e,t,o){if(!br(o))return;let r=PW(e,t);if(!r)return;let{targetDataIdentifier:n,targetProviderId:i}=r,a=pn(e.tree,o.dataIdentifier),s=pn(e.tree,n);if(!a||!s)return;let l=ow(a,n),c=rw(a,n),d=ow(s,o.dataIdentifier),u=rw(s,o.dataIdentifier),m;u?m={id:Bt(),itemKey:"id",transforms:[{id:Bt(),type:"valueTransform",name:"isIncludedIn",value:$t(u.id,i)}]}:d?m={id:Bt(),itemKey:"id",transforms:[{id:Bt(),type:"valueTransform",name:"equals",value:$t(d.id,i)}]}:c?m={id:Bt(),itemKey:c.id,transforms:[{id:Bt(),type:"valueTransform",name:"contains",value:$t(Qf,i)}]}:l&&(m={id:Bt(),itemKey:l.id,transforms:[{id:Bt(),type:"valueTransform",name:"equals",value:$t(Qf,i)}]}),m&&o.set({collectionFilters:{filters:[m]}})}function $Y(e,t,o,r){if(!Fe(t)||!xo(t)||!Ne(t)||!no(t)||t.stackDirection!=="vertical"||!ou(e.tree,o,t)||t.heightType===2||!iP(e.tree,e.componentLoader,t).height[2])return;let i=t.children.filter(c=>c.id!==o.id);if(i.length===0)return;let a=e.tree.getRect(t),s=i.map(c=>e.tree.getRect(c));de.merge(...s).height+r.height<=a.height||(t.set({height:a.height,heightType:2}),i.forEach((c,d)=>{let u=s[d];S(u,"Child rect must be defined"),Ae(c)&&st(c)&&c.heightType===3&&c.set({height:u.height,heightType:0})}))}function Cg(e){let t=vo.boundingBox(e),o=e.pathSegments.map(r=>r.merge({x:r.x-t.x,y:r.y-t.y}));return[{pathClosed:e.pathClosed,pathSegments:o},t]}function iw(e,t,o,r){let n=Je("app:importSVG"),i=e,a,s;if(r&&r.colorable){let T=Qs(e,"image/svg+xml").documentElement;if(!T)throw new Error(`Unsupported SVG: ${e}}`);let N=T.getAttribute("fill"),P=!(N&&N.toLowerCase()==="none");if(P){if(r.fillType==="linear-gradient"&&r.fillLinearGradient instanceof ab)a={fillType:"linear-gradient",fillLinearGradient:r.fillLinearGradient};else if(r.fillType==="image"&&r.fillImage)a={fillType:"image",fillImage:r.fillImage,fillImageResize:r.fillImageResize,fillImagePixelWidth:r.fillImagePixelWidth,fillImagePixelHeight:r.fillImagePixelHeight};else if(r.fillType==="color"&&A(r.fillColor)){let R=Md(),M=new R.Color(r.fillColor).toCSS(!1);P&&T.setAttribute("style",`fill: ${M}; color: ${M}`);let H=T.getAttribute("stroke");H&&H.toLowerCase()==="currentcolor"&&T.setAttribute("stroke",M)}i=T}}let l=VW(i);i=l.svgElement,s=l.svgSize;let c=!1,u=Md().project.importSVG(i,{expandShapes:!0,insert:!1,size:o,onError:C=>{n.reportError(C),c=!0;let T=document&&document.getElementsByTagName("body");if(T&&T[0]){let N=T[0].lastElementChild;for(;N&&N.tagName==="svg";)N.remove(),N=T[0].lastElementChild}}});if(c)return null;let m;try{m=aw({item:u,fillOverrides:a,tree:t()})}catch(C){return n.reportError(C),null}let h=m[0];return h?(Ae(h)&&s&&h.set({width:s.width,height:s.height}),t().insertNodes(m).getNode(h.id)):null}function aw({item:e,tree:t,nodes:o=[],parent:r=null,parentAbsolutePosition:n=Le(0,0),fillOverrides:i}){let a=Md();return e instanceof a.Group?wW({group:e,nodes:o,parent:r,parentAbsolutePosition:n,tree:t,fillOverrides:i}):e instanceof a.PathItem?kW({item:e,nodes:o,parent:r,parentAbsolutePosition:n,fillOverrides:i}):(console.warn("Unhandled Paper item:",e),o)}function VW(e){let t=A(e)?Qs(e,"image/svg+xml").documentElement:e;if(!t)throw new Error(`Unsupported SVG: ${e}}`);let o,r=t.getAttribute("viewBox"),n=t.getAttribute("width"),i=t.getAttribute("height");if(r){let[a,s,l,c]=r.split(" ");l&&c&&(t.setAttribute("width",l),t.setAttribute("height",c),o={width:parseInt(l),height:parseInt(c)})}else n&&i&&(o={width:parseInt(n),height:parseInt(i)});return sw(t),{svgElement:t,svgSize:o}}function sw(e){RW(e);for(let t of e.children)sw(t)}function RW(e){let t=e.getAttribute("rx"),o=e.getAttribute("ry");!t&&!o||t&&o||(t?e.setAttribute("ry",t):o&&e.setAttribute("rx",o))}function kW({item:e,nodes:t=[],parent:o=null,parentAbsolutePosition:r=Le(0,0),fillOverrides:n}){let i=lb({item:e,parentAbsolutePosition:r}),a=cb(e),s=o?o.id:ao;if(i.length===1){let c=i[0];S(c,"Path must be defined");let[{pathSegments:d,pathClosed:u},m]=Cg(c);if(d.length){let h=new Ml({parentid:s,pathSegments:d,pathClosed:u,...a,...n,...m});t.push(h)}}else if(i.length){let c=lw(e),d=c.x-r.x,u=c.y-r.y,m=Bt(),h=[];if(i.forEach(C=>{let[{pathSegments:T,pathClosed:N},P]=Cg(C);if(!T.length)return;let R=new Ml({parentid:m,pathSegments:T,pathClosed:N,...n,x:P.x-d,y:P.y-u,width:P.width,height:P.height});h.push(R)}),h.length){let C=e.fillRule==="evenodd"?3:4,T=new fp({id:m,parentid:s,pathBoolean:C,...a,...n,x:d,y:u,width:c.width,height:c.height});t.push(T,...h)}}return t}function wW({group:e,tree:t,nodes:o=[],parent:r=null,parentAbsolutePosition:n=Le(0,0),fillOverrides:i}){let a=lw(e),s=r?r.id:ao,l,c;return s?(l=new Ix({parentid:s,x:a.x-n.x,y:a.y-n.y,width:a.width,height:a.height}),c=Le(a.x,a.y)):(l=new On({parentid:s,left:0,top:0,width:a.x+a.width,height:a.y+a.height,fillEnabled:!1}),c=Le(0,0)),o.push(l),e.children.forEach(d=>{aw({item:d,nodes:o,parent:l,parentAbsolutePosition:c,tree:t,fillOverrides:i})}),o}function lw(e){let{x:t,y:o,width:r,height:n}=e.bounds;return{x:t,y:o,width:r,height:n}}function LW(e){return Ue(e)&&"iconURL"in e}function l2(e){return Ue(e.icon)?e.id==="WorkspacePluginsCategory"?!0:LW(e.icon):!1}var DW={DefaultCategory:!0,PluginsCategory:!0,ManagedCollectionPluginsCategory:!0,WorkspacePluginsCategory:!0};function c2(e){return A(e)?Object.hasOwn(DW,e):!1}var FW={FindNodesCategory:!0,PluginsCategory:!0,ManagedCollectionPluginsCategory:!0,WorkspacePluginsCategory:!0};function d2(e){return Object.hasOwn(FW,e)}function p2(e){return e?.kind==="item"}var cw=e=>e.root.children.reduce((o,r)=>(z(r)&&r.abTestingParentId&&o.add(r.abTestingParentId),o),new Set).size;var AW=(e,t)=>{e.stores.modalStore.set({type:"Confirmation",title:"Increase Limits",description:"You\u2019ve reached the limit for Advanced Analytics. Please contact your account manager to increase your limits and restore access to A/B testing and more.",source:t,confirmLabel:"Contact Us",cancelLabel:"Maybe Later",onConfirm:()=>rP(cP)})},EW=(e,t)=>{e.stores.modalStore.set({type:"UpsellEnterprise",source:t,description:"Sign up for an Enterprise plan to add even more A/B Tests, and get access to other powerful features.",upsell:"advanced-analytics-enterprise-upsell",upsellFeatures:["Custom Limits","Custom Hosting","Custom Proxy Support","Enterprise Security","Dedicated Support"]})},MW=(e,t)=>{S(e.stores.projectStore.project,"Project should be defined");let{usage:o,settings:{resourceLimits:{trackingEventsLimit:r}}}=e.stores.projectStore.project,n=o.advancedAnalytics?Math.max(o.advancedAnalytics.currentMonth,o.advancedAnalytics.previousMonth):1;n>(r===null?1/0:r)?e.stores.modalStore.set({type:"AcquireAddonModal",source:t,addonInfo:{addonLicenseType:"advancedAnalytics",quantity:n}}):e.stores.modalStore.set({type:"AcquireAdvancedAnalyticsTrialModal",source:t,onConfirm:lP})},dw=(e,t,o)=>{e.stores.modalStore.set({type:"UpsellFeature",upsellFeature:"abTests",title:"Advanced Analytics",description:o,source:t})},OW=()=>{fs({type:"add",key:"max-ab-test-limit-reached",variant:"info",text:"You\u2019ve reached the limit of 10 A/B tests for this project."})},pw=(e,t,o)=>{switch(o){case 0:dw(e,t,"Upgrade your site, add the Advanced Analytics add-on, and add more tests.");break;case 1:dw(e,t,"Upgrade your site to add the Advanced Analytics add-on and start improving your site with funnels and A/B testing.");break;case 2:MW(e,t);break;case 3:AW(e,t);break;case 5:EW(e,t);break;case 4:OW();break;default:G(o)}},uw=(e,{isAddingTest:t})=>{let{featureFlags:o,usageData:r,resourceLimits:n,projectLicenseType:i}=e.stores.projectStore,a=o?.canUseAdvancedAnalytics||"off",s=Math.max(r?.advancedAnalytics?.currentMonth??1,r?.advancedAnalytics?.previousMonth??1),l=n?.trackingEventsLimit||null,c=cw(e.tree)+(t?1:0),d=n?.abTests??1/0,u=c>d;return a!=="on"&&i==="enterpriseSite"?3:u&&i==="enterpriseSite"?4:a==="off"||u?c>sP?5:i==="freeSite"?0:1:a==="upsell"?2:l!==null&&s>l?i==="enterpriseSite"?3:2:null};var pa=class extends Error{constructor(o,r,n,i=!1){super(o);this.missing=r;this.error=n;this.wasTimeout=i}};function Sg(e){return e instanceof pa}var vg=Je("ensureComponentsInLoader"),WW=500,zW=30*1e3;async function ru(e,t,o,r){let n=mw(t,e).length;if(n===0)return;let i=r??zW+n*2e3;vg.debug("modules:",t.length,", new:",n,", timeout:",i),await BW(e,o,i);let a=mw(t,e);if(a.length===0)return;let s=$W(t,e);throw vg.debug("components loaded, but some are missing",{missing:a,errors:s}),new pa("ensureComponentsInLoader: Some modules are missing.",a,s)}async function BW(e,t,o){let r=performance.now(),n=await GW(async()=>(await Wm(o),"timeout"),async()=>{await t.whenIdle();let i=t.revision;return S(i>=0,"moduleStore.revision cannot be negative"),await t.loadAllLocalModules(),i});if(n==="timeout")throw new pa("ensureComponentsInLoader: Modules store not ready in time.",[],[],!0);for(let i=0;i<1e3;i++){let a=e.modulesRevision;if(n<=a)break;if(performance.now()-r>o)throw vg.debug("component loader not updated in time: want:",n,"got:",a),new pa("ensureComponentsInLoader: Component loader not updated in time.",[],[],!0);await Wm(WW)}}function mw(e,t){let o=new Set;for(let r of e)t.componentForIdentifier(r)||o.add(r);return Array.from(o)}function $W(e,t){let o=new Set;for(let r of e)We(t.errorForIdentifier(r))||o.add(r);return Array.from(o)}async function GW(...e){return Promise.race(e.map(async t=>t()))}async function fw(e,t,o){let r=[];e.forEach(n=>{let i=he(n);i&&i.kind==="externalModuleExport"&&r.push(i)}),r.length&&await t.preloadExternalModules(r),await ru(o,e,t)}function nu(e,t,o,r,n){if(q(o.htmlContent))return;let i=e.getScopeNodeFor(t);S(i&&ci(i),"Can't find scope with breakpoints");let s=i.getTopLevelVariants().map(l=>{let c=xo(l)?o.id:Yo(l.id,o.id),d=e.get(c);return S(d&&Ve(d),"Can't find rich text node in breakpoint"),[l,d]});for(let[l,c]of s){S(Ae(l),"Can't read width attribute of node");let d=dp(r,u=>(u.breakpointWidth??0)>l.width)??n;c.detachTextStylePreset(d,!0)}}var Tg=["formButtonSuccessVariant","formButtonPendingVariant","formButtonErrorVariant","formButtonIncompleteVariant","whileOpenEffectVariant","appearEffectVisibleVariantId","appearEffectObscuredVariantId","dataLoaderLoadingVariant","dataLoaderDisabledVariant"];function gw(e,t,o){let r=t.tokenOverrides;!r||Wt(r)||(yw(e,o,r),t.set({tokenOverrides:void 0}))}function yw(e,t,o){HW(e,t.id,o);let r=[];for(let n of t.variables){if(!vw(n)){r.push(n);continue}switch(n.type){case"border":r.push(_i(n.initialValue)?{...n,initialValue:{...n.initialValue,borderColor:ft(n.initialValue.borderColor,o)}}:n);break;case"color":r.push({...n,initialValue:ft(n.initialValue,o)});break;default:G(n,"Unsupported variable type.")}}t.set({variables:r})}function HW(e,t,o){let r=e.tree.get(t);if(r)for(let{node:n,skipChildren:i}of r.walkWithSkipChildren()){if(qe(n)){i();continue}if(Cw(e,n,o),_W(e,n,o),!Z(n)||n.isVectorInstance)continue;let a=n.getLocalSmartComponentNodeId();if(!a){n.set({tokenOverrides:o});continue}let s=e.tree.get(a);ue(s)&&s.isLoaded()&&(yw(e,s,o),e.stores.codeGenerationStore.updateComponent(s.id))}}function _W(e,t,o){let r=fi(e.tree,t);for(let n of r){let{relatedNode:i,replicaRoot:a}=n;a.replicaInfo.overrides[t.id]&&Cw(e,i,o)}}function Cw(e,t,o){if(Fo(t)){let r=ft(t.fillColor,o);r&&t.set({fillColor:r})}if(Ur(t)){let r=ft(t.borderColor,o);r&&t.set({borderColor:r})}if(tr(t)){let r=ft(t.strokeColor,o);r&&t.set({strokeColor:r})}if(Ve(t))if(t.htmlContent)jW(e,t,o);else{let r=new Map;for(let n in o){if(!pf(n))continue;let i=o[n],a=Nv(n);a&&r.set(a,`var(${n}, ${i})`)}t.replaceColorTokenVariables(r),t.hasLinks()&&t.remapLinkStylePresets(n=>{let i=Sw(e,n,o);if(Do(i))return i})}else if(Z(t)){let r=e.componentLoader.componentForIdentifier(t.codeComponentIdentifier);if(!r)return;let n=t.getControlProps(r.properties);if(!n)return;for(let i in n){let a=n[i];if(!(!a||!vw(a)))switch(a.type){case"border":if(!_i(a.value))break;t.setControlProp(i,{...a,value:{...a.value,borderColor:ft(a.value.borderColor,o)}});break;case"color":t.setControlProp(i,{...a,value:ft(a.value,o)});break;default:G(a,"Unsupported control type.")}}}}function jW(e,t,o){for(let r of ps){let n=t[r];if(!n)continue;let i=Sw(e,n,o);wl(i)&&t.set({[r]:i.id})}}function Sw(e,t,o){let r=e.tree.getNodeWithTrait(t,wl);if(!r)return;let n=UW(r,o);if(hw(r,n))return r;let i=Mn(e.tree),a=i.getStylePresets().filter(s=>s.id!==t&&hw(s,n));return a.length?a?.[0]:(e.tree.insertNode(n,i.id),e.stores.codeGenerationStore.createModuleFromComponentSource(n).catch(vr),n)}function hw(e,t){return e.__class!==t.__class?!1:io(e)&&io(t)||Do(e)&&Do(t)||ri(e)&&ri(t)||pr(e)&&pr(t)||nn(e)&&nn(t)?e.equals(t):!1}function UW(e,t){let o=e.clone();return JW(o,t),o}function JW(e,t){io(e)?(e.textColor=ft(e.textColor,t),e.textStrokeColor=ft(e.textStrokeColor,t),e.textDecorationColor=ft(e.textDecorationColor,t)):Do(e)?(e.linkTextColor=ft(e.linkTextColor,t),e.linkTextDecorationColor=ft(e.linkTextDecorationColor,t),e.linkTextBackgroundColor=ft(e.linkTextBackgroundColor,t),e.linkHoverTextColor=ft(e.linkHoverTextColor,t),e.linkHoverTextDecorationColor=ft(e.linkHoverTextDecorationColor,t),e.linkHoverTextBackgroundColor=ft(e.linkHoverTextBackgroundColor,t),e.linkCurrentTextColor=ft(e.linkCurrentTextColor,t),e.linkCurrentTextDecorationColor=ft(e.linkCurrentTextDecorationColor,t),e.linkCurrentTextBackgroundColor=ft(e.linkCurrentTextBackgroundColor,t)):nn(e)?e.borderColor=ft(e.borderColor,t):ri(e)?(e.textColor=ft(e.textColor,t),e.textDecorationColor=ft(e.textDecorationColor,t),e.textStrokeColor=ft(e.textStrokeColor,t),e.borderColor=ft(e.borderColor,t),e.fillColor=ft(e.fillColor,t),e.lineColor=ft(e.lineColor,t)):pr(e)&&(e.inlineCodeTextColor=ft(e.inlineCodeTextColor,t),e.inlineCodeFillColor=ft(e.inlineCodeFillColor,t),e.borderColor=ft(e.borderColor,t))}function ft(e,t){if(We(e)||!Hr(e))return e;let{customProperty:o,metadata:r}=Iv(e);if(!pf(o))return e;let n=t[o];if(!n)return e;let i=`var(${o}, ${n})`;return r?`${i} ${r}`:i}function vw(e){switch(e.type){case"color":case"border":return!0;case"array":case"boolean":case"number":case"string":case"richtext":case"eventhandler":case"image":case"file":case"scrollsectionref":case"customcursor":case"cursor":case"transition":case"boxshadow":case"gap":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"trackingid":case"vectorsetitem":case"date":case"enum":case"link":case"linkrelvalues":case"fusednumber":case"object":case"font":case"pagescope":case"slot":case"slug":case"controlReference":case"nodePropertyControlReference":return!1;default:G(e,"Check if we support this variable type.")}}function Tw(e){if(!z(e))return!1;for(let t of e.children)if(!Ne(t)||mt(t)&&t.children.length>0)return!1;return!0}function bw(e,t,o){if(xt(o))return;let r;e.stores.scopeStore.removeNode(t);let n=Vn(e.tree,o.id);n&&e.tree.removeNode(n);let i=e.tree.root.homePageNodeId,a=Vn(e.tree,t.id);a&&(t.id===i?e.tree.removeNode(a):a.set({webPageId:o.id})),e.tree.current(o)?.set({name:t.name,pagePath:t.pagePath}),e.tree.has(i)||(r??={},r.homePageNodeId=o.id),r&&e.tree.root.set(r)}function I5(e,t){return XW(e,t).map(o=>o.replicaInfo.overrides[o.originalid]).filter(Uo)}function Kl(e,t){return e.filter(o=>At(o)&&o.originalid===t.id).sort((o,r)=>(r.breakpointWidth??0)-(o.breakpointWidth??0))}function XW(e,t){let o=e.getPresetsListNode();S(o,"Can't find PresetsListNode");let r=o.children.filter(io);return Kl(r,t)}function Ts(e){if(!e)return!1;let t=he(e);return t?t.kind==="externalModuleExport"||t.kind==="localModuleExport":!1}function iu(e,t){Z(e)&&Ts(e.codeComponentIdentifier)&&t(e.codeComponentIdentifier),za(e)&&e.dataIdentifier&&t(e.dataIdentifier),di(e)&&Ts(e.codeOverrideIdentifier)&&t(e.codeOverrideIdentifier),Ll(e)&&e.codeOverrides?.forEach(o=>{t(o.identifier)}),$r(e)&&Mx(e).forEach(t),Ba(e)&&Ts(e.shaderModuleIdentifier)&&t(e.shaderModuleIdentifier)}function au(e,t){let o={};if(Z(e)&&Ts(e.codeComponentIdentifier)){let n=t(e.codeComponentIdentifier);n&&(o.codeComponentIdentifier=n)}if(za(e)&&e.dataIdentifier){let n=t(e.dataIdentifier);n&&(S(ot(n)),o.dataIdentifier=n)}if(di(e)&&Ts(e.codeOverrideIdentifier)){let n=t(e.codeOverrideIdentifier);n&&(o.codeOverrideIdentifier=n)}if(Ll(e)&&e.codeOverrides){let n=!1,i=e.codeOverrides.map(a=>{let s=t(a.identifier);return s?(n=!0,{...a,identifier:s}):a});n&&(o.codeOverrides=i)}if($r(e)){let n=Ex(e,t);n&&Object.assign(o,n)}if(Ba(e)&&Ts(e.shaderModuleIdentifier)){let n=t(e.shaderModuleIdentifier);n&&(o.shaderModuleIdentifier=n)}if(Object.keys(o).length!==0)return o}function r4(e,t,o){if(!Ve(o))return;let r=o.getStylePresetsForCodeGeneration(e);for(let n of r){let i=e.getNodes(n.cache.replicaInstances??[]);for(let a of i)t[a.id]??=a.toJS();t[n.id]??=n.toJS()}}function bg(e,t,o){for(let r of t){let n=e[r];if(!n)continue;let i=o(n);i&&i.id!==n&&e.set({[r]:i.id})}}function Nw({engine:e,node:t,pastedPresetMap:o,stylePresetNodes:r,shouldDetachTextStyles:n,breakpointVariantIds:i,shouldCreateNewPresets:a,reusePresetWithSameId:s}){if(!r)return;let l={pastedPresetMap:o,stylePresetNodes:r,shouldCreateNewPresets:a,reusePresetWithSameId:s},c=m=>ZW(e,m,l);if(bg(t,ex,c),t.remapTextStylePresets(c),!n)return;let d=Js(t),u=e.tree.getGroundNodeFor(t);for(let m of t.getStylePresetIdsForCodeGeneration()){let h=r.find(T=>T.id===m);if(!h||!Ga(h))continue;let C=Kl(r,h);if(d){nu(e.tree,d,t,C,h);continue}if(i?.has(u.id)&&Ae(u)){let T=dp(C,N=>(N.breakpointWidth??0)>u.width)??h;t.detachTextStylePreset(T,!1);continue}t.detachTextStylePreset(h,!1)}}function ZW(e,t,{pastedPresetMap:o,stylePresetNodes:r,shouldCreateNewPresets:n,reusePresetWithSameId:i}){if(!r)return;let a=r.find(m=>m.id===t);if(!a)return;let s=e.tree.get(t);if(Ga(s)&&(i||s.equals(a)))return o.set(t,s),s;if(!n)return;let l=Mn(e.tree),c=l.getTextStylePresets().find(m=>m.equals(a));if(c&&Ga(c))return o.set(t,c),c;let d=s?a.clone():a.cloneWithIds();e.tree.insertNode(d,l.id),o.set(t,d);let u=r.filter(m=>m.originalid===t);for(let m of u){let h=e.tree.get(t);if(h&&kS(h)&&h.equals(m)){o.set(t,h);continue}let T=h?m.clone():m.cloneWithIds();e.tree.insertNode(T,l.id),o.set(t,T)}return d}function xw({engine:e,node:t,pastedPresetMap:o,stylePresetNodes:r}){if(!r)return;let n={pastedPresetMap:o,stylePresetNodes:r},i=a=>QW(e,a,n);bg(t,ox,i),t.remapLinkStylePresets(i)}function QW(e,t,{pastedPresetMap:o,stylePresetNodes:r}){if(!r)return;let n=r.find(d=>d.id===t);if(!n||!Do(n))return;let i=e.tree.get(t);if(i&&Do(i)&&i.equals(n))return o.set(t,i),i;let s=Mn(e.tree),l=s.getLinkStylePresets().find(d=>d.equals(n));if(l&&Do(l))return o.set(t,l),l;let c=i?n.clone():n.cloneWithIds();return e.tree.insertNode(c,s.id),o.set(t,c),c}function Pw({engine:e,node:t,pastedPresetMap:o,stylePresetNodes:r}){if(!r)return;let n={pastedPresetMap:o,stylePresetNodes:r},i=a=>KW(e,a,n);bg(t,rx,i),t.remapInlineCodeStylePresets(i)}function KW(e,t,{pastedPresetMap:o,stylePresetNodes:r}){if(!r)return;let n=r.find(d=>d.id===t);if(!n||!pr(n))return;let i=e.tree.get(t);if(i&&pr(i)&&i.equals(n))return o.set(t,i),i;let s=Mn(e.tree),l=s.getInlineCodeStylePresets().find(d=>d.equals(n));if(l&&pr(l))return o.set(t,l),l;let c=i?n.clone():n.cloneWithIds();return e.tree.insertNode(c,s.id),o.set(t,c),c}function n4(e){if(z(e))return{id:e.id,pagePath:e.pagePath,webMetadata:e.webMetadata,dataIdentifier:e.dataIdentifier}}function i4(e,t,o,r,n){let i={},a=new Set;function s(l){iu(l,c=>{if(n.has(c))return;let d=qW(e,c);d&&(i[c]=d);let u=sN(c,t,e,a);u&&Object.assign(i,u)})}for(let l of o.walk())s(l);return z(r)&&s(r),{moduleData:i}}function qW(e,t){let o=he(t);if(o&&o.kind==="localModuleExport"){let r=e.getPersistedModuleByLocalId(o.localId);return r?(S(r.files.module,"expected module typed file in persisted module"),Oc(r.id,r.saveId,r.files.module,o.exportSpecifier)):void 0}if(o&&o.kind==="externalModuleExport")return o}function YW(e,t,o){let r=he(t);if(fo(r))return S(e.initialized,"Cannot paste modules before modulesStore has been initialized."),e.getPersistedModuleByLocalId(r.localId)?.id===o.moduleId?null:o.value;if(Tr(r)&&r.kind==="externalModuleExport"){let n=e.getPersistedModuleByGlobalId(r.moduleId)?.localId;return n?Wc(r,n).value:null}return null}function ez(e,t,o,r,n){let i=r.cloneWithIds();i.set(n),e.removeNode(r),e.insertNode(i,t,o)}function a4(e,t,o,r){if(!r)return o;for(let n of o.root.walk())mt(n)&&n.children.forEach((i,a)=>{if(r){let s=au(i,c=>{let d=r[c];if(!d)return;let u=YW(t,c,d);return u||void 0});if(!s)return;let l=o.current(i);if(!l)return;ez(o,n.id,a,l,s)}});return o.commit(e)}function tz(e){return At(e)&&Ae(e)}function s4(e,t,o){let r=e.get(o.id);if(!r)return;let n=Js(r);if(!n||!Ne(n))return;let i=e.getNodes(n.cache.replicaInstances??[]).filter(tz);for(let{width:a,replicaInfo:s}of i){let l=t.get(a)??{},c=s.overrides[o.id];c&&(l[o.id]=c),t.set(a,l)}Ae(n)&&!t.get(n.width)&&t.set(n.width,{})}function vt(e,t,o,r){if(t){if(Hr(t)){let n=ud(t),i=e.get(n);if(i&&!(i.id in o)){let a=i.cloneWithIds();o[a.id]=a.toJS(),r&&(r[i.id]=Pd())}return}if(uv(t)){vt(e,t.color,o,r);return}if(ib(t)||nb(t)||sb(t)){for(let n of t.stops)vt(e,n.value,o,r);return}if(Ze(t)){for(let n of t)vt(e,n,o,r);return}if(_i(t)){vt(e,t.borderColor,o,r);return}}}function l4(e,t,o,r){for(let n in t)vt(e,t[n],o,r);if(Ve(t)){let n=t.getInlineStyleTokenVariables();if(vt(e,n,o,r),B(t.htmlContent)||B(t.textContent)){oz(e,t,o,r);return}let i=t.getTextStylePresets(!1);for(let a of i)a&&Vw(e,a,o,r);if(t.hasLinks()){let a=t.getLinkStylePresets(!0);for(let s of a){let l=e.getNodeWithTrait(s,Do);l&&Rw(e,l,o,r)}}}}function Vw(e,t,o,r){let n=e.getNodeWithTrait(t,wl);n&&(io(n)?(vt(e,n.textColor,o,r),vt(e,n.textStrokeColor,o,r),vt(e,n.textDecorationColor,o,r)):Do(n)?Rw(e,n,o,r):ri(n)?(vt(e,n.textColor,o,r),vt(e,n.textDecorationColor,o,r),vt(e,n.textStrokeColor,o,r),vt(e,n.borderColor,o,r),vt(e,n.fillColor,o,r),vt(e,n.lineColor,o,r)):pr(n)?(vt(e,n.inlineCodeTextColor,o,r),vt(e,n.inlineCodeFillColor,o,r),vt(e,n.borderColor,o,r)):nn(n)&&vt(e,n.borderColor,o,r))}function oz(e,t,o,r){for(let n of ps){let i=t[n];i&&Vw(e,i,o,r)}}function Rw(e,t,o,r){vt(e,t.linkTextColor,o,r),vt(e,t.linkTextDecorationColor,o,r),vt(e,t.linkTextBackgroundColor,o,r),vt(e,t.linkHoverTextColor,o,r),vt(e,t.linkHoverTextDecorationColor,o,r),vt(e,t.linkHoverTextBackgroundColor,o,r),vt(e,t.linkCurrentTextColor,o,r),vt(e,t.linkCurrentTextDecorationColor,o,r),vt(e,t.linkCurrentTextBackgroundColor,o,r)}function c4(e,t,o){let r=o-t;return Math.ceil(e/100*r+t)}function Iw(e,t,o){if(xt(t)){let r=he(t.dataIdentifier);if(!fo(r))return;let n=e.getNodeWithTrait(r.localIdName,Rt);n&&(o.set(t.dataIdentifier,n),Iw(e,n,o))}if(Rt(t))for(let r of t.variables){if(!md(r))continue;let n=he(r.dataIdentifier);if(!fo(n))continue;let i=e.getNodeWithTrait(n.localIdName,Rt);i&&(o.has(r.dataIdentifier)||(o.set(r.dataIdentifier,i),Iw(e,i,o)))}}function kw(e,t,o,r,n,i){let a=gx(n,z(o,!0));S(a.length>0,"Path must have at least one segment");let s=e.getRouteSegmentRootNode();return a.forEach((l,c)=>{let d=c===a.length-1,u=d?i?.positionInParent:void 0,m=Sd(l)?r:void 0;m&&(l=ng(m,l,e,t));let h=s.children.find(T=>T.segment===l),C=h&&d&&o;if(!h||C&&h.webPageId){let T=new mx({segment:l,webPageId:d?o?.id:void 0,dataIdentifier:m});e.insertNode(T,s.id,u),s=T}else C&&h.set({webPageId:o.id,dataIdentifier:m}),s=h}),S(bn(s),"Current parent should be the created RouteSegmentNode"),s}function ww(e,t){let o=Vn(e,t);return e.get(o?.parentid)?.children.findIndex(n=>n.id===o?.id)}function bs(e,t,o=!1){let r={};for(let n in e){let i={...e[n]};"itemsOrder"in i&&Array.isArray(i.itemsOrder)&&o&&(i.itemsOrder=Xl(i.itemsOrder,t)),r[t.get(n)??n]=i}return r}var su=class extends Map{get(t){let o=super.get(t);for(;o;){let r=super.get(o);if(r===void 0)break;o=r}return o}};function rz(e,t){if(rs(e)){if(!e.controls.target?.value)return;let o=t.get(e.controls.target.value);return o?{target:{...e.controls.target,value:o}}:void 0}if(Kr(e)){if(!e.controls.variantId?.value)return;let o=t.get(e.controls.variantId.value);return o?{variantId:{...e.controls.variantId,value:o}}:void 0}if(Qa(e)){if(!e.controls.overlay?.value)return;let o=t.get(e.controls.overlay.value);return o?{overlay:{...e.controls.overlay,value:o}}:void 0}}function Lw(e,t,o,r,n){let i=Z(o),a={},s=!1,l=Gd(t,o);for(let c in l){let d=i?kt(c):c;if(!wt(e,o,d))continue;let u=l[c];if(!Ze(u))continue;let m=[],h=!1;for(let C of u){if(n&&(Qa(C)||Vd(C))){h=!0;continue}let N=rz(C,r);if(!N){m.push(C);continue}m.push({...C,controls:{...C.controls,...N}}),h=!0}h&&(i?a[kt(c)]={type:"eventhandler",value:m}:a[c]=m,s=!0)}s&&o.set(a,e)}function nz(e,t,o,r){let n={};function i(l){let c=e.get(l);c&&e.linkNodeChangesTo(c,o.id)}let a=qx(o,t);for(let l of a){if(!wt(e,o,kt(l)))continue;let c=o.getRawControlProp(l);if(c){if(c.type==="slot"&&Ze(c.value)){let d=!1,u=c.value.map(m=>{if(!Ue(m))return m;let h="reference";if(!A(m[h]))return m;let C=r.get(m.reference);return C?(d=!0,i(C),{...m,[h]:C}):m});if(!d)continue;n[l]={type:"slot",value:u}}else if((c.type===null||c.type==="componentinstance")&&A(c.value)){let d=r.get(c.value);if(!d)continue;n[l]={type:"slot",value:[{id:"first-item",reference:d}]},i(d)}else if(Ze(c.value)){let d=!1,u=[];for(let m=0;m<c.value.length;m++){let h=c.value[m];if(!sd(h)||h.type!==null&&h.type!=="componentinstance"||!A(h.value))continue;let C=av(h)?h.id:Bt(),T=r.get(h.value);u.push({id:C,reference:T??h.value}),T&&(i(T),d=!0)}if(!d)continue;n[l]={type:"slot",value:u}}}}if(Wt(n))return;let s=_a(n);o.set(s,e)}function iz(e,t,o,r){let n={},i=t.componentForIdentifier(o.codeComponentIdentifier)?.properties;for(let a in i){if(!wt(e,o,kt(a)))continue;let s=i[a];if(s?.type!=="scrollsectionref")continue;let l=o.getRawControlProp(a);if(!l)continue;let c=Uv(s,l);if(!c||q(c)||!A(c.target))continue;let d=r.get(c.target);d&&(n[a]={type:"scrollsectionref",value:{...c,target:d}})}Wt(n)||o.set(_a(n),e)}function az(e,t){if(Zb(e)&&Ze(e.appearEffectScrollTargets)){let o=e.appearEffectScrollTargets.map(r=>{if(!r.target||q(r.target))return r;let n=t.get(r.target);return n?{id:Bt(),variant:r.variant,target:n}:r});e.set({appearEffectScrollTargets:o})}if(Ub(e)&&A(e.styleAppearEffectScrollTarget)){let o=t.get(e.styleAppearEffectScrollTarget);o&&e.set({styleAppearEffectScrollTarget:o})}if(Xb(e)&&Ze(e.styleTransformEffectScrollTargets)){let o=e.styleTransformEffectScrollTargets.map(r=>{if(!r.target||q(r.target))return r;let n=t.get(r.target);return n?{id:Bt(),style:r.style,target:n}:r});e.set({styleTransformEffectScrollTargets:o})}if(Ud(e)&&e.dragEffectConstraintElement){let o=t.get(e.dragEffectConstraintElement);o&&e.set({dragEffectConstraintElement:o})}if(fI(e)&&A(e.textEffectScrollTarget)){let o=t.get(e.textEffectScrollTarget);o&&e.set({textEffectScrollTarget:o})}}function Wn(e,t,o,r,n){if(o=o.draftOrCurrent(),(Qt(o)||xd(o))&&Lw(e,t,o,r,n),Z(o)&&(Lw(e,t,o,r,n),nz(e,t,o,r),iz(e,t,o,r)),Vl(o)&&az(o,r),er(o)&&o.formSubmitButtonId){let a=r.get(o.formSubmitButtonId);a&&o.set({formSubmitButtonId:a})}if(IN(o)&&o.dataSourceLoaderId){let a=r.get(o.dataSourceLoaderId);a&&o.set({dataSourceLoaderId:a})}if(Ft(o)&&o.collectionRepeatedItemId){let a=r.get(o.collectionRepeatedItemId);a&&o.set({collectionRepeatedItemId:a})}if(xt(o)){let a=Dw(o.dataIdentifier,r);a&&o.set({dataIdentifier:a})}if(Rt(o)){let a=o.variables.map(s=>{if(!md(s))return s;let l=Dw(s.dataIdentifier,r);return l?{...s,dataIdentifier:l}:s});zi(o.variables,a)||o.set({variables:a})}$r(o)&&sz(o,r);let i=HN(e,o,a=>{if(!a.providerId)return;let s=r.get(a.providerId);if(s)return $t(r.get(a.id)??a.id,s)});if(i&&o.set(i),o.children)for(let a of o.children)Wn(e,t,a,r,n);return o}function Dw(e,t){let o=he(e);if(!fo(o))return null;let r=t.get(o.localIdName);return r?Oi(o.type,r,o.exportSpecifier).value:null}function sz(e,t){let o=e.getControlProps();for(let[r,n]of Object.entries(o)){if(n?.type==="collectionreference"&&A(n.value)){let i=t.get(n.value);i&&e.setControlProp(r,{...n,value:i})}if(n?.type==="multicollectionreference"&&!F(n.value)&&!B(n.value)){let i=n.value.map(a=>t.get(a)??a);zi(n.value,i)||e.setControlProp(r,{...n,value:i})}}}function Fw(e){return _p(e)||Rt(e)}var Aw=75,dz={mutable:!0,update:0};function ql(e,t,o,r,n=!1){function i(a,s,l=!1){let c=new a.constructor;c.assign(a,dz,{cache:c.cache,id:c.id}),qa(c)&&(c.itemsOrder=void 0),a.cache.insideVariant=l;let d=Rn(a)?a.getChildrenInVisualOrder():a.children;d&&(c.children=d.map(h=>i(h,c.id,l)));let u={parentid:s},m=au(a,h=>{let C=he(h);if(C.kind==="localModuleExport"){let T=t.get(C.localId);if(T)return`${T}:${C.exportSpecifier}`}else if(C?.kind==="externalModuleExport"){let T=o.get(C.moduleId);if(T)return Wc(C,T).value}});if(m&&Object.assign(u,m),At(a)&&!Ee(a)&&Object.assign(u,{replicaInfo:void 0,originalid:void 0,...a.replicaInfo.overrides[a.replicaInfo.master],_deleted:void 0}),n&&Object.assign(u,{duplicatedFrom:ST(a.duplicatedFrom,a.id)}),c.assign(u),r){if(r.has(a.id)){let h=r.get(a.id);h&&r.set(h,c.id)}r.set(a.id,c.id),a.originalid&&!r.has(a.originalid)&&r.set(a.originalid,c.id)}return c}return i(e,void 0,Ee(e))}function pz(e){let t=new Map;for(let o of e)if(o.type==="local"){let r=o.moduleId;t.set(o.localId,Oc(r,o.saveId,o.file).value)}return t}async function Ew(e){let t=new Map;for await(let o of e)if(o.type==="local"&&o.moduleType==="css"){let r=await Ow({moduleId:o.moduleId,saveId:o.saveId}),{__treeSerializationVersion:n,...i}=r,a=n||Aw,{root:s}=Sf({root:i,version:a}),l=lh(s);io(l)&&t.set(l.id,l)}return[...t.values()]}function Mw(e,t,o){let r=pz(o.imports),n=new Map,i=[];for(let a of e.walk())iu(a,s=>{let l=he(s);if(fo(l)){let c=r.get(l.localId);if(!c)return;let{moduleId:d,saveId:u,file:m}=he(c);l=BC(l,d,u,m)}if(l.kind==="externalModuleExport"){let c=t.getPersistedModuleByGlobalId(l.moduleId);c?n.set(l.moduleId,c.localId):i.push(l)}});return{identifiers:i,localIdsToExternalIdentifiers:r,externalModuleIdsToLocalIds:n}}async function Ow({moduleId:e,saveId:t}){try{return await(await fetch(`${Mc().modulesCDN}/${e}/${t}/tree.json`)).json()}catch(o){vr(o)}}async function Ww(e,t){let[o,r]=await Promise.all([Ow(t),e.stores.modulesStore.getModuleDependencies(t)]);S(o,"Can't get tree.json for module identifier"),S(r,"Can't get dependencies for module identifier");let{__treeSerializationVersion:n,...i}=o,a=n||Aw,{root:s}=Sf({root:i,version:a}),l=lh(s);return S(Fw(l),"Node should be un-linkable."),{node:l,dependencies:r}}async function zw(e,t,o){if(e.remoteDocument?.projectId&&t.assets.length>0)try{await e.stores.assetStore.assetService?.duplicateModuleAssets(o.moduleId,o.saveId)}catch{}}function uz(e){return dP.has(e)}function C6(e,t){let o=aN(e.stores.modulesStore,e.tree,t);return o?uz(o.moduleId):!1}function S6(e,t){let o=e.tree.getNodeWithTrait(t,ed);if(!o)return!0;let r=e.componentLoader.componentForIdentifier(o.codeComponentIdentifier);return!!(r&&GC(r.annotations,"framerDisableUnlink"))}var mz=Je("importExternalSmartComponentOrWebpage");function fz(e,t,o){let r=new Set(e.stores.scopeStore.getSmartComponentNodes().map(n=>n.name).filter(A));return o||t===null?Eo(o??"Component",r):Eo(t,r)}function hz(e,t){let o={...e};switch(o.name){case"convertFromBoolean":{A(o.truthy)&&(o.truthy=t.get(o.truthy)??o.truthy),A(o.falsy)&&(o.falsy=t.get(o.falsy)??o.falsy);break}case"addImageAlt":case"arrayLength":case"arrayToArray":case"contains":case"containsAll":case"containsAny":case"convertFromEnum":case"convertFromString":case"endsWith":case"enumToDisplayName":case"equals":case"extractDateSegment":case"getGridColumnCSSValue":case"getGridRowCSSValue":case"getNumericColumnGap":case"greaterThan":case"htmlEscape":case"htmlUnescape":case"isAfter":case"isBefore":case"isBetweenDates":case"isEven":case"isIncludedIn":case"isOdd":case"isSet":case"jsonStringify":case"lessThan":case"negate":case"numberToPixelString":case"numberToString":case"offsetAndLimitArray":case"percentageToCornerShape":case"prefix":case"radiusForCorner":case"reverseArray":case"startsWith":case"suffix":case"toAxisOverflow":case"toBoolean":case"toDateString":case"toggleInList":case"toImageSrc":case"toNumber":case"toOverflowWithClipFallback":case"toResponsiveImage":case"toString":case"toZIndex":{mz.reportError("remapVariantIdsInValueTransform encountered a transform that can't handle. If it mapped to component variants, they are broken and the user needs to manually remap them.",{transformName:o.name});break}default:G(o)}return o}function Ng(e,t,o,r,{insertionIndex:n,preferredName:i,enterIsolation:a=!0,localIdsToExternalIdentifiers:s=new Map,externalModuleIdsToLocalIds:l=new Map,instance:c,renamedIds:d=new Map,isAutoDetach:u=!1,intrinsicSize:m,textStylePresets:h,linkStylePresets:C,inlineCodeStylePresets:T,pastedPresetMap:N=new Map,shouldPasteTextStyles:P=!1,reusePresetWithSameId:R,abTesting:W=!1,cloneWithScopeIds:M=!1}={}){let H=u?gp.createWithRouteSegmentRoot():e.tree,J={children:[]};if(z(t)){let k=t.id===e.tree.root.homePageNodeId?"Home":Si(e.tree,t),{suggestedName:ne,path:ae}=ig(i??k??"Page",e.tree,e.componentLoader,t,!0);J.pagePath=ae,J.name=ne}else J.name=fz(e,t.resolveValue("name"),i);let K;M?K=t.cloneWithIds(J):(K=t.clone(J),d.set(t.id,K.id)),ue(t)&&YR({componentId:K.id,source:r});let oe=K.instanceIdentifier,me=Ne(o),j=ql(o,s,l,d,me),Pe=[j];K.baseVariantId=j.id,K.addChild(j);for(let k of t.children)if(!(k.id===o.id||Qo(k)))if(At(k)&&Ee(k)){let ne=bs(k.replicaInfo.overrides,d,!0);if(Re(k)){ne[j.id]??={};let Te=ne[j.id];Te.top=k.top,Te.left=k.left,Te.right=k.right,Te.bottom=k.bottom,Te.centerAnchorX=k.centerAnchorX,Te.centerAnchorY=k.centerAnchorY}let ae=ze.create(e.tree,j,{overrides:ne,duplicatedFrom:hl(k)});d.set(k.id,ae.id),Pe.push(ae),K.addChild(ae)}else{let ne=ql(k,s,l,void 0,me);Pe.push(ne),d.set(k.id,ne.id),K.addChild(ne)}H.insertNode(K,void 0,n);for(let k=0;k<t.children.length;k++){let ne=t.children[k];if(!Qo(ne))continue;let ae=ze.create(H,j,{overrides:bs(ne.replicaInfo.overrides,d,!0),inheritsFrom:d.get(ne.replicaInfo.inheritsFrom),duplicatedFrom:hl(ne)});d.set(ne.id,ae.id),Pe.push(ae),H.insertNode(ae,K.id,k)}let pe=Hp(H);for(let k of Pe){if(Wn(H,e.componentLoader,k,d,!1),!h&&!C&&!T)continue;let ne=[];for(let ae of k.walk())Ve(ae)&&ne.push(ae);for(let ae of ne){let Te=ae.getStylePresetIdsForCodeGeneration();if(C&&xw({engine:e,node:ae,pastedPresetMap:N,stylePresetNodes:C}),T&&Pw({engine:e,node:ae,pastedPresetMap:N,stylePresetNodes:T}),h){if(P)Nw({engine:e,node:ae,pastedPresetMap:N,stylePresetNodes:h,shouldDetachTextStyles:!1,shouldCreateNewPresets:P,reusePresetWithSameId:R});else for(let gt of h)if(Te.has(gt.id))if(z(t)&&Ne(k)){if(Jo(k)){let yt=Kl(h,gt);nu(H,j,ae,yt,gt)}}else(Jo(k)||wt(H,ae,"html"))&&ae.detachTextStylePreset(gt,!1)}}for(let ae of ne){wt(H,ae,"html")&&(ae.remapTextStylePresets((Te,gt)=>{let yt=yb(gt)?gt:"p",be=ae.getNodeTextStylePreset(H,yt)??pp(H,yt)??vb.createDefault(yt);return cx(e,be),be}),ae.remapLinkStylePresets(()=>{let Te=ae.getNodeLinkStylePreset(H)??sx(H)??QN.createDefault();return lx(e,Te),Te}),ae.remapInlineCodeStylePresets(()=>{let Te=ae.getNodeInlineCodeStylePreset(H)??ix(H)??new zN;return ax(e,Te),Te}));for(let Te in pe)wt(H,ae,Te)&&ae.set({[Te]:pe[Te]})}}let{codeGenerationStore:Ie}=e.stores;for(let k of N.values())qe(k)||Ie.createModuleFromComponentSource(k).catch(vr);if(u)return H.commit(e.componentLoader),K.draftOrCurrent();{let k=H.get(K.baseVariantId);if(k&&xo(k))for(let ne of K.children)tl(ne)&&ne.replicaInfo.master===k.id&&ze.registerInInheritedNode(k,ne)}e.scheduler.process(()=>{if(!c)return;let k=e.tree.current(c)?.codeComponentIdentifier;if(k)for(let ne of e.stores.treeStore.treeIndex.codeComponentNodeIds){let ae=e.tree.getNodeWithTrait(ne,Z);if(!ae||ae.codeComponentIdentifier!==k)continue;let Te={},gt={},yt=ae.getRawControlProps();if(yt.variant?.value&&A(yt.variant.value)){let be=d.get(yt.variant.value)??j.id,se={type:"enum",value:be};Te.variant=se}else if(yt.variant?.value&&Xt(yt.variant.value)){let be=yt.variant.value,se=be.transforms.map(Ut=>hz(Ut,d)),Nt={type:"enum",value:{...be,transforms:se}};Te.variant=Nt}for(let be of Tg){let se=ae[be];A(se)&&(gt[be]=d.get(se)??void 0)}fi(e.tree,ae).forEach(({relatedNode:be,replicaRoot:se})=>{let Nt=se.replicaInfo.overrides[be.originalid];if(!Nt)return;let Ut={};for(let uo of Tg){if(!(uo in Nt))continue;let lr=Nt[uo];A(lr)&&(gt[uo]=d.get(lr)??void 0)}if(be.set(Ut),!(kt("variant")in Nt))return;let oo=be.getRawControlProp("variant");if(!oo||!A(oo.value))return;let Cr=d.get(oo.value);if(!Cr)return;let sr={type:"enum",value:Cr};be.set(_a({variant:sr}))}),ae.set({codeComponentIdentifier:oe,...gt,..._a(Te)})}});let we=Ie.createModuleFromComponentSource(K,m);if(c&&we.then(e.scheduler.wrapHandler(()=>{if(c=e.tree.get(c?.id),!c)return;let k=e.stores.treeStore.tree.getScopeNodeFor(c)?.loaded;if(!k||!un(k))return;let ne=e.stores.treeStore.tree.get(k.baseVariantId);ne&&xo(ne)&&Ie.updateComponent(k.id).catch(vr)})).catch(vr),a&&(e.stores.chromeStore.contentPanelTab="Layers",e.stores.scopeStore.select(K.id,{keepHistory:!0})),z(K)&&!W){S(A(J.pagePath),"pagePath should be a string");let k=ww(e.tree,t.id),ne=te(k)?k+1:void 0;kw(e.tree,e.componentLoader,K,K.dataIdentifier,J.pagePath,{positionInParent:ne})}return K.draftOrCurrent()}async function $w(e,{identifier:t,enterIsolation:o,instance:r,isAutoDetach:n,renamedIds:i=new Map,info:a}){let{node:s,dependencies:l}=await Ww(e,t);S(_p(s),"Should be a generated node.");let c=e.tree.get(r?.getPrimaryId());S(!c||Z(c),"instance should be a code component.");let d=s.children.find(P=>P.id===s.baseVariantId);S(d&&xo(d),"Unlink: Can't unlink a tree which doesn't have a Primary Variant node");let{identifiers:u,localIdsToExternalIdentifiers:m,externalModuleIdsToLocalIds:h}=Mw(s,e.stores.modulesStore,l);if(await fw(u.map(P=>P.value),e.stores.modulesStore,e.componentLoader),u.some(P=>{let R=e.componentLoader.dataForIdentifier(P.value);return R?qT(R):!1})){fs({type:"add",variant:"info",text:"Remove collection references before unlinking"});return}let T=await Ew(l.imports);return await zw(e,l,t),await e.stores.modulesStore.addExternalModulesToProject(u,{onTreeUpdate:()=>{let P=e.tree.current(c),R=ff(a.module.metadata.intrinsicWidth,!0)??200,W=ff(a.module.metadata.intrinsicHeight,!0)??200,M=Ng(e,s,d,"unlink",{enterIsolation:o,localIdsToExternalIdentifiers:m,externalModuleIdsToLocalIds:h,instance:P,renamedIds:i,isAutoDetach:n,intrinsicSize:{width:R,height:W},textStylePresets:T});return P&&ue(M)&&gw(e,P,M),M}})}async function u3(e,t){let o=await $w(e,t);if(!o)return;S(ue(o),"node should be a smart component");let{isAutoDetach:r}=t;return r||await e.stores.codeGenerationStore.untilCompiled(o.id),o.draftOrCurrent()}async function m3(e,t){let[o]=await e.stores.modulesStore.preloadExternalModules([t]);if(!o)return;let r=await $w(e,{identifier:t,enterIsolation:!1,info:o});S(z(r),"node should be a web page");let{path:n,suggestedName:i}=ig(r.resolveValue("name")??"Page",e.tree,e.componentLoader,r,!0);return e.scheduler.processWhenReady(()=>{e.tree.current(r)?.set({name:i,pagePath:n});let a=e.stores.scopeStore.active;Tw(a)&&bw(e,a,r),e.stores.scopeStore.select(r.id,{keepHistory:!1})}),r}function Gw(e,t){let o=t.getAbTestingChildren(e.tree)??qn(),r;for(let a=0;a<=o.length;a++){let s=a===0?"Variant":`Variant ${a}`;if(o.every(l=>l.name!==s)){r=s;break}}let n=o[o.length-1]??t,i=Ng(e,t,t.getPrimaryVariant(),"duplicate",{enterIsolation:!1,preferredName:r,insertionIndex:e.tree.root.children.findIndex(a=>a.id===n.id)+1,abTesting:!0});if(i.set({abTestingParentId:t.abTestingParentId??t.id,abTestingDistributionWeightPpm:Px().abTestingDistributionWeightPpm,isDraft:void 0}),Lt("ab_variant_create",{pageId:i.id,abTestingParentId:t.abTestingParentId??t.id}),e.stores.scopeStore.select(i.id,{keepHistory:!1}),e.stores.chromeStore.contentPanelTab="Pages",!t.abTestingParentId){let a=Vn(e.tree,t.id)?.id??Cx;a&&e.stores.chromeStore.expandRouteSegment(a)}}function Hw(e,t,o,r){let n=uw(e,{isAddingTest:!1});if(n!==null){pw(e,r,n);return}let i=t.getAbTestingFunnel(o)?.status===2,a=e.scheduler.wrapHandler(()=>Gw(e,t));if(!i)return a();e.stores.modalStore.set({type:"ConfirmUpdatingAbVariants",source:r,title:"Updating Variants",description:"Updating variants while running an A/B test could potentially skew your results.",confirmLabel:"Confirm",onConfirm:a,variant:"destructive"})}function lu(e){let t=e.getContentManagementNode();if(t)return S(t.isLoaded(),"ContentManagementNode should be loaded"),t;let o=new fN;return e.insertNode(o,e.root.id),o}function _w(e){if(e!==void 0)switch(e){case 2:return"auto";case 0:return"fixed";case 3:return"fraction";case 1:return"percentage";case 4:return"viewport";case 5:return"fit-image";default:G(e)}}function jw(e,{widthType:t,heightType:o},r){if(!Re(e))return;let n=t!==void 0&&e.widthType!==t,i=o!==void 0&&e.heightType!==o;!n&&!i||ok({widthType:_w(t),heightType:_w(o),source:r,nodeType:e.__class,componentId:Z(e)?e.codeComponentIdentifier:void 0})}function xg(e){if(!mt(e)||$e(e))return 0;let t=0,o=e.children.length;return t+=o,e.children.forEach(r=>{t+=xg(r)}),t}function Uw(e,t,o,r,n){let i=Kp(r,o),a=new Map(Object.entries(i)),s=new Map;s.set(n,a);let l={};for(let c of e.walk()){let d=cp(t,n,c,s);d&&(l[c.getPrimaryId()]=d)}return l}function Jw(e){let{left:t,top:o,right:r,bottom:n,centerAnchorX:i,centerAnchorY:a,constraintsLocked:s,width:l,widthType:c,height:d,heightType:u,aspectRatio:m,name:h,...C}=e;return C}function Xw(e,t){let o=e.getPropertyControlsForIdentifier(t.codeComponentIdentifier);if(!o)return;let r={},n=Object.keys(o);for(let i of n){let a=o[i];if(!a||a.type!=="eventhandler")continue;let s=t.getRawControlProp(i);if(!s)continue;let{value:l}=s;!Array.isArray(l)||l.length===0||(r[i]=l)}return r}function cu(e,{opacity:t,rotation:o}){if(q(t))e.opacity=t;else if(e?.opacity||t){let r=te(t)?t:1;e.opacity=(e.opacity??1)*r}if(q(o))e.rotation=o;else if(e?.rotation||o){let r=te(o)?o:0;e.rotation=(e.rotation??0)+r}}function n8(e){return e.every(t=>Fe(t)||Xe(t)||Z(t))}function i8(e,t,o){return o?!1:t.every(r=>{if(!Fe(r)&&!Z(r)&&!Ve(r)||Ne(r)||Fe(r)&&es(r).length===0)return!1;if(Z(r)){let n=r.getSupportedLayout(e);if(!Yn(n.width)||!Yn(n.height))return!1}return r.widthType!==2||r.heightType!==2})}function Zw(e,t,o){for(let r of t)if(Xe(r)||Z(r))r.set({widthType:2,heightType:2}),Xe(r)&&o&&Lt("layout_fit_text",{source:o});else if(Fe(r)){let n={widthType:2,heightType:2,aspectRatio:null};no(r)||tu(e,r,n),yg(e.tree,"width",r),yg(e.tree,"height",r),SN(r)&&(n.framePreset=null),r.set(n),o&&Lt("layout_stack",{layoutType:"stack",source:o})}}var gz=/([a-z]+)([\dA-Z]+)/gu;function yz(e){return e.replaceAll(gz,(t,o,r)=>`${o}_${r.toLowerCase()}`)}function Pg(e){return Object.fromEntries(Object.entries(e).map(([t,o])=>[yz(t),o]))}var xi=Je("ChatStreamer"),Cz="/ai/v2/chat/",Qw=-1,Sz=Bt(),du=class{constructor(t){this.type=t;D(this,"streamID","");D(this,"subscribers",new Set);D(this,"currentStream");D(this,"abortController");D(this,"cancel",()=>{this.abortController&&(xi.debug("Stream",this.streamID,"cancelled"),this.abortController.abort(),this.abortController=void 0)})}async start({model:t,user:o,messages:r,responseFormat:n,reasoning:i,onText:a}){this.cancel(),Qw++,this.streamID=`${Sz}-${Qw}-${this.type}`,this.emitChatEvent({type:"start",streamID:this.streamID,messages:r});let s=!1,l=h=>{let C;Ue(h)&&A(h.message)?C=h.message:C=String(h),s||(s=!0,this.emitChatEvent({type:"done",streamID:this.streamID,error:C})),xi.warn("ChatStreamer error:",h)},c=()=>{s||(s=!0,this.emitChatEvent({type:"done",streamID:this.streamID}))};this.abortController=new AbortController;let d="",u=n?Pg(n):void 0,m=Pg({messages:r,model:t,stream:!0,user:o,responseFormat:u,reasoning:i});this.currentStream=pP.postStream(Cz,{signal:this.abortController.signal,openWhenHidden:!0,onclose:()=>{if(s)return;s=!0;let h="Chat stream closed before done";throw new Error(h)},onerror:h=>{throw s=!0,h},onmessage:h=>{if(xi.trace(h.event,h.id,h.data),h.data==="[DONE]"){xi.debug("ChatStreamer finished with content:",d),c();return}if(h.data.length===0){xi.debug("ChatStreamer stream empty");return}let C=JSON.parse(h.data);if("error"in C){let P=C.error,R=JSON.parse(P.metadata.raw);xi.error(`ChatStreamer error '${P.message}' with code`,P.code,"and raw error",R);return}let T=C.choices[0];if(!T)return;T.finish_reason&&xi.debug("Finishing chat completion with reason:",T.finish_reason);let{content:N}=T.delta;N&&(d+=N,this.emitChatEvent({type:"stream",streamID:this.streamID,content:N}),a(N))}},m);try{await this.currentStream}catch(h){throw l(h),h}finally{this.currentStream=void 0,this.abortController=void 0}return d}get isFinished(){return F(this.currentStream)}async waitUntilFinished(){await this.currentStream}subscribeChatEvent(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}emitChatEvent(t){this.subscribers.forEach(o=>{try{o(t)}catch(r){xi.error(r)}})}};var Vg=class{constructor(t){this.separator=t;D(this,"buffer","");D(this,"scanIndex",0);D(this,"inQuote",null);D(this,"text","")}append(t){this.buffer+=t,this.text+=t}getText(){return this.text}process(){for(;this.scanIndex<this.buffer.length;){let t=this.buffer[this.scanIndex];if(t==='"'||t==="'"){this.isEscaped(this.scanIndex)||(We(this.inQuote)?this.inQuote=t:this.inQuote===t&&(this.inQuote=null)),this.scanIndex++;continue}if(We(this.inQuote)&&this.buffer.startsWith(this.separator,this.scanIndex)){let o=this.buffer.slice(0,this.scanIndex);return this.buffer=this.buffer.slice(this.scanIndex+this.separator.length),this.scanIndex=0,o}if(We(this.inQuote)&&this.separator.length>1&&this.scanIndex>=this.buffer.length-this.separator.length+1)return;this.scanIndex++}}isEscaped(t){let o=0,r=t-1;for(;r>=0&&this.buffer[r]==="\\";)o++,r--;return o%2===1}finalize(){this.buffer.trim().length!==0&&(this.buffer.endsWith(this.separator)||(this.buffer+=this.separator,this.text+=this.separator))}},pu=class{constructor(t,o,r,n){this.separator=t;this.parseCommand=o;this.onCommand=r;this.onError=n;D(this,"buffer");D(this,"commands",[]);D(this,"isFinalized",!1);this.buffer=new Vg(t)}addToken(t){return S(!this.isFinalized,"Parser has been finalized, cannot add more tokens"),this.buffer.append(t),this.processBuffer(),this.buffer.getText()}processBuffer(){let t;for(;(t=this.buffer.process())!==void 0;)try{let o=this.parseCommand(t);this.commands.push(o),this.onCommand(o,t)}catch(o){this.onError?.(t,o)}}finalize(){return this.isFinalized?{commands:this.commands,text:this.buffer.getText()}:(this.isFinalized=!0,this.buffer.finalize(),this.processBuffer(),{commands:this.commands,text:this.buffer.getText()})}};var vz={"openai/gpt-3.5-turbo-1106":!0,"openai/gpt-4":!0,"openai/gpt-4o-2024-08-06":!0,"openai/gpt-4o-mini-2024-07-18":!0,"google/gemini-2.0-flash-001":!0,"google/gemini-2.5-flash":!0,"google/gemini-2.5-flash-lite":!0,"google/gemini-2.5-pro":!0,"google/gemini-3-pro-preview":!0,"google/gemini-3-flash-preview":!0,"openai/gpt-4.1":!0,"openai/gpt-5.1":!0,"openai/gpt-5.2":!0,"anthropic/claude-haiku-4.5":!0,"anthropic/claude-sonnet-4.5":!0,"anthropic/claude-opus-4.5":!0,"moonshotai/kimi-k2.5":!0},T8=Wa(vz);function b8(e){switch(e){case"google/gemini-2.0-flash-001":case"google/gemini-2.5-flash":case"google/gemini-2.5-flash-lite":case"google/gemini-2.5-pro":case"google/gemini-3-pro-preview":case"google/gemini-3-flash-preview":case"openai/gpt-4.1":case"openai/gpt-3.5-turbo-1106":case"openai/gpt-4":case"openai/gpt-4o-2024-08-06":case"openai/gpt-4o-mini-2024-07-18":return{effort:"minimal",enabled:!0};case"anthropic/claude-haiku-4.5":case"anthropic/claude-sonnet-4.5":case"anthropic/claude-opus-4.5":return{effort:"low",enabled:!0};case"openai/gpt-5.1":case"openai/gpt-5.2":return{effort:"none",enabled:!0};case"moonshotai/kimi-k2.5":return;default:G(e,"Model must have reasoning specified.")}}function I8(e){switch(e){case"google/gemini-2.5-flash":case"google/gemini-2.0-flash-001":case"google/gemini-2.5-flash-lite":case"google/gemini-2.5-pro":case"openai/gpt-4.1":case"openai/gpt-5.1":case"openai/gpt-5.2":case"openai/gpt-3.5-turbo-1106":case"openai/gpt-4":case"openai/gpt-4o-2024-08-06":case"openai/gpt-4o-mini-2024-07-18":return;case"moonshotai/kimi-k2.5":return{only:["fireworks","moonshotai"]};case"anthropic/claude-haiku-4.5":case"anthropic/claude-sonnet-4.5":return{ignore:["anthropic"]};case"anthropic/claude-opus-4.5":return{ignore:["anthropic","google-vertex"]};case"google/gemini-3-pro-preview":case"google/gemini-3-flash-preview":return{only:["google-vertex"]};default:G(e,"Model must have provider specified.")}}var N8={"openai/gpt-3.5-turbo-1106":"GPT-3.5 Turbo","openai/gpt-4":"GPT-4","openai/gpt-4o-2024-08-06":"GPT-4o","openai/gpt-4o-mini-2024-07-18":"GPT-4o Mini","google/gemini-2.0-flash-001":"Gemini 2.0 Flash","google/gemini-2.5-flash":"Gemini 2.5 Flash","google/gemini-2.5-flash-lite":"Gemini 2.5 Flash Lite","google/gemini-2.5-pro":"Gemini 2.5 Pro","google/gemini-3-pro-preview":"Gemini 3 Pro","google/gemini-3-flash-preview":"Gemini 3 Flash","openai/gpt-4.1":"GPT-4.1","openai/gpt-5.1":"GPT-5.1","openai/gpt-5.2":"GPT-5.2","anthropic/claude-haiku-4.5":"Haiku 4.5","anthropic/claude-sonnet-4.5":"Sonnet 4.5","anthropic/claude-opus-4.5":"Opus 4.5","moonshotai/kimi-k2.5":"Kimi K2.5"},x8={"openai/gpt-5.1":{allowedFileTypes:["image/*"],maxAttachments:10,totalSizeLimit:Rg(50)},"openai/gpt-5.2":{allowedFileTypes:["image/*"],maxAttachments:10,totalSizeLimit:Rg(50)},"anthropic/claude-sonnet-4.5":{allowedFileTypes:["image/*"],maxAttachments:5,totalSizeLimit:Rg(30),maxResolution:8e3}};function Rg(e){return e*1024*1024}var Tz=Je("OverlayCollector"),Is=class Is{constructor(t){D(this,"treeStore");D(this,"bindings");D(this,"bindingsByOverlayId",new Map);D(this,"bindingsByOverlayTriggerId",new Map);D(this,"relativeOverlayTriggerIds",new Set);this.treeStore=t.treeStore,this.bindings=t.bindings}static overlayMethod(t,o){return new I(`${t}.${o}`)}addOverlayTrigger(t,o){let r=this.treeStore.tree.get(t);if(!r)return;let n=this.treeStore.tree.get(o);if(!n)return;let i=this.treeStore.tree.get(n.getPrimaryId());if(!i)return;if(!n?.children?.find(c=>c.getPrimaryId()===t&&ut(c))){Tz.reportError("OverlayCollector: Tried to create a event handler to show an overlay which is not a descendant of the trigger.",{triggerId:o,overlayId:t});return}let s=this.bindingsByOverlayId.get(t)??this.bindings.create("overlay");this.bindingsByOverlayId.set(t,s);let l=this.bindingsByOverlayTriggerId.get(i.id)??new Map;return l.set(r.getPrimaryId(),s),this.bindingsByOverlayTriggerId.set(i.id,l),lt(r)&&this.relativeOverlayTriggerIds.add(i.id),I.fn(Is.overlayMethod(Is.OverlayBinding,lt(r)?"show":"toggle"))}hasAncestorOverlayBinding(t){if(!_r(t))return!1;let o=this.getOverlayIdForNode(t);return S(o,"overlayAncestorId must not be null when nodeIsInOverlay is true"),this.bindingsByOverlayId.has(o)}getOverlayIdForNode(t){return qe(t)?this.treeStore.tree.get(t.cache.overlayAncestorId)?.originalid:t.cache.overlayAncestorId}};D(Is,"OverlayBinding",p`overlay`),D(Is,"Api",{visible:"visible",show:"show",hide:"hide",toggle:"toggle"});var or=Is;function uu(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":return!0;default:return!1}}function Lr(e){return Z(e)&&!uu(e)&&!e.isVectorInstance}function Kw(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":case"framer/Prototype":return!0;default:return!1}}function qw(e){switch(e.codeComponentIdentifier){case"framer/Page":return"Page";case"framer/Scroll":return"Scroll";case"framer/Prototype":return"DeviceCodeComponent"}}var Yw=cr("componentPresets","componentPresets");function eL(e,t){let o=e.getPresetsListNode();return o?o.getComponentPresets().find(r=>r.componentIdentifier===t)??null:null}function tL(e,t){let{treeStore:o}=e.stores;if(o.tree.has(t.id))return;let r=eL(o.tree,t.componentIdentifier),n=Mn(o.tree),i=nx(n.children,s=>$a(s)&&s.componentIdentifier!==t.componentIdentifier);i!==-1&&(i+=1),o.tree.insertNode(t,n.id,i),Za(e)&&e.stores.codeGenerationStore.createModuleFromComponentSource(n).catch(vr),Tr(t.componentIdentifier)&&e.stores.modulesStore.addExternalModulesToProject([t.componentIdentifier],{onTreeUpdate(){}});let a=fl(t.componentIdentifier);r||e.scheduler.runWithFullyLoadedTree(()=>{let s=o.getLoadedIndexes();for(let l of s.richTextNodes)l.htmlContent&&wt(o.tree,l,a)&&l.setComponentPreset(t.componentIdentifier,t.id)},{runInBackground:!0,name:"insertComponentPreset"})}function bz(e,t){if(eL(e.tree,t.componentIdentifier))return;let r=Kf.createDefault(t);tL(e,r)}function J8(e,t,o){e.scheduler.processWhenReady(()=>{let n=Mn(e.tree).getComponentPresets(),i=new Set;for(let s of n){let l=s.resolveValue("name");l&&i.add(l)}let a=Kf.createDefault(t,{name:Eo(t.name,i)});tL(e,a);try{o&&o(a)}catch{}})}function X8(e,t){return e.getPresetsListNode()?.getComponentPresets().filter(r=>r.componentIdentifier===t)??[]}function Z8(e,t,o){let r=he(t);function n(a){let s=he(a);return s.kind==="externalModuleExport"&&r.kind==="externalModuleExport"&&s.moduleId===r.moduleId&&s.exportSpecifier===r.exportSpecifier}let i=e.getPresetsListNode();if(i){let a=i.getComponentPresets();for(let s of a)n(s.componentIdentifier)&&s.set({componentIdentifier:o})}S(!e.getService("loader"),"Tree should be fully loaded");for(let a of e.root.walk()){if(!Ve(a))continue;let s=a.getComponentPresets();for(let[l,c]of s){let d=fl(l);n(l)&&wt(e,a,d)&&(a.setComponentPreset(o,c),a.setComponentPreset(l,void 0))}}}function Q8(e,t,o){let r=t.find(n=>n.componentIdentifier===o);r&&bz(e,r)}var Iz=e=>[`.${e}[data-border="true"]::after, .${e} [data-border="true"]::after { content: ""; border-width: var(--border-top-width, 0) var(--border-right-width, 0) var(--border-bottom-width, 0) var(--border-left-width, 0); border-color: var(--border-color, none); border-style: var(--border-style, none); width: 100%; height: 100%; position: absolute; box-sizing: border-box; left: 0; top: 0; border-radius: inherit; corner-shape: inherit; pointer-events: none; }`],Nz=e=>[`.${e}[data-selection="true"] * ::selection, .${e} [data-selection="true"] * ::selection { color: var(--selection-color, none); background-color: var(--selection-background-color, none); }`],xz=e=>[`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar { width: 0px; height: 0px; }`,`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar-thumb, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar-thumb { background: transparent; }`,`.${e}[data-hide-scrollbars="true"], .${e} [data-hide-scrollbars="true"] { scrollbar-width: none; }`],oL="data-layout-template",Pz={0:Iz,1:xz,2:Nz},kg="-container",Ns,mu=class{constructor(t,o,r,n){this.entryNode=t;this.sourceNode=o;this.serializationId=r;this.cssVariableDefinitions=n;D(this,"sharedStyleIds",new Set);D(this,"rules",{});D(this,"nodeClassNames",new Map);ce(this,Ns,new Set);D(this,"selectorsByNodeId",new Map)}getNodeIdForClassName(t){let o=t.endsWith(kg)?t.slice(0,-kg.length):t;return this.nodeClassNames.get(o)}get(t=this.sourceNode.id){return t===this.sourceNode.id&&this.getWideGamutColorRule(),{rules:this.rules[t]??new Map}}createScopingSelector(t,o){if(t){let r=`.${this.serializationId}.${aT}v-${_t(t)}`;return o?`${r}.${o}`:r}return`.${this.serializationId}`}createSelector(t,o,r,n,i=t===this.sourceNode.id){let a=this.createScopingSelector(r,n);return t===this.entryNode.id?`${a}.${o}, ${a} .${o}`:i?`${a}.${o}`:`${a} .${o}`}addRule(t,o,r={}){let{scope:n,gesture:i,container:a,ruleType:s=0,hasScopingSelector:l}=r,c=o.getPrimaryId(),d=sT(s,c);this.nodeClassNames.has(d)||this.nodeClassNames.set(d,o.id),a&&(d+=kg);let u=this.createSelector(c,d,n,i,l);this.selectorsByNodeId.set(c,u);let m=r.variant?.id??this.sourceNode.id;if(this.createRule(u,Ff(t),m),Rz(t)){let h=wz(o,this.serializationId);for(let C in h)this.createRule(C,Ff(h[C]),m)}return d}addConditionalRule(t){E(this,Ns).add(t)}hasConditionalRule(t){return E(this,Ns).has(t)}conditionalRules(t){let o=[];return E(this,Ns).forEach(r=>{let n=Pz[r],i=n(t);o.push(...i)}),o}addSharedStyle(t){this.sharedStyleIds.add(t)}createRule(t,o,r=this.sourceNode.id){let n=this.rules[r];if(n){n.set(t,o);return}this.rules[r]=new Map([[t,o]])}getWideGamutColorRule(){let t=this.cssVariableDefinitions.getWideGamutColorRules(`.${this.serializationId}`,this.selectorsByNodeId);t.length!==0&&this.createRule("@supports (color: color(display-p3 1 1 1))",t.join(" "))}};Ns=new WeakMap;var Vz="viewTransitionName";function Rz(e){return Vz in e&&kz(e)}var rL="-exclude";function kz(e){return UC(e.viewTransitionName)&&e.viewTransitionName.endsWith(rL)}function wg(e,t,o){let r=_t(e.getPrimaryId());return o?`${t}-${r}${rL}`:r}function wz(e,t){let o=wg(e,t,!0);return{[`::view-transition-group(${o})`]:{animation:"none !important"},[`::view-transition-new(${o})`]:{animation:"none !important"},[`::view-transition-old(${o})`]:{animation:"none !important"}}}function nL(e,t,o){return!!(et(e)||et(t)||e.id===o.rootId)}var fu=class{constructor(t,o){this.repeaterNode=t;this.parent=o;D(this,"subqueries",new Map);D(this,"variableDependencies",new Map);D(this,"childRepeaterIds",new Set)}addSubquery(t,o,r){let n=this.getSubqueries(t);n.set(o,r),this.subqueries.set(t,n),this.childRepeaterIds.add(o)}getSubqueries(t){return this.subqueries.get(t)??new Map}addVariableDependencies(t,o){let r=this.getVariableDependencies(t);r.push(...o),this.variableDependencies.set(t,r)}getVariableDependencies(t){return this.variableDependencies.get(t)??[]}};function Lg(e,t){if(!Jr(e)||F(e.visible))return!0;if(B(e.visible)){let o=t.createDeduplicatedDynamicValueBinding(e.visible,e,"visible");return p`${o} !== false`}return e.isVisible()}function Dg(e,t,o,r){if(o.inComponentSlot||r||Ve(e)||so(e)||lt(e)||on(e)||lo(e)&&at.isOn("layoutScroll")||Qt(e)&&bT.some(i=>(e[i]?.length??0)>0)||co(e)&&!Xe(e)||ss(t.scopeType)&&(ep(e)||Ci(e)||hd(t.treeStore.tree,e)&&Yd(e)))return!0;switch(t.scopeType){case"CanvasPage":return!0;case"SmartComponent":return!0;case"LayoutTemplate":case"WebPage":case"DesignPage":if(Ee(e)||Zd(e))return!0;if(xr(e)){let i=e.rotation;if(B(i)||te(i)&&i!==0)return!0}return tp(e);case"VectorSet":return!1;default:ho(t.scopeType)}}function rr(e,t){if(Number.isNaN(e)&&Number.isNaN(t)||e===t)return!0;if(We(e)||We(t)||A(e)||A(t)||F(e)||F(t)||te(e)||te(t)||zr(e)||zr(t)||jm(e)||jm(t))return!1;if(No(e)||No(t))return No(e)&&No(t)?ge(e)===ge(t):!1;if(Ze(e)||Ze(t)){if(Ze(e)&&Ze(t)){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!rr(e[o],t[o]))return!1;return!0}return!1}if(Ue(e)||Ue(t)){if(Ue(e)&&Ue(t)){for(let a in e)if(!rr(e[a],t[a]))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;let o,r,n,i;return el(e)&&(o=Y.spreadsAtStart(e),r=Y.spreadsAtEnd(e)),el(t)&&(n=Y.spreadsAtStart(t),i=Y.spreadsAtEnd(t)),!rr(o,n)||!rr(r,i)?!1:el(e)&&el(t)?Y.isSorted(e)===Y.isSorted(t):!0}return!1}throw new Error(`Tried to compare unsupported primitive types. ${typeof e} / ${typeof t}`)}function Lz(e,t,o){switch(t){case"js":return p`undefined`;case"css":return o&&e in o?o[e]:"unset";default:G(t,`target is not a defined enum: ${t}`)}}function Yl(e,t,o,r){if(!e)return;if(!t)return e;let n={},i=!1;for(let a in e){let s=e[a],l=t[a];rr(s,l)||(F(s)?a in t&&(n[a]=o?Lz(a,o,r):void 0,i=!0):(n[a]=s,i=!0))}if(i)return n}var hu=(e,t)=>{if(!di(e)||!e.codeOverrideEnabled||!e.codeOverrideIdentifier)return;let o=t.componentLoader.componentForIdentifier(e.codeOverrideIdentifier);if(!(o&&zm(o)))return;let r=he(e.codeOverrideIdentifier);if(!ot(r))return;let{importSpecifier:n,exportSpecifier:i}=Rr(r,t.moduleType,t.componentLoader,t.modulesStore);if(!(!n||!i))return{importSpecifier:n,exportSpecifier:i}};function gu(e,t){let o=[];if(at.isOn("overridesWithPropertyControls")&&Ll(e)&&e.codeOverrides)for(let r of e.codeOverrides){let n=t.componentLoader.componentForIdentifier(r.identifier);if(!(n&&zm(n)))continue;let i=he(r.identifier);if(!ot(i))continue;let a=t.imports.addModuleImport(i);if(!a)continue;let s=bN(r),l=Object.keys(s).length>0&&to(s);o.push(l?[a,s]:a)}return o}function Dz(e){if(e.type!=="controlReference"&&e.type!=="nodePropertyControlReference")return;let{expectedType:t}=e;S(t==="enum"||t==="segmentedenum"||t==="file")}function r9({galleryImageId:e,isSmartComponent:t}){return t?Array(4).fill(null).map(()=>({id:Bt(),type:"object",value:{[e]:{type:"image",value:void 0}}})):[]}function ec(e,t){return S(e.type!=="responsiveimage",`Image variables are compiled to be responsive images. To
        prevent confusion we don't allow creation of type responsive images.
        Because that would mean that two different types represent the same thing.`),Dz(e),e.type!=="trackingid"&&e.type!=="vectorsetitem"&&Lt("variable_create",{scopeType:t,variableType:e.type}),e.type==="image"&&(A(e.initialValue)?df(e.initialValue)||(e.initialValue=void 0):Uo(e.initialValue)&&A(e.initialValue.value)&&(df(e.initialValue.value)||(e.initialValue=void 0))),e.type==="array"&&t==="canvas_component"&&(S(e.minCount===void 0,"minCount should not be lifted to component"),S(e.maxCount===void 0,"maxCount should not be lifted to component")),{id:Bt(),...e}}function Fz(e,t,o={}){let r=yu(e),n=Az(e,o),i=r.children,a=new Map;for(let l of t.collections)a.set(l.id,l);let s=[];for(let l of i){let c=l.resolveValue("name");if(We(c))continue;let d=l.createdFromKitSchemaId?a.get(l.createdFromKitSchemaId):a.get(l.id),u=[];for(let m of l.variables){if(!Vo(m))continue;if(m.type!=="collectionreference"&&m.type!=="multicollectionreference"){u.push({name:m.name,type:m.type});continue}let h=pn(e,m.dataIdentifier);S(h,"Target collection not found for variable");let C=h.resolveValue("name");S(C,"Collection name not found"),u.push({name:m.name,type:m.type,reference:{collection:C,kind:m.type==="collectionreference"?"single":"multi"}})}s.push({name:c,variables:u,items:n.get(c)??[],createdFromKitTemplate:d?.name})}return s}function f9(e){let t=yu(e),o=new Map;for(let r of t.children){let n=r.resolveValue("name");We(n)||o.set(n,r.id)}return o}function yu(e){let t=e.getContentManagementNode();S(t,"Content management node not found");let o=t.loaded;return S(o,"Content management node not loaded"),o}function Az(e,t={}){let o=yu(e),r=new Map,{filterOnItemIds:n}=t;for(let i of o.children){let a=i.resolveValue("name");if(We(a))continue;let s=i.getSlugVariable(),l=[];for(let c of i.getUnsortedChildren()){if(n&&!n.has(c.id))continue;let d=Ax(c,s);if(d){if(!t?.fullSnapshot){l.push({slug:d});continue}l.push({...Ez(i,c),slug:d})}}r.set(a,l)}return r}function Ez(e,t){let o={};for(let r of e.variables){if(!Vo(r))continue;let n=t.getControlProp(r.id);o[r.name.toLowerCase()]=n?.value??r.initialValue??null}return o}function iL(e,t){let o=yu(e),r=[];for(let n of o.children){if(We(n.name)||n.id!==t&&n.createdFromKitSchemaId!==t)continue;let i=n.resolveValue("name");S(i,"Collection name not found"),r.push(i)}return r}function h9(e,t){let o=[];for(let r of t.variables){if(!Vo(r)||r.type!=="collectionreference"&&r.type!=="multicollectionreference")continue;let n=pn(e,r.dataIdentifier);S(n,`Referenced collection for field "${r.name}" not found`),o.push(n)}return o}function Mz(e,t,o,r,n){let i=t.getCollectionTemplate(r.collection);S(i,`Collection with alias ${r.collection} not found`);let s=n.find(c=>c.field===o&&r.collection===c.fromTemplate)?.name;if(!s)return;let l=Oz(e,i.id,s);return S(l,`Referenced collection for template "${i.name}" not found. Plan must create it first.`),l}function g9(e,t,o,r,n=[],i){let a=[];for(let s of r.variables){let{defaultValueSuggestions:l,reference:c,...d}=s;if(d.type==="collectionreference"||d.type==="multicollectionreference"){S(c,"Reference is required");let u=i?i(c.collection):Mz(e,t,s.name,c,n);if(!u)continue;a.push(ec({...d,dataIdentifier:u.instanceIdentifier},"collection"));continue}a.push(ec(d,"collection"))}return new uN({name:o,variables:a,createdFromKitSchemaId:r.id})}function Oz(e,t,o){return lu(e).children.find(n=>(n.id===t||n.createdFromKitSchemaId===t)&&n.resolveValue("name")===o)}function y9(e,t,o){let r=new Map;for(let d of t)r.set(d.fromTemplateCollection,{name:d.collectionName,new:d.new});let n=new Map;for(let d of e.fields){if(!d.isCMSConnectedField)continue;let u=o.getCollectionTemplateById(d.collectionId)?.name;if(!u)continue;let m=n.get(u)??new Set;if(d.reference?.collectionId){let h=o.getCollectionTemplateById(d.reference.collectionId)?.name;if(!h)continue;m.add(h),n.has(h)||n.set(h,new Set)}n.set(u,m)}let i=new Map;for(let[d,u]of n)for(let m of u){let h=i.get(m)??new Set;h.add(d),i.set(m,h)}let a=new Map;for(let d of n.keys()){let u=n.get(d);a.set(d,u?.size??0)}let s=[],l=[];for(let[d,u]of a)u===0&&l.push(d);for(;l.length>0;){let d=l.shift();S(d,"Collection ID must exist when the queue is not empty"),s.push(d);let u=i.get(d);if(u)for(let m of u){let h=a.get(m)??0;if(h===0)continue;let C=h-1;a.set(m,C),C===0&&l.push(m)}}let c=[];for(let d of s){let u=r.get(d);u&&c.push({id:d,name:u.name,new:u.new})}return c}function C9(e,t,o,r={}){let n=o.resolveValue("name");S(n,"Collection must have a name");let a=Fz(e,t,r).find(s=>s.name===n);return S(a,`Collection snapshot for "${n}" not found`),a}function P9(e){return e.customizationsSectionId??e.id}function aL(e){if(Xd(e)&&e.kitSectionSource)return e.kitSectionSource?.section;if(Wf(e))return e.customizationsSectionId}function sL(e,t){if(!Wf(t))return!1;let o=e.getParent(t.id);if(!Ne(o))return!1;let r=e.getScopeNodeFor(o);return PS(r)}var Wz="$NEW";function V9(e,t,o){let r=new Map;for(let a of o.fields){if(!a.isCMSConnectedField||r.has(a.collectionId))continue;let s=t.find(l=>l.id===a.collectionId);S(s,"Collection template must be defined"),r.set(a.collectionId,s.name)}let n={};for(let[a,s]of r){let l=iL(e,a);n[s]=[...l,Wz]}let i=o.fields.map(a=>{if(!a.isCMSConnectedField)return a;let s=r.get(a.collectionId);S(s,"Alias must be defined");let{collectionId:l,reference:c,...d}=a,u=c?{...c,collection:r.get(c.collectionId)}:void 0;return{...d,collection:s,reference:u}});return{id:o.id,description:o.description,rules:o.rules,supportedCollections:n,singleton:o.moduleIdentifier?!0:void 0,fields:i,detailPageTemplateId:t.find(a=>a.id===o.detailPageCollectionId)?.name,layoutId:o.layoutId}}function xs(e,t,o,r){let n=cL(e,r);return tN(t,o,n)}function lL(e,t,o,r){let n=cL(e,r);return oN(t,o,n)}function cL(e,{context:t,repeaterInfo:o}){return{resolveAsset(r,n,i,a){let s,l=Ja(n)?n.__defaultAssetReference:void 0;return r!==l&&(s=(a?t.assets.resolveResponsiveImage(r):t.assets.resolve(r))?.src),!lv(i)||!t.localizedValues?s:t.localizedValues.add(s,i.valueLocalized,c=>{let d=i.valueLocalized?.[c]?.value;return yo(d)?void 0:d===l?p`undefined`:(a?t.assets.resolveResponsiveImage(r):t.assets.resolve(r))?.src})},resolveResponsiveImage(r,n,i){let a,s,l,c;if(pl(n)&&dl(n.__vekterDefault)?(s=n.__vekterDefault.assetReference,l=n.__vekterDefault.positionX,c=n.__vekterDefault.positionY):Ja(n)&&(s=n.__defaultAssetReference),(r!==s||i.positionX!==l||i.positionY!==c)&&(a=I.fromValue(t.assets.resolveResponsiveImage(r,{focalPoint:i}))),t.localizedValues&&(a=t.localizedValues.add(a,i.valueLocalized,u=>{let m=i.valueLocalized?.[u];if(!ol(m))return;if(m.value===s&&m.imageFocalPoint?.positionX===l&&m.imageFocalPoint?.positionY===c)return p`undefined`;let h=t.assets.resolveResponsiveImage(m.value,{focalPoint:m.imageFocalPoint});return I.fromValue(h)})),!a)return;if(!t.valueTransforms)return a;let d=i.alt??ls;return t.localizedValues&&(d=t.localizedValues.add(d,i.altLocalized,u=>i.altLocalized?.[u]?.value)),t.valueTransforms.wrapInAddImageAlt(a,I.fromValue(d))},resolveDynamicValue(r,n){let i;if(q(r))S(t.variables,"Variables are not supported"),i=t.variables.create(r);else if(Xt(r)){if(!t.valueTransforms)return;S(e.cache,"Node cache must be passed in when computed values can be created"),i=t.valueTransforms.createComputedValue(r,e,n)}else{return}if(!t.valueTransforms)return i;switch(n.type){case"image":return t.valueTransforms.wrapInToImageSrc(i);case"responsiveimage":return t.valueTransforms.wrapInToResponsiveImage(i);case"gap":case"padding":case"borderradius":return t.valueTransforms.wrapInNumberToPixelString(i);default:return i}},resolveLink(r,n,i){let a=nl(n.value);if(cn(a)&&t.localizedValues){let s=n.valueLocalized;return t.localizedValues.add(a.url,s,l=>s?.[l]?.value)}if(Xt(a)){if(!t.valueTransforms)return;S(e.cache,"Node cache must be passed in when computed values can be created");let s=t.valueTransforms.createComputedValue(a,e,i);return t.links.createResolvedBinding(e,s)}return t.links.resolve(e,a,o)},resolvePageScope(r){return t.links.resolvePageScope(nl(r))},resolveLocalizedValue(r,n){return t.localizedValues?t.localizedValues.add(r,n,i=>n?.[i]?.value):r},resolveRichText(r,n){let i=Ti(r,{collectors:t,nodeId:e.getPrimaryId()});return t.localizedValues?t.localizedValues.add(i,n,(a,s)=>{if(!n)return;let l=n[a];if(!l)return;let c=l.value;if(A(c))return Ti(c,{collectors:{...t,...s},nodeId:e.getPrimaryId()})}):i},resolveFont(r,n){if(!Hv(n))return{};let i=nd(e);return t.fonts.addFontObjectBySelector(n.fontSelector,i),_v(n)},resolveScrollSectionRef(r,n){if(!F(n)){if(q(n))return t.variables?.create(n);if(A(n.target)){let i=t.elementIds?.scrollTargetInfo(n);if(i?.ref)return i.ref}}},resolveCustomCursor(r,n){if(!F(n))return q(n)?t.variables?.create(n):t.customCursors?.addControl(r,e,n)},resolveVectorSetItem(r,n){if(!F(r))return t.vectorSets?.resolveControl(r,n,e)},resolveColor(r){return A(r)?t.cssVariableDefinitions?.resolveColor(r)??r:r}}}function zz(e){return!No(e)&&(A(e)||te(e)||We(e)||F(e))}function Ag(e,t){return t.scopeType!=="SmartComponent"?zz(e):to(e)}var dL=zt((e,t,o)=>{if(!Z(e)||!e.isVectorInstance||!ye(o))return;let r=o.componentLoader.reactComponentForIdentifier(e.codeComponentIdentifier);if(!r)return;let n=xs(e,r.properties,e.getControlProps(r.properties),{context:o,repeaterInfo:void 0});for(let i in n){let a=n[i],s=`--${_t(i)}`;Ag(a,o)&&(t[s]=a??void 0)}});function pL(e,t,o,r){let n={...t};ZS.has(e.codeComponentIdentifier)&&(n.__fromCodeComponentNode=!0);let i=o.componentLoader.reactComponentForIdentifier(e.codeComponentIdentifier);if(i?.properties){let m=xs(e,i.properties,e.getControlProps(i.properties),{context:o,repeaterInfo:r?o.repeaterInfo.get(r):void 0});if(e.isVectorInstance)for(let h in m){let C=m[h],T=o.scopeType!=="SmartComponent"?!0:void 0;n[h]=Ag(C,o)?T:C}else Object.assign(n,m)}let a=pN(o.componentLoader,e.codeComponentIdentifier,n),s=e.getActions(o.componentLoader);for(let m in s)a[m]=o.events?.addHandler({node:e,trigger:m,actionInfo:s[m]});if(e.isVectorInstance)return ih(a);let l=dN(e,o.componentLoader);QS(e)&&Object.assign(a,e.getStylingProps(o.componentLoader,l,!1));let c=e.id===o.rootId&&o.scopeType!=="SmartComponent",d=l?Wa(l):[],u=Ue(l)&&d.length>0&&d.some(m=>!F(l[m]));return Ue(l)&&(u||c)&&c&&(l.width=p`style?.width`,l.height=p`style?.heigh`,u=!0),u&&(a.style?Object.assign(a.style,l):a.style=l),ih(a)}var Bz=/\/assets\/(?:(\d+)\/)?([^?]+)\?/u;function $z(e,t){if(typeof DOMParser>"u"||e.indexOf("image")<0)return;let o=Qs(e),r=o.querySelector("svg");if(!r)return;let n=new Map;if(o.querySelectorAll("image").forEach(i=>{let a=i.getAttribute("xlink:href");if(!a)return;let s=Bz.exec(a);if(!s)return;let l=Number.parseInt(s[1],10),c=s[2],d="::ASSET::"+n.size+"::",m=t?.resolveResponsiveImage(c)?.src??Bc(c,l);n.set(d,m),i.setAttribute("xlink:href",d)}),n.size!==0)return r.outerHTML.replace(/::ASSET::\d+::/gu,i=>n.get(i)??`missing:${i}`)}function Cu(e,t){let o=e.svg;A(o)&&(e.svg=$z(o,t)??o)}var uL=re((e,t,o)=>{if(!TN(e)||!us(o.scopeType))return;if(qI(e)||so(e)&&B(e.fillImage)){t["aria-label"]=void 0;return}if(ye(o)&&B(e.ariaLabel)){t["aria-label"]=o.createDeduplicatedDynamicValueBinding(e.ariaLabel,e,"ariaLabel");return}let r=e.resolveValue("ariaLabel",o.variableOverrides);if(A(r)&&r!==""){t["aria-label"]=r;return}t["aria-label"]=void 0});var mL=re((e,t,o)=>{let r=co(e),n=!!(e.parentid&&o.renderAsListNodes?.has(e.parentid));if(!Fe(e)){if(!Xe(e)&&r&&(t.as="a"),n){t.as="li";return}return}if(!so(e))return;let i=e;if(r){t.as="a";return}if(n){t.as="li";return}let a=i.htmlTag??Jd;a!=="div"&&(t.as=a)});var fL=re((e,t,o)=>{if(!UN(e)||!ye(o))return;let r=e.getPrimaryId(),n=o.overlays.bindingsByOverlayId.get(r);n&&(B(e.backdropDismissible)?t.onTap=p`() => ${o.createDeduplicatedDynamicValueBinding(e.backdropDismissible,e,"backdropDismissible")} && ${I.fn(p`${n}.hide`)}`:t.onTap=e.resolveValue("backdropDismissible")?p`() => ${I.fn(p`${n}.hide`)}`:void 0,t.initial={opacity:0},t.key=r,e.backdropTransitionLocked?(t.transition=ln(e.backdropEnterTransition??lp),t.animate={opacity:1},t.exit={opacity:0}):(t.animate={opacity:1,transition:ln(e.backdropEnterTransition??lp)},t.exit={opacity:0,transition:ln(e.backdropExitTransition??lp)}))});var hL=re((e,t,o)=>{if(!Pr(e)&&Fo(e)){if(Nr(e)&&!e.fillEnabled){t.background=void 0;return}t.background=cN(e,!0,o),t.background&&st(e)&&(e.heightType===5?t.fitImageDimension="height":e.widthType===5?t.fitImageDimension="width":t.fitImageDimension=void 0)}});var yL=re((e,t,o)=>{!Ur(e)||!e.borderEnabled||rv(e)||(t["data-border"]=!0,ye(o)&&o.css.addConditionalRule(0))});var CL="data-reset",SL=re((e,t,o)=>{if(ye(o)&&!(o.scopeType==="CanvasPage"||o.scopeType==="DesignPage")&&yi(e)){if(!zb(e.htmlTag)){t[CL]=void 0;return}e.htmlTag==="button"&&(t[CL]="button")}});function Eg(e,t,o){let r=fo(o)?o.localId:o?.moduleId,n=e.get(r);if(ed(n))return n.pluginId;if(!rp(n))return;if(!F(n.save.pluginId))return n.save.pluginId;let i=t.getPersistedModuleByLocalId(n.id);if(!i)return;let a=i.metadata.pluginId;if(A(a))return a}function pte(e,t,o,r){let n=Eg(e.tree,t,r);if(!F(n))return o.manifestById.get(n)}function ute(e){return`Edit in ${e.name}`}function mte(e,t){let o;return Tr(t)?o=e.getPersistedModuleByGlobalId(t.moduleId):fo(t)&&(o=e.getPersistedModuleByLocalId(t.localId)),o?o.metadata.editViaPlugin!==!1:!0}function vL(e,t){if(fo(e))return he(e).type;if(Tr(e)){let r=t.getExternalModuleNodes().find(n=>n.codeComponentIdentifier===e);return r?r.type:void 0}}var TL=re((e,t,o)=>{if(!Z(e)||!ye(o)||!Lr(e))return;t.scopeId=o.scopeId,t.nodeId=e.getPrimaryId(),t.isAuthoredByUser=vL(e.codeComponentIdentifier,o.treeStore.tree)==="codeFile"?!0:void 0;let r=Tr(e.codeComponentIdentifier);r&&(t.isModuleExternal=r);let n=o.nodeRendersWithMotion.get(e);n&&(t.rendersWithMotion=n);let i=he(e.codeComponentIdentifier);t["data-code-component-plugin-id"]=Eg(o.treeStore.tree,o.modulesStore,i)});var bL=re((e,t,o)=>{NN(e)&&us(o.scopeType)&&(t["data-nosnippet"]=xN(e)?e.dataNosnippet:void 0)});var IL=re((e,t,o)=>{if(!Il(e))return;let r=ye(o)&&B(e.draggable)?o.createDeduplicatedDynamicValueBinding(e.draggable,e,"draggable"):e.resolveValue("draggable")??Wb(e);t.draggable=!F(r)&&!B(e.draggable)?r.toString():r});var NL=re((e,t,o)=>{if(!ye(o)||Xo(e)||!ns(e)&&!xd(e))return;let r=o.treeStore.tree.get(o.scopeId);Ro(r)&&kb(r)&&Object.assign(t,o.events?.eventHandlersForNode(e))});var xL=re((e,t,o)=>{if(!Yd(e)||!ye(o)||!ss(o.scopeType)||ut(e))return;if(!Ci(e)){t.flowEffectEnabled=void 0,t.flowEffectTransition=void 0;return}t.flowEffectEnabled=!0,t.isNestedFlowEffect=uI(e);let r=e.flowEffectTransition??(t.isNestedFlowEffect?void 0:pI.flowEffectTransition);t.flowEffectTransition=r?o.declarations.file.dedupe("transition",ln(r)):void 0});var PL=re((e,t,o)=>{if(!Xe(e))return;let r=e.getFontsForLoading();if(ye(o)){let n=nd(e);for(let i of r)o.fonts?.addFontObjectBySelector(i,n)}t.fonts=r.length>0?r:void 0});var VL=re((e,t,o)=>{Bx(e)&&(t.step=ye(o)&&B(e.formInputStep)?o.createDeduplicatedDynamicValueBinding(e.formInputStep,e,"step"):e.resolveValue("formInputStep"))});var RL=re((e,t,o)=>{if(Fl(e)){if(ye(o)){t["data-hide-scrollbars"]=B(e.hideScrollbars)?o.createDeduplicatedDynamicValueBinding(e.hideScrollbars,e,"hideScrollbars"):e.hideScrollbars||void 0,F(e.hideScrollbars)||o.css.addConditionalRule(1);return}t["data-hide-scrollbars"]=e.resolveValue("hideScrollbars",o.variableOverrides)?!0:void 0}});var kL=re((e,t,o)=>{!Qt(e)||o.scopeType==="WebPage"||(t["data-highlight"]=NT(e,o.componentLoader)||void 0)});var Mg=re((e,t,o)=>{if(!ye(o)||!o.llmSnapshot)return;let r=Hz(e);if(r&&(t["data-type"]=r),Z(e)&&!e.isVectorInstance){let n=jz(o.componentLoader,e);if(!n)return;let{keys:i,labels:a}=n;i.length>0&&(t["data-prop-keys"]=i.join(",")),a.length===i.length&&a.length>0&&(t["data-prop-labels"]=a.join(","))}});function Hz(e){if(Ve(e)&&!_z(e))return"text";if(KT(e))return"image";if(Z(e))return e.isVectorInstance&&!B(e.dynamicVectorSetIdentifier)?"icon":"component"}function _z(e){return q(e.htmlContent)?!0:B(e.textContent)||q(e.textContent)}function jz(e,t){let o=e.componentForIdentifier(t.codeComponentIdentifier);if(!o?.properties)return;let r=t.getControlProps(o.properties),n=[],i=[];for(let a in r){let s=r[a];if(!s)continue;let{type:l,value:c}=s;if(l!=="string"&&l!=="vectorsetitem"||B(c)||q(c))continue;n.push(a);let d=o.properties?.[a]?.title;i.push(d??a)}return n.length>0?{keys:n,labels:i}:void 0}var wL=re((e,t,o)=>{if(!Re(e)||!Ae(e)||!ye(o)||o.scopeType!=="LayoutTemplate")return;let r=e.tree()?.getParent(e.id);if(!Ne(r))return;let{center:n}=CI(e);rS(t,vI(e)?n:void 0)});var LL=re((e,t,o)=>{if(!co(e)||Xe(e))return;if(o.variables&&q(e.linkOpenInNewTab)){t.openInNewTab=o.variables.create(e.linkOpenInNewTab);return}let r=e.resolveValue("linkOpenInNewTab",o.variableOverrides);zr(r)&&(t.openInNewTab=r)}),DL=re((e,t,o)=>{if(!co(e)||Xe(e))return;if(o.variables&&q(e.linkSmoothScroll)){t.smoothScroll=o.variables.create(e.linkSmoothScroll);return}let r=e.resolveValue("linkSmoothScroll",o.variableOverrides);zr(r)&&(t.smoothScroll=r)}),FL=re((e,t,o)=>{if(!co(e)||Xe(e))return;if(o.variables&&q(e.linkClickTrackingId)){t.clickTrackingId=o.variables.create(e.linkClickTrackingId);return}let r=e.resolveValue("linkClickTrackingId",o.variableOverrides);A(r)&&(t.clickTrackingId=r)}),AL=re((e,t,o)=>{if(!co(e)||Xe(e))return;let r=e.resolveValue("linkRelValues",o.variableOverrides);if(o.variables&&q(e.linkRelValues)){t.relValues=o.variables.create(e.linkRelValues);return}hv(r)&&(t.relValues=r)}),EL=re((e,t,o)=>{if(!co(e)||Xe(e))return;if(o.variables&&q(e.linkPreserveParams)){t.preserveParams=o.variables.create(e.linkPreserveParams);return}let r=e.resolveValue("linkPreserveParams",o.variableOverrides);zr(r)&&(t.preserveParams=r)}),ML=re((e,t,o)=>{if(!gi(e)||Xe(e))return;if(!co(e)){t.href=void 0;return}let r=e.getLink();Xt(r)?t.href=o.valueTransforms?.createComputedValue(r,e,void 0):cn(r)&&e.linkLocalized&&o.localizedValues?t.href=o.localizedValues.add(r.url,e.linkLocalized,n=>e.linkLocalized?.[n]?.value):t.href=o.links?.create(r)}),OL=re((e,t)=>{if(Zs(e)){let o=new Set,r=e.getInlineLinks(!1);A(e.link)&&r.push(e.link),r.forEach(n=>{if(!n||!zS(n))return;let i=BS(n)?.target;i&&o.add(i)}),t.__link=e.link,o.size&&(t.preload=Array.from(o))}}),WL=re((e,t)=>{t.nodeId=e.getPrimaryId()}),zL=re((e,t,o)=>{t.scopeId=o.scopeId});var BL=re((e,t,o)=>{if(!Ud(e)||!ye(o)||!op(o.scopeType)||ut(e))return;if(!Ob(e)){t.drag=void 0;return}let r,n;!e.dragEffectFreeform&&o.scopeType!=="SmartComponent"?r=o.elementIds.scrollTargetInfo({target:e.dragEffectConstraintElement,collectionItem:e.dragEffectConstraintItem})?.ref:e.dragEffectSnapBack&&(n=!0);let i=e.dragEffectTransition?ln(e.dragEffectTransition):void 0,a=i?o.declarations.file.dedupe("inertia",i):void 0,s=r||n,l=p`e`,c={drag:!0,dragConstraints:r,dragMomentum:!!e.dragEffectMomentum,dragTransition:s?a:void 0,dragSnapToOrigin:n,onMouseDown:o.declarations.file.dedupe("preventDefault",p`(${l}) => ${l}.preventDefault()`)};Object.assign(t,c)});var $L=re((e,t,o)=>{if(ye(o)&&mt(e))for(let r of e.children)lt(r)&&ui(r)&&o.overlays.addOverlayTrigger(r.id,e.id)});var Uz="--extracted-",Jz=["--framer-text-color","--framer-text-stroke-width","--framer-text-stroke-color","--framer-font-variation-axes"];function tc(e,t){let o=cs(e);return GL(o,(r,n)=>{for(let i of Jz){let a=r.style.getPropertyValue(i);if(!a)continue;let s=Xz(n,i),l=Zz(s,a);t&&(t[s]=a),r.style.setProperty(i,l)}}),o.innerHTML}function Xz(e,t){return Uz+_t(e+t)}function Zz(e,t){return`var(${e}, ${t})`}function GL(e,t,o=""){for(let r=0;r<e.children.length;r++){let n=e.children[r];if(n instanceof HTMLElement){let i=o+n.tagName+r;t(n,i),GL(n,t,i)}}}var HL=re((e,t,o)=>{if(!Td(e)||!ye(o))return;let r=o.scopeType==="SmartComponent",n=r?tc(e.html):e.html,{assets:i,imports:a,variables:s,links:l,cssVariableDefinitions:c}=o||{};if(S(i&&a&&l,"assets, imports, links must exist at this point"),q(e.htmlContent))S(s,"context.variables should exist if we are dealing with variables references"),t.children=s.create(e.htmlContent);else{let d=Ti(n,{collectors:{assets:i,imports:a,links:l,variables:s,cssVariableDefinitions:c},useFramerMotion:r,nodeId:e.getPrimaryId(),scopeId:o.scopeId}),u=yp(n);t.children=o.localizedValues.add(d,e.htmlLocalized,(m,h)=>{let C=gP(u,e.htmlLocalized?.[m],n);if(!C)return;let T;return C.type==="rich-text"?(T=hP(e.html,C.value),r&&(T=tc(T))):T=jN(n,C.value),Ti(T,{collectors:{assets:i,...h},useFramerMotion:r,nodeId:e.getPrimaryId(),scopeId:o.scopeId})})}Ve(e)&&Uo(e.anchorLinkOffsetY)&&(t.anchorLinkOffsetY=e.anchorLinkOffsetY),o.metrics?.measureLength("textBytes",t.__htmlStructure),o.metrics?.measureLength("textBytes",t.htmlFromDesign),o.metrics?.measureLength("textBytes",t.children)});var _L=re((e,t,o)=>{if(!(!oi(e)||!e.colorable)){if(Nr(e)&&!e.fillEnabled){t.fill=null;return}if(Fo(e)&&!(e.fillType==="linear-gradient"&&e.fillLinearGradient||e.fillType==="radial-gradient"&&e.fillRadialGradient||e.fillType==="conic-gradient"&&e.fillConicGradient)){if(e.fillType==="image"&&e.fillImage){t.fill=lN(e,o);return}if(e.fillColor){if(B(e.fillColor)&&ye(o)){t.fill=o.createDeduplicatedDynamicValueBinding(e.fillColor,e,"fillColor");return}t.fill=e.resolveValue("fillColor",o.variableOverrides)}}}});var jL=re((e,t,o)=>{if(!Id(e)||!XS(e))return;let r=gi(e)&&A(e.link)?e.link:void 0,n=MS(e)?e.htmlTextTag:void 0,{alignment:i,rawHTML:a}=e.getStyledText().getProps(e,r,n,()=>{});t.alignment=i,t.rawHTML=a?p`${a}`:void 0,o.metrics?.measureLength("textBytes",t.rawHTML)});var UL=re((e,t,o)=>{if(!Sb(e))return;let r=e.textContent;if(!r){t.text=void 0;return}if(ye(o)){if(vS(r)){let n=r.transforms[0],i=o.imports.addImport("framer",{exportSpecifier:"RelativeDate"});t.text=pt.tag(i,new Y({date:tn(r)?o.variables.create(r.startValue):o.fetches.createFetchBinding(e,r.startValue),dateFormat:n.format,dateStyle:n.dateStyle,dateCapitalize:n.capitalize??!1,locale:n.locale}))}else B(r)?t.text=o.createDeduplicatedDynamicValueBinding(r,e,"textContent"):G(r,"text content must be a variable or a computed value");o.metrics?.measureLength("textBytes",t.text)}});var JL=re((e,t,o)=>{!ip(e)||!e.resolveValue("textSelection")||(t["data-selection"]=!0,ye(o)&&o.css.addConditionalRule(2))});var XL=re((e,t)=>{El(e)&&(t.verticalAlignment=e.textVerticalAlignment)});var ZL=re((e,t)=>{Sx(e)&&(t.description=A(e.description)&&e.description!==""?e.description:void 0,t.title=A(e.title)&&e.title!==""?e.title:void 0)});function Qz(e){if(Ee(e))return e.variantTransition;if(xl(e))return e.transition}var QL=re((e,t,o)=>{if(o.scopeType!=="SmartComponent")return;let r=Qz(e);if(B(r)){t.value=o.createDeduplicatedDynamicValueBinding(r,e,"transition");return}if(!r){t.value=void 0;return}let n=ln(r);t.value=o.declarations.file.dedupe("transition",n)});var KL=re((e,t,o)=>{if(!ye(o)||(t.layout=ep(e)||$e(e)&&o.scopeType==="SmartComponent"?"position":t.layout,o.scopeType==="WebPage"&&hd(o.treeStore.tree,e)&&(t.layout=Kz(o,t.layout)),!at.isOn("layoutScroll")||!ts(e)))return;let r=o.scopeType==="LayoutTemplate"&&(lo(e)||tb(e));t.layoutScroll=r?!0:void 0,t.layout=r?!0:t.layout});function Kz(e,t){let o=e.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),r=e.imports.addImport("framer-motion",{exportSpecifier:"MotionConfigContext"}),n=e.imports.addImport("framer",{exportSpecifier:"GeneratedComponentContext"}),i=e.declarations.file.dedupe("getRootLayoutProp",p`(hasLayoutTemplate, hasInheritedFlowEffect, fallback) => {${p.joinLines(p`if (!hasLayoutTemplate) return fallback`,p`return hasInheritedFlowEffect ? "position" : fallback`)}}`),a=e.declarations.component.dedupe("hasLayoutTemplate",p`${I.fn(p`${o}.useContext`,n)}?.isLayoutTemplate`),s=e.declarations.component.dedupe("hasInheritedFlowEffect",p`Boolean(${I.fn(p`${o}.useContext`,r)}?.transition?.layout)`);return e.declarations.component.dedupe("motionLayout",I.fn(i,a,s,t))}var qz="-container",Wg=p`formState`,Yz=re((e,t,o)=>{oi(e)&&(t.withExternalLayout=!0,t.intrinsicHeight=e.intrinsicHeight||void 0,t.intrinsicWidth=e.intrinsicWidth||void 0,t.svg=p`${e.svg}`,Cu(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg))}),eB=re((e,t,o)=>{if(!$e(e))return;S(t instanceof Y,"");let r=uh.shared().getSVGStringForNode(o.componentLoader,e),n=e.contentHash;Y.assign(t,{intrinsicWidth:void 0,intrinsicHeight:void 0,...th(e),withExternalLayout:!0,svgContentId:n,svg:r});let i=t.style?.opacity;(i||Number.isFinite(Number(i)))&&(t.opacity=i),Cu(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg)}),tB=re((e,t,o)=>{if(!Ht(e))return;let r=uh.shared().getSVGStringForNode(o.componentLoader,e);Object.assign(t,{intrinsicWidth:void 0,intrinsicHeight:void 0,...th(e),svg:r,opacity:void 0,withExternalLayout:!0,requiresOverflowVisible:yP(e)}),Cu(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg)});function oB(e,t,o){if(!Ba(e)||(t.__fromCanvasComponent=!0,!e.shaderModuleIdentifier))return;let r=he(e.shaderModuleIdentifier);if(!ot(r))return;let{importSpecifier:n}=Rr(r,o.moduleType,o.componentLoader,o.modulesStore);if(!n)return;let i=o.imports.addImport(n,{exportSpecifier:"default",importBinding:"shaderConfig"});t.fragmentShader=p`${i}.fragment`,t.vertexShader=p`${i}.vertex`;let a=o.componentLoader.shaderForIdentifier(e.shaderModuleIdentifier);if(!a)return;let s=xs(e,a.properties,e.getControlProps(a.properties),{context:o}),l;for(let{name:c,uniform:d}of fP(a.properties,s))l||(l=new Y),l[c]=new Y(d);t.uniforms=l}function rB(e){return e.codeComponentIdentifier==="framer/Prototype"}function Og(e,t,o,r,n){if(!Z(e))return;let{lastRepeaterId:i,layoutId:a}=n;if(Y.assign(t,pL(e,void 0,o,i)),rB(e))t.scaleTo="dynamic";else if(uu(e))t.__fromCanvasComponent=!0;else if(!e.isVectorInstance)t.width="100%",t.height="100%",t.id=e.getPrimaryId(),Yt(e.name)&&!t.name&&!_T(e.name)&&(t.name=e.name);else{let d=xr(e)&&(B(e.rotation)||te(e.rotation)&&e.rotation!==0);t[nI]=o.scopeType==="SmartComponent"?!0:Zd(e)||d||tp(e)}NI(e,t,o);let s=[],l=o.overlays.bindingsByOverlayTriggerId.get(e.getPrimaryId());if(Kb(e)&&l?.size){let d=new I(Array.from(l.values())?.map(u=>p`${u}.visible`)?.join(" || "));t.variant=p`(${d}) ? ${e.whileOpenEffectVariant} : ${t.variant??p`undefined`}`,s.push(p`(${d}) && ${e.whileOpenEffectVariant}`)}for(let d of o.triggerActions.triggerActionByNode.get(e.getPrimaryId())??[])d.setVariantBinding&&s.push(d.setVariantBinding);t.variant&&s.push(I.fromValue(t.variant)),t.variant=s.length>0?I.fn(o.declarations.file.dedupe("matchVariant",p.joinLines(p`(...args) => {  `,p`  for (const arg of args) {`,p`    if (arg && typeof arg === "string") return arg`,p`  }`,p`  return undefined`,p`}`)),...s):void 0,Hb(o.treeStore.tree,e)&&(t.type="submit",$b(e)&&(t.variant=I.fn(o.declarations.file.dedupe("formVariants",p`(form, variants, currentVariant) => { ${p.joinLines(p`switch(form.state) {${p.joinLines(p`case "success": return variants.success ?? currentVariant`,p`case "pending": return variants.pending ?? currentVariant`,p`case "error": return variants.error ?? currentVariant`,p`case "incomplete": return variants.incomplete ?? currentVariant`,p`default: return currentVariant`)}}`)} }`),Wg,{success:e.formButtonSuccessVariantEnabled?e.formButtonSuccessVariant:void 0,error:e.formButtonErrorVariantEnabled?e.formButtonErrorVariant:void 0,pending:e.formButtonPendingVariantEnabled?e.formButtonPendingVariant:void 0,incomplete:e.formButtonIncompleteVariantEnabled?e.formButtonIncompleteVariant:void 0},t.variant??p`undefined`)));let c=o.treeStore.tree.get(n.lastRepeaterId);if(br(c)&&Zr(c)&&(wn(e,c)||Eb(o.componentLoader,e))&&(t.variant=c&&Mb(e)?I.fn(o.declarations.file.dedupe("loaderVariants",p`(repeaterState, variants, currentVariant) => { ${p.joinLines(p`if (repeaterState.currentPage >= repeaterState.totalPages) return variants.disabled ?? currentVariant`,p`if (repeaterState.isLoading) return variants.loading ?? currentVariant`,p`return currentVariant`)} }`),o.bindings.createWithNode("paginationInfo",c),{disabled:e.dataLoaderDisabledVariantEnabled?e.dataLoaderDisabledVariant:void 0,loading:e.dataLoaderLoadingVariantEnabled?e.dataLoaderLoadingVariant:void 0},t.variant??p`undefined`):void 0),ni(e)||r.identifiers&&r.identifiers.size>1){let d=he(e.codeComponentIdentifier);S(ot(d),`Expected a module export identifier, got ${d}`);let{importSpecifier:u,exportSpecifier:m,importBinding:h}=Rr(d,o.moduleType,o.componentLoader,o.modulesStore);S(u,"A module must have an import specifier."),t.Component=q(e.dynamicVectorSetIdentifier)?o.vectorSets.resolveVariableInstance(e):o.imports.addImport(u,{exportSpecifier:m,importBinding:h})}t.layoutId=a??e.getPrimaryId()}var nB=(e,t,o,r)=>{let n=new Y;return Og(e,n,t,o,r),Mg(e,n,t),n},iB=Hi(uL,mL,fL,hL,yL,TL,RN,SL,bL,IL,NL,PL,wx,kN,Ox,$x,VL,Zx,Qx,Gx,Hx,wN,xI,RL,kL,wL,OL,xL,PI,BL,bI,KL,kI,wI,TI,$L,HL,eB,jL,dx,_L,Yz,Tx,UL,px,ux,JL,XL,ZL,tB);function aB(e){if(F(e)||e instanceof Y&&Y.hasSpreads(e))return e;for(let t of Object.values(e))if(!F(t))return e}function Su(e){return e.declarations.component.dedupe("scopingClassNames",I.fn(e.imports.addImport("framer",{exportSpecifier:"cx"}),fe.serializationHash,p`...${fe.sharedStyleClassNames}`))}var sB=(e,t,o,r,{style:n,className:i})=>{let a=new Y;iB(e,a,t),Xo(e)&&Lr(e)||Mg(e,a,t);let s=e.getPrimaryId()===t.rootId;if(a.style||n||s){let h={};if(Ue(a.style)&&Object.assign(h,a.style),n&&Object.assign(h,n),a.style=aB(h),s){let C=new Y(a.style);Y.addSpreadAtEnd(C,p`style`),a.style=C}}let l=[];a.className&&l.push(a.className),i&&l.push(i),s&&(l.unshift(Su(t)),l.push(fe.className),a.ref=fe.refBinding,Y.addSpreadAtStart(a,fe.restProps),t.scopeType==="SmartComponent"&&(l.push(fe.classNames),Y.addSpreadAtStart(a,fe.gestureHandlers))),t.scopeType==="WebPage"&&sL(t.treeStore.tree,e)&&(a["data-section-id"]=e.getPrimaryId()),(et(e)||et(t.treeStore.tree.getParent(e.id)))&&l.unshift(Su(t)),l.length===1?a.className=l[0]:l.length>1&&(a.className=I.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),...l)),t.scopeType==="LayoutTemplate"&&Ne(e)&&(a[oL]=!0);let{withKey:c,layoutId:d}=o,u=d??e.getPrimaryId();c&&(a.key=u),t.scopeType==="SmartComponent"?(a.layoutId=Lr(e)?u+qz:u,a.layoutDependency=p`layoutDependency`):t.scopeType==="CanvasPage"&&(a.layoutIdKey=u,e.duplicatedFrom&&e.duplicatedFrom.length>0&&(a.duplicatedFrom=e.duplicatedFrom)),Z(e)&&(Lr(e)?o.inComponentSlot&&(a.inComponentSlot=o.inComponentSlot):(uu(e)&&(a.__fromCanvasComponent=!0),Og(e,a,t,r,o)),lo(e)&&(a.layoutScroll=!0)),Ba(e)&&oB(e,a,t),Xe(e)&&(a.withExternalLayout=!0,a.__fromCanvasComponent=!0),Cd(e)&&t?.scopeType==="WebPage"&&!Ee(e)&&(a.id=e.scrollTargetEnabled?t.elementIds.id(e):void 0),a["data-framer-cursor"]=t.customCursors.add(e),lt(e)?Object.assign(a,{role:"dialog"}):a[Xm]=t.elementIds.portalId(e),mI(e)&&(a.id=a.id??t.elementIds.id(e),a.lightboxClassName=Su(t));let m=t.treeStore.tree.get(o.lastRepeaterId);return m&&Z(e)&&wn(e,m)&&Object.assign(a,{__paginationInfo:t.bindings.createWithNode("paginationInfo",m),__loadMore:t.bindings.createWithNode("loadMore",m)}),o.isColumnMasonryLayout&&Ue(o.itemsOrderOverrides)&&!Wt(o.itemsOrderOverrides)&&(a["data-framer-order-id"]=u),a},lB=Hi(ML,LL,DL,FL,AL,EL,WL,zL);function cB(e,t){let o=new Y({motionChild:!0});return lB(e,o,t),o}function dB(e,t){let o=new Y;return QL(e,o,t),o}var pB=new Y({placement:void 0,alignment:void 0,offsetX:void 0,offsetY:void 0,className:void 0,anchorRef:void 0,floatingRef:void 0,onDismiss:void 0,portalSelector:void 0,safeArea:void 0,collisionDetection:void 0});function uB(e,t){if(!Ka(e))return;if(!lt(e))return pB;let o=t.overlays.bindingsByOverlayId.get(e.getPrimaryId());if(!o)return;let r=t.treeStore.tree.getParent(e.getPrimaryId());if(r)return new Y({placement:e.floatingPlacement,alignment:e.floatingAlignment,offsetX:e.floatingOffsetX,offsetY:e.floatingOffsetY,anchorRef:t.rootId===r.id?p`${fe.refBinding}`:t.elementIds.ref(r),onDismiss:p`${or.overlayMethod(o,"hide")}`,safeArea:e.floatingSafeArea??!0,zIndex:Dv(e)?e.zIndex:void 0,collisionDetection:e.floatingCollisionDetection??!1,collisionDetectionPadding:e.floatingCollisionDetection?e.floatingCollisionPadding??Rd:void 0,[Xm]:t.elementIds.portalId(e),className:I.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),Su(t),t.scopeType==="SmartComponent"?fe.classNames:void 0)})}function mB(e,t){if(!et(e))return;let o=!1;return to(e.backdropDismissible)?o=e.backdropDismissible:B(e.backdropDismissible)&&(o=t.createDeduplicatedDynamicValueBinding(e.backdropDismissible,e,"backdropDismissible")??!1),new Y({blockDocumentScrolling:e.blockDocumentScrolling,dismissWithEsc:o})}function qL(e,t){let o=t.fetches.getFetchesForNode(e);return new Y({requests:o??[],disabled:t.scopeType==="SmartComponent"?fe.isLoading:void 0})}function fB(e,t){if(!Z(e))return;let o=new Y;if(t.componentLoader.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerComponentViewportWidth==="true"){let i=t.simulatedDOM.getComponentViewportContext(e);Object.assign(o,i)}return o}function YL(e){if(!sl(e)||!st(e)||!Ae(e))return;let t={width:void 0,height:void 0};return e.widthType===1&&Number.isFinite(e.width)&&(t.width=`${e.width*100}%`),e.widthType===3&&Number.isFinite(e.width)&&(t.width=e.cache.parentDirection==="horizontal"?_f(e.width):Gr(e.width*100,"%")),e.heightType===1&&Number.isFinite(e.height)&&(t.height=`${e.height*100}%`),e.heightType===3&&Number.isFinite(e.height)&&(t.height=e.cache.parentDirection==="vertical"?_f(e.height):Gr(e.height*100,"%")),new Y(t)}function zg(e,t,o,r,{className:n,style:i}={}){let a=sB(e,t,r,o,{style:i,className:n}),s=dB(e,t),l=uB(e,t),c=mB(e,t);if(Xo(e)&&Lr(e)){let d=nB(e,t,o,r),u=qL(e,t);return{container:a,transition:s,floating:l,overlay:c,fetcher:u,element:d,componentViewport:fB(e,t),tickerItem:YL(e)}}return{element:a,transition:s,floating:l,overlay:c,link:cB(e,t),fetcher:qL(e,t),tickerItem:YL(e)}}var hB=["onTap","onTapStart","onClick","onMouseDown","onMouseUp"],gB=(e,t,o)=>{if(!Qt(o)||!wb(e,o))return!1;let r=o.getActions(t);return hB.some(n=>{if(n in r){let i=r[n];return i?i.length>0:!1}return!1})},eD=zt((e,t,o)=>{if(!Ui(e)||Qo(e))return;if(B(e.cursor)&&ye(o)){t.cursor=o.cssVariableDefinitions.create(e,"cursor");return}if(e.cursor&&Wv(e.cursor)){t.cursor=e.resolveValue("cursor",o.variableOverrides),Ve(e)&&e.hasLinks()&&(t.cursor=void 0,t[zv]=e.cursor);return}if(!ye(o))return;let r=Ee(e)&&o.topLevelVariantsWithGestures[e.id];t.cursor=r||gB(o.treeStore.tree,o.componentLoader,e)?"pointer":void 0});var tD=zt((e,t)=>{co(e)&&(t.textDecoration="none")});var oD=zt((e,t,o)=>{Re(e)&&yi(e)&&o.renderAsListNodes?.has(e.id)&&(t.listStyle="none",t.margin=0)});var rD=zt((e,t,o)=>{if(!(!al(e)||!ur(e))&&Cv(e)){if(B(e.overscrollBehavior)&&ye(o)){t.overscrollBehavior=o.cssVariableDefinitions.create(e,"overscrollBehavior");return}t.overscrollBehavior=e.resolveValue("overscrollBehavior",o.variableOverrides)}});var nD=zt((e,t)=>{Cd(e)&&(t.scrollMarginTop=te(e.scrollMarginTop)&&e.scrollTargetEnabled&&e.scrollMarginTop>0?e.scrollMarginTop:void 0)});var iD=zt((e,t,o)=>{if(!VN(e))return;if(B(e.tapHighlightColor)&&ye(o)){t.WebkitTapHighlightColor=o.cssVariableDefinitions.create(e,"tapHighlightColor");return}let r=e.resolveValue("tapHighlightColor",o.variableOverrides);if(Hr(r)){t.WebkitTapHighlightColor=cl(r);return}t.WebkitTapHighlightColor=r?Oa.toRgbString(r):void 0});var aD=zt((e,t,o)=>{if(!ip(e))return;let r=e.resolveValue("textSelection");t["--selection-color"]=r?.color,t["--selection-background-color"]=r?.backgroundColor});var sD=zt((e,t,o)=>{if(ll(e)){if(B(e.userSelect)&&ye(o)){t.userSelect=t.WebkitUserSelect=o.cssVariableDefinitions.create(e,"userSelect");return}t.userSelect=t.WebkitUserSelect=Sv(e)?e.resolveValue("userSelect",o.variableOverrides):void 0}});var lD=zt((e,t,o)=>{if(!Pl(e)||!ye(o)||o.scopeType!=="LayoutTemplate")return;let r=o.treeStore?.tree.getParent(e.id);Ne(r)&&(t.viewTransitionName=e.viewTransitionNone===!0?wg(e,o.serializationId,!0):void 0)});var dD=zt((e,t,o)=>{let r=CB(e,o);t.willChange=r}),cD=`var(${eS}, transform)`;function CB(e,t){if(op(t.scopeType)&&(yI(e)&&(Qb(e)||qb(e))||t.scopeType!=="SmartComponent"&&Jb(e)&&_b(e.styleAppearEffectTrigger)==="onMount"))return cD;if(mt(e)&&ur(e)&&yv(e.overflow)){if(nT(e))return`var(${YC}, transform)`;if(LI(e))return`var(${tS}, filter)`}}var SB=Hi(qN,sI,Dx,eD,LN,Wx,DN,FI,FN,AN,jx,SI,tD,oD,$I,rD,mb,EI,nD,aD,EN,OI,iD,_x,WI,UI,_I,sD,lD,dD,XI),Bg=Hi(KN,db,zI,Lx,pb,BI,DI,ub,zx,Ux,Xx,Jx,gb,iI,AI,fb,iT,GI,HI,hb,dL),$g=Hi(jI,MI);function vB(e,t){return We(e)||Co(e)||Z(e)?"relative":et(e)?"fixed":In(e)||lt(t)?"relative":"absolute"}function Gg(e,t,o,r){let n={position:vB(t,e),zIndex:et(t)?JI(t,o):void 0,...r},i=o.scopeType==="WebPage"||o.scopeType==="LayoutTemplate"||o.nodeRendersWithMotion?.get(e)===!1,a={};return o.llmSnapshot&&Object.assign(a,n),SB(e,o.llmSnapshot?a:n,o),Bg(e,!o.llmSnapshot&&i?n:a,o),Td(e)&&o.scopeType==="SmartComponent"&&tc(e.html,a),$g(e,a,o),{css:n,style:Wt(a)?void 0:a}}var Ps={opacity:1,rotate:0,borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,cornerShape:`superellipse(${KS})`,backgroundColor:"rgba(0, 0, 0, 0)",background:"rgba(0, 0, 0, 0)",boxShadow:"none",filter:"none",WebkitFilter:"none",backdropFilter:"none",WebkitBackdropFilter:"none",mask:"none",WebkitMask:"none",textShadow:"none",scale:1,rotateX:0,rotateY:0,skewX:0,skewY:0,z:0,padding:0};function TB(e){let t={},o={},r={},n={},i={},a={},s=[[new An({fillEnabled:!0,fillType:"color",fillColor:"rgba(0, 0, 0, 0)",borderWidth:0,borderEnabled:!0,borderColor:"rgba(0, 0, 0, 0)",borderStyle:"solid"}),t],[new xx,o],[new up,r],[new ea({codeComponentIdentifier:"framer/Page"}),n],[new vx,i],[new On,a]],l={componentLoader:e};return s.forEach(([c,d])=>{Bg(c,d,l),$g(c,d,l)}),{FrameNode:Object.assign(t,Ps),TextNode:Object.assign(o,Ps),RichTextNode:Object.assign(r,Ps),CodeComponentNode:Object.assign(n,Ps),SVGNode:Object.assign(i,Ps),ShapeContainerNode:Object.assign(a,Ps)}}var pD;function uD(e){return pD??=TB(e),pD}function mD(e,t,o,r){if(!r||F(t.__class)||No(o.style)||!F(o.style)&&!Ue(o.style))return;let n;for(n in r){if(F(o.style?.[n])&&F(r[n])||o.style&&n in o.style&&!F(o.style[n])&&!F(r[n]))continue;let a=uD(e)?.[t.__class];if(!a||!(n in a)){F(r[n])&&(r[n]=p`undefined`);continue}let s=a[n];if(F(o.style?.[n])){let l=o.style??{};l[n]=s,o.style=l}F(r[n])&&(r[n]=s)}}function ua(e,t,o){let r=e.originalid===t?e.id:Yo(e.id,t);return o.get(r)}function bB(e){let t=e.children?.find(n=>an(n));if(!t)return;let o=e.itemsOrder?e.itemsOrder.indexOf(t.getPrimaryId()):e.children?.indexOf(t);if(!te(o)||o<0||!e.itemsOrder&&e.children&&o===e.children.length-1)return;let r=new Map;return e.itemsOrder?e.itemsOrder.forEach((n,i)=>{if(n===t.originalid)return;let a=i<o?-1e3:1e3;r.set(n,i+a)}):e.children?.forEach((n,i)=>{if(n===t)return;let a=i<o?-1e3:1e3;r.set(n.getPrimaryId(),i+a)}),r}function fD(e,t){if(t==="LayoutTemplate"&&Ne(e))return bB(e);let o=e.itemsOrder;if(!o||o.length<1)return;let r=new Map;return o.forEach((n,i)=>{r.set(n,i)}),r}var IB=e=>(t,o)=>!o||!e?t:{...t,...o[e]};function CD(e,t,o,r){let{combinedVariableControlMap:n}=e.combineVariableControlMap(o.treeStore.tree,void 0,r.inheritedControlMap,o.componentLoader,o.componentLoader.activeBundleHash);t&&(ph(t,e),xB(t,e));let i=Zr(e),a=r.subqueries;Ft(e)&&xt(e)?a=new fu(e,i?void 0:r.subqueries):Dl(e)&&(a=void 0);let s=o.scopeType==="WebPage",l=o.scopeType==="SmartComponent",c=r.inCodeOverride||!F(hu(e,o))||gu(e,o).length>0,d=o.treeStore.tree.get(r.lastRepeaterId),u=o.kitSectionsStructure.addSection(e),m={isAnyVariantAnImage:so(e),isAnyVariantALink:co(e)&&!Xe(e),isAnyVariantAnEffect:Uf(e,o.scopeType),isAnyVariantAVariantAppearEffect:Hf(e),isAnyVariantATickerEffect:li(e),isAnyVariantATickerItem:sl(e),isAnyVariantARef:s&&Ji(e)||lt(e)||Z(e)&&Ft(d)&&wn(e,d),isAnyVariantATransitionOverride:l&&(Gf(e)||Ym(e)),isAnyVariantOptimizedAppearEffect:jf(e,o),itemsOrderOverrides:{},hiddenInVariants:new Set(r.hiddenInVariants),inCodeOverride:c,inheritedControlMap:n,isAnyVariantFloating:lt(e),isAnyVariantPaginated:i,isAnyVariantColumnMasonryLayout:on(e),identifiers:Z(e)?new Set([gD(e)]):void 0,subqueries:a,kitSectionNodeId:u};o.trackingIds.add(e),o.kitSectionsStructure.addCustomizations(e,r.kitSectionNodeId),er(e)&&o.formIds.add(e.id),ui(e)&&o.triggerActions.collectTriggerActionsForNode(e),o.scopeType==="LayoutTemplate"&&qa(e)&&Ne(e)&&(m.itemsOrderOverrides[e.id]=fD(e,o.scopeType));let h=Lg(e,o),C=new Map,T=Dg(e,o,r,c),N=[],P=Tf(e);for(let be of o.variants){let se=ua(be,e.id,o.treeStore.tree);if(!se)continue;se.combineVariableControlMap(o.treeStore.tree,void 0,r.inheritedControlMap,o.componentLoader,o.componentLoader.activeBundleHash);let Nt=o.treeStore.tree.getParent(se.id);if(m.hiddenInVariants.has(be.id))continue;Nt&&ph(Nt,se);let Ut=hD(be),oo=Lg(se,o);if(!rr(oo,C.get(be.replicaInfo?.inheritsFrom??"")??h)){let uo=Qo(be);C.set(Ut,{value:oo,isGesture:uo})}else(o.scopeType==="WebPage"||o.scopeType==="LayoutTemplate")&&h!==!0&&C.set(Ut,{value:h});if(oo===!1){m.hiddenInVariants.add(be.id);continue}co(se)&&!Xe(se)&&(m.isAnyVariantALink=!0),so(se)&&(m.isAnyVariantAnImage=!0),Uf(se,o.scopeType)&&(m.isAnyVariantAnEffect=!0),Hf(se)&&(m.isAnyVariantAVariantAppearEffect=!0),jf(se,o)&&(m.isAnyVariantOptimizedAppearEffect=!0),li(se)&&(m.isAnyVariantATickerEffect=!0),sl(se)&&(m.isAnyVariantATickerItem=!0),Zr(se)&&(m.isAnyVariantPaginated=!0),Z(se)&&m.identifiers?.add(gD(se)),on(se)&&(m.isAnyVariantColumnMasonryLayout=!0),o.trackingIds.add(se);let sr=Tf(se);if(sr){P||=sr;let{stops:uo,info:lr}=sr;P.stops=Math.max(P?.stops,uo??0),P.info||=lr}o.scopeType==="WebPage"?Ji(se)&&(m.isAnyVariantARef=!0):o.scopeType==="SmartComponent"&&(II(se)&&(m.isAnyVariantAnEffect=!0),(Gf(se)||Ym(se))&&(m.isAnyVariantATransitionOverride=!0)),Rn(se)&&(m.itemsOrderOverrides[be.id]=fD(se,o.scopeType)),T=T||Dg(se,o,r,c),N.push({nodeInVariant:se,variant:be})}F(P)||o.nodesWithAnyGradientFill.set(e.id,P);let{condition:R,classNames:W,classNameExpressions:M}=o.renderFunctions.create(h,C);if(R===!1)return;o.nodeRendersWithMotion.set(e,T);let H=e.parentid?o.renderAsListNodes.get(e.parentid):!1;yi(e)&&Bb(e.htmlTag)&&!H&&o.renderAsListNodes.set(e.id,!0);let K=t&&on(t),oe=r?.itemsOrderOverrides?.[o.rootId],{css:me,style:j}=Gg(e,t,o,!K&&oe?{order:yD(e,oe)}:void 0),Pe=Lr(e),pe=nL(e,t,o),Ie=o.css.addRule(me,e,{container:Pe,hasScopingSelector:pe}),we=zg(e,o,m,r,{className:Ie,style:j});o.hitTargets.recordClassName(e,o.rootId,Ie);let k={link:void 0,container:void 0,element:void 0,floating:void 0,overlay:void 0,transition:void 0,fetcher:void 0,componentViewport:void 0,tickerItem:void 0},ne={variants:void 0,css:void 0};if(Ve(e))for(let be of e.getStylePresetsForCodeGeneration(o.treeStore.tree))o.css.addSharedStyle(be.id);let ae=Pe?we.container:we.element;S(!F(ae),"Target will always be defined if the node needs a container");for(let{nodeInVariant:be,variant:se}of N){let Nt=hD(se);if(o.hitTargets.recordClassName(be,se.id,Ie),Ve(be))for(let Ho of be.getStylePresetsForCodeGeneration(o.treeStore.tree))o.css.addSharedStyle(Ho.id);let Ut=o.treeStore.tree.getParent(be.id),{itemsOrderOverrides:oo}=r,Cr=oo?.[se.id],sr=Ut&&on(Ut),uo=Gg(be,Ut,o,!sr&&Cr?{order:yD(e,Cr)}:void 0),lr=IB(se.replicaInfo?.inheritsFrom),Go={display:Ve(be)?qC.display:"block"},Gs=Yl(uo.css,lr(me,ne.css),"css",Go);if(Gs){let Ho=Qo(se);ne.css||(ne.css={}),ne.css[se.id]=Gs,o.css.addRule(Gs,be,{variant:se,hasScopingSelector:pe,container:Pe,gesture:Ho?se.gesture:void 0,scope:Ho?se.replicaInfo?.inheritsFrom:o.scopeType==="SmartComponent"?se.id:void 0})}o.scopeType==="SmartComponent"&&mD(o.componentLoader,be,ae,uo.style);let Zn=zg(be,o,m,r,{className:Ie,style:ae.style}),La=Yl(uo.style,lr(j,ne.variants));if(La)if(o.scopeType==="SmartComponent"||o.llmSnapshot)ne.variants||(ne.variants={}),ne.variants[Nt]=La;else{let Ho=Pe?"container":"element";k[Ho]=PB(uo.style,k[Ho],Nt)}for(let Ho in Zn){let qr=Ho,Da=Yl(Zn[qr],lr(we[qr],k[qr]??{}),"js");if(!Da)continue;k[qr]||(k[qr]={[Nt]:{}});let Fi=k[qr][Nt];k[qr][Nt]=Ue(Fi)?Object.assign(Fi,Da):Da}}let Te=new Set(W);m.isAnyVariantALink&&Te.add(o.linkClassName);let gt=new I.Set(M),yt=m.isAnyVariantARef||o.overlays.relativeOverlayTriggerIds.has(e.id);return Y.assign(ae,{variants:ne.variants,className:NB(ae.className,Te,gt,o.imports),ref:ae.ref??(yt?o.elementIds.ref(e):ae.ref),[WS]:m.isAnyVariantOptimizedAppearEffect?o.appearIds.create(e.id):void 0}),o.renderConditions.set(e.id,R),{...m,propsForLink:{props:we.link,overrides:k.link},propsForElement:{props:we.element,overrides:k.element},propsForContainer:{props:we.container,overrides:k.container},propsForTransition:{props:we.transition,overrides:k.transition},propsForFetcher:{props:we.fetcher,overrides:k.fetcher},renderCondition:R,propsForFloating:{props:we.floating,overrides:k.floating},propsForOverlay:{props:we.overlay,overrides:k.overlay},propsForComponentViewport:{props:we.componentViewport,overrides:k.componentViewport},propsForTickerItem:{props:we.tickerItem,overrides:k.tickerItem}}}function NB(e,t,o,r){if(t.size===0&&o.size===0)return e;if(o.size===0){let n=Array.from(t).join(" ");return e?nt`${e} ${n}`:n}else{let n=r.addImport("framer",{exportSpecifier:"cx"});return e?I.fn(n,e,...t,...o):I.fn(n,...t,...o)}}function xB(e,t){t.cache.ancestorRepeaterIds=Jp(e,e.cache.ancestorRepeaterIds??[])}function hD(e){return Qo(e)?`${e.replicaInfo.inheritsFrom}-${e.gesture}`:e.id}function PB(e,t,o){let r=t??{};return r[o]=r[o]??{},r[o].style=r[o].style??{},Object.assign(r[o].style,e),r}function SD(e,t,o){let r={background:"transparent",height:0,width:0,position:"relative",flexGrow:1,margin:0,marginBottom:Yf(t,o)};for(let n of o.variants){let i=ua(n,e.id,o.treeStore.tree);if(!i)continue;let a=Yl({...r,marginBottom:Yf(n,o)},r);!a||Wt(a)||o.css.addRule(a,i,{variant:n})}return o.css.addRule(r,e)}function gD(e){return ni(e)?ev:e.codeComponentIdentifier}function yD(e,t){return t.get(e.id)??t.size}var oc,vu=class{constructor(t,o,r,n,i,a,s){this.entryNode=t;this.treeStore=o;this.variables=r;this.declarations=n;this.bindings=i;this.imports=a;this.assets=s;ce(this,oc,new Map)}command(t){let o=E(this,oc).get(t);if(o)return o;let r=this.bindings.create(`pre${t}`);return E(this,oc).set(t,r),r}getVariantIdFor(t){return this.treeStore.treeIndex.getGroundNodeIdFor(t.id)}};oc=new WeakMap;function vD(e){return e.queryParam||VB(e.name)}function VB(e){return OS(e)}var Q,TD,bD,ID,ND,xD,Hg,rc,_g,PD,VD,jg,Ug,Jg,Vs,Dr,nc,Wo,RD,Tu,bu=class{constructor(t){this.ctx=t;ce(this,Q)}serialize(t){let{repeaterToQuery:o,independentQueries:r,urlOnlyQueries:n,detailOnlyQueries:i,mixedQueries:a,repeaterDependentQueries:s,independentChildComponents:l,repeaterDependentChildComponents:c,detailPageQuery:d}=t,u=new Map,m=[],h=p`locale`;m.push(p`const ${h} = context.locale`);let C=!F(d),T=r.length>0||n.length>0||C||i.length>0||a.length>0||s.length>0,N=l.length>0||c.length>0,P=s.length>0||c.length>0;if(!T&&!N)return;let R=U(this,Q,TD).call(this,T,P),W=U(this,Q,bD).call(this,n,a,s),{resolutions:M,bindings:H,bindingsById:J,bindingsObject:K}=U(this,Q,ND).call(this,W,h),oe=W.size>0?this.ctx.bindings.create("urlVarsPromise"):void 0;if(oe){let pe=p`(async () => {${p.joinLines(...M,p`return ${K}`)}})()`;m.push(p`const ${oe} = ${pe}`)}let me=U(this,Q,ID).call(this,R,r,n,l,oe,J,u,m,h),j=C&&U(this,Q,Vs).call(this,Array.from(o.values()));if(C&&d?.constantBinding&&R){let pe=this.ctx.imports.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"}),Ie=I.fn(d.constantBinding,I.fn(pe,p`context.pathVariables`,d.collectionAlias)),we=U(this,Q,Wo).call(this,R,Ie,h),k=j?this.ctx.bindings.create("detailResultPromise"):void 0;k&&m.push(p`const ${k} = ${I.fn(p`${we}.readMaybeAsync`)}`);let ne=U(this,Q,Hg).call(this,o,s,c,R,oe,J,k,u,m,h);if(i.length>0||a.length>0){let Te=[];for(let se of i){let Nt=U(this,Q,Dr).call(this,se,{urlVarBindingsById:J,detailDataBinding:p`detailData`,itemVarByRepeaterId:new Map}),Ut=I.fn(se.constantBinding,...Nt),oo=U(this,Q,Wo).call(this,R,Ut,h);Te.push(I.fn(p`${oo}.preload`))}for(let se of a){let Nt=U(this,Q,Dr).call(this,se,{urlVarBindingsById:J,detailDataBinding:p`detailData`,itemVarByRepeaterId:new Map}),Ut=I.fn(se.constantBinding,...Nt),oo=U(this,Q,Wo).call(this,R,Ut,h);Te.push(I.fn(p`${oo}.preload`))}let gt=Te[0],yt=Te.length>1||!gt?I.fn(p`Promise.allSettled`,Te):gt,be=U(this,Q,xD).call(this,oe,H,k??I.fn(p`${we}.readMaybeAsync`),yt);return me.push(be,...ne),U(this,Q,Tu).call(this,m,I.fn(p`Promise.allSettled`,me))}return k||me.unshift(I.fn(p`${we}.preload`)),me.push(...ne),U(this,Q,Tu).call(this,m,I.fn(p`Promise.allSettled`,me))}let Pe=U(this,Q,Hg).call(this,o,s,c,R,oe,J,void 0,u,m,h);if(me.push(...Pe),me.length!==0)return U(this,Q,Tu).call(this,m,I.fn(p`Promise.allSettled`,me))}};Q=new WeakSet,TD=function(t,o){return t||o?this.ctx.imports.addImport("framer",{exportSpecifier:"queryCache"}):void 0},bD=function(...t){let o=new Map,r=t.flat();for(let n of r)for(let i of n.urlVariables)o.set(i.id,i);return o},ID=function(t,o,r,n,i,a,s,l,c){let d=[];if(t){for(let{constantBinding:u}of o){let m=U(this,Q,nc).call(this,u,t,s,l,c);d.push(I.fn(p`${m}.preload`))}for(let{constantBinding:u,urlVariables:m}of r){let h=m.map(P=>a.get(P.id)).filter(Boolean);if(!i)continue;let C=I.fn(u,...h),T=U(this,Q,Wo).call(this,t,C,c),N=I.fn(p`${T}.preload`);d.push(I.fn(p`${i}.then`,p`({ ${p.listFrom(h)} }) => ${N}`))}}return d.push(...U(this,Q,RD).call(this,n)),d},ND=function(t,o){let r=[],n=[],i=new Map;for(let[s,l]of t){let c=this.ctx.bindings.create(s);switch(n.push(c),i.set(s,c),l.type){case"string":{let d=A(l.initialValue)?l.initialValue:p`undefined`;r.push(p`const ${c} = context.pathVariables?.[${l.parameterName}] ?? ${d}`);break}case"collectionreference":{let d=A(l.initialValue)?l.initialValue:p`undefined`;r.push(p`const ${c} = await (async () => {${p.joinLines(p`const slug = context.pathVariables?.[${l.parameterName}] ?? ""`,p`if (!slug) return ${d}`,p`const cache = ${I.fn(p`context.collectionUtils?.get`,l.collectionId??"")}`,p`if (!cache) return ${d}`,p`return (await ${I.fn(p`cache.getRecordIdBySlug`,p`slug`,o)}) ?? ${d}`)}})()`);break}case"multicollectionreference":{let d=Ze(l.initialValue)?l.initialValue:p`undefined`;r.push(p`const ${c} = await (async () => {${p.joinLines(p`const slugs = Array.isArray(context.pathVariables?.[${l.parameterName}]) ? context.pathVariables[${l.parameterName}] : []`,p`if (slugs.length === 0) return ${d}`,p`const cache = ${I.fn(p`context.collectionUtils?.get`,l.collectionId??"")}`,p`if (!cache) return ${d}`,p`const ids = await ${I.fn(p`Promise.all`,p`slugs.map(slug => ${I.fn(p`cache.getRecordIdBySlug`,p`slug`,o)})`)}`,p`return ${I.fn(p`ids.filter`,p`Boolean`)}`)}})()`);break}default:G(l.type,"Unexpected URL variable type")}}let a={};for(let s of n)a[ge(s)]=s;return{resolutions:r,bindings:n,bindingsById:i,bindingsObject:a}},xD=function(t,o,r,n){return!t||o.length===0?p`(async () => {${p.joinLines(p`const [detailData] = (await ${r}) ?? []`,p`return ${n}`)}})()`:p`(async () => {${p.joinLines(p`const [urlVars, detailResult] = await ${I.fn(p`Promise.all`,[t,r])}`,p`const { ${p.listFrom(o)} } = urlVars`,p`const [detailData] = detailResult ?? []`,p`return ${n}`)}})()`},Hg=function(t,o,r,n,i,a,s,l,c,d){if(o.length===0&&r.length===0)return[];let u=new Map,m=[];for(let T of o){if(U(this,Q,rc).call(this,T).length>1){m.push(T);continue}let P=T.repeaterVariables[0]?.repeaterId;if(!P)continue;let R=u.get(P),W=t.get(P);R?R.queries.push(T):u.set(P,{queries:[T],components:[],parentQuery:W})}for(let T of r){let N=T.ancestorRepeaterId;if(!N)continue;let P=u.get(N),R=t.get(N);P?P.components.push(T):u.set(N,{queries:[],components:[T],parentQuery:R})}let h=[],C=r.length>0?this.ctx.imports.addImport("framer",{exportSpecifier:"forwardLoader"}):void 0;for(let[,{queries:T,components:N,parentQuery:P}]of u){if(!P||!n)continue;if(P.repeaterVariables.length>0){let k=U(this,Q,VD).call(this,{parentQuery:P,queries:T,components:N,repeaterToQuery:t,queryCacheBinding:n,urlVarsPromiseBinding:i,urlVarBindingsById:a,detailResultPromiseBinding:s,hoistedCacheEntries:l,hoistedCacheStatements:c,localeBinding:d,forwardLoaderBinding:C});k&&h.push(k);continue}let R=U(this,Q,Jg).call(this,[P,...T],a),W=R.length>0&&!!i,M=U(this,Q,Vs).call(this,P,T)&&!!s,H=M?p`detailData`:p`undefined`,J=[];for(let k of T){let ne=U(this,Q,Dr).call(this,k,{urlVarBindingsById:a,detailDataBinding:H,itemVarByRepeaterId:new Map([[P.nodeId,p`item`]])}),ae=I.fn(k.constantBinding,...ne),Te=U(this,Q,Wo).call(this,n,ae,d);J.push(I.fn(p`${Te}.preload`))}if(C)for(let k of N){let ne=this.ctx.imports.addModuleImport(k.moduleIdentifier);if(!ne)continue;let ae=Object.keys(k.staticProps).length>0?new Y(k.staticProps):p`{}`;J.push(I.fn(C,ne,ae,p`context`))}if(J.length===0)continue;let K=U(this,Q,Dr).call(this,P,{urlVarBindingsById:a,detailDataBinding:H,itemVarByRepeaterId:new Map}),oe=I.fn(P.constantBinding,...K),me=U(this,Q,Wo).call(this,n,oe,d),j=K.length===0?(()=>{let k=U(this,Q,nc).call(this,P.constantBinding,n,l,c,d);return I.fn(p`${k}.readMaybeAsync`)})():I.fn(p`${me}.readMaybeAsync`),Pe=J[0],pe=J.length===1&&Pe?Pe:p`${J}`,Ie=[];W&&i&&Ie.push(p`const { ${p.listFrom(R)} } = await ${i}`),M&&s&&Ie.push(p`const [detailData] = (await ${s}) ?? []`);let we=p`(async () => {${p.joinLines(...Ie,p`const parentData = await ${j} ?? []`,p`return ${I.fn(p`Promise.allSettled`,I.fn(p`parentData.flatMap`,p`item => ${pe}`))}`)}})()`;h.push(we)}for(let T of m){let N=U(this,Q,PD).call(this,T,t,n,i,a,s,l,c,d);N&&h.push(N)}return h},rc=function(t){let o=new Set(t.repeaterVariables.map(a=>a.repeaterId));if(o.size===0)return[];let n=this.ctx.treeStore.tree.get(t.nodeId)?.cache?.ancestorRepeaterIds?.filter(a=>a&&o.has(a))??[];if(n.length===o.size)return n;let i=[...n];for(let a of o)i.includes(a)||i.push(a);return i},_g=function(t,o){let r=[],n=new Set,i=a=>{if(n.has(a))return;n.add(a);let s=o.get(a);if(s){let l=U(this,Q,rc).call(this,s);for(let c of l)i(c)}r.push(a)};for(let a of t)i(a);return r},PD=function(t,o,r,n,i,a,s,l,c){if(!r)return;let d=U(this,Q,_g).call(this,U(this,Q,rc).call(this,t),o);if(d.length===0)return;let u=U(this,Q,jg).call(this,d,o);if(!u)return;let{providerQueries:m,dataVars:h,itemVars:C}=u,T=p`tasks`,N=[],{detailDataBinding:P}=U(this,Q,Ug).call(this,N,{queriesForUrlBindings:[t,...m],urlVarBindingsById:i,urlVarsPromiseBinding:n,needsDetailData:U(this,Q,Vs).call(this,t),detailResultPromiseBinding:a}),R=m[0],W=h[0];if(!R||!W)return;let M=U(this,Q,Dr).call(this,R,{urlVarBindingsById:i,detailDataBinding:P,itemVarByRepeaterId:new Map});if(M.length===0){let J=U(this,Q,nc).call(this,R.constantBinding,r,s,l,c);N.push(p`const ${W} = await ${I.fn(p`${J}.readMaybeAsync`)} ?? []`,p`const ${T} = []`)}else{let J=I.fn(R.constantBinding,...M),K=U(this,Q,Wo).call(this,r,J,c);N.push(p`const ${W} = await ${I.fn(p`${K}.readMaybeAsync`)} ?? []`,p`const ${T} = []`)}for(let J=0;J<d.length;J++){let K=C[J],oe=h[J];if(!K||!oe)continue;N.push(p`for (const ${K} of ${oe}) {`);let me=J+1;if(me<d.length){let j=h[me],Pe=m[me];if(!j||!Pe)continue;let pe=new Map;d.slice(0,me+1).forEach((ne,ae)=>pe.set(ne,C[ae]));let Ie=U(this,Q,Dr).call(this,Pe,{urlVarBindingsById:i,detailDataBinding:P,itemVarByRepeaterId:pe}),we=I.fn(Pe.constantBinding,...Ie),k=U(this,Q,Wo).call(this,r,we,c);N.push(p`const ${j} = await ${I.fn(p`${k}.readMaybeAsync`)} ?? []`)}else{let j=new Map;d.forEach((k,ne)=>j.set(k,C[ne]));let Pe=U(this,Q,Dr).call(this,t,{urlVarBindingsById:i,detailDataBinding:P,itemVarByRepeaterId:j}),pe=I.fn(t.constantBinding,...Pe),Ie=U(this,Q,Wo).call(this,r,pe,c),we=I.fn(p`${Ie}.preload`);N.push(I.fn(p`${T}.push`,we))}}for(let J=d.length-1;J>=0;J--)N.push(p`}`);return N.push(p`return ${I.fn(p`Promise.allSettled`,T)}`),p`(async () => {${p.joinLines(...N)}})()`},VD=function(t){let{parentQuery:o,queries:r,components:n,repeaterToQuery:i,queryCacheBinding:a,urlVarsPromiseBinding:s,urlVarBindingsById:l,detailResultPromiseBinding:c,hoistedCacheEntries:d,hoistedCacheStatements:u,localeBinding:m,forwardLoaderBinding:h}=t,C=U(this,Q,_g).call(this,U(this,Q,rc).call(this,o),i);if(C.length===0)return;let T=U(this,Q,jg).call(this,C,i);if(!T)return;let{providerQueries:N,dataVars:P,itemVars:R}=T,W=U(this,Q,Vs).call(this,o,r,N)&&!!c,M=W?p`detailData`:p`undefined`,H=[];for(let pe of r){let Ie=new Map;Ie.set(o.nodeId,p`item`),C.forEach((ae,Te)=>Ie.set(ae,R[Te]));let we=U(this,Q,Dr).call(this,pe,{urlVarBindingsById:l,detailDataBinding:M,itemVarByRepeaterId:Ie}),k=I.fn(pe.constantBinding,...we),ne=U(this,Q,Wo).call(this,a,k,m);H.push(I.fn(p`${ne}.preload`))}if(h)for(let pe of n){let Ie=this.ctx.imports.addModuleImport(pe.moduleIdentifier);if(!Ie)continue;let we=Object.keys(pe.staticProps).length>0?new Y(pe.staticProps):p`{}`;H.push(I.fn(h,Ie,we,p`context`))}if(H.length===0)return;let J=H[0],K=H.length===1&&J?J:p`${H}`,oe=[];U(this,Q,Ug).call(this,oe,{queriesForUrlBindings:[o,...r,...N],urlVarBindingsById:l,urlVarsPromiseBinding:s,needsDetailData:W,detailResultPromiseBinding:c});let me=N[0],j=P[0];if(!me||!j)return;let Pe=U(this,Q,Dr).call(this,me,{urlVarBindingsById:l,detailDataBinding:M,itemVarByRepeaterId:new Map});if(Pe.length===0){let pe=U(this,Q,nc).call(this,me.constantBinding,a,d,u,m);oe.push(p`const ${j} = await ${I.fn(p`${pe}.readMaybeAsync`)} ?? []`)}else{let pe=I.fn(me.constantBinding,...Pe),Ie=U(this,Q,Wo).call(this,a,pe,m);oe.push(p`const ${j} = await ${I.fn(p`${Ie}.readMaybeAsync`)} ?? []`)}for(let pe=0;pe<C.length;pe++){let Ie=R[pe],we=P[pe];if(!Ie||!we)continue;oe.push(p`for (const ${Ie} of ${we}) {`);let k=pe+1;if(k<C.length){let ne=P[k],ae=N[k];if(!ne||!ae)continue;let Te=new Map;C.slice(0,k+1).forEach((se,Nt)=>Te.set(se,R[Nt]));let gt=U(this,Q,Dr).call(this,ae,{urlVarBindingsById:l,detailDataBinding:M,itemVarByRepeaterId:Te}),yt=I.fn(ae.constantBinding,...gt),be=U(this,Q,Wo).call(this,a,yt,m);oe.push(p`const ${ne} = await ${I.fn(p`${be}.readMaybeAsync`)} ?? []`)}else{let ne=new Map;C.forEach((yt,be)=>ne.set(yt,R[be]));let ae=U(this,Q,Dr).call(this,o,{urlVarBindingsById:l,detailDataBinding:M,itemVarByRepeaterId:ne}),Te=I.fn(o.constantBinding,...ae),gt=U(this,Q,Wo).call(this,a,Te,m);oe.push(p`const parentData = (await ${I.fn(p`${gt}.readMaybeAsync`)}) ?? []`,p`await ${I.fn(p`Promise.allSettled`,I.fn(p`parentData.flatMap`,p`item => ${K}`))}`)}}for(let pe=C.length-1;pe>=0;pe--)oe.push(p`}`);return oe.push(p`return undefined`),p`(async () => {${p.joinLines(...oe)}})()`},jg=function(t,o){let r=[],n=[],i=[];for(let a=0;a<t.length;a++){let s=t[a],l=o.get(s);if(!l)return;r.push(l),n.push(p`data${a}`),i.push(p`item${a}`)}return{providerQueries:r,dataVars:n,itemVars:i}},Ug=function(t,o){let r=U(this,Q,Jg).call(this,o.queriesForUrlBindings,o.urlVarBindingsById),n=r.length>0&&!!o.urlVarsPromiseBinding,i=o.needsDetailData&&!!o.detailResultPromiseBinding,a=i?p`detailData`:p`undefined`;return n&&o.urlVarsPromiseBinding&&t.push(p`const { ${p.listFrom(r)} } = await ${o.urlVarsPromiseBinding}`),i&&o.detailResultPromiseBinding&&t.push(p`const [detailData] = (await ${o.detailResultPromiseBinding}) ?? []`),{detailDataBinding:a}},Jg=function(t,o){let r=new I.Set,n=[];for(let i of t)for(let a of i.argumentOrder){if(a.kind!=="url")continue;let s=o.get(a.id);s&&(r.has(s)||(r.add(s),n.push(s)))}return n},Vs=function(...t){for(let o of t){if(Ze(o))return U(this,Q,Vs).call(this,...o);for(let r of o.argumentOrder)if(r.kind==="detail")return!0}return!1},Dr=function(t,o){let r=[];for(let n of t.argumentOrder)switch(n.kind){case"url":{let i=o.urlVarBindingsById.get(n.id);r.push(i??p`undefined`);break}case"detail":r.push(p`${o.detailDataBinding}?.[${n.id}]`);break;case"repeater":{let i=o.itemVarByRepeaterId.get(n.repeaterId);r.push(i?p`${i}[${n.id}]`:p`undefined`);break}default:G(n)}return r},nc=function(t,o,r,n,i){let a=ge(t),s=r.get(a);if(s)return s;let l=this.ctx.bindings.create("queryCacheEntry");r.set(a,l);let c=I.fn(t),d=U(this,Q,Wo).call(this,o,c,i);return n.push(p`const ${l} = ${d}`),l},Wo=function(t,o,r){return I.fn(p`${t}.get`,o,r)},RD=function(t){if(t.length===0)return[];let o=this.ctx.imports.addImport("framer",{exportSpecifier:"forwardLoader"}),r=[],n=new Set;for(let i of t){let a=this.ctx.imports.addModuleImport(i.moduleIdentifier);if(!a)continue;let s=Object.keys(i.staticProps).length>0?new Y(i.staticProps):p`{}`,l=`${ge(a)}|${ge(s)}`;n.has(l)||(n.add(l),r.push(I.fn(o,a,s,p`context`)))}return r},Tu=function(t,o){let r=p.joinLines(...t),n=r?p.joinLines(r,p`return ${o}`):p`return ${o}`;return{load:p`(props, context) => {${n}}`}};function kD(e){let t=RB(e.routeLoaderQueries,e.detailPageQuery),o=kB(e.childComponents),r=!F(e.detailPageQuery),n=t.independentQueries.length>0||t.urlOnlyQueries.length>0||r||t.detailOnlyQueries.length>0||t.mixedQueries.length>0||t.repeaterDependentQueries.length>0,i=o.independentChildComponents.length>0||o.repeaterDependentChildComponents.length>0;if(!(!n&&!i))return{...t,...o,detailPageQuery:e.detailPageQuery}}function RB(e,t){let o=new Map,r=[],n=[],i=[],a=[],s=[];for(let l of e.values()){if(l.hasUnresolvableVariables||l.detailPageVariableIds.length>0&&F(t))continue;for(let m of l.nodeIds)o.set(m,l);let c=l.detailPageVariableIds.length>0,d=l.urlVariables.length>0;l.repeaterVariables.length>0?s.push(l):c&&d?a.push(l):c?i.push(l):d?n.push(l):r.push(l)}return{repeaterToQuery:o,independentQueries:r,urlOnlyQueries:n,detailOnlyQueries:i,mixedQueries:a,repeaterDependentQueries:s}}function kB(e){let t=[],o=[];for(let r of e.values())r.ancestorRepeaterId?o.push(r):t.push(r);return{independentChildComponents:t,repeaterDependentChildComponents:o}}function wD(e){return ge(e)}var ma,fa,ha,Rs,Nu,LD,Iu=class{constructor(t){this.ctx=t;ce(this,Nu);ce(this,ma,new Map);ce(this,fa);ce(this,ha,new Map);ce(this,Rs)}addDetailPageQuery(t,o,r){let n=p`where`,i=p`(${n}) => (${new Y({from:t,select:o,where:n})})`,a=this.ctx.declarations.dedupe("detailQuery",i);le(this,fa,{from:t,select:o,collectionAlias:r,constantBinding:a})}addRouteLoaderQuery(t,o,r=[]){let n=wD(o),i=E(this,ma).get(n);if(i){i.nodeIds.includes(t.id)||i.nodeIds.push(t.id);let R=new I.Set,W=[];for(let M of r){let H=this.ctx.variables.create(M);R.has(H)||(R.add(H),W.push(H))}return W.length>0?I.fn(i.constantBinding,...W):I.fn(i.constantBinding)}let a=U(this,Nu,LD).call(this),s=[],l=new I.Set,c=[],d=[],u=[],m=[],h=!1;for(let R of r){let W=this.ctx.variables.create(R);if(!l.has(W))if(l.add(W),c.push(W),R.providerId===this.ctx.entryNode.id){let M=a.get(R.id);M?(u.push(M),d.push({kind:"url",id:R.id})):(s.push(R.id),d.push({kind:"detail",id:R.id}))}else if(R.providerId){let M=this.ctx.treeStore.tree.get(R.providerId);M&&Ft(M)?(m.push({id:R.id,repeaterId:R.providerId}),d.push({kind:"repeater",id:R.id,repeaterId:R.providerId})):h=!0}else h=!0}let C=c.length>0,T=C?p.listFrom(c):p``,N=p`(${T}) => (${o})`,P=this.ctx.declarations.dedupe("query",N);return E(this,ma).set(n,{key:n,constantBinding:P,query:o,nodeId:t.id,nodeIds:[t.id],detailPageVariableIds:s,urlVariables:u,repeaterVariables:m,hasUnresolvableVariables:h,argumentOrder:d}),C?I.fn(P,...c):I.fn(P)}addChildComponent(t,o,r,n){ot(t)&&(E(this,ha).has(r)||E(this,ha).set(r,{moduleIdentifier:t,staticProps:o,nodeId:r,ancestorRepeaterId:n}))}hasRouteLoaderQueries(){return E(this,ma).size>0||!F(E(this,fa))||E(this,ha).size>0}getDetailPageQueryConstant(){return E(this,fa)?.constantBinding}getRouteLoaderCode(){let t=kD({routeLoaderQueries:E(this,ma),detailPageQuery:E(this,fa),childComponents:E(this,ha)});if(t)return new bu(this.ctx).serialize(t)}};ma=new WeakMap,fa=new WeakMap,ha=new WeakMap,Rs=new WeakMap,Nu=new WeakSet,LD=function(){let t=E(this,Rs);if(t)return t;let o=new Map;if(!z(this.ctx.entryNode))return le(this,Rs,o),o;for(let r of this.ctx.entryNode.variables){if(!Vo(r)||!Vv(r)||r.type!=="string"&&r.type!=="collectionreference"&&r.type!=="multicollectionreference")continue;let n;switch(r.type){case"multicollectionreference":n=Ze(r.initialValue)?r.initialValue:[];break;case"collectionreference":n=A(r.initialValue)?r.initialValue:"";break;case"string":n=r.optional===!0?void 0:r.initialValue;break;default:G(r,"Unexpected variable type")}let i={id:r.id,parameterName:vD(r),type:r.type,optional:r.type==="string"&&r.optional===!0?!0:void 0,initialValue:n};if((r.type==="collectionreference"||r.type==="multicollectionreference")&&r.dataIdentifier){let a=he(r.dataIdentifier);a&&"type"in a&&a.type==="collection"&&(i.collectionId=a.localIdName)}o.set(r.id,i)}return le(this,Rs,o),o};function Xg(e,t){let o=[],r=lS(e,i=>{let a=t.create(i);return o.push(i),"${"+a+"}"});return{templatedUrl:new I("`"+r+"`"),usedVariables:o}}function xu(e,t,o,r=void 0){if(B(e.value))return qt(!Xt(e.value),"Computed values should not be possible in fetch fallback"),t.create(e.value);switch(e.type){case"color":return e.value?p`${e.value}`:p`undefined`;case"string":return p`${e.value}`;case"boolean":return new I(e.value);case"number":return new I(e.value);case"image":{if(e.value===void 0)return p`undefined`;let n=o.resolveResponsiveImage(e.value);return n?p`${n.src}`:p`undefined`}case"link":{if(!e.value||!r)return p`undefined`;let n=r.create(e.value);return n?new I(ge(n)):p`undefined`}default:ho(e)}}function Pu(e,t,o,r=void 0){let{templatedUrl:n}=Xg(e,t),i=$c(e);return new Y({url:n,resultKeyPath:e.resultKeyPath,fallbackValue:xu(i.controlProp,t,o,r),errorFallbackValue:i.errorControlProp?xu(i.errorControlProp,t,o,r):void 0,resultOutputType:i.controlProp.type,cacheDuration:e.cacheDuration,credentials:e.credentials})}function wB(e){return{id:e,value:void 0,dependencies:new Map,usedVariables:[],children:new Map,fetches:new I.Set,variantHasAnyFetches:!1}}function Zg(e,t){return e.get(t)??wB(t)}function DD(e,t,o){if(e.cache.ancestorRepeaterIds){if(o){let r=[...e.cache.ancestorRepeaterIds,e.id];for(let n=e.cache.ancestorRepeaterIds.length-1;n>=0;n--){let i=e.cache.ancestorRepeaterIds[n];if(i&&t.has(i))break;r.splice(n,1)}return r}return[...e.cache.ancestorRepeaterIds,e.id]}return[e.id]}function Qg(...e){let t=[];for(let o of e)o&&t.push(ge(o));return new I(t.join(", "))}function Vu(e){if(e.length===0)return;let t={};for(let o of e)t[ge(o)]=o;return t}function FD(e,t){if(t.length===0)return p``;let o=new Y;for(let r of t)o[r.id]=e(r);return o}var ga,Kg,AD,Ru=class{constructor(t){this.ctx=t;ce(this,ga);D(this,"preloadDependencyTree",new Map)}addQuery(t,o,r){if(!U(this,ga,Kg).call(this))return;let{destructured:n,dependencies:i}=this.getVariableDependencies(r),a=p`(${Qg(this.ctx.command("query"),n)}) => ${I.fn(this.ctx.command("query"),o)}`;this.addStatement("query",t,i,I.fn(this.ctx.declarations.dedupe("query",a),this.ctx.command("query"),n))}addFetch(t,o){if(!U(this,ga,Kg).call(this))return;let{usedVariables:r}=Xg(o,this.ctx.variables);q(o.controlProp.value)&&r.push(o.controlProp.value);let{destructured:n,dependencies:i}=this.getVariableDependencies(r),a=p`(${Qg(this.ctx.command("fetch"),n)}) => ${I.fn(this.ctx.command("fetch"),Pu(o,this.ctx.variables,this.ctx.assets,void 0))}`;this.addStatement("fetch",t,i,I.fn(this.ctx.declarations.dedupe("fetch",a),this.ctx.command("fetch"),n))}createPromiseList({fetches:t,children:o},r=!1){let n=[];if(r)for(let i of t)n.push(i);for(let[,i]of o){for(let s of i.fetches)n.push(s);if(!i.value)continue;let a=i.value;if(i.children.size===0){n.push(a);continue}n.push(p`${a}.then(collection => Promise.all(collection.flatMap((${FD(s=>this.ctx.variables.create(s),i.usedVariables)}) => (${this.createPromiseList(i)}))))`)}return n}getHook(){if(!U(this,ga,AD).call(this))return{variants:new Set,hook:void 0};let t={},o=[],r=new Set;for(let[h,C]of this.preloadDependencyTree){if(C.children.size===0&&C.fetches.size===0||!C.variantHasAnyFetches)continue;r.add(h);let T=C.usedVariables.map(N=>this.ctx.variables.create(N));o.push(...T),t[h]=this.ctx.declarations.dedupe("preload",p`(${this.ctx.command("query")}, ${this.ctx.command("fetch")}, ${Vu(T)??p`props`}) => Promise.all(${this.createPromiseList(C,!0)})`)}if(!r.size)return{variants:new Set,hook:void 0};let n=this.ctx.declarations.dedupe("preloadStatements",t),i=this.ctx.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a=this.ctx.imports.addImport("framer",{exportSpecifier:"usePreloadQuery"}),s=this.ctx.imports.addImport("framer",{exportSpecifier:"usePrefetch"}),l=p`variant`,c=p`gestures`,d=p`clearLoadingVariant`,u=p`setGestureState`,m=this.ctx.declarations.dedupe("useLoadingVariant",p`(${l}, ${c}, ${d}, ${u}, props?: Record<string, unknown>) => {${p.joinLines(p`const prequery = ${I.fn(a)}`,p`const prefetch = ${I.fn(s)}`,p`${i}.useEffect(() => {${p.joinLines(p`const promise = ${n}[${l}]`,p`if (!promise || !${c}?.[${l}]?.loading) return`,p`promise(prequery, prefetch, props)`,p`.then(() => ${I.fn(d)})`,p`.catch(() => ${I.fn(u,{isError:!0})})`)}}, [${l}])`)}}`);return{variants:r,hook:h=>I.fn(m,fe.baseVariant,h,fe.clearLoadingGesture,fe.setGestureState,Vu(o))}}addStatement(t,o,r,n){let i=this.ctx.getVariantIdFor(o),a=this.ctx.treeStore.tree.get(i);if(!a||!Ee(a)||hs(a.gesture))return;let s=Zg(this.preloadDependencyTree,a.id);t==="fetch"&&(s.variantHasAnyFetches=!0);let l=r.get(this.ctx.entryNode.id);l&&s.usedVariables.push(...l);let c=s;for(let d of DD(o,r,t==="fetch")){let u=Zg(c.children,d);if(d===o.id){t==="query"&&(u.value=n),t==="fetch"&&u.fetches.add(n);for(let[h,C]of r){let T=u.dependencies.get(h)??[];T.push(...C),u.dependencies.set(h,T)}}let m=r.get(d);m&&u.usedVariables.push(...m),c.children.set(d,u),c=u}this.preloadDependencyTree.set(a.id,s)}getVariableDependencies(t){let o=[],r=new Map;for(let n of t)o.push(this.ctx.variables.create(n)),LB(r,n.providerId??this.ctx.entryNode.id,n);return{destructured:Vu(o),dependencies:r}}};ga=new WeakSet,Kg=function(){return ue(this.ctx.entryNode)||Be(this.ctx.entryNode)},AD=function(){return ue(this.ctx.entryNode)};function LB(e,t,o){let r=e.get(t)??[];r.push(o),e.set(t,r)}var zn=class{constructor(t,o,r,n,i,a,s){this.entryNode=t;this.treeStore=o;this.variables=r;this.declarations=n;this.bindings=i;this.imports=a;this.assets=s;D(this,"ctx");D(this,"routeLoader");D(this,"variantPreload");this.ctx=new vu(this.entryNode,this.treeStore,this.variables,this.declarations,this.bindings,this.imports,this.assets),this.routeLoader=new Iu(this.ctx),this.variantPreload=new Ru(this.ctx)}addDetailPageQuery(t,o,r){this.routeLoader.addDetailPageQuery(t,o,r)}addRouteLoaderQuery(t,o,r=[]){return this.routeLoader.addRouteLoaderQuery(t,o,r)}addChildComponent(t,o,r,n){this.routeLoader.addChildComponent(t,o,r,n)}getRouteLoaderCode(){return this.routeLoader.getRouteLoaderCode()}hasRouteLoaderQueries(){return this.routeLoader.hasRouteLoaderQueries()}getDetailPageQueryConstant(){return this.routeLoader.getDetailPageQueryConstant()}addQuery(t,o,r){this.variantPreload.addQuery(t,o,r)}addFetch(t,o){this.variantPreload.addFetch(t,o)}getHook(){return this.variantPreload.getHook()}};var ku=class{constructor(){D(this,"cssWidthCache",new Map);D(this,"heightCache",new Map);D(this,"yPositionCache",new Map);D(this,"verticalStackLayoutInfoCache",new Map);D(this,"gridLayoutInfoCache",new Map);D(this,"computationCache",new Map);D(this,"testing",{getCSSWidthCache:()=>this.cssWidthCache,getHeightCache:()=>this.heightCache})}getCSSWidth(t){return this.cssWidthCache.get(t)}setCSSWidth(t,o){this.cssWidthCache.set(t,o)}getHeight(t){return this.heightCache.get(t)}setHeight(t,o){this.heightCache.set(t,o)}getYPosition(t){return this.yPositionCache.get(t)}setYPosition(t,o){this.yPositionCache.set(t,o)}getVerticalStackLayoutInfo(t){return this.verticalStackLayoutInfoCache.get(t)}setVerticalStackLayoutInfo(t,o){this.verticalStackLayoutInfoCache.set(t,o)}getGridLayoutInfo(t){return this.gridLayoutInfoCache.get(t)}setGridLayoutInfo(t,o){this.gridLayoutInfoCache.set(t,o)}memo(t,o){if(this.computationCache.has(t))return this.computationCache.get(t);let r=o();return this.computationCache.set(t,r),r}};var qg=class{constructor(){D(this,"heightNodes",new Set)}startComputingHeightFor(t){this.heightNodes.add(t)}isComputingHeightFor(t){return this.heightNodes.has(t)}finishComputingHeightFor(t){this.heightNodes.delete(t)}};function DB(e,t){return(o,r,n=void 0)=>{if(Xt(o))return t.createComputedValue(o,r,n);if(q(o))return e.create(o);ho(o,"all dynamic values should be handled above")}}function ED(e,t,o,r){return{tree:e,componentLoader:t,cache:new ku,workInProgress:new qg,getVariableBinding:DB(o,r)}}var Me=class extends Error{constructor(...t){super(...t)}};function ke(e,t){let o=Math.round(e*1e4)/1e4;return{type:"css-const",expr:t?`${o}${t}`:`${o}`,value:e,unit:t}}var wu={"+":"-","-":"+","*":"/","/":"*"};function tt(e,t,o){if(t.type==="css-const"&&o.type==="css-const"){if(t.unit===o.unit){if(e==="+")return ke(t.value+o.value,t.unit);if(e==="-")return ke(t.value-o.value,t.unit);if(e==="min")return ke(Math.min(t.value,o.value),t.unit);if(e==="max")return ke(Math.max(t.value,o.value),t.unit)}else if(ks(e)&&(t.value===0||o.value===0))return o.value!==0?o:t;if(e==="*"&&(!t.unit||!o.unit))return ke(t.value*o.value,t.unit||o.unit);if(e==="/"&&!o.unit)return ke(t.value/o.value,t.unit)}if(ks(e)){if(o.type==="css-const"&&o.value===0)return t;if(t.type==="css-const"&&t.value===0)return o}else if(Lu(e)){if(o.type==="css-const"&&o.value===1)return t;if(t.type==="css-const"&&t.value===1)return o}else if(e==="min"||e==="max"){if(t.type==="css-op"&&t.op===e&&MD(t,o))return t;if(o.type==="css-op"&&o.op===e&&MD(o,t))return o;if(rr(t.expr,o.expr))return t}t.type==="css-op"&&t.right.type==="css-const"&&(ks(e)&&ks(t.op)?(o=tt(e==="+"?t.op:wu[t.op],o,t.right),t=t.left):Lu(e)&&Lu(t.op)&&(o=tt(e==="*"?t.op:wu[t.op],o,t.right),t=t.left));let r;if(ks(e))o.type==="css-const"&&o.value<0&&(e=wu[e],o=ke(-o.value,o.unit)),e==="+"?r=nt`${ya(t)} + ${o.expr}`:e==="-"?o.type==="css-op"&&!Du(o.op)?r=nt`${ya(t)} - (${o.expr})`:r=nt`${ya(t)} - ${ya(o)}`:ho(e);else if(Lu(e)){if(o.type==="css-const"&&o.value<1){let n=ke(1/o.value,o.unit);n.expr.length<o.expr.length&&(e=wu[e],o=n)}e==="/"&&o.type==="css-op"&&!Du(o.op)?r=nt`${ya(t)} / (${o.expr})`:r=nt`${ya(t)} ${e} ${ya(o)}`}else Du(e)?r=nt`${e}(${t.expr}, ${o.expr})`:ho(e,`unhandled op ${e}`);return{type:"css-op",expr:r,op:e,left:t,right:o}}function Fu(e){switch(e.type){case"number-const":return ke(e.value,"px");case"number-template":return Pi(e.expr);default:ho(e)}}function Pi(e){return{type:"css-template",expr:e}}function ks(e){return e==="+"||e==="-"}function Lu(e){return e==="*"||e==="/"}function Du(e){return e==="min"||e==="max"}function MD(e,t){return rr(e.left.expr,t.expr)||rr(e.right.expr,t.expr)}function ya(e){return e.type==="css-op"&&ks(e.op)?nt`(${e.expr})`:e.expr}function Au(e){return e.type==="css-template"||e.type==="css-const"||e.type==="css-op"&&Du(e.op)?e.expr:nt`calc(${e.expr})`}function FB(e,t,o,r,n,i){let a=t??dI;if(!i)return!0;let s=e.filters.filter(l=>{if(!l.itemKey)return!1;let c=i.properties[l.itemKey];return!(!c||c.type!=="boolean"&&l.transforms.length===0)});return s.length===0?!0:s[a==="all"?"every":"some"](l=>{let c=l.itemKey;S(c!==null,"itemKey should not be null");let d=i.properties[c];S(d,"control should exist");let u=o(c),m=r.getVariableControlByKey(c);return l.transforms.reduce((h,C)=>rT(h,C,r,n,m,void 0,void 0),u)})}function OD(e,t,o,r,n,i){return e?o.filter(a=>FB(e,t,s=>a[s],r,n,i)):o}function AB(e,t){return t?Array.from(e).reverse():e}function EB(e,t){if(t===void 0||t===0)return e;let o=Array.from(e);return o.splice(0,t),o}function MB(e,t){return e.length<=t?e:e.slice(0,t)}function WD(e,t,o,r,n=15){if(n&1&&(t=OD(e.collectionFilters,e.collectionFiltersOperator,t,e.cache,o,r)),n&2&&(t=AB(t,e.collectionReverse)),n&4&&(t=EB(t,e.collectionStartOffset)),n&8){let i=e.collectionLimit??1/0,a=e.collectionPaginationPageSize??1/0,s=Math.min(i,a);t=MB(t,s)}return t}var fr=1e3,zD=Symbol("Affects Layout: Indeterminate");function Eu(e){return e===zD}function Bn(e,t,o,r){return ut(e)||Fd(e,t)&&jr(e)||Dd(o,e)&&lo(e)||Jr(e)&&e.visible===!1?!1:Jr(e)&&B(e.visible)?r?e.isVisible():zD:!0}function Dt(e){if(!Zo(e))return 0;if(B(e.padding))throw new Me;return e.paddingPerSide?e.paddingTop??0:e.padding??0}function zo(e){if(!Zo(e))return 0;if(B(e.padding))throw new Me;return e.paddingPerSide?e.paddingBottom??0:e.padding??0}function nr(e){return B(e)?0:e??0}var OB=[];function Vi(e,t){let o=(qa(t)?t.getChildrenInVisualOrder():t.children)??OB;if(Ft(t)){let r=t.collectionRepeatedItemId?o.findIndex(a=>a.id===t.collectionRepeatedItemId):0,n=o[r];if(!n)return o;let i=WB(e,t);return o.slice(0,r).concat(Array(i).fill(n)).concat(o.slice(r+1))}return o}function WB(e,t){if((t.collectionFilters?.filters?.length??0)>0)return 1;let o=e.dataForIdentifier(t.dataIdentifier),r=o?.itemToSlug??{},n=Object.keys(r).length,i=Array(n).fill({});return WD(t,i,void 0,o,14).length}function ic(e){let t=e.resolveValue("fillImage"),o=cv(t)?t.src:t;if(!o)return;let r=YI(o);if(!(!r||!Number.isFinite(r.width)||!Number.isFinite(r.height)||r.width<=0||r.height<=0))return r.width/r.height}function Mu(e,t){let o=e.widthType===0,r=Xa(e)&&e.usesDOMRectCached()&&Yt(e.cache.getRawDOMRect(e.id));if(!(!o&&!r))return t.tree.getRect(e).width}var $D=";";function ey(e,t){return`${e}${$D}${t}`}function zB(e){let[t,o]=e.split($D);return S(!F(o),"parseCellCoordinate(), satisfying TypeScript: columnIndex must exist: "+e),[Number(t),Number(o)]}function BD(e,t,o,r){let n=0;for(let i=0;i<o;i++){let a=ey(t,i);if(e.has(a)){n=0;continue}if(n++,n!==r)continue;let l=i-(r-1);return S(l>=0,"getColumnIndexForItem(), column index should be at least 0"),l}return-1}function BB(e,t,o,r,n,i,a){let s=r+(i-1);S(a>s,"fillCellsForItem(), column count has to be larger than maxColumnIndex");let l=o+(n-1);for(let c=r;c<=s;c++)for(let d=o;d<=l;d++){let u=ey(d,c);t.set(u,e)}}function $B(e,t){return!Wi(e)||B(e.gridItemColumnSpan)?1:e.gridItemColumnSpan==="all"?t:Math.min(e.gridItemColumnSpan??1,t)}function Ou(e,t){return!Wi(e)||!at.isOn("gridBentoLayout")&&t.gridRowHeightType==="fit"||B(e.gridItemRowSpan)?1:e.gridItemRowSpan??1}var Yg=class{constructor(t,o,r,n){this.gridLayout=t;this.rowCount=o;this.columnCount=r;this.filledRowCount=n;D(this,"coordinateCache")}getGridItem(t,o){let r=ey(t,o);return this.gridLayout.get(r)??null}findCoordinates(t){if(!this.coordinateCache){this.coordinateCache=new Map;for(let[o,r]of this.gridLayout){let[n,i]=zB(o),a=this.coordinateCache.get(r);(!a||n<a.rowIndex||i<a.columnIndex)&&this.coordinateCache.set(r,{rowIndex:n,columnIndex:i})}}return this.coordinateCache.get(t)??null}isEmpty(){return this.gridLayout.size===0}};function GD(e,t,o){let r=e.gridColumnCount;if(!te(r))return null;let n=new Map,i=0,a=-1;for(let c of Vi(o,e)){if(!Bn(c,e,t,!0))continue;let d=$B(c,r),u=Ou(c,e),m=BD(n,i,r,d);for(;m===-1;)i++,m=BD(n,i,r,d);BB(c.id,n,i,m,u,d,r);let h=i+(u-1);a=Math.max(a,h)}let s=a+1,l=Math.max(e.gridRowCount??0,s);return new Yg(n,l,r,s)}function Ca(e,t){let o=t.cache.getGridLayoutInfo(e.id);if(o)return o;let r=GD(e,t.tree,t.componentLoader);if(We(r))throw new Me;return t.cache.setGridLayoutInfo(e.id,r),r}function vpe(e,t,o){return GD(e,t,o)?.filledRowCount}var GB={type:"number-const",value:0},HB={type:"number-const",value:1/0},_B={type:"number-const",value:fr};function xe(e){return e===0?GB:e===1/0?HB:e===fr?_B:{type:"number-const",value:XB(e)}}function _(e,...t){return Wu(e,0,t.length,t)}function Wu(e,t,o,r){qt(0<=t&&t<=o&&o<=r.length,"start and end must be within the bounds of operands");let n=o-t;if(n===0)return null;if(n===1){let c=r[t];return zc(c)?xe(c):c}let{hasTemplateOperands:i,operationResult:a}=jB(t,o,r,e);if(!i)return xe(a);let s=UB(t,o,r),l=e==="min"||e==="max"?I.fn(p`Math.${new I(e)}`,...s):new I(`(${It(s,` ${e} `)})`);return ac(l,a,!0)}function jB(e,t,o,r){let n=!1,i;for(let a=e;a<t;a++){let s=o[a],l;zc(s)?l=s:s.type==="number-const"?l=s.value:s.type==="number-template"?(n=!0,l=Bo(s)):ho(s),F(i)?i=l:i=JB(r,i,l)}return qt(!F(i),"resultEstimate must be computed after walking over all operands"),{hasTemplateOperands:n,operationResult:i}}function UB(e,t,o){let r=[];for(let n=e;n<t;n++){let i=o[n];zc(i)?r.push(p`${i}`):i.type==="number-const"?r.push(p`${i.value}`):r.push(i.expr)}return r}function ac(e,t,o=!1){return{type:"number-template",expr:o?e:p`(${e})`,impreciseEstimate:t}}function JB(e,t,o){switch(e){case"+":return t+o;case"-":return t-o;case"*":return t*o;case"/":return t/o;case"min":return Math.min(t,o);case"max":return Math.max(t,o);default:ho(e)}}function XB(e){return Math.round(e*1e4)/1e4}function Bo(e){return e.type==="number-const"?e.value:e.impreciseEstimate}var ty=class{constructor(t,o,r,n,i){this.columns=t;this.nodeToAccurateCoordinateMap=o;this.nodeToRoughCoordinateMap=r;this.gap=n;this.contentHeight=i;D(this,"frToPxCache",new Map)}walkColumn(t,o){if(this.columns[t])for(let r of this.columns[t])o(r.nodeId)}getStackItem(t,o){return this.columns[t]?.[o]?.nodeId??null}findCoordinates(t){return this.findAccurateCoordinates(t)??this.findRoughCoordinatesOfConditionallyVisibleNode(t)}findAccurateCoordinates(t){return this.nodeToAccurateCoordinateMap.get(t)??null}findRoughCoordinatesOfConditionallyVisibleNode(t){return this.nodeToRoughCoordinateMap.get(t)??null}getFrToPxForColumn(t){let o=this.columns[t];if(!o)return null;if(!this.frToPxCache.has(t)){let r=[],n=[];for(let d of o)d.type==="regular"?r.push(d):d.type==="fr"?n.push(d):ho(d);let i=r.reduce((d,u)=>_("+",d,u.getHeight()),xe(0)),a=this.gap*(o.length-1),s=_("-",this.contentHeight,_("+",i,a)),l=n.reduce((d,u)=>d+u.frUnits,0),c=_("/",s,Math.max(l,1));for(n=n.sort((d,u)=>Bo(u.getMinHeightPerFr())-Bo(d.getMinHeightPerFr()));n[0]&&Bo(n[0].getMinHeightPerFr())>Bo(c);)s=_("-",s,n[0].getMinHeight()),l-=n[0].frUnits,c=_("/",s,Math.max(l,1)),n.shift();for(n=n.sort((d,u)=>Bo(d.getMaxHeightPerFr())-Bo(u.getMaxHeightPerFr()));n[0]&&Bo(n[0].getMaxHeightPerFr())<Bo(c);)s=_("-",s,n[0].getMaxHeight()),l-=n[0].frUnits,c=_("/",s,Math.max(l,1)),n.shift();this.frToPxCache.set(t,_("max",xe(0),c))}return this.frToPxCache.get(t)??null}};function zu(e,t,o,r,n){let i=t.cache.getVerticalStackLayoutInfo(e.id);if(i)return i;let a=ZB(e,t,o,r,n);return t.cache.setVerticalStackLayoutInfo(e.id,a),a}function ZB(e,t,o,r,n){let i=oy(e),a=Ao(i),s=_("-",o(e),Dt(e)+zo(e)),l=Bo(s),c=new Map,d=new Map,u=[],m=0;for(let h of Vi(t.componentLoader,e)){if(!(Ae(h)&&st(h)))continue;let C=Bn(h,e,t.tree,!1);if(C===!1)continue;if(Eu(C)){d.set(h.id,{columnIndex:Math.max(u.length-1,0),columnItemIndex:Math.max(u[u.length-1]?.length??0,0)});continue}let T=QB(h,t,o,r,n);if(e.stackWrapEnabled){let P=Bo(T.type==="fr"?T.getMinHeight():T.getHeight());Math.ceil(m+a+P)>Math.ceil(l)||u.length===0?(u.push([T]),m=P):(u[u.length-1].push(T),m+=a+P)}else u[0]=u[0]??[],u[0].push(T);c.set(h.id,{columnIndex:u.length-1,columnItemIndex:u[u.length-1].length-1})}return new ty(u,c,d,a,s)}function QB(e,t,o,r,n){if(e.heightType===3){let i={nodeId:e.id,type:"fr",frUnits:e.height,getMinHeight:()=>t.cache.memo(`stack-getMinHeight-${e.id}`,()=>r(e)),getMaxHeight:()=>t.cache.memo(`stack-getMaxHeight-${e.id}`,()=>n(e)),getMinHeightPerFr:()=>t.cache.memo(`stack-getMinHeightPerFr-${e.id}`,()=>_("/",i.getMinHeight(),i.frUnits)),getMaxHeightPerFr:()=>t.cache.memo(`stack-getMaxHeightPerFr-${e.id}`,()=>_("/",i.getMaxHeight(),i.frUnits))};return i}else return{nodeId:e.id,getHeight:()=>t.cache.memo(`stack-getHeight-${e.id}`,()=>o(e)),type:"regular"}}function oy(e){return Hc(e)?nr(e.gap):0}function HD(e,t){if(e.textFitViewBoxSize)throw new Me;let o=e.widthType!==2,r=0;for(let[n,i]of e.getProsemirrorTextBlocks(!1).entries()){let a,[s,l]=YB(i,t);if(l==="px")a=s;else{let u=l==="%"?s/100:s;a=KB(i,t)*u}let c=0;n>0&&(c=e$(i,e,t)??0);let d=1;if(o){let u=i.attrs.tag;u==="h1"||u==="h2"||u==="h3"||u==="h4"||u==="h5"||u==="h6"?d=1:u==="p"||u==="div"?d=5:ho(u)}r+=c+a*d}return r}function KB(e,t){let o=qB(e,t);return e.descendants(r=>{if(!dT(r))return;let i=r.marks.find(cT)?.attrs.inlineStyles.fontSize;if(B(i))throw new Me;if(F(i))return;let[a,s="px"]=ii(i)?i:[i],l=Qm(a,s,"px");l>o&&(o=l)}),o}function qB(e,t){if(yd(e)){let o=e.attrs.textStylePreset,r=t.getNodeWithTrait(o,io);if(r){let[n,i]=rd(r.fontSize)?$i(r.fontSize):[r.fontSize,"px"];return i==="rem"?go(n*US,0):n}}if(!F(e.attrs.inlineStyles.fontSize)){let o=e.attrs.inlineStyles.fontSize;if(B(o))throw new Me;let[r,n="px"]=ii(o)?o:[o];return Qm(r,n,"px")}return $i(Km.fontSize)[0]}function YB(e,t){if(yd(e)){let o=e.attrs.textStylePreset,r=t.getNodeWithTrait(o,io);if(r)return r.lineHeight}return F(e.attrs.blockStyles.lineHeight)?Km.lineHeight:e.attrs.blockStyles.lineHeight}function e$(e,t,o){if(yd(e)){let r=e.attrs.textStylePreset,n=o.getNodeWithTrait(r,io);if(n)return n.paragraphSpacing}return t.paragraphSpacing}var _D=Je("simulateHeight"),t$=200;function jD(e,t){try{let o=ht(e,t);return o.type==="number-const"?o.value:o.expr}catch(o){if(o instanceof Me)return;_D.reportWithoutLogging(o,{nodeId:e.id}),_D.warnOncePerMinute(`Can\u2019t simulate the height for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function ht(e,t){let o=t.cache.getHeight(e.id);if(!F(o))return o;if(t.workInProgress.isComputingHeightFor(e.id))throw new Error("Detected a circular walk in simulateHeight(): we\u2019re entering a node which is already being computed. This would result in a call stack overflow. Exiting early.");let r;try{t.workInProgress.startComputingHeightFor(e.id),r=o$(e,t)}finally{t.workInProgress.finishComputingHeightFor(e.id)}return t.cache.setHeight(e.id,r),r}function o$(e,t){if(!as(e))throw new Me;let o=t.tree.getNodeParent(e);if(et(e))return xe(fr);if(S(Ae(e)&&st(e),"Can\u2019t calculate the height on a node when it doesn\u2019t have size information"),Ha(e)){let n=t.tree.getRect(e).height;return ac(p`${fe.componentViewport}?.height || ${n}`,n)}if(ml(e))return Et.startFromRowHeightMultipliedBySpan(e,t).getWithConstraints();if(!hi(e,o)&&Re(e)&&Yt(e.top)&&Yt(e.bottom))return(lo(e)?Et.startFromFixedValue(xe(fr),e,t):Et.startFromParentOuterHeight(e,t)).op((i,a)=>{let s=a.top,l=a.bottom;return S(Yt(s)&&Yt(l),"Satisfying TypeScript"),_("-",i,xe(s+l))}).getWithConstraints();if(e.heightType===0)return Et.startFromFixedValue(xe(e.height),e,t).getWithConstraints();if(e.heightType===1){S(o,"A node can\u2019t have a % height without a parent");let n;return lo(e)?n=Et.startFromFixedValue(xe(fr),e,t):jr(e)?n=Et.startFromParentOuterHeight(e,t):eo(o)&&Wi(e)?n=Et.startFromRowHeightMultipliedBySpan(e,t):n=Et.startFromParentInnerHeight(e,t),n.op((i,a)=>_("*",i,xe(a.height))).getWithConstraints()}if(e.heightType===4)return Et.startFromFixedValue(xe(e.height*fr),e,t).getWithConstraints();if(e.heightType===3){if(S(!jr(e)&&!lo(e),"FractionOfFreeSpace height is not supported for fixed or absolute node"),S(o,"A node can\u2019t have a fractional height without a parent"),!no(o)&&eo(o)){let n=Bu(e,t);if(!n)throw new Me;return n}if(S(no(o),"A node can have a fractional height only if it\u2019s inside a stack"),S(o.stackDirection,"A stack must have a direction defined"),B(o.stackDirection))throw new Me;if(o.stackDirection==="horizontal")return Et.startFromParentInnerHeight(e,t).op((n,i)=>_("*",n,xe(i.height))).getWithConstraints();if(o.stackDirection==="vertical"){S(Ae(o)&&st(o),"A stack must have a size and size-dimension type");let n=zu(o,t,l=>ht(l,t),l=>$u(l,t),l=>Gu(l,t)),i=n.findCoordinates(e.id);S(i,"Node must be found in stack");let a=n.getFrToPxForColumn(i.columnIndex);S(a,"frHeight must be available for column");let s=_("*",a,xe(e.height));return Et.startFromFixedValue(s,e,t).getWithConstraints()}G(o.stackDirection)}if(e.heightType===2){let n=Bu(e,t);if(!n)throw new Me;return n}if(e.heightType===5){if(!so(e))throw new Me;let n=ic(e),i=Mu(e,t),a=F(i)||F(n)?e.height:Math.round(i*(1/n));return Et.startFromFixedValue(xe(a),e,t).getWithConstraints()}G(e.heightType)}var $n,sc,ws,lc,hr,ry,ny,UD,iy,ir=class ir{constructor(t,o,r,n){ce(this,$n);ce(this,sc);ce(this,ws);ce(this,lc);le(this,$n,t),le(this,sc,o),le(this,ws,r),le(this,lc,n)}static startFromFixedValue(t,o,r){return new ir(t,()=>{var i,a;let n=r.tree.getNodeParent(o);if(S(n,"Can\u2019t calculate the parent height on a node without a parent"),S(Ae(n)&&st(n),"Can\u2019t calculate the parent height on a node when a parent doesn\u2019t have size information"),eo(n)){let s=U(i=ir,hr,ry).call(i,o,n,r);return U(a=ir,hr,ny).call(a,s,o,n)}else return ht(n,r)},o,r)}static startFromParentOuterHeight(t,o){let r=o.tree.getNodeParent(t);S(r,"Can\u2019t call startFromParentOuterHeight() on a node without a parent");let n=ht(r,o);return new ir(n,()=>n,t,o)}static startFromParentInnerHeight(t,o){let r=o.tree.getNodeParent(t);S(r,"Can\u2019t call startFromParentInnerHeight() on a node without a parent");let n=_("-",ht(r,o),Dt(r)+zo(r));return new ir(n,()=>n,t,o)}static startFromRowHeightMultipliedBySpan(t,o){var a,s;let r=o.tree.getNodeParent(t);S(r&&eo(r),"Can\u2019t call startFromColumnHeightMultipliedBySpan() if the node isn\u2019t inside a grid");let n=U(a=ir,hr,ry).call(a,t,r,o),i=U(s=ir,hr,ny).call(s,n,t,r);return new ir(i,()=>i,t,o)}op(t){return le(this,$n,t(E(this,$n),E(this,ws))),this}getWithConstraints(){var t;return le(this,$n,U(t=ir,hr,UD).call(t,E(this,$n),E(this,ws),E(this,lc),E(this,sc))),E(this,$n)}};$n=new WeakMap,sc=new WeakMap,ws=new WeakMap,lc=new WeakMap,hr=new WeakSet,ry=function(t,o,r){if(S(!F(o.gridRowHeightType),"A grid node must have gridRowHeightType defined"),o.gridRowHeightType==="fixed")return S(!F(o.gridRowHeight),"A fixed-height grid node must have gridRowHeight defined"),xe(o.gridRowHeight);if(o.gridRowHeightType==="fit"){let n=Ca(o,r);if(n.isEmpty())return xe(0);let i=n.findCoordinates(t.id);S(i,"Node must be found in the grid layout");let a=i.rowIndex;return JD(r,n,o,a)}else if(o.gridRowHeightType==="auto"){let n=ht(o,r),i=_("-",n,Dt(o)+zo(o)),a=Ca(o,r).rowCount,s=nr(o.gap),l=Ao(s),c=(a-1)*l;return _("/",_("-",i,c),a)}else G(o.gridRowHeightType)},ny=function(t,o,r){let n=Ou(o,r),i=nr(r.gap),a=Ao(i);return _("+",_("*",t,n),a*(n-1))},UD=function(t,o,r,n){var a,s;let i=t;return mn(o)&&(o.maxHeight&&(i=U(a=ir,hr,iy).call(a,"maxHeight",i,o,r,n)),o.minHeight&&(i=U(s=ir,hr,iy).call(s,"minHeight",i,o,r,n))),i},iy=function(t,o,r,n,i){let a=t==="minHeight"?"max":"min",[s,l]=Zi(r[t]);if(l==="%"){let c=n.tree.getNodeParent(r);if(S(c,"parentNode must exist for a node with percentage min-max heights"),st(c)&&c.heightType===2)return o;let d=i();return _(a,o,_("*",d,s/100))}else{if(l==="px")return _(a,o,s);if(l==="vh")return _(a,o,fr*s/100);G(l)}},ce(ir,hr);var Et=ir;function Bu(e,t){return t.cache.memo(`autoHeight-${e.id}`,()=>r$(e,t))}function r$(e,t){if(Ve(e)){let o=HD(e,t.tree);return Et.startFromFixedValue(xe(o),e,t).getWithConstraints()}if(Z(e)){let o=e.getIntrinsicSize(t.componentLoader).height??t$;return Et.startFromFixedValue(xe(o),e,t).getWithConstraints()}if(no(e)){if(S(e.stackDirection,"A stack must have a direction defined"),B(e.stackDirection))throw new Me;if(e.stackDirection==="horizontal"){if(e.stackWrapEnabled)throw new Me;{let o=n$(e,t);return Et.startFromFixedValue(o,e,t).op((r,n)=>_("+",r,Dt(n)+zo(n))).getWithConstraints()}}else if(e.stackDirection==="vertical"){let o=i$(e,t),r=a$(e,t,o);return Et.startFromFixedValue(r,e,t).op((n,i)=>_("+",n,Dt(i)+zo(i))).getWithConstraints()}else G(e.stackDirection)}if(eo(e)){if(S(!F(e.gridColumnCount),"A grid node must have gridColumnCount"),e.gridColumnCount==="auto-fill")throw new Me;if(te(e.gridColumnCount)){S(!F(e.gridRowHeightType),"A grid must have gridRowHeightType defined");let o=Ca(e,t);if(e.gridRowHeightType==="fixed"){S(!F(e.gridRowHeight),"A node with gridRowHeightType: fixed must have gridRowHeight defined");let r=o.rowCount,n=nr(e.gap),i=Ao(n),a=(o.rowCount-1)*i,l=e.gridRowHeight*r+a;return Et.startFromFixedValue(xe(l),e,t).op((c,d)=>_("+",c,Dt(d)+zo(d))).getWithConstraints()}else if(e.gridRowHeightType==="fit"){let r=xe(0);for(let l=0;l<o.rowCount;l++){let c=JD(t,o,e,l);r=_("+",r,c)}let n=nr(e.gap),i=Ao(n),a=(o.rowCount-1)*i,s=_("+",r,a);return Et.startFromFixedValue(s,e,t).op((l,c)=>_("+",l,Dt(c)+zo(c))).getWithConstraints()}else if(e.gridRowHeightType==="auto"){let r=xe(0);for(let c=0;c<o.rowCount;c++)for(let d=0;d<o.columnCount;d++){let u=o.getGridItem(c,d);if(!u)continue;let m=t.tree.getNode(u);if(S(m,"Can\u2019t find grid item in the tree"),!Ae(m)||!st(m))continue;let h=XD(m,e,t);r=_("max",r,h)}let n=_("*",r,o.rowCount),i=nr(e.gap),a=Ao(i),s=(o.rowCount-1)*a,l=_("+",n,s);return Et.startFromFixedValue(l,e,t).op((c,d)=>_("+",c,Dt(d)+zo(d))).getWithConstraints()}else G(e.gridRowHeightType)}G(e.gridColumnCount)}return null}function n$(e,t){let o=xe(0);for(let r of e.children??[])!Ae(r)||!st(r)||Bn(r,e,t.tree,!0)&&(r.heightType===1||r.heightType===3||(o=_("max",o,ht(r,t))));return o}function i$(e,t){if(Ae(e)&&mn(e)&&!F(e.maxHeight)&&e.stackWrapEnabled){let o=Gu(e,t),r=_("-",o,Dt(e)+zo(e));return Bo(r)}return 1/0}function a$(e,t,o){let r=oy(e),n=Ao(r),i=[];for(let s of Vi(t.componentLoader,e)){if(!Ae(s)||!st(s)||!Bn(s,e,t.tree,!0))continue;let l;switch(s.heightType){case 3:l=$u(s,t);break;case 1:l=xe(0);break;case 0:case 2:case 4:case 5:l=ht(s,t);break;default:G(s.heightType)}let c=i[i.length-1]??xe(0),d=_("+",c,n,l);Math.ceil(Bo(d))>Math.ceil(o)||i.length===0?i.push(l):i[i.length-1]=d}return _("max",...i)??xe(0)}function JD(e,t,o,r){let n=xe(0);for(let i=0;i<t.columnCount;i++){let a=t.getGridItem(r,i);if(!a)continue;let s=e.tree.getNode(a);if(S(s,"Can\u2019t find grid item in the tree"),!Ae(s)||!st(s))continue;let l=at.isOn("gridBentoLayout")?XD(s,o,e):s.heightType===1?Bu(s,e)??xe(0):ht(s,e);n=_("max",n,l)}return n}function XD(e,t,o){let r=e.heightType===1||ml(e)?Bu(e,o)??xe(0):ht(e,o),n=Ou(e,t);if(n>1){let i=nr(t.gap),s=Ao(i)*(n-1);r=_("/",_("-",r,s),n)}return r}function $u(e,t){let o=xe(0);return Ae(e)?Et.startFromFixedValue(o,e,t).getWithConstraints():o}function Gu(e,t){let o=xe(1/0);return Ae(e)?Et.startFromFixedValue(o,e,t).getWithConstraints():o}var ZD=Je("simulateCSSWidth");function qD(e,t){try{let o=cc(e,t);return Au(o)}catch(o){if(o instanceof Me)return;ZD.reportWithoutLogging(o,{nodeId:e.id}),ZD.warnOncePerMinute(`Can\u2019t simulate the CSS width for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function cc(e,t){let o=t.cache.getCSSWidth(e.id);if(o)return o;let r=s$(e,t);return t.cache.setCSSWidth(e.id,r),r}function s$(e,t){if(!as(e))throw new Me;let o=t.tree.getNodeParent(e);if(et(e))return ke(100,"vw");if(S(Ae(e)&&st(e),`Can\u2019t calculate the width on a node ${e.id} when it doesn\u2019t have size information`),t.tree.isGroundNode(e)){if(Ne(e)&&Be(t.tree.getScopeNodeFor(e)))return ke(100,"vw");if(Ha(e)||Ne(e)){let n=ke(100,"vw");return Pi(p`${fe.componentViewport}?.width || ${n.expr}`)}else{let n=Mu(e,t);if(F(n))throw new Me;return ke(n,"px")}}if(bd(e))return ko.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(!hi(e,o)&&Re(e)&&Yt(e.left)&&Yt(e.right))return ko.startFromParentOuterWidth(e,t).op((n,i)=>{let a=i.left,s=i.right;return S(Yt(a)&&Yt(s),"Satisfying TypeScript"),tt("-",n,ke(a+s,"px"))}).getWithConstraints();if(mi(e)&&Re(e)&&te(e.aspectRatio)&&aI(e)==="width"){let n=ht(e,t),i=tt("*",Fu(n),ke(e.aspectRatio));return ko.startFromRawValue(i,e,t).getWithConstraints()}if(e.widthType===0)return ko.startFromRawValue(ke(e.width,"px"),e,t).getWithConstraints();if(e.widthType===1){S(o,"A node can\u2019t have a % width without a parent");let n;return lo(e)?n=ko.startFromRawValue(ke(100,"vw"),e,t):jr(e)?n=ko.startFromParentOuterWidth(e,t):eo(o)?n=ko.startFromColumnWidthMultipliedBySpan(e,t):n=ko.startFromParentInnerWidth(e,t),n.op((i,a)=>tt("*",i,ke(a.width))).getWithConstraints()}if(e.widthType===3){let n=t.tree.getNodeParent(e);if(S(n,"A node can\u2019t have a fractional width without a parent"),eo(n))return ko.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(S(no(n),"A node can have a fractional width only if it\u2019s inside a stack"),S(n.stackDirection,"A stack must have a direction defined"),n.stackDirection==="horizontal")return QD(e,n.stackWrapEnabled??!1,t);if(n.stackDirection==="vertical")return KD(e,t);if(B(n.stackDirection)){let i=QD(e,n.stackWrapEnabled??!1,t),a=KD(e,t);if(rr(i,a))return i;let s=t.getVariableBinding(n.stackDirection,n);if(!s)throw new Me;let l=p`${s} === "row"`,c=p`${l} ? ${Au(i)} : ${Au(a)}`;return Pi(c)}G(n.stackDirection)}if(e.widthType===2){if(mn(e)&&e.maxWidth){let[n,i]=Zi(e.maxWidth);return ke(n,i)}throw new Me}if(e.widthType===4){let n=ke(e.width*100,"vw");return ko.startFromRawValue(n,e,t).getWithConstraints()}if(e.widthType===5){if(!so(e))throw new Me;let n=ic(e),i=ht(e,t),a=F(i)||F(n)?ke(e.width,"px"):tt("*",Fu(i),ke(n));return ko.startFromRawValue(a,e,t).getWithConstraints()}G(e.widthType)}function QD(e,t,o){return t?ko.startFromParentInnerWidth(e,o).getWithConstraints():ko.startFromParentInnerWidth(e,o).subtractSiblingWidths().getWithConstraints()}function KD(e,t){return ko.startFromParentInnerWidth(e,t).op((o,r)=>tt("*",o,ke(r.width))).getWithConstraints()}var ct,Ls,Fr,Gn,Ar,YD,eF,ay,sy,gr=class gr{constructor(t,o,r,n){ce(this,ct);ce(this,Ls);ce(this,Fr);ce(this,Gn);le(this,ct,t),le(this,Ls,o),le(this,Fr,r),le(this,Gn,n)}static startFromRawValue(t,o,r){return new gr(t,()=>{let n=r.tree.getNodeParent(o);return S(n,"Can\u2019t calculate the parent width if the node doesn\u2019t have a parent"),cc(n,r)},o,r)}static startFromParentOuterWidth(t,o){let r=o.tree.getNodeParent(t);S(r,"Can\u2019t call createFromParentWidth() if the node doesn\u2019t have a parent");let n=cc(r,o);return new gr(n,()=>n,t,o)}static startFromParentInnerWidth(t,o){var i;let r=o.tree.getNodeParent(t);S(r,"Can\u2019t call createFromParentWidthMinusPaddings() if the node doesn\u2019t have a parent");let n=cc(r,o);return n=U(i=gr,Ar,ay).call(i,n,r,o),new gr(n,()=>n,t,o)}static startFromColumnWidthMultipliedBySpan(t,o){var a,s;let r=o.tree.getNodeParent(t);S(r&&eo(r),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node isn\u2019t inside a grid"),S(Wi(t),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node doesn\u2019t have grid item layout");let n=U(a=gr,Ar,YD).call(a,r,o),i=U(s=gr,Ar,eF).call(s,n,r,t.gridItemColumnSpan??1,o);return new gr(i,()=>i,t,o)}subtractSiblingWidths(){let t=E(this,Gn).tree.getNodeParent(E(this,Fr));S(t&&no(t),"Can\u2019t call subtractSiblingWidths() if the node isn\u2019t inside a stack");let o=[],r=[],n=[],i=[],a=[],s=0;for(let u of Vi(E(this,Gn).componentLoader,t)){let m=Bn(u,t,E(this,Gn).tree,!1);if(m!==!1&&!Eu(m))switch(S(Ae(u)&&st(u),"It\u2019s impossible to have a regular visible node without width/height/widthType/heightType fields"),s++,u.widthType){case 0:{o.push(u);break}case 1:{r.push(u);break}case 3:{n.push(u);break}case 4:{i.push(u);break}case 2:throw new Me;case 5:{if(!so(u)||!u.fillImagePixelWidth||!u.fillImagePixelHeight)throw new Me;a.push(u);break}default:G(u.widthType)}}let c=1-r.reduce((u,m)=>u+m.width,0);if(c!==1&&le(this,ct,tt("*",E(this,ct),ke(c))),o.length){let u=o.reduce((m,h)=>tt("+",m,ke(h.width,"px")),ke(0,"px"));le(this,ct,tt("-",E(this,ct),u))}if(a.length){let u=a.reduce((m,h)=>{let C=ic(h);if(!C)throw new Me;let T=ht(h,E(this,Gn));if(!T)throw new Me;return tt("+",m,tt("*",Fu(T),ke(C,"px")))},ke(0,"px"));le(this,ct,tt("-",E(this,ct),u))}if(i.length){let u=i.reduce((m,h)=>tt("+",m,ke(h.width*100,"vw")),ke(0,"vw"));le(this,ct,tt("-",E(this,ct),u))}if(B(t.gap)){let u=E(this,Gn).getVariableBinding(t.gap,t);if(u){let m=Pi(nt`${p`${u} * ${s-1}`}px`);le(this,ct,tt("-",E(this,ct),m))}}else{let m=ap(t.gap)*(s-1);m!==0&&le(this,ct,tt("-",E(this,ct),ke(m,"px")))}let d=n.reduce((u,m)=>u+m.width,0);return le(this,ct,tt("/",E(this,ct),ke(d))),le(this,ct,tt("*",E(this,ct),ke(E(this,Fr).width))),le(this,ct,tt("max",E(this,ct),ke(1,"px"))),this}op(t){return le(this,ct,t(E(this,ct),E(this,Fr))),this}getWithConstraints(){var t,o;return mn(E(this,Fr))?(E(this,Fr).maxWidth&&le(this,ct,U(t=gr,Ar,sy).call(t,"maxWidth",E(this,ct),E(this,Ls),E(this,Fr))),E(this,Fr).minWidth&&le(this,ct,U(o=gr,Ar,sy).call(o,"minWidth",E(this,ct),E(this,Ls),E(this,Fr))),E(this,ct)):E(this,ct)}};ct=new WeakMap,Ls=new WeakMap,Fr=new WeakMap,Gn=new WeakMap,Ar=new WeakSet,YD=function(t,o){var r;if(S(!F(t.gridColumnWidthType),"A grid node must have a gridColumnWidthType defined"),t.gridColumnWidthType==="fixed")return S(!F(t.gridColumnWidth),"A grid node with fixed width columns must have a gridColumnWidth defined"),ke(t.gridColumnWidth,"px");if(t.gridColumnWidthType==="minmax"){if(t.gridColumnCount==="auto-fill")throw new Me;let n=cc(t,o);if(n=U(r=gr,Ar,ay).call(r,n,t,o),S(!F(t.gridColumnCount),"A grid node must have a gridColumnCount defined"),B(t.gap)){let i=o.getVariableBinding(t.gap,t);if(i){let a=Pi(nt`${p`${i} * ${t.gridColumnCount-1}`}px`);n=tt("-",n,a)}}else{let a=ap(t.gap)*(t.gridColumnCount-1);a!==0&&(n=tt("-",n,ke(a,"px")))}return t.gridColumnCount>1&&(n=tt("/",n,ke(t.gridColumnCount))),t.gridColumnMinWidth&&(n=tt("max",n,ke(t.gridColumnMinWidth,"px"))),n}else G(t.gridColumnWidthType)},eF=function(t,o,r,n){if(r===1)return t;let i;if(te(r)){if(o.gridColumnCount==="auto-fill")throw new Me;S(!F(o.gridColumnCount),"A grid must have gridColumnCount defined"),i=Math.min(r,o.gridColumnCount)}else if(r==="all"){if(o.gridColumnCount==="auto-fill")throw new Me;S(!F(o.gridColumnCount),"A grid must have gridColumnCount defined"),i=o.gridColumnCount}else{if(B(r))throw new Me;G(r)}if(i>1&&(t=tt("*",t,ke(i))),B(o.gap)){let a=n.getVariableBinding(o.gap,o);if(a){let s=Pi(nt`${p`${a} * ${i-1}`}px`);t=tt("+",t,s)}}else{let s=ap(o.gap)*(i-1);s!==0&&(t=tt("+",t,ke(s,"px")))}return t},ay=function(t,o,r){if(!Zo(o))return t;let n;if(B(o.padding)){let i=r.getVariableBinding(o.padding,o);i&&(n=Pi(nt`${p`${i} * 2`}px`))}else o.paddingPerSide?n=ke((o.paddingLeft??0)+(o.paddingRight??0),"px"):n=ke((o.padding??0)*2,"px");return n?tt("-",t,n):t},sy=function(t,o,r,n){let i=t==="minWidth"?"max":"min",[a,s]=Zi(n[t]);if(s==="%"){let l=r();return tt(i,o,tt("*",l,ke(a/100)))}else return tt(i,o,ke(a,s))},ce(gr,Ar);var ko=gr;var tF=Je("simulateYPosition");function rF(e,t){try{let o=Er(e,t);return o.type==="number-const"?o.value:o.expr}catch(o){if(o instanceof Me)return;tF.reportWithoutLogging(o,{nodeId:e.id}),tF.warnOncePerMinute(`Can\u2019t simulate the y position for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function Er(e,t){let o=t.cache.getYPosition(e.id);if(o)return o;let r=l$(e,t);return t.cache.setYPosition(e.id,r),r}function l$(e,t){if(!as(e))throw new Me;let o=t.tree.getNodeParent(e);if(!(Re(e)&&ts(e))){if(et(e))return xe(0);S(!1,"Can\u2019t calculate the y position on a node when it doesn\u2019t have position information")}if(t.tree.isGroundNode(e)){if(Ne(e)&&Be(t.tree.getScopeNodeFor(e)))return xe(0);if(Ha(e)||Ne(e))return ac(p`${fe.componentViewport}?.y || 0`,0);throw new Me}let r=u$(e,o,t);if(r==="fixed"){if(Yt(e.top))return xe(e.top);if(Yt(e.bottom)){let n=ht(e,t);return _("-",fr-e.bottom,n)}else{let n=ht(e,t);return _("-",_("*",fr,e.centerAnchorY),_("/",n,2))}}if(r==="absolute"){S(o&&Re(o)&&ts(o),"absolute position: parentNode for the node must exist, be pinnable, and have position type");let n=Er(o,t);if(Yt(e.top))return _("+",n,xe(e.top));if(Yt(e.bottom)){let i=ht(o,t),a=ht(e,t);return _("-",_("+",n,i),_("+",e.bottom,a))}else{let i=ht(o,t),a=ht(e,t);return _("+",n,_("-",_("*",i,e.centerAnchorY),_("/",a,2)))}}if(r==="sticky"||F(r)){if(S(o&&Re(o)&&ts(o),"relative position: parentNode for the node must exist, be pinnable, and have position type"),no(o)){if(S(o.stackDirection,"parentNode for the node must have stackDirection"),o.stackDirection==="horizontal"){if(o.stackWrapEnabled)return _("+",Er(o,t),Dt(o));if(B(o.stackAlignment))return _("+",Er(o,t),Dt(o));let n=ht(o,t),i=_("-",n,Dt(o)+zo(o));if(S(o.stackAlignment,"parentNode for node must have stackAlignment"),o.stackAlignment==="start")return _("+",Er(o,t),Dt(o));if(o.stackAlignment==="center"){let a=ht(e,t),s=_("-",i,a);return _("+",Er(o,t),_("+",Dt(o),_("/",s,2)))}else if(o.stackAlignment==="end"){let a=ht(e,t),s=_("-",i,a);return _("+",Er(o,t),Dt(o),s)}else G(o.stackAlignment)}if(o.stackDirection==="vertical"){let n=zu(o,t,c=>ht(c,t),c=>$u(c,t),c=>Gu(c,t)),i=n.findCoordinates(e.id);S(i,"Node must be found in stack layout info");let a=c$(i.columnIndex,n,t),s=d$(i.columnItemIndex,a,o,t),l=[Er(o,t),Dt(o),s];return m$(o,e,t)&&l.unshift(fr),_("+",...l)}if(B(o.stackDirection))return _("+",Er(o,t),Dt(o));G(o.stackDirection)}if(eo(o)){if(S(!F(o.gridColumnCount),"parentNode for node must have gridColumnCount"),o.gridColumnCount==="auto-fill")return _("+",Er(o,t),Dt(o));if(te(o.gridColumnCount)){let n=Ca(o,t);if(n.isEmpty())return _("+",Er(o,t),Dt(o));let i=n.findCoordinates(e.id);S(i,"Node must be found in the grid layout info");let a=p$(i.rowIndex,n,o,t);return _("+",Er(o,t),Dt(o),a)}G(o.gridColumnCount)}S(!1,"Relative and sticky nodes can only exist in stacks or grids")}G(r)}function c$(e,t,o){let r=[];return t.walkColumn(e,n=>{let i=o.tree.get(n);S(i&&Ae(i)&&st(i),"column item must exist, have size, and have size dimension type");let a;if(i.heightType===3){let s=t.getFrToPxForColumn(e);S(s,"frToPx must be available for the column"),a=_("*",s,i.height)}else a=ht(i,o);r.push(a)}),r}function oF(e,t,o){return o.cache.memo(`sumAllStackChildrenHeights-${e.id}`,()=>_("+",...t)??xe(0))}function d$(e,t,o,r){let n=o.stackDistribution;if(S(n,"parentNode for node must have stackDistribution"),B(n))return xe(0);let i=ht(o,r),a=_("-",i,Dt(o)+zo(o));if(n==="start"||n==="center"||n==="end"){let s=nr(o.gap),l=Ao(s),c;if(n==="start")c=xe(0);else{let m=oF(o,t,r),h=l*(t.length-1),C=_("-",a,_("+",m,h));c=n==="center"?_("/",C,2):C}let d=Wu("+",0,e,t)??xe(0),u=l*e;return _("+",c,d,u)}if(n==="space-between"||n==="space-around"||n==="space-evenly"){S(!Hc(o),"gap is not expected with stackDistribution:",o.stackDistribution);let s=oF(o,t,r),l=_("-",a,s),c=t.length,d;switch(n){case"space-between":d=_("/",l,Math.max(1,c-1));break;case"space-around":d=_("/",l,c);break;case"space-evenly":d=_("/",l,c+1);break;default:G(n)}let u;switch(n){case"space-between":u=xe(0);break;case"space-around":u=_("/",d,2);break;case"space-evenly":u=d;break;default:G(n)}let m=Wu("+",0,e,t)??xe(0),h=_("*",d,e);return _("+",u,m,h)}G(n)}function p$(e,t,o,r){if(S(!F(o.gridRowHeightType),"parentNode for node must have gridRowHeightType defined"),o.gridRowHeightType==="fixed"){S(!F(o.gridRowHeight),"A grid parent node with gridRowHeightType === 'fixed' (for node) must have gridRowHeight defined");let n=e*o.gridRowHeight,i=nr(o.gap),a=Ao(i),s=e*a;return xe(n+s)}if(o.gridRowHeightType==="fit"){let n=[];for(let c=0;c<e;c++)for(let d=0;d<t.columnCount;d++){let u=r.tree.get(t.getGridItem(c,d));if(!u)continue;S(Ae(u)&&st(u),"grid child must have size and size-dimension type");let m=ht(u,r);n[c]=_("max",n[c]??xe(0),m)}let i=_("+",...n)??xe(0),a=nr(o.gap),s=Ao(a),l=e*s;return _("+",i,l)}if(o.gridRowHeightType==="auto"){let n=ht(o,r),i=_("-",n,Dt(o)+zo(o)),a=Ca(o,r),s=a.rowCount,l=nr(o.gap),c=Ao(l),d=(a.rowCount-1)*c,u=_("/",_("-",i,d),s),m=_("*",e,u),h=e*c;return _("+",m,h)}G(o.gridRowHeightType)}function u$(e,t,o){if(Dd(o.tree,e)&&e.position==="fixed")return"fixed";if(Fd(e,t)&&e.position==="absolute")return"absolute";if(ob(e,t)&&e.position==="sticky")return"sticky";if(t&&et(t))return"fixed";if(!(t&&Co(t)))return"absolute"}function m$(e,t,o){if(Ne(e)&&Be(o.tree.getScopeNodeFor(e))){let r=e.children?.findIndex(an);if(F(r))return!1;let n=o.tree.getIndex(t);return r<n}return!1}var Hu=class{constructor(t,o,r,n){D(this,"simulationContext");this.simulationContext=ED(o.tree,t,r,n)}getCSSWidth(t){return qD(t,this.simulationContext)}getHeight(t){return jD(t,this.simulationContext)}getYPosition(t){return rF(t,this.simulationContext)}getComponentViewportContext(t){let o=this.getCSSWidth(t),r,n;return _r(t)||(r=this.getHeight(t),n=this.getYPosition(t)),{width:o,height:r,y:n}}};var _u=class{constructor(t,o){this.tree=t;this.bindings=o;D(this,"ids",new Map)}create(t){let o=this.composeBaseId(t),r=this.tree.get(t);qt(r,"AppearIdCollector: Node not found");let n=qd(r,this.tree);return n.length>0?this.composeRepeaterId(o,n):o}composeBaseId(t){let o=_t(t),r=this.ids.get(o);if(F(r))return this.ids.set(o,0),o;let n=r+1;return this.ids.set(o,n),`${o}-${n}`}composeRepeaterId(t,o){let r=[t];for(let n of o){let i=this.tree.get(n);i&&r.push(this.bindings.createWithNode("index",i))}return nt.join(r,"-")}};var Ri,ly,cy,Hn=class{constructor(t){this.assetMap=t;ce(this,Ri);D(this,"keys",new Set)}addAsset(t){this.keys.add(t)}resolve(t){if(!U(this,Ri,ly).call(this,t))return;let o=U(this,Ri,cy).call(this,t);if(!We(o))return o&&(t=o.identifier),{src:JC(t)}}resolveResponsiveImage(t,{focalPoint:o}={}){if(!U(this,Ri,ly).call(this,t))return;let r=U(this,Ri,cy).call(this,t);if(We(r))return;r&&(t=r.identifier);let n=r?.preferredSize??"auto",i=this.assetMap.assetForKey(t),a=i?.properties?.image,s=r?.intrinsicSize??a,l=QC(a?.width,a?.height),d={src:i?Av(i,n,l):Bc(t,void 0,void 0,s),positionX:void 0,positionY:void 0,srcSet:at.isOn("fixedSizeImageSrcset")?void 0:this.generateSrcSet(i,l,n),preferredSize:at.isOn("fixedSizeImageSrcset")?n:void 0,pixelWidth:s?.width,pixelHeight:s?.height};return o&&A(o.positionX)&&A(o.positionY)&&(d.positionX=o.positionX,d.positionY=o.positionY),d}generateSrcSet(t,o,r){if(!t)return;qt(!at.isOn("fixedSizeImageSrcset"),"This code path must only be executed with fixedSizeImageSrcset: off");let n;if((!r||r==="auto"||r==="lossless")&&o?.length&&t.properties?.image){n="";for(let{maxSideSize:a,width:s}of o)s<KC||(n+=`${$m(t,a,r==="lossless")} ${s}w,`);n+=`${$m(t,void 0,r==="lossless")} ${t.properties.image.width}w`}return n}};Ri=new WeakSet,ly=function(t){return!(yo(t)||t.startsWith("https:"))},cy=function(t){let o=Fv(t);return o&&(t=o.identifier),t===""?null:(this.addAsset(t),o)};var ju=class{constructor(t,o,r){this.declarations=t;this.scope=o;this.primaryVariantId=r}create(t,o){if(t===!0&&F(o))return{condition:!0};if(!F(t)&&F(o))return{condition:t};if(o){if(Array.from(o.values()).every(({value:h})=>h===t))return{condition:t};let r=new Set,n=new I.Set;ci(this.scope)&&this.primaryVariantId&&iF(this.primaryVariantId,t,r,n);let i=new Map,a=new Map,s=new Map,l=h$(s),c=l(t);for(let[h,C]of o){if(ci(this.scope)&&iF(h,C.value,r,n),!C.isGesture&&C.value===t)continue;let T=C.isGesture?i:a;f$(h,l(C.value),T)}let d=[],u=[];for(let h of s.keys()){let C=s.get(h);C&&(u.push(new I(h)),d.push(ge(C)))}let m=this.declarations.dedupe("isDisplayed",new I(It.lines(p`(${new I(d.join(", "))}) => {`,ci(this.scope)&&p`if (!${I.fn(fe.isBrowser)}) return true`,...this.createConditionStatementsForGroup(i,"gestureVariant"),...this.createConditionStatementsForGroup(a,"baseVariant"),p`return ${c}`,p`}`)));return{condition:I.fn(m,...u),classNames:r,classNameExpressions:n}}return{condition:!0}}createConditionStatementsForGroup(t,o){if(t.size===0)return[];let r=[],n=new I(o);for(let[i,a]of t){let s=new I(i);if(a.size===1){let l=Array.from(a)[0];if(F(l))continue;r.push(p`if (${n} === ${l}) return ${s}`)}else r.push(p`if (${Array.from(a)}.includes(${n})) return ${s};`)}return r}};function f$(e,t,o){let r=ge(t),n=o.get(r)??new Set;o.set(r,n.add(e))}function h$(e){let t=new Set;return o=>{if(!No(o))return o;let r=ge(o),n=e.get(r)??new I(Qd("value",t));return e.set(r,n),n}}function nF(e){return`hidden-${_t(e)}`}function iF(e,t,o,r){if(t===!1){let n=nF(e);o.add(n)}else if(No(t)){let n=nF(e);r.add(p`!(${t}) && ${n}`)}}var dc,Sa,pc,Uu=class{constructor(t,o,r,n,i,a,s){this.scope=t;this.componentLoader=o;this.bindings=r;this.declarations=n;this.imports=i;this.variables=a;this.treeStore=s;ce(this,dc,new Map);ce(this,Sa,null);ce(this,pc,new Map)}isLayoutTemplateRef(t){if(We(E(this,Sa))){if(le(this,Sa,new Set),!gd(this.scope)||!CT(this.scope))return!1;let o=this.componentLoader.componentForIdentifier(this.scope.layoutTemplateIdentifier)?.properties;if(!o)return!1;let r=this.scope.getControlProps(o);for(let n in r){let i=r[n];if(F(i?.value)||B(i.value)||i.type!=="scrollsectionref")continue;let a=i.value.target;F(a)||B(a)||E(this,Sa).add(a)}}return E(this,Sa).has(t)}getNodeInPrimary(t){if(!t)return;let o=t.originalid?this.treeStore.tree.get(t.originalid):t;if(o)return o}scrollTargetInfo({target:t,collectionItem:o}){if(!t)return;if(q(t))return{ref:this.variables.create(t)};let r=this.treeStore.tree.get(t);if(!r||!Ji(r)||this.treeStore.treeIndex.getScopeIdFor(r.id)!==this.scope.id)return;let n=this.getNodeInPrimary(r);if(!n)return;let i=this.ref(n,o);if(i)return{ref:i,offset:r.scrollMarginTop}}ref(t,o){let r=this.getNodeInPrimary(t);if(!r)return;let n=E(this,dc).get(r.id);if(n)return n;let i=qd(r,this.treeStore.tree),a=this.isLayoutTemplateRef(r.id);if(a||o||i&&i.length>0){let d=this.id(r,o);if(!d)return;let u=this.imports.addImport("framer",{exportSpecifier:a?"useSiteRefs":"useDynamicRefs"});return I.fn(this.declarations.component.dedupe("dynamicRef",I.fn(p`${u}<HTMLElement>`)),d)}let s=this.bindings.create("ref"),l=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),c=p`const ${s} = ${I.fn(p`${l}.useRef<HTMLElement>`,p`null`)}`;return this.declarations.component.create(c),E(this,dc).set(r.id,s),s}getBaseId(t,o){if(z(o)){if(Ji(t)){let r=[t.id];return o&&o.id!==this.scope.id&&r.push(o.id),this.declarations.component.dedupe("elementId",I.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteElementId"}),...r))}return _t(t.id)}if(ue(o))return nt`${fe.layoutId}-${_t(t.id)}`}getPortalAncestor(t){let o=this.treeStore.tree.getParent(t.id);if(o){if(ut(t))return this.treeStore.tree.get(o.getPrimaryId());if(et(o)){let r=this.treeStore.tree.getParent(o.id);return this.treeStore.tree.get(r?.getPrimaryId())}}}portalId(t){let o=this.getPortalAncestor(t);return o?this.id(o):void 0}id(t,o){let r=this.getNodeInPrimary(t);if(!r)return;let n=this.treeStore.treeIndex.getScopeIdFor(r.id),i=this.treeStore.tree.get(n);if(!z(i)&&!ue(i))return;if(z(i)&&Ji(r)){let s=lI(r,this.treeStore.tree,this.componentLoader);s&&E(this,pc).set(r.id,s)}let a=this.getBaseId(r,i);if(a)return cI(r,this.treeStore.tree,this.componentLoader,s=>{if(s.id===r.id)return a;if(q(o)&&o.id===s.id)return this.variables.create(o);if(mT(o)&&o.key===s.id)return o.value;if(s.type==="slug")return this.variables.create($t(s.id,s.providerId))})}annotation(){let t=Object.fromEntries(E(this,pc));if(!Wt(t))return JSON.stringify(t)}};dc=new WeakMap,Sa=new WeakMap,pc=new WeakMap;function y$(e){return e instanceof Error?!!Sg(e):!1}function C$(e){return A(e)?e:e instanceof Error?e.message:Ue(e)?JSON.stringify(e):"Unknown error"}var uc,Ju=class{constructor(t,o,r){this.scopeId=t;this.sourceNodeId=o;this.type=r;ce(this,uc,[])}record(t,o,r){if(y$(o)){this.recordKnownError(t,o);return}E(this,uc).push({nodeId:t.id,reason:C$(o),moduleIdentifier:ot(r)?r:void 0})}get errors(){return E(this,uc).map(t=>new yN({...t,sourceNodeId:this.sourceNodeId,sourceNodeModuleType:this.type,scopeId:this.scopeId,type:"CodeGeneration"}))}recordKnownError(t,o){if(Sg(o)){let r=new Set;o.error.forEach(n=>{r.add(n),this.record(t,"CodeError",n)}),o.missing.forEach(n=>{r.has(n)||this.record(t,"MissingModule",n)})}}};uc=new WeakMap;var wfe={url:"url"};function aF(e){return si(e)&&e.actionIdentifier==="framer/useOpenURL"}function Lfe(e,t){let o={...e.controls,...t};return{...e,controls:o}}function sF(e){return e.actionIdentifier==="framer/useResetVariableValues"}function lF(e){return si(e)&&e.actionIdentifier==="framer/useSetVariableValue"}function $fe(e){return z(e)||ue(e)}var S$={array:!1,boolean:!0,color:!1,eventhandler:!1,image:!1,number:!0,string:!0,richtext:!1,link:!1,linkrelvalues:!1,date:!0,enum:!1,file:!1,scrollsectionref:!1,customcursor:!1,cursor:!1,transition:!1,border:!1,boxshadow:!1,gap:!1,padding:!1,borderradius:!1,collectionreference:!0,multicollectionreference:!0,trackingid:!1,vectorsetitem:!1,controlReference:!1,nodePropertyControlReference:!1,slug:!1};function v$(e){return A(e)&&S$[e]===!0}function Gfe(e){return Vo(e)&&v$(e.type)}function cF(e,t){let o=new Map,r=new Map;for(let i of t)if(i.abTestingParentId){let a=r.get(i.abTestingParentId);a||(a=[],r.set(i.abTestingParentId,a)),a.push(i)}else o.set(i.id,i);let n=[];for(let i of e.getRouteSegmentRootNode().getWebPageIdToRawPathMap(e).keys()){let a=o.get(i);if(a){n.push(a);let s=r.get(a.id);s&&n.push(...s)}}return n}function T$(e,t){let o,r,n,i,a;for(let l of e)z(l,!0)?(t===l.id&&(o=o??l),l.dataIdentifier?n=n??l:r=r??l):Ct(l,!0)?a=a??l:Ye(l,!0)&&(i=i??l);let s=o??r??n??a??i;return S(s,"findFirstScopes: Tree must contain at least one Web Page, Design Page or Canvas Page"),{maybeFirstPage:s,homePage:o,firstWebPageWithCollection:n,firstWebPageWithoutCollection:r,firstCanvasPage:i,firstDesignPage:a}}function b$(e,t){return I$(e)&&t?t:e}function dF(e,t){let o=T$(e,t);return b$(o.maybeFirstPage,o.firstDesignPage)}function I$(e){if(!z(e)||!e.isLoaded())return!1;for(let t of e.children)if(!Fe(t)||t.children.length>0)return!1;return!0}function pF(e){return e?z(e,!0)||Ye(e,!0)||ue(e,!0)||Ct(e,!0):!1}function uF(e,t,o=!1,r=!1){let n=t?.[e];if(n)return n;if(e===Nd&&o)return r?"Key":"Key & Gamepad";if(r&&e==="onMouseEnter")return"Enter";let a=(e.startsWith("on")&&e.length>2?e.substring(2):e).replace("Tap","Click");return Tn(a)}function N$(){let e=null,t=null;return(o,r)=>{let n=o.componentForIdentifier(r.codeComponentIdentifier);if(n===e)return t;if(!n||!n.properties)return null;let i={},a=Object.keys(n.properties);for(let s=0,l=a.length;s<l;s++){let c=a[s],d=n.properties[c];d?.type==="eventhandler"&&d.title&&(i[c]=d.title)}return e=n,t=i,i}}var qfe=N$();function x$(e,t){let o=new Set(e.variables.map(r=>r.name));return Eo(Tn(t),o)}function P$(e){switch(e.type){case"controlReference":case"nodePropertyControlReference":switch(e.expectedType){case"enum":return"Type";case"file":return"File";default:throw Error(`getFallbackNameForCreateVariableOptions(), unsupported file reference type: ${e.expectedType}`)}default:return kv(e.type)}}function mF(e,t){let o=e.length;if(!t)return o;let r=e.findIndex(({id:n})=>n===t);return r===-1?o:r+1}function V$(e){return Rt(e)?"collection":Be(e)?"layout_template":ue(e)?"canvas_component":z(e)?"web_page":(S(!0,"Should not be able to create variables on invalid scope",e.__class),"canvas_component")}function dy(e,t){let{scopeId:o,isAssigned:r=!0,useUniqueName:n=!0,insertAfterVariable:i,...a}=t,s=e.get(o);if(!qo(s))return null;let l=t.name.trim(),c=l||P$(a),d=n?x$(s,c):c,u=ec({...a,name:d},V$(s));if(u.type==="eventhandler"&&!ue(s))return null;if(i?.selectedVariableParent){let{selectedVariableParent:m,selectedVariable:h}=i,C=rN(s,m.id);if(!C)return null;let T=mF(C,h?.id);S(Pv(u),"Variable must be an array item variable");let N=Wr.insert(C,T,u);nN(s,m.id,N)}else{let m=mF(s.variables,i?.selectedVariable?.id),h=Wr.insert(s.variables,m,u);s.set({variables:h})}return r&&rk({variableType:u.type,variableId:u.id}),$t(u.id,s.id)}function mhe(e){let{engine:t,showModal:o=!0,...r}=e,n=dy(t.tree,r);if(!n)return null;let i=t.tree.get(e.scopeId);if(!i||!qo(i))return null;if(Za(t)&&o){let a=r.insertAfterVariable?.selectedVariableParent?.id;t.stores.variablesStore.selectedVariablePath=a?[a,n.id]:[n.id],t.stores.modalStore.set({type:"Variables",source:"properties"})}return $t(n.id,i.id)}var R$=Je("createAndAssignActionVariableToNode");function fF(e,t,o,r,n,i){if(!(Qt(o)||Z(o)))return null;let a=e.getScopeNodeFor(o);if(!a||!ue(a))return null;let s=e.getGroundNodeFor(o);if(!s||!xo(s))return null;let l=t.componentForIdentifier("framer/useTriggerEvent");if(!l)return null;let c=dy(e,{scopeId:a.id,type:"eventhandler",name:n??uF(r,null),initialValue:void 0});if(!c)return null;Hd(e,t,o,r,l,{id:{type:"string",value:c.id}});let d=a.getTopLevelReplicaVariants();for(let u of d){let{overrides:m}=u.replicaInfo;m[o.id]&&Rb(e,t,u,o.id,r,l,{id:{type:"string",value:c.id}})}return i&&i.updateComponent(a.id).catch(u=>R$.error(u)),c.id}function k$(e,t){let o=Gd(e,t);if(Object.keys(o).length!==0)for(let n in o){let i=o[n];if(i&&i.length===0)return n}}function w$(e,t,o){switch(t){case"framer/useShowOverlay":return e.create(YN,o);case"framer/useShowRelativeOverlay":return e.create(An,o,{width:200,height:150,radius:10,boxShadows:[fv({x:0,y:10,blur:20,color:"rgba(0,0,0,0.05)",spread:0})],floatingPositionEnabled:!0,floatingPlacement:wT,floatingAlignment:LT,floatingOffsetX:RT,floatingOffsetY:kT,floatingCollisionDetection:!0,floatingCollisionPadding:Rd});default:G(t)}}function gF(e,t,o,r){o&&S(t==="framer/useShowOverlay"&&et(o)||t==="framer/useShowRelativeOverlay"&&(Fe(o)||Z(o)),"Invalid overlay type: ",o.__class,"for overlay action: ",t);let n=o??w$(e,t,r.id);return lt(n)&&n.set({zIndex:Lv,styleAppearEffectEnabled:!0,styleAppearEffectTrigger:"onMount",overflow:"clip",position:"absolute",...jb.fadeIn()}),n}function L$(e,t,o,r,n,i){S(yl(r),"Parent is not a local smart component instance, events can't be created");let a=OT(e,r);e.loadScopes([a],([s])=>{if(!s)return;let l=s.getPrimaryVariant();S(l,"SmartComponentNode should have a primary variant");let c=fF(e,t,l,n,n==="onMouseEnter"?"Hover":void 0,o);S(c,"Should be able to create event key for local smart component node"),i(c)})}function hF(e,t,o,r,n,i){let a=t.componentForIdentifier(o);S(a,"Cannot find overlay action definition"),Hd(e,t,i,n,a,{overlay:{type:"string",value:r.id}},!0)}function D$(e){switch(e){case"framer/useShowOverlay":return"fixed";case"framer/useShowRelativeOverlay":return"relative";default:G(e)}}function yF(e,{treeStore:t,codeGenerationStore:o},r,n,i){let a=t.tree.get(n);if(!a)return;let s=qe(a)?t.tree.get(a.originalid):a;if(!s||!Qt(s)&&!Z(s))return;let l=r==="framer/useShowRelativeOverlay"?"onMouseEnter":"onTap",c=Z(s)?k$(e,s):l,d=yl(s);if(!c&&!d)return;let u=gF(t.tree,r,i,s);return c?hF(t.tree,e,r,u,c??l,s):L$(t.tree,e,o,s,l,m=>hF(t.tree,e,r,u,m,s)),Lt("overlay_create",{source:i?"duplicate":"events_panel",overlayType:D$(r)}),u}function _he({treeStore:e},t,o,r){let n=e.tree.get(o);if(!n)return;let i=qe(n)?e.tree.get(n.originalid):n;if(!i||!Qt(i)&&!Z(i))return;let a=gF(e.tree,t,r,i);return ui(a)||a.set({triggerActions:[DT({type:"showOverlay"})]}),a}var CF=Je("ScopeStore");function py(e){return Ye(e,!0)||z(e,!0)||Ct(e,!0)}function jn(e){if(Ye(e))return"CanvasPage";if(z(e))return"WebPage";if(ue(e))return"SmartComponent";if(Xs(e))return"ContentManagement";if(Be(e))return"LayoutTemplate";if(Zt(e))return"VectorSet";if(FS(e))return"Analytics";if(AS(e))return"LocalizationGlossary";if(Ct(e))return"DesignPage";if(Xc(e))return"Routes";if(Bi(e))return"CustomCode";throw Error(`Failed to return scope type, invalid scope: ${e.__class}`)}var va,Ta,ba,Ia,Ds,yr,_n,ki,Fs,As,Es,SF=class extends hn{constructor(o,r,n,i,a,s,l,c,d,u,m,h){super();this.componentLoader=o;this.treeStore=r;this.canvasStore=n;this.selection=i;this.chromeStore=a;this.contentManagementStore=s;this.modalStore=l;this.overlayStore=c;this.codeGenerationStore=d;this.insertSidebarStore=u;this.modulesStore=m;this.aiGenerationStore=h;ce(this,va,0);D(this,"isCheckingActivePage",!0);ce(this,Ta,"");ce(this,ba,"");ce(this,Ia,"");ce(this,Ds,"");ce(this,yr,[]);ce(this,_n,!1);ce(this,ki,!1);ce(this,Fs,new Map);ce(this,As,new Map);D(this,"loadingActiveId");D(this,"_activeId");D(this,"scopeSwitchStart",0);D(this,"scopeSwitchPending",!1);D(this,"scopeIdToSelectedCollectionItem",new Map);D(this,"rootScopeType","CanvasPage");ce(this,Es,[]);D(this,"canGoBack",()=>E(this,_n));D(this,"goBack",()=>{let o=Array.from(this.isolatedCanvasNodes());o.pop();let r=o.pop();r&&this.select(r.id,{keepHistory:!1})});let C=this.getFirstPageNodeAccordingToUI();this._activeId=C.id,bf(C),Ye(C)?le(this,Ta,C.id):z(C)?le(this,ba,C.id):Ct(C)&&le(this,Ia,C.id);let T=this.getScopeNodes();le(this,va,T.indexOf(C)),S(C.loaded,"Scope must be fully loaded"),u.onScopeChange({scope:C.loaded,hasCanvasPageNodes:this.hasCanvasPageNodes(),hasWebPageNodes:this.hasWebPageNodes()}),this.modulesStore.setActiveScope(this._activeId)}get activeId(){return this._activeId}get active(){let o=this.getScopeNode(this._activeId);return S(o.isLoaded(),"Scope must be fully loaded"),o}get rootNode(){return this.treeStore.tree.root}get checkingActivePage(){return this.isCheckingActivePage}documentDidLoad(){this.isCheckingActivePage=!1}get scopeType(){return jn(this.active)}getScopeNode(o){let r=this.treeStore.tree.get(o);return S(r instanceof If,"Node, ",o,"is not a ScopeNode"),r}getScopeNodes(){return this.rootNode.children.filter(Ro)}getCanvasPageNodes(){return E$(this.treeStore.tree)}getDesignPageNodes(){return this.rootNode.children.filter(Ct)}getKitPageNodes(){let o=[];for(let r of this.rootNode.children)z(r)&&r.kitPage&&o.push(r);return o}getSmartComponentNodes(){return this.rootNode.children.filter(ue)}getLayoutTemplateNodes(){return this.rootNode.children.filter(Be)}getWebPageNodes(){return M$(this.treeStore.tree)}getWebPageNodesWithoutCollection(){return O$(this.treeStore.tree)}getWebPageNodesWithCollection(o=!1){return W$(this.treeStore.tree,o)}hasPages(){let o=!1,r=!1,n=!1,i=!1,a=!1;for(let s of this.rootNode.children)if(Ye(s)&&(n=!0),Ct(s)&&(i=!0),z(s)&&(s.kitPage?a=!0:s.dataIdentifier?r=!0:o=!0),o&&r&&n&&i&&a)break;return{hasSitesPages:o,hasCMSPages:r,hasCanvasPages:n,hasDesignPages:i,hasKitPages:a}}hasCanvasPageNodes(){return this.rootNode.children.some(Ye)}hasWebPageNodes(){return this.rootNode.children.some(z)}getRootScopeNodes(){return this.rootNode.children.filter(py)}getFirstPageNodeAccordingToUI(o=this.treeStore.tree){let{children:r,homePageNodeId:n}=o.root;return dF(r,n)}getFirstWebPageNode(){try{let o=this.getFirstPageNodeAccordingToUI();if(z(o))return o}catch{}}changeActive(o,r,n){if(this._activeId){let l=o.get(this._activeId),c=z(l)&&l.abTestingParentId?l.abTestingParentId:this._activeId;E(this,Fs).set(c,{zoom:this.canvasStore.zoom,offset:this.canvasStore.offset}),E(this,As).set(this._activeId,this.selection.ids),ue(l)&&Lt("component_canvas_exit",{componentId:this._activeId})}if(le(this,Ds,this._activeId),le(this,va,n),this._activeId=r.id,bf(r),this.codeGenerationStore.changeScope(),this.modulesStore.changeScope(r),Ct(r))this.rootScopeType="DesignPage",le(this,Ia,r.id),le(this,yr,[]),le(this,_n,!1),le(this,ki,!1);else if(Ye(r))this.rootScopeType="CanvasPage",le(this,Ta,r.id),le(this,yr,[]),le(this,_n,!1),le(this,ki,!1);else if(z(r))this.rootScopeType="WebPage",le(this,ba,r.id),le(this,yr,[]),le(this,_n,!1),le(this,ki,xt(r));else if(ue(r)||Be(r)||Zt(r)){let l=E(this,yr).indexOf(r.id);l===-1?E(this,yr).push(r.id):E(this,yr).splice(l+1),le(this,_n,E(this,yr).length>0),le(this,ki,!1),ek({componentId:r.id}),ue(r)&&this.chromeStore.mainView===0&&this.modalStore.displayComponentIsolationModal({source:"automatic"})}let i=E(this,Fs).get(z(r)&&r.abTestingParentId?r.abTestingParentId:r.id);i?this.canvasStore.updateCanvas(i.offset,i.zoom):this.canvasStore.zoomAfterScopeSwitch(o,r);let a=E(this,As).get(r.id);a?this.selection.set(a):this.selection.clear(),this.overlayStore.hideAll(),this.insertSidebarStore.onScopeChange({scope:r,hasWebPageNodes:this.hasWebPageNodes(),hasCanvasPageNodes:this.hasCanvasPageNodes()}),this.treeStore.setHighlight(null);let s=jn(r);this.chromeStore.onChangeScopeType(s),this.contentManagementStore.onChangeScopeType(s),this.aiGenerationStore.setCurrentSessionId(s==="DesignPage"?r.id:void 0)}select(o,{keepHistory:r,activateContentPanel:n,collectionItemId:i}){this.loadingActiveId=o,this.scopeSwitchStart=performance.now();let a=()=>{if(this.scopeSwitchPending=!1,this.loadingActiveId!==o||this._activeId===o)return;let c=this.getScopeNodes().findIndex(h=>h.id===o);if(c<0)return;let u=this.treeStore.tree.latestTree().getNode(o);S(Ro(u),"Tree must contain scope node",o);let m;if(u.isLoaded())m=u.loaded;else if(!this.treeStore.tree.getService("loader"))CF.reportError(new ReferenceError("Loader service is not available in the tree but scope is not loaded"),{message:"Scope must be fully loaded"},{shallowScopes:"true"}),m=u;else throw new TypeError("Scope must be fully loaded");r||le(this,yr,[]),A(i)&&z(u)&&this.setSelectedCollectionItemForWebPage(u.id,i),n&&(this.chromeStore.contentPanelTab=n),this.changeActive(this.treeStore.tree,m,c)},s=this.treeStore.tree.getService("loader");if(s&&!s.hasLoadedScope(o)){this.scopeSwitchPending=!0,s.prioritizeLoadingScope(o,()=>this.scheduler.processWhenReady(a));return}a()}selectByNode(o){let r=this.treeStore.tree.get(o);if(r===null)return;let n=this.treeStore.tree.getScopeNodeFor(r);n!==null&&this.select(n.id,{keepHistory:!1})}selectPreviousActiveScope(){let o=this.treeStore.tree.get(E(this,Ds));this.select(o?.id??this.getFirstPageNodeAccordingToUI().id,{keepHistory:!1})}findNextActiveScope(o=this.treeStore.tree){let r=o.root,n=r.children.filter(Ro);S(r.children.some(py),"validateActiveScope: Tree must contain at least one Canvas Page or Web Page");let i=n.findIndex(a=>a.id===this._activeId);return i===-1&&(i=this.findNextAvailablePageIndex(n,E(this,va))),[n[i],i]}validateActiveScope(o=this.treeStore.tree,r=!1){let[n,i]=this.findNextActiveScope(o);S(n,"ScopeNode must be defined"),r||S(n.isLoaded(),"Scope must be fully parsed"),le(this,va,i);let a=n;return n.id!==this._activeId&&(this.scopeSwitchStart=performance.now(),this.scopeSwitchPending=!1,this.changeActive(o,a,i)),a}findNextAvailablePageIndex(o,r){let n=[],i=[];for(let c=0;c<o.length;c++){let d=o[c];z(d)?i.push(c):Ye(d)&&n.push(c)}let a=this.rootScopeType==="WebPage",s=a?i:n,l=a?n:i;return A$(s.length>0?s:l,r)}renameScope(o,r){this.getScopeNode(o).set({name:r})}getActiveScopeNodeForReset(o=this.treeStore.tree,r=null){if(r){let i=o.getScopeNodeFor(o.get(r));if(pF(i)&&i?.isValid())return i}let n=this.getFirstPageNodeAccordingToUI(o);if(z(n)&&n.isValid()&&n.loaded||(Ye(n)||Ct(n))&&n.loaded)return n.loaded;CF.warn("getActiveScopeNodeForReset: falling back to scanning for a useful scope to make active");for(let i of o.root.children)if(Ye(i)&&i.isValid()&&i.loaded||z(i)&&i.isValid()&&i.loaded)return i.loaded;for(let i of o.root.children)if(ue(i)&&i.isValid()&&i.loaded)return i.loaded;throw Error("Document does not have any scopes that can be set to active.")}resetActiveScope(o=this.treeStore.tree,r=void 0){let n=this.getActiveScopeNodeForReset(o,r);if(n.id===this._activeId)return;this._activeId="",le(this,Ta,""),le(this,Ia,""),le(this,ba,""),le(this,Ds,""),E(this,Fs).clear(),E(this,As).clear(),S(n.isLoaded(),"Scope must be fully parsed");let i=o.root.children.indexOf(n);this.scopeSwitchStart=performance.now(),this.scopeSwitchPending=!1,this.changeActive(o,n,i)}movePage(o,r){let n=this.getScopeNode(o),i=this.getAllPageNodesOfScope(n),a=i[r];S(a,`Trying to move a page node to an invalid index: ${r}, total: ${i.length} page nodes.`);let s=this.rootNode.children.findIndex(l=>l.id===a.id);S(n.parentid,"Scope node has no parentid"),S(s!==-1,"Cant find scope in root node"),this.treeStore.tree.moveNode(n,n.parentid,s)}getAllPageNodesOfScope(o){return Ct(o)?this.getDesignPageNodes():Ye(o)?this.getCanvasPageNodes():z(o)&&o.kitPage?this.getKitPageNodes():(S(!o,"Scope is not movable"),qn())}getParentId(o,r,n){let i=this.rootNode.id;if(o instanceof If||ti(o))return i;let a=n?this.getScopeNode(n):this.active;return Xs(a)&&S(pd(o),"ContentManagementNode only accepts content nodes"),r===i?a.id:r??a.id}insertNode(o,r,n,i,a){r=this.getParentId(o,r,a),ut(o)&&yF(this.componentLoader,{codeGenerationStore:this.codeGenerationStore,treeStore:this.treeStore},lt(o)?"framer/useShowRelativeOverlay":"framer/useShowOverlay",r,o),this.treeStore.tree.insertNode(o,r,n,i)}insertNodes(o){for(let r of o)this.insertNode(r,r.parentid)}moveNode(o,r,n,i,a){r=this.getParentId(o,r,a),this.treeStore.tree.moveNode(o,r,n,i)}removeNode(o){this.treeStore.tree.removeNode(o),o.id===this._activeId&&this.validateActiveScope(this.treeStore.tree,!0)}setSelectedCollectionItemForWebPage(o,r){let n=this.treeStore.tree.getNode(o);if(!z(n))return;let i=n.abTestingParentId??o;if(this.scopeIdToSelectedCollectionItem.get(i)===r)return;let s=this.scopeIdToSelectedCollectionItem;this.scopeIdToSelectedCollectionItem=$C.set(s,i,r)}getSelectedCollectionItemForWebPage(o){return this.scopeIdToSelectedCollectionItem.get(o.abTestingParentId??o.id)}getMostRecentPage(){switch(this.rootScopeType){case"CanvasPage":{let o=this.treeStore.tree.get(E(this,Ta));if(Ye(o))return o;break}case"DesignPage":{let o=this.treeStore.tree.get(E(this,Ia));if(Ct(o))return o;break}case"WebPage":{let o=this.treeStore.tree.get(E(this,ba));if(o&&Ro(o)&&z(o))return o;break}}return this.getFirstPageNodeAccordingToUI()}getComponentHistory(){if(E(this,yr).length===0)return[];let o=this.active;if(!(ue(o)||Be(o)||Zt(o)))return[];let r=[],n;for(let i of E(this,yr)){let a=this.treeStore.tree.getNode(i);(ue(a)||Be(a)||Zt(a))&&a.isLoaded()&&(r.push(a),n=a)}return n===o?r:[o]}get onIsolatedCanvas(){return E(this,_n)}get onCollectionPage(){return E(this,ki)}isolatedCanvasNodes(){let o=this.active,r;return py(o)?r=[o]:r=[this.getMostRecentPage(),...this.getComponentHistory()],zi(E(this,Es),r)?E(this,Es):(le(this,Es,r),r)}getTopMostWebPageNode(){for(let o of this.isolatedCanvasNodes())if(z(o))return o}};va=new WeakMap,Ta=new WeakMap,ba=new WeakMap,Ia=new WeakMap,Ds=new WeakMap,yr=new WeakMap,_n=new WeakMap,ki=new WeakMap,Fs=new WeakMap,As=new WeakMap,Es=new WeakMap;function A$(e,t){for(let o of e)if(!(o<t))return o;return Math.max(...e)}function E$(e){return e.root.children.filter(Ye)}function M$(e){return e.root.children.filter(t=>z(t,!0)&&!t.kitPage)}function O$(e){return e.root.children.filter(t=>z(t,!0)&&!t.dataIdentifier&&!t.kitPage)}function W$(e,t=!1){let o=e.root.children.filter(r=>!!(z(r)&&r.dataIdentifier));return t?cF(e,o):o}var z$=Symbol("previous"),Kge=p`pathVariables`,vF=p`navigate`,TF=p`setVariant`,bF=p`loadMore`,IF={onMouseEnter:{isHovered:!0},onMouseLeave:{isHovered:!1},onTapStart:{isPressed:!0},onTap:{isPressed:!1},onTapCancel:{isPressed:!1}},Xu=class{constructor(t,o,r,n,i,a,s,l,c,d,u,m,h={type:"canvasComponent"}){this.sourceNode=t;this.componentLoader=o;this.treeStore=r;this.variables=n;this.bindings=i;this.imports=a;this.assets=s;this.links=l;this.fonts=c;this.fetches=d;this.valueTransforms=u;this.overlays=m;this.options=h;D(this,"handlers",new Map);D(this,"variantOnAppearId",new Map);D(this,"keyBindHooks",new Set);D(this,"navigationTargets",new Set);D(this,"needsPathVariables",!1);D(this,"routeHandlers",new Map)}addHandler({trigger:t,node:o,actionInfo:r}){r?.forEach(c=>{!zf(c)||!c.controls.id?.value||this.variables.create(pS(c.controls.id.value,void 0))});let n=t===TT&&Qt(o),i=t===Nd&&Qt(o),a=$v(this.treeStore.tree,o.id)??this.sourceNode,s=!r||r.length===0;if(n&&s){this.variantOnAppearId.has(a.id)||this.variantOnAppearId.set(a.id,p`undefined`);return}if(s)return;let l=i?this.createKeydownEvents(o,r,this.imports):this.createCombinedEvents(o,r,t);if(n){l&&!this.variantOnAppearId.has(a.id)&&this.variantOnAppearId.set(a.id,l);return}if(!(i||!l))return l}eventHandlersForNode(t){if(!ns(t)||Xo(t))return;let o=t.getActions(this.componentLoader),r={};for(let n in o)r[n]=this.addHandler({node:t,trigger:n,actionInfo:o[n]});return this.options.type!=="canvasComponent"||!Ee(t),r}transformAction(t,o,r){return n=>{if(!hf(t)||F(o.meta?.inputValue))return n;let i=p`inputValue`;switch(r.bindings.add(p`const ${i} = args[0]?.target?.value?.trim()`),o.meta.inputValue){case"empty":return p`if (!${i}) { ${n} }`;case"set":return p`if (${i}?.length > 0 ) { ${n} }`;default:G(o.meta.inputValue,"All inputValue values should be handled")}}}getRepeaterIdForNode(t){let o=jd(t);return o?qe(t)?o.originalid:o.id:null}createCombinedEvents(t,o,r){let n=NF(),i={},a=this.overlays.getOverlayIdForNode(t);r in IF&&this.options.type==="canvasComponent"&&Ee(t)&&n.gestureHandlers.add(I.fn(fe.setGestureState,IF[r]));for(let d of o){if(this.extractActionsToGroups(t,d,n,i,r,this.transformAction(r,d,n)),n.navigationActions.size>0)break;Qa(d)&&!_r(t)&&(a||(a=d.controls.overlay.value))}if(xF.every(d=>n[d].size===0))return p`undefined`;if(n.overlayActions.size>0&&a){let d=this.overlays.bindingsByOverlayId.get(a);d&&(i[or.OverlayBinding.toString()]=d)}let s=this.getRepeaterIdForNode(t);if(n.repeaterActions.size>0&&s){let d=this.treeStore.tree.get(s),m=br(d)&&Zr(d)?this.bindings.createWithNode("loadMore",d):void 0;m&&(i[bF.toString()]=m)}let l=Object.keys(i),c=this.createEventFromGroups(r,n,l);return l.length>0?I.fn(c,i):c}createEventFromGroups(t,o,r){let n=B$(o,r),i=`${t}${_t(ge(n))}`,a=new I(i),s=p`const ${a} = ${n}`;return this.handlers.set(i,s),a}createKeydownEvents(t,o,r){S(this.options.type==="screen","Smart Components do not support keydown events");for(let n of o){let i=n.meta?.key;if(F(i))continue;let a=NF(),s={};if(this.extractActionsToGroups(t,n,a,s,"onKeyDown",this.transformAction("onKeyDown",n,a)),Object.keys(a).every(c=>a[c].size===0))continue;let l=this.createEventFromGroups("onKeyDown",a,[]);if(S(r,"An Import collector must be provided to add gamepad or hotkey bindings."),pv(i))this.keyBindHooks.add(I.fn(r.addImport("framer",{exportSpecifier:"useGamepad"}),i.key,l,{mapping:i.mapping}));else{let c=i.key,d=$$(i),u=d.length?d.concat(c).join("+"):c;this.keyBindHooks.add(I.fn(r.addImport("framer",{exportSpecifier:"useHotkey"}),u,l))}}}extractActionsToGroups(t,o,r,n,i,a){if(Kr(o)){if(this.options.type!=="canvasComponent"||!hf(i)&&r.setVariantActions.size>0)return;let s=H$(this.imports,o,i);s&&r.setVariantActions.add(a(s))}else if(zf(o)){if(this.options.type!=="canvasComponent")return;let s=_$(o);s&&r.eventActions.add(a(s))}else if(rs(o)){if(this.options.type!=="screen"||r.navigationActions.size>0)return;let s=this.createNavigateAction(o.controls.type.value,o.controls.target.value,o.meta?.delay,o.controls);s&&r.navigationActions.add(a(s))}else if(o.actionIdentifier==="framer/useLog"){if(this.options.type!=="screen")return;let s=U$(o);s&&r.otherActions.add(a(s))}else if(o.actionIdentifier==="framer/useSetLocale"){let s=o.controls.localeId?.value;if(!A(s))return;r.otherActions.add(a(I.fn(fe.setLocale,s)))}else if(lF(o)){let s=this.createSetVariableValueAction(t,o,n);s&&r.otherActions.add(a(s))}else if(sF(o)){let s=this.createResetVariablesAction(t);s&&r.otherActions.add(a(s))}else if(aF(o)){let s=nl(o.controls.url.value);if(F(s)||B(s))return;if(dv(s)){let l=this.createOpenPageAction(s.webPageId,s.hash,o.meta?.delay);l&&r.navigationActions.add(a(l))}else{let l=j$(o,s);l&&r.otherActions.add(a(l))}}else if(!_r(t)&&Qa(o)){if(o.actionIdentifier==="framer/useShowOverlay"&&this.options.type==="canvasComponent")return;let s=o.controls.overlay.value,l=this.overlays.addOverlayTrigger(s,t.id);l&&r.overlayActions.add(a(l))}else if(VT(o)){if(!this.overlays.hasAncestorOverlayBinding(t))return;r.overlayActions.add(a(this.createDismissOverlayAction(o.meta?.delay)))}else if(Ab(o)){let s=this.getRepeaterIdForNode(t),l=this.treeStore.tree.get(s);if(!br(l))return;r.repeaterActions.add(I.fn(bF))}}createDismissOverlayAction(t){return Un(I.fn(or.overlayMethod(or.OverlayBinding,"hide")),t)}createOpenPageAction(t,o,r){if(!this.getNavigationTarget(t))return;let i=`${_t(t)}${o?_t(o):""}`,a=new I(`openRoute${i}`),s=[t,p`true`];o&&s.push(o),this.routeHandlers.set(i,p`const ${a} = ${I.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteHandler"}),...s)}`);let l=I.fn(a);return p`return ${Un(l,r)}`}createNavigateAction(t,o,r,n){if(t==="previous")return this.navigationTargets.add(z$),p`return ${Un(I.fn(vF,"previous"),r)}`;if(!o||!this.isValidNavigationTarget(o))return;let i={};for(let a in n){if(a==="target")continue;let s=n[a];i[a]=s.value}return this.navigationTargets.add(o),p`return ${Un(I.fn(vF,o,i),r)}`}createSetVariableValueAction(t,o,r){let n=this.treeStore.tree.getScopeNodeFor(t);if(!qo(n))return;let i=o.controls.variableId.value,a=n.getVariable(i);if(!a)return;let s=jn(n),l=Ua(this.treeStore.tree,this.componentLoader,a,s);if(!l)return;let c=this.getControlValueForCodeGeneration(t,l,o.controls.value),d=this.variables.createSetter(i);if(No(c)){let u=`arg${_t(ge(c))}`;return r[u]=c,I.optionalFn(d,new I(u))}return I.optionalFn(d,c)}createResetVariablesAction(t){let o=this.treeStore.tree.getScopeNodeFor(t);if(!qo(o))return;let r=[],n=jn(o);for(let i of o.variables){if(!Vo(i))continue;let a=this.variables.createSetter(i.id),s;if(ja(i,n))s=p`undefined`;else{let l=Ua(this.treeStore.tree,this.componentLoader,i,n);if(!l)return;let c={type:l.type,value:i.initialValue};s=this.getControlValueForCodeGeneration(t,l,c)}s!==void 0&&r.push(I.optionalFn(a,s))}if(r.length!==0)return p.joinLines(...r)}getControlValueForCodeGeneration(t,o,r){let n=Jv(o,r);if(n)return lL(t,o,n,{context:{imports:this.imports,assets:this.assets,links:this.links,fonts:this.fonts,fetches:this.fetches,variables:this.variables,valueTransforms:this.valueTransforms}})}getNavigationTarget(t){if(!t)return null;let o=this.treeStore.tree.getNode(t);return!o||!(this.treeStore.tree.isGroundNode(o)||z(o))?null:o}isValidNavigationTarget(t){return!!this.getNavigationTarget(t)}};function NF(){return{bindings:new I.Set,gestureHandlers:new I.Set,eventActions:new I.Set,setVariantActions:new I.Set,navigationActions:new I.Set,otherActions:new I.Set,overlayActions:new I.Set,repeaterActions:new I.Set}}var xF=["bindings","gestureHandlers","eventActions","setVariantActions","otherActions","overlayActions","repeaterActions","navigationActions"];function B$(e,t){let o=[];for(let n of xF)for(let i of e[n])o.push(i);let r=p.joinLines(p`activeVariantCallback(async (...args) => {`,...o,p`})`);if(t.length>0){let n=new I(It.listFrom(t));return p`({${n}}) => ${r}`}return r}function $$(e){let t=[];for(let o in e)if(e[o])switch(o){case"altKey":t.push("alt");break;case"ctrlKey":t.push("ctrl");break;case"metaKey":t.push("meta");break;case"shiftKey":t.push("shift");break;default:break}return t}function G$(e,t,o,r){if(t==="cycle")return I.fn(TF,e.addImport("framer",{exportSpecifier:"CycleVariantState"}),r);if(o)return I.fn(TF,o,r)}function H$(e,t,o){let r=t.controls.type?.value,n=t.controls.variantId?.value,i=t.controls.pauseOffscreen?.value;if(!Mk(r))return;let a=G$(e,r,n,o==="onAppear"?i:void 0);if(a)return Un(a,t.meta?.delay)}function _$(e){let t=e.controls.id?.value;if(!A(t))return;let o=new I(t);return p.joinLines(p`if (${o}) {${p.joinLines(e.meta?.delay&&p`await delay(() => {}, ${e.meta?.delay*1e3});`,p`const res = await ${o}(...args);`,p`if (res === false) return false;`)}}`)}function j$(e,t){if(!cn(t))return;let{href:o,target:r=p`undefined`,rel:n}=HS(t.url);if(!o)return;let i=[o,r??p`undefined`,n??"noopener"];return Un(I.fn(p`window.open`,...i),e.meta?.delay)}function U$(e){let t=e.controls?.type?.value,o=e.controls?.message?.value;if(A(t))switch(t){case"event":return new I(It.lines('if (args[0] && "persist" in args[0]) args[0].persist()',Un(p`console.log(...args)`,e.meta?.delay)));case"message":return A(o)?Un(p`console.log(${o})`,e.meta?.delay):void 0;case"count":return A(o)?Un(p`console.count(${o})`,e.meta?.delay):void 0}}function Un(e,t){return!F(t)&&t>0?p`await delay(() => ${e}, ${t*1e3})`:e}var Jn=class{constructor(t,o,r,n,i){this.bindings=t;this.variables=o;this.preload=r;this.assets=n;this.links=i;D(this,"fetchesByNode",new Map);D(this,"resultBindingsByNode",new Map)}createFetchBinding(t,o){let r=$c(o);if(!sS(r))return xu(r.controlProp,this.variables,this.assets,this.links);let n=t.getPrimaryId(),i=this.resultBindingsByNode.get(n)??this.bindings.create("fetchResult");this.resultBindingsByNode.set(n,i),this.preload.addFetch(t,r);let a=this.fetchesByNode.get(t.id)??[];return a.push(Pu(r,this.variables,this.assets,this.links)),this.fetchesByNode.set(t.id,a),p`${i}[${a.length-1}]`}getResultBinding(t){return this.resultBindingsByNode.get(t.getPrimaryId())}getFetchesForNode(t){return this.fetchesByNode.get(t.id)}};var Zu=class{constructor(t){this.declarationCollector=t;D(this,"fontObjects",new Set);D(this,"fontReferences",new Map);D(this,"referencedComponentIdentifiers",new Set);D(this,"fontObjectsBySelector",new Map)}createDedupedVariationAxesBinding(t){return t.variationAxes?this.declarationCollector.dedupe("variationAxes",[...t.variationAxes]):void 0}addFontObjectBySelector(t,o){let r=this.fontObjectsBySelector.get(t);if(r){if(!o)return;let i=r[0];if(!i)return;if(id(i.source,o)&&!i.openType)for(let a of r)a.openType=!0;return}let n=XC.getFontBySelector(t);if(!(!n||!n.file))if(n.subsets){let i=[];this.fontObjectsBySelector.set(t,i);for(let a of n.subsets){let s={url:a.file,uiFamilyName:n.family.name,cssFamilyName:n.cssFamilyName,style:n.style,weight:F(n.weight)?void 0:String(n.weight),source:n.family.source,unicodeRange:a.unicodeRange,variationAxes:this.createDedupedVariationAxesBinding(n),openType:id(n.family.source,o)};this.fontObjects.add(s),i.push(s)}}else{let i={url:n.file,uiFamilyName:n.family.name,cssFamilyName:n.cssFamilyName,style:n.style,weight:F(n.weight)?void 0:String(n.weight),source:n.family.source,variationAxes:this.createDedupedVariationAxesBinding(n),openType:id(n.family.source,o)};this.fontObjects.add(i),this.fontObjectsBySelector.set(t,[i])}}addFontReference({componentIdentifier:t,fontReference:o}){this.fontReferences.set(ge(o),o),this.referencedComponentIdentifiers.add(t)}};function J$(e){return e==="string"||e==="vectorsetitem"}var Na,Qu=class{constructor(t,o,r){this.modulesStore=t;this.tree=o;this.componentLoader=r;ce(this,Na,new Map)}get structure(){return Array.from(E(this,Na).values())}addSection(t){if(!Of(t)&&!Xd(t))return;let o=aL(t);if(!o)return;let r={_id:o,_layerId:t.id,content:[]};return E(this,Na).set(t.id,r),t.id}addCustomizations(t,o){if(!Of(t)||!o)return;let r=E(this,Na).get(o);if(r&&(Z(t)&&X$(t,r,this.tree,this.componentLoader,this.modulesStore),!!Pb(t))){for(let n of t.customizations)if(Ve(t))r.content.push({field:n.fieldPath,text:t.getTextContent()});else if(Z(t)&&t.isVectorInstance){if(!ot(t.codeComponentIdentifier))return;let i=Rl(he(t.codeComponentIdentifier),this.tree,this.modulesStore)?.name;if(!A(i))return;r.content.push({field:n.fieldPath,text:i})}E(this,Na).set(o,r)}}};Na=new WeakMap;function X$(e,t,o,r,n){let i=r.componentForIdentifier(e.codeComponentIdentifier)?.properties;if(!i)return;let a=e.getControlProps(i);for(let s in a){let l=a[s];if(!l)continue;let{type:c,value:d}=l;if(!A(c)||!J$(c))continue;let u=i[s]?.title??s;if(A(d))switch(c){case"string":t.content.push({field:u,text:d});break;case"vectorsetitem":{if(!ot(d))continue;let m=Rl(he(d),o,n)?.name;if(!A(m))continue;t.content.push({field:u,text:d});break}default:G(c,"Unknown control type")}}}var xa,Ku=class{constructor(t){this.scopeNode=t;ce(this,xa,new Map)}recordClassName(t,o,r){if(!Be(this.scopeNode)||t.parentid!==o||t.visible===!1||qi(t)&&t.locked)return;let n=o,i=E(this,xa).get(n)??new Set;i.add("."+r),E(this,xa).set(n,i)}annotation(){if(!Be(this.scopeNode)||E(this,xa).size===0)return"{}";let t={};for(let[o,r]of E(this,xa))t[o]=Array.from(r);return JSON.stringify(t)}};xa=new WeakMap;var uy=class{constructor(t,o,r,n,i){this.moduleType=t;this.componentLoader=o;this.modulesStore=r;this.submoduleName=n;this.sourceCode=i;D(this,"submoduleFilename");D(this,"submoduleImport");D(this,"bindings",new Vr);D(this,"imports");D(this,"declarations",new Ln(this.bindings));this.submoduleFilename=SP(this.submoduleName),this.submoduleImport=vP(this.submoduleFilename),this.imports=new Xr(this.moduleType,this.componentLoader,this.modulesStore,this.bindings)}get estimatedSize(){return this.declarations.declarationsByteSize}serialize(){let t=It.linesFrom(this.imports.statements),o=this.declarations.list();return It.sections(t,this.sourceCode,...o)}},qu=class{constructor(t,o,r,n){this.moduleType=t;this.componentLoader=o;this.modulesStore=r;this.componentSourceNodeId=n;D(this,"submodules",new Set)}create(t){let o=CP(this.componentSourceNodeId,this.submodules.size),r=new uy(this.moduleType,this.componentLoader,this.modulesStore,o,t);return this.submodules.add(r),r}delete(t){this.submodules.delete(t)}serialize(){let t=new Map;for(let o of this.submodules){let r=o.serialize();t.set(o.submoduleName,r)}return t}};function PF(e){return`${e}ToDisplayName`}var VF="enumToDisplayNameFunctions";function RF(e){if(e?.type!=="enum"||!e.optionTitles)return p`(value) => value`;let t=e.optionTitles;return new I(It.lines(p`(value, _locale) => {`,p`switch (value) {`,...e.options.map((o,r)=>{let n=t[r];return p`case ${o}: return ${F(n)?p`undefined`:n};`}),p`default: return "";`,p`}`,p`}`))}function kF(e){let{locale:t,grouping:o,notation:r,compactDisplay:n,style:i,currency:a,currencyDisplay:s,unit:l,unitDisplay:c,minimumFractionDigits:d,maximumFractionDigits:u,minimumIntegerDigits:m}=e,h={locale:t,notation:r,style:i};switch(zr(o)&&(h.useGrouping=o),te(d)&&(h.minimumFractionDigits=d),te(u)&&(h.maximumFractionDigits=u),te(m)&&(h.minimumIntegerDigits=m),r==="compact"&&(h.compactDisplay=n),i){case"currency":h.currency=a,h.currencyDisplay=s;break;case"unit":h.unit=l,h.unitDisplay=c;break}return new Y(h)}var wF=p`(value, options = {}, activeLocale) => {
    const fallbackLocale = "en-US";
    const locale = options.locale || activeLocale || fallbackLocale;
    const {
        useGrouping,
        notation,
        compactDisplay,
        style,
        currency,
        currencyDisplay,
        unit,
        unitDisplay,
        minimumFractionDigits,
        maximumFractionDigits,
        minimumIntegerDigits,
    } = options;
    const formatOptions = {useGrouping, notation, compactDisplay, style, currency, currencyDisplay, unit, unitDisplay, minimumFractionDigits, maximumFractionDigits, minimumIntegerDigits};
    const number = Number(value);
    try {
        return number.toLocaleString(locale, formatOptions);
    } catch {
        try {
            return number.toLocaleString(fallbackLocale, formatOptions);
        } catch {
            return number.toLocaleString();
        }
    }
};
`;function LF(e,t){if(t.length===0)return null;S(e);let o=new Set;for(let n of t){let i=e.create(n);o.add(ge(i))}let r=`{${Array.from(o).join(", ")}}`;return new I(r)}function DF(e,t,o,r){let n=e.name;switch(n){case"contains":case"containsAny":case"containsAll":case"endsWith":case"equals":case"startsWith":case"greaterThan":case"lessThan":case"isBefore":case"isAfter":case"isIncludedIn":case"toggleInList":return q(e.value)?(S(o),[o.create(e.value)]):[F(e.value)?p`undefined`:e.value];case"prefix":case"suffix":{if(q(e.value))return S(o),[o.create(e.value)];let a=F(e.value)?p`undefined`:e.value;return e.valueLocalized?(S(r,"LocalizedValueCollector is required"),[r.add(a,e.valueLocalized,s=>e.valueLocalized?.[s]?.value)]):[a]}case"toDateString":return[t.getActiveLocaleCode()];case"extractDateSegment":return[e.segment];case"numberToString":return[kF(e),t.getActiveLocaleCode()];case"offsetAndLimitArray":return[e.startOffset,te(e.limit)?e.limit:p`undefined`];case"isBetweenDates":{let a=[];return q(e.start)?(S(o),a.push(o.create(e.start))):a.push(F(e.start)?p`undefined`:e.start),q(e.end)?(S(o),a.push(o.create(e.end))):a.push(F(e.end)?p`undefined`:e.end),a}case"convertFromEnum":case"convertFromString":{let s=function(d){Ko(d)&&Nn(d,u=>s(u)),q(d)&&a.push(d)};var i=s;let a=[];s(e.default);for(let d of e.cases)s(d.to);let l=LF(o,a),c=o?.getLocale()??p`undefined`;return l?[c,l]:[c]}case"convertFromBoolean":{let s=function(u){Ko(u)&&Nn(u,m=>s(m)),q(u)&&a.push(u)};var i=s;let a=[];s(e.truthy),s(e.falsy),s(e.fallback?.value);let l=o?.getLocale()??p`undefined`,c=LF(o,a);return c?[l,c]:[l]}case"enumToDisplayName":return t.variables?[t.variables.getLocale()]:[];case"toString":case"toBoolean":case"toNumber":case"isSet":case"negate":case"reverseArray":case"toResponsiveImage":case"toImageSrc":case"jsonStringify":case"htmlEscape":case"htmlUnescape":case"addImageAlt":case"toZIndex":case"toAxisOverflow":case"toOverflowWithClipFallback":case"numberToPixelString":case"radiusForCorner":case"percentageToCornerShape":case"arrayToArray":case"arrayLength":case"isEven":case"isOdd":case"getGridColumnCSSValue":case"getGridRowCSSValue":case"getNumericColumnGap":return[];default:G(n,"All value transforms should define their arguments")}}var FF=p`(image, alt) => {
	if (!image || typeof image !== "object") {
		return;
	};
	return { ...image, alt };
};
`;var AF=p`(value) => {
	return Array.isArray(value) ? value.length : 0
}
`;function EF(e){let t=p`item`,o={[Fn]:p`${t}?.[${Fn}]`};for(let r in e.mapping){let n=e.mapping[r];if(S(Uo(n)),uS(n.value)){o[r]=p`${t}?.[${n.value.id}]`;continue}n.value}return p`(value) => {
      if (!Array.isArray(value)) return
      return value.map((${t}) => (${o}))
    }`}var MF=p`(a, b) => {
	if (!Array.isArray(a)) return false;
	if (b === undefined) return true;
	if (!Array.isArray(b)) return false;
	if (b.length === 0) return true;

	const aSet = new Set(a);
	for (const item of b) {
		if (!aSet.has(item)) {
			return false;
		}
	}
	return true;
};
`;var OF=p`(a, b) => {
	if (!Array.isArray(a)) return false;
	if (b === undefined) return true;
	if (!Array.isArray(b)) return false;
	if (b.length === 0) return true;

	const aSet = new Set(a);
	for (const item of b) {
		if (aSet.has(item)) return true;
	}
	return false;
};
`;function Z$(e){let t=dn(e.outputType);return ge(p`return ${to(t)?t:p`undefined`};`)}function my(e,t,o,r,n,i,a){if(o==="link")return!a||!Ko(e)&&!q(e)?void 0:a.create(e);if(!Ko(e))return q(e)?n.create(e):Yv(o,e,r)?i&&t&&o==="string"?i.add(e,t,s=>t?.[s]?.value):e:eT(o,r)}function Q$(e,t,o,r,n){if(!qv(e.outputType))return Z$(e);let i=my(e.truthy,e.truthyLocalized,e.outputType,t,o,r,n),a=my(e.falsy,e.falsyLocalized,e.outputType,t,o,r,n),s=i===void 0?p`undefined`:i,l=a===void 0?p`undefined`:a;if(e.fallback){let c=my(e.fallback.value,e.fallback.valueLocalized,e.outputType,t,o,r,n),d=c===void 0?p`undefined`:c;return It.lines(p`switch (value) {`,p`case true: return ${s};`,p`case false: return ${l};`,p`default: return ${d};`,p`}`)}return p`return value ? ${s} : ${l};`}function WF(e,t,o,r,n){S(o),S(r),S(n);let i=new Set;function a(l){if(Ko(l)&&Nn(l,c=>a(c)),q(l)){S(o);let c=o.create(l);i.add(ge(c))}}a(e.truthy),a(e.falsy),a(e.fallback?.value);let s=[p`value`,fe.activeLocale];if(i.size>0){let l=`{${Array.from(i).join(", ")}}`;s.push(new I(l))}return new I(It.lines(p`(${new I(s.map(ge).join(", "))}) => {`,new I(Q$(e,t,o,r,n)),p`}`))}function Ms(e,t,o,r,n,i,a){if(o==="link")return!a||!Ko(e)&&!q(e)?void 0:a.create(e);if(!Ko(e))return q(e)?n.create(e):Qv(o,e,r)?i&&o==="string"&&A(e)&&t?i.add(e,t,s=>t?.[s]?.value):e:Kv(o,r)}function zF(e){let t=dn(e.outputType);return ge(p`return ${to(t)?t:p`undefined`};`)}function K$(e,t,o,r,n,i){if(t?.type!=="enum"||!Xv(e.outputType))return zF(e);let a=new Set,s=Ms(e.default,e.defaultLocalized,e.outputType,o,r,n,i);return It.lines(p`switch (value) {`,...e.cases.filter(l=>a.has(l.from)||!t.options.includes(l.from)?!1:(a.add(l.from),!0)).map(l=>{let c=Ms(l.to,l.toLocalized,e.outputType,o,r,n,i);return p`case ${l.from}: return ${c===void 0?p`undefined`:c};`}),p`default: return ${s===void 0?p`undefined`:s};`,p`}`)}function BF(e,t,o,r,n,i){S(r),S(n),S(i);let a=new Set;function s(c){if(Ko(c)&&Nn(c,d=>s(d)),q(c)){S(r);let d=r.create(c);a.add(ge(d))}}e.cases.forEach(c=>{s(c.to)}),s(e.default);let l=[p`value`,fe.activeLocale];if(a.size>0){let c=`{${Array.from(a).join(", ")}}`;l.push(new I(c))}return new I(It.lines(p`(${new I(l.map(ge).join(", "))}) => {`,new I(K$(e,t,o,r,n,i)),p`}`))}function q$(e){let t=dn(e.outputType);return ge(p`return ${to(t)?t:p`undefined`};`)}function Y$(e,t,o,r,n){if(!Zv(e.outputType))return q$(e);let i=new Set,a=Ms(e.default,e.defaultLocalized,e.outputType,t,o,r,n);return It.lines(p`switch (typeof value === "string" ? value.toLowerCase() : value) {`,...e.cases.filter(s=>{let l=s.from.toLowerCase();return i.has(l)?!1:(i.add(l),!0)}).map(s=>{let l=Ms(s.to,s.toLocalized,e.outputType,t,o,r,n);return p`case ${s.from.toLowerCase()}: return ${l===void 0?p`undefined`:l};`}),p`default: return ${a===void 0?p`undefined`:a};`,p`}`)}function $F(e,t,o,r,n){S(o),S(r),S(n);let i=new Set;function a(l){if(Ko(l)&&Nn(l,c=>a(c)),q(l)){S(o);let c=o.create(l);i.add(ge(c))}}e.cases.forEach(l=>{a(l.to)}),a(e.default);let s=[p`value`,fe.activeLocale];if(i.size>0){let l=`{${Array.from(i).join(", ")}}`;s.push(new I(l))}return new I(It.lines(p`(${new I(s.map(ge).join(", "))}) => {`,new I(Y$(e,t,o,r,n)),p`}`))}var GF=p`(a, b) => {
	return typeof a === "string" && typeof b === "string" && a.toLowerCase().endsWith(b.toLowerCase());
};
`;var HF=p`(a, b) => {
	return (typeof a === "string" && typeof b === "string") ? a.toLowerCase() === b.toLowerCase() : a === b;
};
`;var _F=p`(value, segment = "year") => {
	if (typeof value !== "string") return;
	const date = new Date(value);
	if (isNaN(date.getTime())) return;
	if (segment === "year") return date.getUTCFullYear();
	if (segment === "month") return date.getUTCMonth() + 1;
	if (segment === "day") return date.getUTCDate();
	if (segment === "hour24") return date.getUTCHours();
	if (segment === "hour12") {
		const hour = date.getUTCHours();
		return hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
	}
	if (segment === "minute") return date.getUTCMinutes();
};
`;var fy=p`spanCount`,Yu=p`optionalColumnCount`,jF=p`(columnSpan, ${Yu}) => {
	if (columnSpan === "all") return "-1 / 1";
	const ${fy} = Number.isFinite(columnSpan) && columnSpan > 0 ? columnSpan : 1;
	if (Number.isFinite(${Yu}) && ${fy} > ${Yu}) {
		return ${nt`span ${Yu}`};
	}
	return ${nt`span ${fy}`};
};
`;var UF=p`spanCount`,JF=p`(rowSpan) => {
	const ${UF} = Number.isFinite(rowSpan) && rowSpan > 0 ? rowSpan : 1;
	return ${nt`span ${UF}`}
};
`;var XF=p`(gap) => {
	if (Number.isFinite(gap) && gap >= 0) return gap;
	if (typeof gap !== "string") return 0;
	const firstSegment = gap.split(" ")[0];
	const parsedGap = parseFloat(firstSegment);
	return Number.isFinite(parsedGap) && parsedGap >= 0 ? parsedGap : 0;
};
`;var ZF=p`(a, b) => {
	return (typeof a === "number" && typeof b === "number") ? a > b : false;
};
`;var QF=p`(value) => {
	if (typeof value !== "string") return "";
	return value.replaceAll("&", "&amp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;").replaceAll('"', "&quot;").replaceAll("'", "&#39;");
};
`;var KF=p`(value) => {
	if (typeof value !== "string") return "";
	const entities = /&(?:[gl]t|quot|#39|amp|#6[02]|#34|apos|#38);/gu;
	const replacers = { "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'", "&amp;": "&", "&#60;": "<", "&#62;": ">", "&#34;": '"', "&apos;": "'", "&#38;": "&" };
	return value.replace(entities, match => replacers[match]);
};
`;var qF=p`(dateString, minDateString) => {
	if (typeof dateString !== "string" || typeof minDateString !== "string") return false;

	const date = new Date(dateString);
	if (isNaN(date.getTime())) return false;

	const minDate = new Date(minDateString);
	if (isNaN(minDate.getTime())) return false;

	return date >= minDate;
};
`;var YF=p`(dateString, maxDateString) => {
	if (typeof dateString !== "string" || typeof maxDateString !== "string") return false;

	const date = new Date(dateString);
	if (isNaN(date.getTime())) return false;

	const maxDate = new Date(maxDateString);
	if (isNaN(maxDate.getTime())) return false;

	return date <= maxDate;
};
`;var eA=p`(value, start, end) => {
	if (typeof value !== "string" || typeof start !== "string" || typeof end !== "string") return false;

	const date = new Date(value);
	if (isNaN(date.getTime())) return false;

	const startDate = new Date(start);
	if (isNaN(startDate.getTime())) return false;

	const endDate = new Date(end);
	if (isNaN(endDate.getTime())) return false;

	return date >= startDate && date <= endDate;
};
`;var tA=p`(value) => {
	return typeof value === "number" && value % 2 === 0;
};
`;var oA=p`(a, b) => {
	return b.includes(a);
};
`;var rA=p`(value) => {
	return typeof value === "number" && value % 2 === 1;
};
`;var nA=p`(value) => {
	if (Array.isArray(value)) return value.length > 0;
	return value !== undefined && value !== null && value !== "";
};
`;var iA=p`(value) => {
	const result = JSON.stringify(value)
	if (typeof result === 'string') return result.replace(/<\\/(script|style)/gi, '<\\\\/$1')
	return result
};
`;var aA=p`(a, b) => {
	return (typeof a === "number" && typeof b === "number") ? a < b : false;
};
`;var sA=p`(value) => {
	return !value;
};
`;var lA=p`(value) => {
	if (typeof value !== "number") return value;
	if (!Number.isFinite(value)) return undefined;
	return Math.max(0, value) + "px";
};
`;var cA=p`(value, offset, limit) => {
	if (!Array.isArray(value)) return []
	const end = typeof limit === "number" ? offset + limit : undefined
	return value.slice(offset, end);
};
`;var dA=p`(value) => {
	if (!Number.isFinite(value) || value <= 0) return 1;
	if (value >= 100) return 2;
	return Math.round(value) / 100 + 1;
};
`;var pA=p`(value, prefix) => {
	if (typeof value === "string" && typeof prefix === "string") {
		return prefix + value;
	} else if (typeof value === "string") {
		return value;
	} else if (typeof prefix === "string") {
		return prefix;
	}
	return "";
};
`;var uA=p`(value, cornerIndex) => {
	if (typeof value === "number" && Number.isFinite(value)) return Math.max(0, value) + "px";
	if (typeof value !== "string" || typeof cornerIndex !== "number") return undefined;
	const segments = value.split(" ");
	return segments[cornerIndex] || segments[cornerIndex - 2] || segments[0];
};
`;var mA=p`(value) => {
	return Array.isArray(value) ? Array.from(value).reverse() : [];
}
`;var fA=p`(a, b) => {
	return typeof a === "string" && typeof b === "string" && a.toLowerCase().startsWith(b.toLowerCase());
};
`;var hA=p`(value, suffix) => {
	if (typeof value === "string" && typeof suffix === "string") {
		return value + suffix;
	} else if (typeof value === "string") {
		return value;
	} else if (typeof suffix === "string") {
		return suffix;
	}
	return "";
};
`;var gA=p`(value, overflow) => {
	const isNonScrollable = (o) => o === "visible" || o === "clip" || o === undefined
	return isNonScrollable(value) === isNonScrollable(overflow) ? value : undefined
}`;var yA=p`(value) => {
	return Boolean(value);
};
`;var CA=p`value`,SA=p`activeLocale`;function vA(e,t){let o=t.dedupe("sharedDateFormatter",new I(It.lines(p`(value, formatOptions, locale) => {`,p`  if (typeof value !== "string") return "";`,p`  const date = new Date(value);`,p`  if (isNaN(date.getTime())) return "";`,p`  const fallbackLocale = "en-US";`,p`  try {`,p`      return date.toLocaleString(locale || fallbackLocale, formatOptions);`,p`  } catch {`,p`      return date.toLocaleString(fallbackLocale, formatOptions);`,p`  }`,p`};`))),r=oT(e.display,e.format,e.dateStyle,!1),n={...tT[r].options,timeZone:"UTC"},i=t.dedupe("dateOptions",new I(ge(n)));return new I(It.lines(p`(${CA}, ${SA}) => {`,p`return ${I.fn(o,CA,i,e.locale||SA)};`,p`};`))}var TA=p`(value) => {
	if (typeof value === "object" && value !== null && typeof value.src === "string") {
		return value.src;
	};
	return typeof value === "string" ? value : undefined;
};
`;var bA=p`(value) => {
	if (typeof value === "number" && Number.isFinite(value)) return value;
	if (typeof value !== "string") return 0;
	const parsedNumber = parseFloat(value);
	return (typeof parsedNumber === "number" && Number.isFinite(parsedNumber)) ? parsedNumber : 0;
};
`;var e0=`var(${oS}, clip)`,IA=p`(value) => {${p.joinLines(p`if (value === "clip") return ${e0}`,p`return value`)}};`;var NA=p`(value) => {
	if (typeof value === "object" && value !== null && typeof value.src === "string") {
		return value
	}
	return typeof value === "string" ? {src: value} : undefined;
};
`;var xA=p`(value) => {
	return typeof value === "string" ? value : String(value);
};
`;var PA=p`(value) => {${p.joinLines(p`if (!Number.isFinite(value)) return 0`,p`if (value < -1) return -1`,p`if (value > 11) return 11`,p`return value`)}};`;function VA(e){switch(e){case"isAfter":return qF;case"isBefore":return YF;case"isBetweenDates":return eA;case"contains":return Rx;case"containsAny":return OF;case"containsAll":return MF;case"endsWith":return GF;case"equals":return HF;case"isSet":return nA;case"greaterThan":return ZF;case"lessThan":return aA;case"negate":return sA;case"numberToString":return wF;case"startsWith":return fA;case"toString":return xA;case"toNumber":return bA;case"toBoolean":return yA;case"extractDateSegment":return _F;case"reverseArray":return mA;case"offsetAndLimitArray":return cA;case"arrayLength":return AF;case"prefix":return pA;case"suffix":return hA;case"toResponsiveImage":return NA;case"toImageSrc":return TA;case"jsonStringify":return iA;case"htmlEscape":return QF;case"htmlUnescape":return KF;case"addImageAlt":return FF;case"toZIndex":return PA;case"toAxisOverflow":return gA;case"toOverflowWithClipFallback":return IA;case"numberToPixelString":return lA;case"radiusForCorner":return uA;case"percentageToCornerShape":return dA;case"isIncludedIn":return oA;case"toggleInList":return kx;case"isEven":return tA;case"isOdd":return rA;case"getGridColumnCSSValue":return jF;case"getGridRowCSSValue":return JF;case"getNumericColumnGap":return XF;default:G(e,"All constant transform names should be implemented")}}function RA(e,t,o,r,n,i,a){switch(e.name){case"enumToDisplayName":return RF(t);case"convertFromEnum":return BF(e,t,o,r,n,i);case"convertFromString":return $F(e,o,r,n,i);case"convertFromBoolean":return WF(e,o,r,n,i);case"arrayToArray":return EF(e);case"toDateString":return vA(e,a);default:G(e,"All dynamic transform names should be implemented")}}var $o=qn(),t0={name:"toString"},o0={name:"toNumber"},r0={name:"toBoolean"},n0={name:"toResponsiveImage"},i0={name:"toImageSrc"},a0={name:"toZIndex"},s0={name:"numberToPixelString"},l0={name:"radiusForCorner"},c0={name:"percentageToCornerShape"},d0={name:"toAxisOverflow"},p0={name:"toOverflowWithClipFallback"},u0={name:"jsonStringify"},m0={name:"htmlEscape"},f0={name:"htmlUnescape"},h0={name:"addImageAlt"},g0={name:"getGridColumnCSSValue"},y0={name:"getGridRowCSSValue"},C0={name:"getNumericColumnGap"};function S0(e){return fS(e.name)}var Mr=class{constructor(t,o,r,n,i,a,s,l,c,d){this.componentLoader=t;this.fileDeclarations=o;this.componentDeclarations=r;this.imports=n;this.variables=i;this.localizedValues=a;this.links=s;this.fetches=l;this.modulesStore=c;this.type=d}wrapInTransformFunction(t,o,r,n,i){if(mS(o.name)){let a=this.fileDeclarations.dedupe(o.name,VA(o.name));return I.fn(a,t,...r)}if(S0(o)){if(o.name==="enumToDisplayName"&&n&&n.type==="enum"){let s=this.getImportedEnumToDisplayNameIfPossible(t,n);if(s)return s}let a=RA(o,n,i,this.variables,this.localizedValues,this.links,this.fileDeclarations);return I.fn(new I(this.fileDeclarations.dedupe(o.name,a)),t,...r)}G(o.name,"All value transforms should be handled in wrapInTransformFunction")}getImportedEnumToDisplayNameIfPossible(t,o){let r=this.imports,n=this.modulesStore;if(!r||!n)return;let i=zT(o);if(!i)return;let{dataIdentifier:a,enumFieldKey:s}=i;if(a===GT)return s===$T?this.variables?.getLayoutDirectionName()??p`undefined`:this.variables?.getLocaleName()??p`undefined`;let l=this.componentLoader.dataForIdentifier(a);if(!l||!l.annotations)return;let c="framerEnumToDisplayNameUtils",d=l.annotations?.[c];if(!A(d))return;let u=Number.parseInt(d,10);if(!te(u))return;let m=he(a);if(!ot(m))return;let{importSpecifier:h}=Rr(m,this.type,this.componentLoader,n);if(!h)return;let C=this.variables?.getLocale()??p`undefined`;switch(u){case 1:{let T=PF(s),N=r.addImport(h,{exportSpecifier:T});return I.optionalFn(N,t,C)}case 2:{let T=VF,N=r.addImport(h,{exportSpecifier:T});return I.optionalFn(p`${N}[${s}]`,t,C)}default:throw new Error(`Enum to display name utils, unsupported version: ${u}`)}}wrapInValueTransform(t,o,r,n){return this.wrapInTransformFunction(t,o,DF(o,this,this.variables,this.localizedValues),r,n)}makeTypeSafe(t,o){switch(o){case"string":case"color":return this.wrapInTransformFunction(t,t0,$o);case"number":return this.wrapInTransformFunction(t,o0,$o);case"boolean":return this.wrapInTransformFunction(t,r0,$o);case"array":case"enum":case"link":case"gap":case"padding":case"borderradius":case"image":case"multicollectionreference":return t;default:return t}}getActiveLocaleCode(){if(!this.componentDeclarations||!this.imports)return p`undefined`;let t=this.imports.addImport("framer",{exportSpecifier:"useLocaleCode"});return this.componentDeclarations.dedupe("activeLocaleCode",I.fn(t))}createComputedValue(t,o,r){S(this.variables);let n=tn(t)?o.cache.getVariableControlByReference(t.startValue):void 0,i=tn(t)?this.variables.create(t.startValue):this.fetches.createFetchBinding(o,t.startValue),a;t.transforms.forEach(l=>{hS(l.name)&&(i=this.wrapInValueTransform(i,l,n,r),a=l)});let s=a?gS(a.name):null;return!s||s.length>1||s[0]!==t.outputType?this.makeTypeSafe(i,t.outputType):i}wrapInToResponsiveImage(t){return this.wrapInTransformFunction(t,n0,$o)}wrapInToImageSrc(t){return this.wrapInTransformFunction(t,i0,$o)}wrapInToZIndex(t){return this.wrapInTransformFunction(t,a0,$o)}wrapInNumberToPixelString(t){return this.wrapInTransformFunction(t,s0,$o)}wrapInRadiusForCorner(t,o){return this.wrapInTransformFunction(t,l0,[o])}wrapInPercentageToCornerShape(t){return this.wrapInTransformFunction(t,c0,$o)}wrapInToAxisOverflow(t,o){return this.wrapInTransformFunction(t,d0,[o])}wrapInToOverflowWithClipFallback(t){return this.wrapInTransformFunction(t,p0,$o)}wrapInAddImageAlt(t,o){return this.wrapInTransformFunction(t,h0,[o])}wrapInClampRGB(t){return S(this.imports,"ValueTransformCollector: Must have imports to wrap in clampColor."),I.fn(this.imports.addImport("framer",{exportSpecifier:"clampRGB"}),t)}wrapInGetGridColumnCSSValue(t,o){return this.wrapInTransformFunction(t,g0,o?[o]:$o)}wrapInGetGridRowCSSValue(t){return this.wrapInTransformFunction(t,y0,$o)}wrapInGetNumericColumnGap(t){return this.wrapInTransformFunction(t,C0,$o)}wrapInTemplateFilters(t,o){return this.makeTypeSafe($N(t,o,{json:r=>this.wrapInTransformFunction(r,u0,$o),escape:r=>this.wrapInTransformFunction(r,m0,$o),raw:r=>this.wrapInTransformFunction(r,f0,$o)}),"string")}};function v0(e){return z(e)||Rt(e)||ue(e)||Lo(e)||Be(e)}function kA(e,t){return p`(key, locale){${p.joinLines(p`while (locale) {${p.joinLines(p`const values = ${e}[locale.id]`,p`if (values) {${p.joinLines(p`const value = ${t?p`values.read()[key]`:p`values[key]`}`,p`if (value) return value`)}}`,p`locale = locale.fallback`)}}`)}}`}var mc,em=class{constructor(t,o,r){this.entryNode=t;this.variables=o;this.treeStore=r;D(this,"cache",{});D(this,"valueCounter",0);ce(this,mc,!1)}freeze(){le(this,mc,!0)}add(t,o,r){S(!E(this,mc),"Cannot add values to a frozen LocalizedValuesCollector.");let n={};if(!o||!v0(this.entryNode))return t;let i;if(this.variables){let u=new Vr;i=new Dn(this.entryNode,u)}let a=this.treeStore.tree.root.locales??[];for(let u of a){if(!(u.id in o))continue;let m=this.createLocalizedValue(u.id,i,r);yo(m)||(n[u.id]=m)}if(Wt(n))return t;let s=ge({defaultValue:t,localizedValues:n}),l=this.cache[s];if(l)return l;let c=`v${this.valueCounter++}`,d=I.fn(this.getLocalizedValueBinding,c,fe.activeLocale);if(this.variables&&i&&i.size>0){let u=[],m=[];for(let[C,T]of i){u.push(T);let N=this.variables.create(C);m.push(N)}for(let C in n){let T=n[C];S(!yo(T),"Localized should not be null or undefined");let N=p.listFrom(u);n[C]=p`(${N}) => ${T}`}let h=p.listFrom(m);d=p`${d}?.(${h})`}for(let u in n){let m=n[u];S(!yo(m),"Localized should not be null or undefined"),this.recordLocalizedValue(u,c,m)}return F(t)||(d=p`${d} ?? ${t}`),this.cache[s]=d}};mc=new WeakMap;var wi,tm=class extends em{constructor(o,r,n,i,a,s,l,c,d){super(o,r,n);this.componentLoader=i;this.imports=a;this.declarations=s;this.fetches=l;this.modulesStore=c;this.moduleType=d;D(this,"submoduleByLocaleId",new Map);D(this,"identifier",`../${cr("localization",this.entryNode.id)}`);D(this,"submodules");D(this,"bindings",new Vr);ce(this,wi);this.submodules=new qu(this.moduleType,this.componentLoader,this.modulesStore,this.entryNode.id)}get getLocalizedValueBinding(){return this.imports.addImport(this.identifier,{exportSpecifier:"default",importBinding:"getLocalizedValue"})}canPreloadWithSuspense(){return!ue(this.entryNode)}preloadWithSuspense(){E(this,wi)||(le(this,wi,this.bindings.create("usePreloadLocalizedValues")),this.declarations.component.create(I.fn(this.imports.addImport(this.identifier,{exportSpecifier:ge(E(this,wi))}),fe.activeLocale)))}createLocalizedValue(o,r,n){let i=this.submoduleByLocaleId.get(o)??this.submodules.create(),a=new gn(this.entryNode,this.componentLoader,i.imports,i.bindings,r,this.treeStore,this.modulesStore),s=n(o,{links:a,variables:r,imports:i.imports,declarations:i.declarations,valueTransforms:new Mr(this.componentLoader,i.declarations,void 0,i.imports,r,this,a,this.fetches,this.modulesStore,this.moduleType)});if(yo(s)){i&&!this.submoduleByLocaleId.has(o)&&this.submodules.delete(i);return}return this.submoduleByLocaleId.set(o,i),this.canPreloadWithSuspense()&&this.preloadWithSuspense(),s}recordLocalizedValue(o,r,n){let i=this.submoduleByLocaleId.get(o);S(i,"Localization submodule must exist"),i.declarations.create(p`export const ${new I(r)} = ${n}`)}maybeGetUsePreloadDeclarations(o){if(!this.canPreloadWithSuspense()||!E(this,wi))return[];let r=this.bindings.create("preload"),n=E(this,wi);return[p`function ${r}(locale) {${p.joinLines(p`const promises = []`,p`while (locale) {${p.joinLines(p`const values = ${o}[locale.id]`,p`if (values) {${p.joinLines(p`const promise = values.preload()`,p`if (promise) promises.push(promise)`)}}`,p`locale = locale.fallback`)}}`,p`if (promises.length > 0) return Promise.all(promises)`)}}`,p`export function ${n}(locale) {${p.joinLines(p`const preloadPromise = ${r}(locale)`,p`if (preloadPromise) throw preloadPromise`)}}`]}values(o){let r={};for(let[n,i]of this.submoduleByLocaleId)if(this.canPreloadWithSuspense()){let a=o.addImport("framer",{exportSpecifier:"LazyValue"});r[n]=I.fn(p`new ${a}`,p`() => import(${i.submoduleImport})`)}else r[n]=o.addImport(i.submoduleImport,{exportSpecifier:"*",importBinding:"localizedValues"});return r}module(o){if(this.freeze(),(this.treeStore.tree.root.locales??[]).length===0||this.submoduleByLocaleId.size===0)return;let n=new Xr(this.moduleType,this.componentLoader,this.modulesStore,this.bindings),i=new Ln(this.bindings),a=i.dedupe("valuesByLocaleId",this.values(n));return{type:"localization",revision:o,source:p.joinSections(p.joinLines(...n.statements),...i.list(),p`export default function getLocalizedValue${kA(a,this.canPreloadWithSuspense())}`,...this.maybeGetUsePreloadDeclarations(a)),artifacts:{submodules:this.submodules.serialize()}}}};wi=new WeakMap;var fc,Pa=class extends em{constructor(o,r,n,i,a,s,l,c,d,u){super(o,r,n);this.componentLoader=i;this.imports=a;this.bindings=s;this.declarations=l;this.fetches=c;this.modulesStore=d;this.moduleType=u;D(this,"valuesByLocaleId",{});ce(this,fc)}get getLocalizedValueBinding(){return E(this,fc)||le(this,fc,this.bindings.create("getLocalizedValue")),E(this,fc)}recordLocalizedValue(o,r,n){let i=this.valuesByLocaleId[o]??{};i[r]=n,this.valuesByLocaleId[o]=i}createLocalizedValue(o,r,n){let i=new gn(this.entryNode,this.componentLoader,this.imports,this.bindings,r,this.treeStore,this.modulesStore);return n(o,{links:i,variables:r,imports:this.imports,declarations:this.declarations,valueTransforms:new Mr(this.componentLoader,this.declarations,void 0,this.imports,r,this,i,this.fetches,this.modulesStore,this.moduleType)})}list(){if(this.freeze(),(this.treeStore.tree.root.locales??[]).length===0)return[];let r=this.bindings.create("valuesByLocaleId");return[p`const ${r} = ${this.valuesByLocaleId}`,p`function ${this.getLocalizedValueBinding} ${kA(r,!1)}`]}};fc=new WeakMap;var Va,Ra,Os,om=class{constructor(t){ce(this,Va);ce(this,Ra,new Set);ce(this,Os,new Map);le(this,Va,{...t})}count(t,o=1){E(this,Va)[t]+=o}measureLength(t,o){return(A(o)||o instanceof I)&&(E(this,Va)[t]+=o.length),o}get(){if(E(this,Ra).size>0){let o=Array.from(E(this,Ra),r=>r.metric).join(", ");throw Error(`Attempted to get metrics before completing timer(s): ${o}`)}let t={...E(this,Va)};for(let[o,r]of E(this,Os)){let n=fx(r);t[o]+=Math.round(n.reduce((i,[a,s])=>i+(s-a),0))}return t}time(t){let o=performance.now(),r=!1,n={get metric(){return t},cancel:()=>{r||(E(this,Ra).delete(n),r=!0)},done:()=>{S(!r,"Attempted to complete a cancelled timer");let i=E(this,Os).get(t);i||(i=[],E(this,Os).set(t,i)),i.push([o,performance.now()]),n.cancel()}};return E(this,Ra).add(n),n}async timed(t,o){let r=this.time(t);try{return await o()}finally{r.done()}}};Va=new WeakMap,Ra=new WeakMap,Os=new WeakMap;function wA(e,t,o){return"_"+rt(JSON.stringify({trackingId:e,type:t,nodeId:o})).toString(36)}var Ws,rm=class{constructor(t){this.componentLoader=t;ce(this,Ws,[])}add(t){let o=b0(this.componentLoader,t);o.length!==0&&E(this,Ws).push(...o)}annotation(){if(E(this,Ws).length===0)return;let t=new Map;for(let o of E(this,Ws)){let r=wA(o.trackingId,o.type,o.nodeId);t.has(r)||t.set(r,JSON.stringify({id:r,trackingId:o.trackingId,type:o.type,nodeId:o.nodeId}))}return`[${Array.from(t.values()).join(",")}]`}};Ws=new WeakMap;function ka(e){return A(e)&&e.length>0}function lbe(e){if(!Ze(e))return;let t=[];for(let o of e){if(!Ue(o)||!F(o.type)&&o.type!=="click"&&o.type!=="form_submit")return;let r=o.type??void 0,n=("nodeId"in o?o.nodeId:void 0)??void 0,i=o?.trackingId,a=o?.id;if(ka(i)&&typeof a=="string")t.push({id:a,trackingId:i,type:r,nodeId:n});else if(!i&&ka(a))t.push({id:wA(a,r,n),trackingId:a,type:r,nodeId:n});else return}return t}function T0(e,t,o){if(e.includes(vd))try{let n=cs(e).querySelectorAll(`[${vd}]`);for(let i of n){let a=i.getAttribute(vd);ka(a)&&o.push({trackingId:a,nodeId:t,type:"click"})}}catch{}}function b0(e,t){let o=[],r=t.getPrimaryId();if(gi(t)&&ka(t.linkClickTrackingId)&&o.push({trackingId:t.linkClickTrackingId,nodeId:r,type:"click"}),Ve(t)){for(let n of t.getLinkClickTrackingId(!1))ka(n)&&o.push({trackingId:n,nodeId:r,type:"click"});if(t.htmlLocalized)for(let n in t.htmlLocalized){let i=t.htmlLocalized[n]?.value;i&&T0(i,r,o)}}if(Z(t)){let n=e.reactComponentForIdentifier(t.codeComponentIdentifier);if(n?.properties){let i=t.getControlProps(n.properties);for(let a in i){if(!i[a])continue;let s=i[a];s.type==="trackingid"&&ka(s.value)&&o.push({trackingId:s.value,nodeId:void 0,type:void 0})}}}return er(t)&&ka(t.formSubmitTrackingId)&&o.push({trackingId:t.formSubmitTrackingId,nodeId:r,type:"form_submit"}),o}var I0={showOverlay:"ovl",setComponentVariant:"cv"},nm=class{constructor(t){D(this,"declarations");D(this,"imports");D(this,"overlays");D(this,"triggerActionByNode",new Map);this.declarations=t.declarations,this.imports=t.imports,this.overlays=t.overlays}collectTriggerActionsForNode(t){if(ui(t))for(let o of t.triggerActions){let r=this.declarations.file.dedupe("trigger",o.trigger),n=this.triggerActionByNode.get(t.id)??[];this.triggerActionByNode.set(t.id,[...n,this.getTriggerActionProps(t,o,r)]),o.action.type==="setComponentVariant"&&this.declarations.component.dedupe("triggers",I.fn(this.imports.addImport("framer",{exportSpecifier:"useTriggers"})))}}getTriggerActionProps(t,o,r){let n=this.getTargetId(t,o),i={triggerId:`${t.id}-${o.id}`,targetId:n,binding:r};switch(o.action.type){case"showOverlay":{qt(t.parentid,"Parent ID is required for showOverlay trigger action"),this.overlays.addOverlayTrigger(t.id,t.parentid);let a=this.overlays.bindingsByOverlayId.get(t.id);return qt(a,"Overlay binding is required for showOverlay trigger action"),{...i,overlayBinding:a}}case"setComponentVariant":return{...i,setVariantBinding:p`triggers.hasTriggered(${i.triggerId}) && ${I.fromValue(o.action.variant)}`}}}getTargetId(t,o){return[t.id,I0[o.action.type]].join("-")}};var im=class{constructor(t,o,r,n){this.imports=t;this.treeStore=o;this.modulesStore=r;this.createBinding=n;D(this,"sets",new Set)}resolveVariableInstance(t){S(q(t.dynamicVectorSetIdentifier),"Vector set identifier must be a variable reference"),S(ot(t.codeComponentIdentifier),"Code component identifier must be a module");let o=he(t.codeComponentIdentifier),r=Rl(o,this.treeStore.tree,this.modulesStore)?.set.moduleId;return r&&this.sets.add(r),this.createBinding(t.dynamicVectorSetIdentifier,t,"Icon")}resolveControl(t,o,r){if(q(t))return this.sets.add(o.setModuleId),this.createBinding(t,r,"Icon");S(ot(t),"Vector set item must be a module export identifier");let n=iN(this.treeStore.tree,o,t);if(n)return this.imports.addModuleImport(n)}annotation(){if(this.sets.size!==0)return JSON.stringify(Array.from(this.sets))}};var hc,gc,hy,am=class{constructor(){ce(this,gc);ce(this,hc,new Map)}set(t,o){E(this,hc).set(U(this,gc,hy).call(this,t),o)}get(t){return E(this,hc).get(U(this,gc,hy).call(this,t))}};hc=new WeakMap,gc=new WeakSet,hy=function(t){return t.getPrimaryId()};function LA(e){return dr(e)&&e.layout==="stack"&&e.stackDirection==="vertical"}function DA(e){return LA(e.getPrimaryVariant())&&e.getReplicaVariants().every(LA)}var FA=Je("createDeduplicatedDynamicValueBinding");function N0(e,t,o,r){if(!Array.from(o.keys()).some(s=>{let l=t.get(s);return Ft(l)}))return r.component;let i=t.get(e.parentid),a=e;for(;i;){let s=o.get(i.getPrimaryId());if(s){let l=t.get(i.getPrimaryId());if(Ft(l)){let c=Lb(t,l),d=s.some(u=>!WN(u));return d&&c?.getPrimaryId()!==a.getPrimaryId()?(FA.warn("Trying to consume a repeater variable available only to repeated children from another child. Falling back to component scope. This will result in undefined values."),r.component):r.forScope(l.id,d?"repeater-item":"repeater")}}a=i,i=t.get(i.parentid)}return FA.warn("Dynamic value consumes variables from a repeater but cannot find a suitable scope. Falling back to component scope. This will result in undefined values."),r.component}function x0(e){return e}function P0(e){let t=new Map;return _N(e,o=>{if(!o.providerId)return;let r=t.get(o.providerId)??[];t.set(o.providerId,[...r,o.id])}),t}var AA=(e,t,o,r)=>(n,i,a,s=x0,l=void 0)=>{if(q(n))return s(o.create(n));if(Xt(n)){let c=s(r.createComputedValue(n,i,l));return SS(n)?c:N0(i,e.tree,P0(n),t).dedupe(a,c)}G(n)};function V0(e){if(Ye(e))return"screen";if(Zt(e))return"vector";if(Ct(e))return"design";let{type:t}=he(e.instanceIdentifier);return t}function EA(e,t,{componentLoader:o,treeStore:r,modulesStore:n,engineChanges:i,assetMap:a},s=new Set,l=`framer-${Up(5)}`,c=!1){let d=V0(t),u=new Vr(...s),m=new Xr(d,o,n,u);m.addImport("react",{exportSpecifier:"*",importBinding:"React"});let h=new Ju(t.id,Ye(t)?e.id:t.id,d),C=jn(t);qt(C!=="ContentManagement"&&C!=="Analytics"&&C!=="LocalizationGlossary"&&C!=="Routes"&&C!=="CustomCode","Content management, Analytics, Localization glossary, Routes & Custom Code nodes cannot be code-generated");let T=new tI(u),N=new Dn(t,u),P=new Hn(a),R=new gn(t,o,m,u,N,r,n,()=>{let Go=m.addImport("framer",{exportSpecifier:"useRouter"});return T.component.dedupe("router",I.fn(Go))}),W=new zn(t,r,N,T.file,u,m,P),M=new Jn(u,N,W,P,R),H=new tm(t,N,r,o,m,T,M,n,d),J=new Mr(o,T.file,T.component,m,N,H,R,M,n,d),K=new Uu(t,o,u,T,m,N,r),oe=new rm(o),me=new ju(T.component,t,e.id),j=AA(r,T,N,J),Pe=new eI(t,N,r,J,j),pe=new mu(t,e,l,Pe),Ie=new or({treeStore:r,bindings:u}),we=new Zu(T.font),k=new Xu(e,o,r,N,u,m,P,R,we,M,J,Ie,{type:d}),ne=new nm({declarations:T,imports:m,overlays:Ie}),ae=new Set,Te=new om(YS()),gt=new Set,yt={dependencies:gt,addDependency:Go=>gt.add(Go)},be=un(t)&&!c?t.getReplicaVariants():[],se={};if(ue(t))for(let Go of be)!Qo(Go)||hs(Go.gesture)||(se[Go.replicaInfo.inheritsFrom??Go.replicaInfo.master]=!0);let Nt=new _u(r.tree,u),Ut=new ZI(t,o,we,m,T.file,N,n,r),oo=new Qu(n,r.tree,o),Cr=new Ku(t),sr=new im(m,r,n,j),uo=new Hu(o,r,N,J),lr=Be(t)?fe.children:void 0;return{type:"jsxContext",componentLoader:o,treeStore:r,modulesStore:n,engineChanges:i,assetMap:a,simulatedDOM:uo,variants:be,topLevelVariantsWithGestures:se,imports:m,errors:h,variables:N,fetches:M,assets:P,valueTransforms:J,elementIds:K,css:pe,renderFunctions:me,overlays:Ie,events:k,links:R,fonts:we,metrics:Te,packages:yt,appearIds:Nt,bindings:u,declarations:T,preload:W,localizedValues:H,componentPresetIds:ae,renderAsListNodes:new Map,repeaterInfo:new Map,renderConditions:new Map,nodesWithAnyGradientFill:new Map,customCursors:Ut,cssVariableDefinitions:Pe,formIds:new Set,hitTargets:Cr,createDeduplicatedDynamicValueBinding:j,trackingIds:oe,vectorSets:sr,kitSectionsStructure:oo,overlayProps:new Map,triggerActions:ne,llmSnapshot:c,scopeId:t.id,scopeType:C,moduleType:d,rootId:e.id,linkClassName:pe.addRule({display:"block"},t),layoutTemplateSlotBinding:lr,nodeRendersWithMotion:new am,serializationId:l,acceptsLayoutTemplate:z(t)&&t.isLoaded()&&t.baseVariantId?DA(t):void 0}}function MA({ctx:e,ancestorInfo:t,jsxAttributes:o,usedVariableIds:r,dataRepeater:n,primaryCombinedControlMap:i,shouldInlineQuery:a,variantId:s}){let l=[],c=o.subqueries,d=t.subqueries,u=TP(n,i,r,N=>{if(a){let P=d;for(;P;){if(N.providerId===P.repeaterNode.id){let R=gs(P.repeaterNode),[W,M]=bP(N.id,R);return{type:"Identifier",name:M,collection:W}}P=P.parent}}return S(e.variables,"VariableCollector is required"),l.push(N),{type:"LiteralValue",value:e.variables.create(N)}},N=>{let P=e.imports.addModuleImport(N);return S(P,"Can't import collection"),P});S(c,"Subqueries must exist");let m=c.getSubqueries(s);for(let[N,P]of m)u.select.push({type:"FunctionCall",functionName:"ARRAY",alias:N,arguments:[{type:"Select",...P}]});let h=c.getVariableDependencies(s);l.push(...h);let C=u;if(a)return S(d,"Parent subqueries must exist"),d.addSubquery(s,n.getPrimaryId(),u),d.addVariableDependencies(s,l),new Y({query:C,pageSize:n.collectionPaginationPageSize});e.preload.addQuery(n,C,l);let T=e.preload.addRouteLoaderQuery(n,C,l);return new Y({query:T,pageSize:n.collectionPaginationPageSize})}function R0(e,t){return F(e.subqueries)||t.isAnyVariantPaginated?!1:e.inRepeatedItem??!1}function OA(e,t,o){let r=Db(t,e);return r?o.forScope(r.repeater.id,r.inRepeatedChild?"repeater-item":"repeater"):o.component}function WA(e,t,o,r,n){let i=r.inheritedControlMap;S(i,"Primary variant combined control map must be defined.");let a=R0(o,r),s=MA({ctx:t,ancestorInfo:o,jsxAttributes:r,usedVariableIds:n,dataRepeater:e,primaryCombinedControlMap:i,shouldInlineQuery:a,variantId:"primary"}),l={};for(let c of t.variants){let d=ua(c,e.id,t.treeStore.tree)??e;S(Ft(d),"Node must be a data repeater");let u=MA({ctx:t,ancestorInfo:o,jsxAttributes:r,usedVariableIds:n,dataRepeater:d,primaryCombinedControlMap:i,shouldInlineQuery:a,variantId:c.id});ei(s,u)||(l[c.id]=u)}return a?null:{props:s,overrides:Wt(l)?void 0:l}}function k0(e,t){let o=t.imports.addImport("framer",{exportSpecifier:"useQueryData"});if(Zr(e)){let r=t.imports.addImport("framer",{exportSpecifier:"useLoadMorePaginatedQuery"}),n=p`paginatedQuery`;return p.joinLines(p`const { ${n}, paginationInfo, loadMore } = ${r}(query, pageSize, ${e.id})`,p`const data = ${I.fn(o,n)}`,p`return children(data, paginationInfo, loadMore)`)}return p.joinLines(p`const data = ${I.fn(o,p`query`)}`,p`return children(data)`)}function zA(e,t){return p`({ query, pageSize, children }) => {
        ${k0(e,t)}
    }`}function BA({renderAsListNodes:e},t){return t.parentid?e.has(t.parentid):!1}function $A(e,t,{isAnyVariantALink:o},r){let n=r?"motion.":"";return gi(t)&&(co(t)||o)?`${n}a`:BA(e,t)?`${n}li`:yi(t)&&t.htmlTag&&us(e.scopeType)?`${n}${t.htmlTag}`:`${n}${Jd}`}function GA(e,t,{isAnyVariantAnEffect:o,isAnyVariantOptimizedAppearEffect:r},n){let i=[];o&&i.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),r&&i.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}));let a=t.treeStore.tree.get(n.lastRepeaterId);return br(a)&&Zr(a)&&wn(e,a)&&i.push(t.imports.addImport("framer",{exportSpecifier:"withInfiniteScroll"})),t.scopeType==="SmartComponent"?t.imports.addImport("framer",{exportSpecifier:"SmartComponentScopedContainer",composeWithImports:i}):t.imports.addImport("framer",{exportSpecifier:"Container",composeWithImports:i})}function w0(e,t){if(!wd(t.treeStore.tree,e)||!!!t.componentLoader.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerImmutableVariables)return;let r=he(e.codeComponentIdentifier);if(!ot(r))return;let{importSpecifier:n,importBinding:i}=Rr(r,t.moduleType,t.componentLoader,t.modulesStore);if(!n)return;let a=t.imports.addImport(n,{exportSpecifier:"*",importBinding:`${i}Info`});return[t.imports.addImport("framer",{exportSpecifier:"withMappedReactProps"}),a]}function L0(e,t,o,r){let n=[];Fe(e)&&t.scopeType==="CanvasPage"&&n.push(t.imports.addImport("framer",{exportSpecifier:"withGeneratedLayoutId"})),r.isAnyVariantColumnMasonryLayout&&n.push(t.imports.addImport("framer",{exportSpecifier:"withColumnMasonryLayout"}));let i=D0(e,t,o);i&&n.push(i);let a=gu(e,t);if(n.push(...a),i||a.length>0){let s=w0(e,t);s&&n.push(s)}return r.isAnyVariantAVariantAppearEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withVariantAppearEffect"})),Z(e)&&!e.isVectorInstance||(Ci(e)&&ss(t.scopeType)&&n.push(t.imports.addImport("framer",{exportSpecifier:"withFlowFX"})),r.isAnyVariantAnEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),r.isAnyVariantOptimizedAppearEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"})),r.isAnyVariantATickerEffect&&n.push(t.imports.addImport("framer",{exportSpecifier:"withTickerFX"}))),n}function D0(e,t,o){let r=hu(e,t);if(!r)return;let{importSpecifier:n,exportSpecifier:i}=r,a={scopeId:t.scopeId,nodeId:e.getPrimaryId(),override:t.imports.addImport(n,{exportSpecifier:i}),inComponentSlot:o.inComponentSlot?!0:void 0};return[t.imports.addImport("framer",{exportSpecifier:"withCodeBoundaryForOverrides"}),a]}function F0(e,t){if(e.kind!=="localModuleExport")return;let{localId:o}=e,n=t.modulesStore.getPersistedModuleByLocalId(o)?.metadata.packageDependencies;Ze(n)&&n.forEach(i=>{A(i)&&t.packages.addDependency(i)})}function HA(e,t){let o=hp(e,t.componentLoader);if(!o)return;let r=cr("prototype",o);return t.imports.addImport(`../${r}`,{exportSpecifier:"default",importBinding:"Prototype"})}function A0(e){switch(e){case"BooleanShapeNode":case"CodeComponentNode":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FrameNode":case"OvalShapeNode":case"OverlayNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"RichTextNode":case"ShaderNode":case"ShapeContainerNode":case"ShapeGroupNode":case"StarShapeNode":case"SVGNode":case"TextNode":{let t=e;return!0}case"AgentPanelTool":case"AgentDragSelectTool":case"AgentModalTool":case"AgentSelectTool":case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BlockquoteStylePresetNode":case"BoxShadow":case"CanvasNode":case"CanvasPageNode":case"CanvasScopeNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeFileEntityTypeRootNode":case"CollectionReferenceVariableEditTool":case"CollectionItemNode":case"CollectionNode":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ComponentPresetNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"CustomCodeScopeNode":case"CustomCodeNode":case"DateVariableEditTool":case"DesignPageNode":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"EnumVariableEditTool":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HeaderRouteNode":case"HighlightStackItemTool":case"HighlightTool":case"ImageStylePresetNode":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"InlineCodeStylePresetNode":case"LayoutTemplateEntityTypeRootNode":case"LayoutTemplateNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkStylePresetNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"MoveTool":case"MutableNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PresetsListNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextVariableEditTool":case"RootNode":case"RotateTool":case"RouteNode":case"RouteLocaleNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"SmartComponentNode":case"StringVariableEditTool":case"StyledTextDraft":case"TableStylePresetNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextStylePresetNode":case"VectorSetEntityTypeRootNode":case"VectorSetNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"WebPageNode":case"ZoomSelectTool":case"ZoomTool":{let t=e;return!1}default:G(e)}}function _A(e,t,o,r){if(!A0(e.__class))throw Error(`jsxTagNameForNode: ${e.__class} does not support serialization to JSX.`);let n=L0(e,t,o,r);switch(e.__class){case"SVGNode":case"ShapeContainerNode":case"BooleanShapeNode":case"OvalShapeNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"ShapeGroupNode":case"StarShapeNode":return t.imports.addImport("framer",{exportSpecifier:"SVG",composeWithImports:n});case"TextNode":return t.imports.addImport("framer",{exportSpecifier:"Text",composeWithImports:n});case"RichTextNode":return t.imports.addImport("framer",{exportSpecifier:"RichText",composeWithImports:n});case"FrameNode":{if(er(e))return t.imports.addImport("framer",{exportSpecifier:"FormContainer",composeWithImports:n});if(so(e)||r.isAnyVariantAnImage)return t.imports.addImport("framer",{exportSpecifier:"Image",composeWithImports:n});let i=t.nodeRendersWithMotion.get(e);S(!F(i),"Node must have had `rendersWithMotion` computed for it.");let a=$A(t,e,r,i);return i?t.imports.addImport("framer-motion",{exportSpecifier:a,composeWithImports:n}):new I(a)}case"CodeComponentNode":{if(S(Xo(e),"Nodes with a ClassDiscriminator of CodeComponentNode must be a Code Component"),Kw(e))return t.imports.addImport("framer",{exportSpecifier:qw(e)});if(ni(e)||r.identifiers&&r.identifiers.size>1)return t.imports.addImport("framer",{exportSpecifier:"Instance",composeWithImports:n});let i=he(e.codeComponentIdentifier);if(!ot(i)){let d=jC(e.codeComponentIdentifier);return S(d,"A package must have module information to be included in code-generation."),t.packages.addDependency(d.packageName),t.imports.addImport(d.moduleURL,{exportSpecifier:d.exportIdentifier,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"withMeasuredSize"})]})}S(ot(i),"A code component that is not a package must be a module.");let a=t.llmSnapshot&&Z(e)&&e.isVectorInstance?"Icon":void 0,{importSpecifier:s,exportSpecifier:l,importBinding:c}=Rr(i,t.moduleType,t.componentLoader,t.modulesStore,void 0,a);return S(s,"A module must have an import specifier."),F0(i,t),t.fonts.addFontReference({componentIdentifier:e.codeComponentIdentifier,fontReference:t.imports.addImport(s,{exportSpecifier:l,importBinding:c,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"getFonts"})]})}),t.imports.addImport(s,{exportSpecifier:l,importBinding:c,composeWithImports:n})}case"OverlayNode":return t.imports.addImport("framer",{exportSpecifier:"ResetOuterLinkContext"});case"FormBooleanInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormBooleanInput",composeWithImports:n});case"FormPlainTextInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormPlainTextInput",composeWithImports:n});case"FormSelectNode":return t.imports.addImport("framer",{exportSpecifier:"FormSelect",composeWithImports:n});case"ShaderNode":return t.imports.addImport("framer",{exportSpecifier:"Shader",composeWithImports:n});default:G(e.__class)}}function jA(e,t){if(xt(t)){let o=e.dataForIdentifier(t.dataIdentifier);return S(o,"A Data Repeater must have an evaluated data entity in the sandbox."),{id:t.id,annotations:o.annotations}}if(Dl(t))return{id:t.id,annotations:void 0};G(t,"A data repeater must have either an identifier or array variable")}function E0(e,t){let o=[];for(let[r,n]of e){if(eh(r))continue;let i=t?.get(r);if(!i)continue;let a=dn(i.type);to(a)&&o.push(p`${n} ??= ${a}`)}return o}function M0(e,t,o,r){if(xt(e)){let n=o?.framerRecordIdKey;return n?t.variables.create($t(n,e.id)):r}return t.bindings.create("id")}function O0(e,t){if(xt(e))return t.bindings.createWithNode("collection",e);if(Dl(e))return t.variables.create(e.dataRepeaterArray);G(e,"parent should be a collection or array repeater")}function W0(e,t,o,r,n){let i={};for(let[a,s]of o)eh(a)||(i[a]=s);if(xt(e)){S(r,"Subqueries must exist");for(let a of r.childRepeaterIds){let s=n.treeStore.tree.get(a);S(s,"Repeater node must exist");let l=n.bindings.createWithNode("collection",s);i[a]=l}}else i[Fn]=t;return i}function UA(e,t,o,r,n){let i=M0(e,r,t,n),a=O0(e,r),s=r.variables.getBindings(e.id),l=W0(e,i,s,o.subqueries,r),c=o.inheritedControlMap?.get(e.id),d=Uc(e);return{args:p`${l}, ${n}`,variableFallbackList:E0(s,c),data:a,key:d?p`${i} ?? ${n}`:i}}var z0=Je("jsxForNode");async function B0(e,t,o,r){let n=Yx(t.treeStore.tree,e,t.componentLoader);for(let i in n){if(i==="children")continue;let a=[],s=n[i];if(s){for(let l=0;l<s.length;l++){let c=s[l];if(!c)continue;let d=await lm(c.node,e,t,{...r,inComponentSlot:!0});d&&d.length>0&&a.push(d)}o.props[i]=a}}}function $0(e,t,o){if(et(e))return ge(Or(t.imports.addImport("framer-motion",{exportSpecifier:"motion.div"}),t,o));if(Z(e)&&e.codeComponentIdentifier==="framer/Prototype"){let r=HA(e,t);if(r)return ge(pt.tag(r,void 0))}return""}function G0(e,t,o){if(Ft(t)){let r=jA(o.componentLoader,t);return o.repeaterInfo.set(t.id,r),t.id}return e.lastRepeaterId}function H0(e,t,o){return Ft(t)?!1:!!(is(o.treeStore.tree,t)||e.inRepeatedItem)}function _0(e,t,o,{itemsOrderOverrides:r,hiddenInVariants:n,inheritedControlMap:i,inCodeOverride:a,subqueries:s,kitSectionNodeId:l,isAnyVariantColumnMasonryLayout:c}){return{...e,lastRepeaterId:G0(e,t,o),inRepeatedItem:H0(e,t,o),subqueries:s,itemsOrderOverrides:r,hiddenInVariants:n,inheritedControlMap:i,inCodeOverride:a,isColumnMasonryLayout:c,kitSectionNodeId:e.kitSectionNodeId??l,inComponentSlot:e.inComponentSlot||Z(t)&&t.codeComponentIdentifier!=="framer/Prototype"}}function j0(e,t,o,r,n){let i=[],s=r.treeStore.tree.getPresetsListNode()?.getComponentPresets();if(Ve(e)&&q(e.htmlContent)&&s&&s.length>0){let m=r.imports.addImport(`../${Yw}`,{exportSpecifier:"*",importBinding:"componentPresets"}),h={},C=e.getComponentPresets();for(let[T,N]of C)r.componentPresetIds.add(N),h[T]=p`${m}.props[${N}]`;i.push(T=>pt.tag(r.imports.addImport("framer",{exportSpecifier:"ComponentPresetsProvider"}),new Y({presets:h}),T))}Z(e)&&Lr(e)&&(JA(e,r,i),i.push(m=>Or(GA(e,r,o,n),r,o.propsForContainer,m))),Z(e)&&!e.isVectorInstance&&i.push(m=>Or(r.imports.addImport("framer",{exportSpecifier:"ComponentViewportProvider"}),r,o.propsForComponentViewport,m));let l=r.links.getUnresolvedLinksForNode(e);if(l){let{unresolvedLinks:m,binding:h}=l;if(to(m)||Ev(m)){let C=r.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),T=new Y({links:m});i.push(N=>Or(C,r,{props:T},p`(${h}) => (${N})`))}}if(o.isAnyVariantALink&&i.push(m=>Or(r.imports.addImport("framer",{exportSpecifier:"Link"}),r,o.propsForLink,m)),Ft(e)&&(li(e)||on(e))&&ZA(e,r,n,o,i),o.isAnyVariantATransitionOverride){let m=r.imports.addImport("framer-motion",{exportSpecifier:"MotionConfigContext"}),h=r.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),C=r.declarations.file.dedupe("Transition",new I(It.lines(p`({value, children}) => {`,p`const config = ${h}.useContext(${m})`,p`const transition = value ?? config.transition`,p`const contextValue = ${h}.useMemo(() => ({ ...config, transition }), [JSON.stringify(transition)])`,p`return <${m}.Provider value={contextValue}>{children}</${m}.Provider>`,p`}`)));i.push(T=>Or(C,r,o.propsForTransition,T))}let c=r.overlays.bindingsByOverlayTriggerId.get(e.id);if(c&&c.size>0){i.push(P=>pt`<>${P}</>`);let m=p`visible`,h=p`setVisible`,C={visible:p`enabled && ${m}`,[or.Api.show]:p`() => ${I.fn(h,p`true`)}`,[or.Api.hide]:p`() => ${I.fn(h,p`false`)}`,[or.Api.toggle]:p`() => ${I.fn(h,p`!${m}`)}`},T=r.imports.addImport("framer",{exportSpecifier:"useOverlayState"}),N=r.declarations.file.dedupe("Overlay",new I(It.lines(p`({ children, blockDocumentScrolling, dismissWithEsc, enabled = true }) => {`,p`const ${[m,h]} = ${I.fn(T,p`{ blockDocumentScrolling, dismissWithEsc: enabled && dismissWithEsc }`)}`,p`return children(${C})`,p`}`)));for(let[P,R]of c){let W=r.treeStore.tree.get(P);if(!W)continue;let M=r.overlayProps.get(P),H=r.renderConditions.get(P),J=et(W),K=new Y({enabled:No(H)?H:void 0,blockDocumentScrolling:J?M?.props?.blockDocumentScrolling:!1,dismissWithEsc:J?M?.props?.dismissWithEsc:!1});JA(W,r,i),i.push(oe=>Or(N,r,{props:K,overrides:J?M?.overrides:void 0},p`${R} => (${oe})`))}}let d=r.overlays.bindingsByOverlayId.get(e.id);if(d&&et(e)){let m=t?r.elementIds.id(t):p`undefined`;i.push(P=>pt.tag(r.imports.addImport("framer",{exportSpecifier:"InjectSelectionStyle"}),new Y({triggerId:m}),P));let h=r.imports.addImport("react-dom",{exportSpecifier:"*",importBinding:"ReactDOM"}),C=`#${GS}`,T=`#${$S}`,N=r.declarations.file.dedupe("getContainer",p`() => {${p.joinLines(p`return document.querySelector(${C}) ?? document.querySelector(${T}) ?? document.body`)}}`);i.push(P=>pt`<>{${h}.createPortal(${P}, ${I.fn(N)})}</>`)}t&&d&&lt(e)&&o.isAnyVariantFloating&&i.push(m=>Or(r.imports.addImport("framer",{exportSpecifier:"Floating"}),r,o.propsForFloating,m)),d&&ut(e)&&i.push(m=>pt.tag(r.imports.addImport("framer-motion",{exportSpecifier:"AnimatePresence"}),void 0,p`${d}.visible && (${m})`)),o.renderCondition!==!0&&i.push(m=>p`${o.renderCondition} && (${m})`);let u=r.fetches.getResultBinding(e);if(o.propsForFetcher&&u&&i.push(m=>Or(r.imports.addImport("framer",{exportSpecifier:"Fetcher"}),r,o.propsForFetcher,p`${u} => (${m})`)),o.isAnyVariantATickerItem&&i.push(m=>Or(r.imports.addImport("framer",{exportSpecifier:"TickerItem"}),r,o.propsForTickerItem??{},m)),Ft(t)&&is(r.treeStore.tree,e)){let m=r.repeaterInfo.get(t.id);if(S(m,"jsxForNode: `repeaterInfo` must exist when transforming a repeated child."),xt(t)){let M=r.links.getPathVariablesForRepeaterInfo(m);M&&i.push(H=>pt.tag(r.imports.addImport("framer",{exportSpecifier:"PathVariablesContext.Provider"}),new Y({value:M}),H))}let h=r.bindings.createWithNode("index",t),{data:C,args:T,variableFallbackList:N,key:P}=UA(t,m.annotations,o,r,h),R=r.variables.getBinding(t.id,MN),W=R&&p`const ${R} = ${h} + 1`;i.push(M=>p`${C}?.map((${T}) => {${p.joinLines(...N,W,...r.declarations.forScope(t.id,"repeater-item").list(),p`return (${pt.tag(r.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),new Y({key:P,id:nt`${t.id}-${P}`}),M)})`)}})`)}return i}function U0(e,t,o){let n=Lr(e)?t.propsForContainer:t.propsForElement,i=o.overlays.bindingsByOverlayTriggerId.get(e.id);if(i&&i.size>0){let l=n.props;l||(l=new Y),l.id=l.id??o.elementIds.id(e)}let s=o.cssVariableDefinitions.getDefinitionsForNode(e)??{};if(!Wt(s)){let l=n.props;l||(l=new Y),l.style?Object.assign(l.style,s):l.style=s}}async function lm(e,t,o,r){try{if(an(e)){S(t&&o.layoutTemplateSlotBinding,"A SlotNode must be in a Layout Template and have a parent.");let l=SD(e,t,o);return pt`${p.joinLines(pt.children(o.layoutTemplateSlotBinding),pt.tag("div",new Y({className:l})))}`}await Z0(e,o),o.metrics.count("nodes"),Q0(e,o,r);let n=CD(e,t,o,r);if(et(e)&&o.overlayProps.set(e.id,n?.propsForOverlay),!n)return pt``;Z(e)&&await B0(e,o,n.propsForElement,r);let i=$0(e,o,n.propsForElement),a=_0(r,e,o,n);for(let l of K0(e,o)){if(ut(l)&&Cf(o,l))continue;let c=await lm(l,e,o,a);c&&(i+=ge(pt.children(c)))}U0(e,n,o);let s=await Y0(e,o,r,a,n,pt.fromTrustedString(i));return pt.applyTransforms(s,j0(e,t,n,o,r))}catch(n){return z0.reportError(n,{node:e.id,primaryVariant:o.rootId}),o.errors.record(e,n),pt``}}async function XA(e,t,o,r,n=`framer-${Up(5)}`,i=!1){let{combinedVariableControlMap:a}=t.combineVariableControlMap(o.treeStore.tree,void 0,void 0,o.componentLoader,o.componentLoader.activeBundleHash),s={inheritedControlMap:a},l=EA(e,t,o,r,n,i);return{ctx:l,jsx:await lm(e,null,l,s)}}async function sm(e,t,{componentLoader:o,modulesStore:r,errors:n,treeStore:i,rootId:a}){let s=i.tree.get(a),l=i.tree.getScopeNodeFor(s);if(vT(i.tree,l,e))return;for(let d of t)if(fo(d)&&d.type==="codeFile"){let m=o.componentForIdentifier(d.value),h=o.errorForIdentifier(d.value);m?h&&n.record(e,"CodeError",d.value):n.record(e,"MissingModule",d.value);return}let c=J0(t);c.length>0&&await r.preloadExternalModules(c),await ru(o,t.map(d=>d.value),r)}function J0(e){let t=[];for(let o of e)Tr(o)&&t.push(o);return t}function X0(e,t){if(!ot(e.codeComponentIdentifier))return;let o=new Set([e.codeComponentIdentifier]);for(let r of t.variants){let n=ua(r,e.id,t.treeStore.tree);n&&(S(Z(n),"Expected a CodeComponentNode in the variant",n?.id),ot(n.codeComponentIdentifier)&&o.add(n.codeComponentIdentifier))}return o}async function Z0(e,t){if(Z(e)){if(e.codeComponentIdentifier==="framer/Prototype"){let n=hp(e,t.componentLoader);if(!n)return;await sm(e,[Oi("prototype",n,"default")],t)}let o=X0(e,t);if(!o)return;let r=[];for(let n of o)r.push(he(n));await sm(e,r,t)}if(hT(e)){if(!ot(e.codeOverrideIdentifier))return;await sm(e,[he(e.codeOverrideIdentifier)],t)}xt(e)&&await sm(e,[he(e.dataIdentifier)],t)}function Q0(e,t,o){wd(t.treeStore.tree,e)&&(S(e.id!==t.scopeId,"Expected the node not to be the scope node"),t.preload.addChildComponent(e.codeComponentIdentifier,{},e.id,o.lastRepeaterId))}function K0(e,t){return!mt(e)||$e(e)||Ve(e)?qn():Z(e)&&e.codeComponentIdentifier!=="framer/Prototype"?eP(t.treeStore.tree,e,t.componentLoader).map(o=>o.node):e.children}function ZA(e,t,o,r,n){let i;br(e)?i=t.bindings.createWithNode("collection",e):Uc(e)?i=t.variables.create({id:e.dataRepeaterArray.id,providerId:e.dataRepeaterArray.providerId}):G(e,"Do not know how to transform repeater type");let a=t.variables.getBinding(e.id,ON),s=a&&p`const ${a} = ${i}?.length ?? 0`;if(xt(e)){let l=t.variables.getBindings(e.id),c=new Set(l.keys()),d=WA(e,t,o,r,c);if(d){let u=t.declarations.file.dedupe("QueryData",zA(e,t)),m=i,h=t.bindings.createWithNode("paginationInfo",e),C=t.bindings.createWithNode("loadMore",e);n.push(T=>pt.tag(t.imports.addImport("framer",{exportSpecifier:"ChildrenCanSuspend"}),void 0,Or(u,t,d,p`(${m}, ${h}, ${C}) => {${p.joinLines(s,...t.declarations.forScope(e.id,"repeater").list(),pt`return <>${T}</>`)}}`)));return}}if(s){let l=OA(e,t.treeStore.tree,t.declarations);l.create(s),t.declarations.forScope(e.id,"repeater").hoistTo(l)}}function q0(e,t,o,r){let n=[];return er(e)&&n.push(i=>p`(${Wg}) => (<>${i}</>)`),Ft(e)&&!li(e)&&!on(e)&&ZA(e,t,o,r,n),n}async function Y0(e,t,o,r,n,i){let a=Or(_A(e,t,o,n),t,et(e)?void 0:n.propsForElement,pt.applyTransforms(i,q0(e,t,o,n)));if((Z(e)||Ve(e))&&MT(e,"framer/useShowRelativeOverlay")){let s=ge(a);for(let l of e.children){if(!ut(l)||Cf(t,l))continue;let c=await lm(l,e,t,r);c&&(s+=ge(pt.children(c)))}return pt.fromTrustedString(s)}return a}function Or(e,t,o,r){if(!o)return pt.tag(e,void 0,r);let{props:n=new Y,overrides:i}=o,a=[];if(i)switch(t.scopeType){case"SmartComponent":Y.addSpreadAtEnd(n,I.fn(p`addPropertyOverrides`,i,p`baseVariant`,p`gestureVariant`));break;case"WebPage":case"LayoutTemplate":a.push(s=>pt.tag(t.imports.addImport("framer",{exportSpecifier:"PropertyOverrides"}),new Y({breakpoint:p`baseVariant`,overrides:i}),s));break;default:break}return pt.applyTransforms(pt.tag(e,n,r),a)}function JA(e,t,o){let r=[];for(let{triggerId:n,targetId:i,binding:a,overlayBinding:s}of t.triggerActions.triggerActionByNode.get(e.id)??[])r.push(pt.tag(t.imports.addImport("framer",{exportSpecifier:"TriggerSubscription"}),new Y({triggerId:n,targetId:i,trigger:a,callback:s?p`() => {${s}.show()}`:void 0,triggeredExternally:s?p`${s}.visible`:void 0})));r.length>0&&o.push(n=>p`<>${p.joinLines(...r)}${n}</>`)}var wa={};Om(wa,{$brand:()=>mh,$input:()=>rR,$output:()=>oR,NEVER:()=>IP,TimePrecision:()=>sR,ZodAny:()=>nE,ZodArray:()=>lE,ZodBase64:()=>Jy,ZodBase64URL:()=>Xy,ZodBigInt:()=>bc,ZodBigIntFormat:()=>Ky,ZodBoolean:()=>Tc,ZodCIDRv4:()=>jy,ZodCIDRv6:()=>Uy,ZodCUID:()=>Wy,ZodCUID2:()=>zy,ZodCatch:()=>VE,ZodCodec:()=>sC,ZodCustom:()=>bm,ZodCustomStringFormat:()=>Sc,ZodDate:()=>Sm,ZodDefault:()=>TE,ZodDiscriminatedUnion:()=>cE,ZodE164:()=>Zy,ZodEmail:()=>Ey,ZodEmoji:()=>My,ZodEnum:()=>yc,ZodError:()=>tG,ZodFile:()=>CE,ZodFirstPartyTypeKind:()=>lC,ZodFunction:()=>ME,ZodGUID:()=>fm,ZodIPv4:()=>Hy,ZodIPv6:()=>_y,ZodISODate:()=>dm,ZodISODateTime:()=>cm,ZodISODuration:()=>um,ZodISOTime:()=>pm,ZodIntersection:()=>dE,ZodIssueCode:()=>uH,ZodJWT:()=>Qy,ZodKSUID:()=>Gy,ZodLazy:()=>FE,ZodLiteral:()=>yE,ZodMap:()=>hE,ZodNaN:()=>kE,ZodNanoID:()=>Oy,ZodNever:()=>aE,ZodNonOptional:()=>iC,ZodNull:()=>oE,ZodNullable:()=>vE,ZodNumber:()=>vc,ZodNumberFormat:()=>Bs,ZodObject:()=>Tm,ZodOptional:()=>nC,ZodPipe:()=>aC,ZodPrefault:()=>IE,ZodPromise:()=>EE,ZodReadonly:()=>wE,ZodRealError:()=>ar,ZodRecord:()=>tC,ZodSet:()=>gE,ZodString:()=>Cc,ZodStringFormat:()=>Pt,ZodSuccess:()=>PE,ZodSymbol:()=>eE,ZodTemplateLiteral:()=>DE,ZodTransform:()=>SE,ZodTuple:()=>uE,ZodType:()=>Oe,ZodULID:()=>By,ZodURL:()=>Cm,ZodUUID:()=>Xn,ZodUndefined:()=>tE,ZodUnion:()=>Yy,ZodUnknown:()=>iE,ZodVoid:()=>sE,ZodXID:()=>$y,_ZodString:()=>Ay,_default:()=>bE,_function:()=>iH,any:()=>zG,array:()=>vm,base64:()=>bG,base64url:()=>IG,bigint:()=>AG,boolean:()=>YA,catch:()=>RE,check:()=>aH,cidrv4:()=>vG,cidrv6:()=>TG,clone:()=>Ol,codec:()=>oH,coerce:()=>cC,config:()=>bi,core:()=>Ii,cuid:()=>mG,cuid2:()=>fG,custom:()=>sH,date:()=>$G,decode:()=>xy,decodeAsync:()=>Vy,discriminatedUnion:()=>UG,e164:()=>NG,email:()=>rG,emoji:()=>pG,encode:()=>Ny,encodeAsync:()=>Py,endsWith:()=>wp,enum:()=>oC,file:()=>qG,flattenError:()=>vp,float32:()=>wG,float64:()=>LG,formatError:()=>Tp,function:()=>iH,getErrorMap:()=>fH,globalRegistry:()=>ia,gt:()=>sa,gte:()=>kr,guid:()=>nG,hash:()=>kG,hex:()=>RG,hostname:()=>VG,httpUrl:()=>dG,includes:()=>Rp,instanceof:()=>lH,int:()=>Fy,int32:()=>DG,int64:()=>EG,intersection:()=>pE,ipv4:()=>CG,ipv6:()=>SG,iso:()=>mm,json:()=>dH,jwt:()=>xG,keyof:()=>GG,ksuid:()=>yG,lazy:()=>AE,length:()=>Bl,literal:()=>KG,locales:()=>tR,looseObject:()=>jG,lowercase:()=>Pp,lt:()=>aa,lte:()=>yn,map:()=>XG,maxLength:()=>zl,maxSize:()=>Wl,mime:()=>Lp,minLength:()=>la,minSize:()=>Cs,multipleOf:()=>ys,nan:()=>tH,nanoid:()=>uG,nativeEnum:()=>QG,negative:()=>MR,never:()=>qy,nonnegative:()=>WR,nonoptional:()=>xE,nonpositive:()=>OR,normalize:()=>Fp,null:()=>rE,nullable:()=>gm,nullish:()=>YG,number:()=>qA,object:()=>HG,optional:()=>hm,overwrite:()=>Dp,parse:()=>vy,parseAsync:()=>Ty,partialRecord:()=>JG,pipe:()=>ym,positive:()=>ER,prefault:()=>NE,preprocess:()=>pH,prettifyError:()=>VP,promise:()=>nH,property:()=>zR,readonly:()=>LE,record:()=>fE,refine:()=>OE,regex:()=>xp,regexes:()=>na,registry:()=>nR,safeDecode:()=>ky,safeDecodeAsync:()=>Ly,safeEncode:()=>Ry,safeEncodeAsync:()=>wy,safeParse:()=>by,safeParseAsync:()=>Iy,set:()=>ZG,setErrorMap:()=>mH,size:()=>Np,startsWith:()=>kp,strictObject:()=>_G,string:()=>Dy,stringFormat:()=>PG,stringbool:()=>cH,success:()=>eH,superRefine:()=>WE,symbol:()=>OG,templateLiteral:()=>rH,toJSONSchema:()=>UR,toLowerCase:()=>Ep,toUpperCase:()=>Mp,transform:()=>rC,treeifyError:()=>PP,trim:()=>Ap,tuple:()=>mE,uint32:()=>FG,uint64:()=>MG,ulid:()=>hG,undefined:()=>WG,union:()=>eC,unknown:()=>zs,uppercase:()=>Vp,url:()=>cG,util:()=>je,uuid:()=>iG,uuidv4:()=>aG,uuidv6:()=>sG,uuidv7:()=>lG,void:()=>BG,xid:()=>gG});var mm={};Om(mm,{ZodISODate:()=>dm,ZodISODateTime:()=>cm,ZodISODuration:()=>um,ZodISOTime:()=>pm,date:()=>yy,datetime:()=>gy,duration:()=>Sy,time:()=>Cy});var cm=ee("ZodISODateTime",(e,t)=>{YP.init(e,t),Pt.init(e,t)});function gy(e){return lR(cm,e)}var dm=ee("ZodISODate",(e,t)=>{eV.init(e,t),Pt.init(e,t)});function yy(e){return cR(dm,e)}var pm=ee("ZodISOTime",(e,t)=>{tV.init(e,t),Pt.init(e,t)});function Cy(e){return dR(pm,e)}var um=ee("ZodISODuration",(e,t)=>{oV.init(e,t),Pt.init(e,t)});function Sy(e){return pR(um,e)}var KA=(e,t)=>{xP.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:o=>Tp(e,o)},flatten:{value:o=>vp(e,o)},addIssue:{value:o=>{e.issues.push(o),e.message=JSON.stringify(e.issues,fh,2)}},addIssues:{value:o=>{e.issues.push(...o),e.message=JSON.stringify(e.issues,fh,2)}},isEmpty:{get(){return e.issues.length===0}}})},tG=ee("ZodError",KA),ar=ee("ZodError",KA,{Parent:Error});var vy=RP(ar),Ty=kP(ar),by=wP(ar),Iy=LP(ar),Ny=DP(ar),xy=FP(ar),Py=AP(ar),Vy=EP(ar),Ry=MP(ar),ky=OP(ar),wy=WP(ar),Ly=zP(ar);var Oe=ee("ZodType",(e,t)=>(hh.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...o)=>e.clone(je.mergeDefs(t,{checks:[...t.checks??[],...o.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),e.clone=(o,r)=>Ol(e,o,r),e.brand=()=>e,e.register=(o,r)=>(o.add(e,r),e),e.parse=(o,r)=>vy(e,o,r,{callee:e.parse}),e.safeParse=(o,r)=>by(e,o,r),e.parseAsync=async(o,r)=>Ty(e,o,r,{callee:e.parseAsync}),e.safeParseAsync=async(o,r)=>Iy(e,o,r),e.spa=e.safeParseAsync,e.encode=(o,r)=>Ny(e,o,r),e.decode=(o,r)=>xy(e,o,r),e.encodeAsync=async(o,r)=>Py(e,o,r),e.decodeAsync=async(o,r)=>Vy(e,o,r),e.safeEncode=(o,r)=>Ry(e,o,r),e.safeDecode=(o,r)=>ky(e,o,r),e.safeEncodeAsync=async(o,r)=>wy(e,o,r),e.safeDecodeAsync=async(o,r)=>Ly(e,o,r),e.refine=(o,r)=>e.check(OE(o,r)),e.superRefine=o=>e.check(WE(o)),e.overwrite=o=>e.check(Dp(o)),e.optional=()=>hm(e),e.nullable=()=>gm(e),e.nullish=()=>hm(gm(e)),e.nonoptional=o=>xE(e,o),e.array=()=>vm(e),e.or=o=>eC([e,o]),e.and=o=>pE(e,o),e.transform=o=>ym(e,rC(o)),e.default=o=>bE(e,o),e.prefault=o=>NE(e,o),e.catch=o=>RE(e,o),e.pipe=o=>ym(e,o),e.readonly=()=>LE(e),e.describe=o=>{let r=e.clone();return ia.add(r,{description:o}),r},Object.defineProperty(e,"description",{get(){return ia.get(e)?.description},configurable:!0}),e.meta=(...o)=>{if(o.length===0)return ia.get(e);let r=e.clone();return ia.add(r,o[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Ay=ee("_ZodString",(e,t)=>{gh.init(e,t),Oe.init(e,t);let o=e._zod.bag;e.format=o.format??null,e.minLength=o.minimum??null,e.maxLength=o.maximum??null,e.regex=(...r)=>e.check(xp(...r)),e.includes=(...r)=>e.check(Rp(...r)),e.startsWith=(...r)=>e.check(kp(...r)),e.endsWith=(...r)=>e.check(wp(...r)),e.min=(...r)=>e.check(la(...r)),e.max=(...r)=>e.check(zl(...r)),e.length=(...r)=>e.check(Bl(...r)),e.nonempty=(...r)=>e.check(la(1,...r)),e.lowercase=r=>e.check(Pp(r)),e.uppercase=r=>e.check(Vp(r)),e.trim=()=>e.check(Ap()),e.normalize=(...r)=>e.check(Fp(...r)),e.toLowerCase=()=>e.check(Ep()),e.toUpperCase=()=>e.check(Mp())}),Cc=ee("ZodString",(e,t)=>{gh.init(e,t),Ay.init(e,t),e.email=o=>e.check(yh(Ey,o)),e.url=o=>e.check(Ip(Cm,o)),e.jwt=o=>e.check(Mh(Qy,o)),e.emoji=o=>e.check(bh(My,o)),e.guid=o=>e.check(bp(fm,o)),e.uuid=o=>e.check(Ch(Xn,o)),e.uuidv4=o=>e.check(Sh(Xn,o)),e.uuidv6=o=>e.check(vh(Xn,o)),e.uuidv7=o=>e.check(Th(Xn,o)),e.nanoid=o=>e.check(Ih(Oy,o)),e.guid=o=>e.check(bp(fm,o)),e.cuid=o=>e.check(Nh(Wy,o)),e.cuid2=o=>e.check(xh(zy,o)),e.ulid=o=>e.check(Ph(By,o)),e.base64=o=>e.check(Fh(Jy,o)),e.base64url=o=>e.check(Ah(Xy,o)),e.xid=o=>e.check(Vh($y,o)),e.ksuid=o=>e.check(Rh(Gy,o)),e.ipv4=o=>e.check(kh(Hy,o)),e.ipv6=o=>e.check(wh(_y,o)),e.cidrv4=o=>e.check(Lh(jy,o)),e.cidrv6=o=>e.check(Dh(Uy,o)),e.e164=o=>e.check(Eh(Zy,o)),e.datetime=o=>e.check(gy(o)),e.date=o=>e.check(yy(o)),e.time=o=>e.check(Cy(o)),e.duration=o=>e.check(Sy(o))});function Dy(e){return iR(Cc,e)}var Pt=ee("ZodStringFormat",(e,t)=>{$P.init(e,t),Ay.init(e,t)}),Ey=ee("ZodEmail",(e,t)=>{_P.init(e,t),Pt.init(e,t)});function rG(e){return yh(Ey,e)}var fm=ee("ZodGUID",(e,t)=>{GP.init(e,t),Pt.init(e,t)});function nG(e){return bp(fm,e)}var Xn=ee("ZodUUID",(e,t)=>{HP.init(e,t),Pt.init(e,t)});function iG(e){return Ch(Xn,e)}function aG(e){return Sh(Xn,e)}function sG(e){return vh(Xn,e)}function lG(e){return Th(Xn,e)}var Cm=ee("ZodURL",(e,t)=>{jP.init(e,t),Pt.init(e,t)});function cG(e){return Ip(Cm,e)}function dG(e){return Ip(Cm,{protocol:/^https?$/,hostname:na.domain,...je.normalizeParams(e)})}var My=ee("ZodEmoji",(e,t)=>{UP.init(e,t),Pt.init(e,t)});function pG(e){return bh(My,e)}var Oy=ee("ZodNanoID",(e,t)=>{JP.init(e,t),Pt.init(e,t)});function uG(e){return Ih(Oy,e)}var Wy=ee("ZodCUID",(e,t)=>{XP.init(e,t),Pt.init(e,t)});function mG(e){return Nh(Wy,e)}var zy=ee("ZodCUID2",(e,t)=>{ZP.init(e,t),Pt.init(e,t)});function fG(e){return xh(zy,e)}var By=ee("ZodULID",(e,t)=>{QP.init(e,t),Pt.init(e,t)});function hG(e){return Ph(By,e)}var $y=ee("ZodXID",(e,t)=>{KP.init(e,t),Pt.init(e,t)});function gG(e){return Vh($y,e)}var Gy=ee("ZodKSUID",(e,t)=>{qP.init(e,t),Pt.init(e,t)});function yG(e){return Rh(Gy,e)}var Hy=ee("ZodIPv4",(e,t)=>{rV.init(e,t),Pt.init(e,t)});function CG(e){return kh(Hy,e)}var _y=ee("ZodIPv6",(e,t)=>{nV.init(e,t),Pt.init(e,t)});function SG(e){return wh(_y,e)}var jy=ee("ZodCIDRv4",(e,t)=>{iV.init(e,t),Pt.init(e,t)});function vG(e){return Lh(jy,e)}var Uy=ee("ZodCIDRv6",(e,t)=>{aV.init(e,t),Pt.init(e,t)});function TG(e){return Dh(Uy,e)}var Jy=ee("ZodBase64",(e,t)=>{sV.init(e,t),Pt.init(e,t)});function bG(e){return Fh(Jy,e)}var Xy=ee("ZodBase64URL",(e,t)=>{lV.init(e,t),Pt.init(e,t)});function IG(e){return Ah(Xy,e)}var Zy=ee("ZodE164",(e,t)=>{cV.init(e,t),Pt.init(e,t)});function NG(e){return Eh(Zy,e)}var Qy=ee("ZodJWT",(e,t)=>{dV.init(e,t),Pt.init(e,t)});function xG(e){return Mh(Qy,e)}var Sc=ee("ZodCustomStringFormat",(e,t)=>{pV.init(e,t),Pt.init(e,t)});function PG(e,t,o={}){return $l(Sc,e,t,o)}function VG(e){return $l(Sc,"hostname",na.hostname,e)}function RG(e){return $l(Sc,"hex",na.hex,e)}function kG(e,t){let o=t?.enc??"hex",r=`${e}_${o}`,n=na[r];if(!n)throw new Error(`Unrecognized hash format: ${r}`);return $l(Sc,r,n,t)}var vc=ee("ZodNumber",(e,t)=>{uV.init(e,t),Oe.init(e,t),e.gt=(r,n)=>e.check(sa(r,n)),e.gte=(r,n)=>e.check(kr(r,n)),e.min=(r,n)=>e.check(kr(r,n)),e.lt=(r,n)=>e.check(aa(r,n)),e.lte=(r,n)=>e.check(yn(r,n)),e.max=(r,n)=>e.check(yn(r,n)),e.int=r=>e.check(Fy(r)),e.safe=r=>e.check(Fy(r)),e.positive=r=>e.check(sa(0,r)),e.nonnegative=r=>e.check(kr(0,r)),e.negative=r=>e.check(aa(0,r)),e.nonpositive=r=>e.check(yn(0,r)),e.multipleOf=(r,n)=>e.check(ys(r,n)),e.step=(r,n)=>e.check(ys(r,n)),e.finite=()=>e;let o=e._zod.bag;e.minValue=Math.max(o.minimum??Number.NEGATIVE_INFINITY,o.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(o.maximum??Number.POSITIVE_INFINITY,o.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(o.format??"").includes("int")||Number.isSafeInteger(o.multipleOf??.5),e.isFinite=!0,e.format=o.format??null});function qA(e){return uR(vc,e)}var Bs=ee("ZodNumberFormat",(e,t)=>{mV.init(e,t),vc.init(e,t)});function Fy(e){return fR(Bs,e)}function wG(e){return hR(Bs,e)}function LG(e){return gR(Bs,e)}function DG(e){return yR(Bs,e)}function FG(e){return CR(Bs,e)}var Tc=ee("ZodBoolean",(e,t)=>{fV.init(e,t),Oe.init(e,t)});function YA(e){return SR(Tc,e)}var bc=ee("ZodBigInt",(e,t)=>{hV.init(e,t),Oe.init(e,t),e.gte=(r,n)=>e.check(kr(r,n)),e.min=(r,n)=>e.check(kr(r,n)),e.gt=(r,n)=>e.check(sa(r,n)),e.gte=(r,n)=>e.check(kr(r,n)),e.min=(r,n)=>e.check(kr(r,n)),e.lt=(r,n)=>e.check(aa(r,n)),e.lte=(r,n)=>e.check(yn(r,n)),e.max=(r,n)=>e.check(yn(r,n)),e.positive=r=>e.check(sa(BigInt(0),r)),e.negative=r=>e.check(aa(BigInt(0),r)),e.nonpositive=r=>e.check(yn(BigInt(0),r)),e.nonnegative=r=>e.check(kr(BigInt(0),r)),e.multipleOf=(r,n)=>e.check(ys(r,n));let o=e._zod.bag;e.minValue=o.minimum??null,e.maxValue=o.maximum??null,e.format=o.format??null});function AG(e){return TR(bc,e)}var Ky=ee("ZodBigIntFormat",(e,t)=>{gV.init(e,t),bc.init(e,t)});function EG(e){return IR(Ky,e)}function MG(e){return NR(Ky,e)}var eE=ee("ZodSymbol",(e,t)=>{yV.init(e,t),Oe.init(e,t)});function OG(e){return xR(eE,e)}var tE=ee("ZodUndefined",(e,t)=>{CV.init(e,t),Oe.init(e,t)});function WG(e){return PR(tE,e)}var oE=ee("ZodNull",(e,t)=>{SV.init(e,t),Oe.init(e,t)});function rE(e){return VR(oE,e)}var nE=ee("ZodAny",(e,t)=>{vV.init(e,t),Oe.init(e,t)});function zG(){return RR(nE)}var iE=ee("ZodUnknown",(e,t)=>{TV.init(e,t),Oe.init(e,t)});function zs(){return kR(iE)}var aE=ee("ZodNever",(e,t)=>{bV.init(e,t),Oe.init(e,t)});function qy(e){return wR(aE,e)}var sE=ee("ZodVoid",(e,t)=>{IV.init(e,t),Oe.init(e,t)});function BG(e){return LR(sE,e)}var Sm=ee("ZodDate",(e,t)=>{NV.init(e,t),Oe.init(e,t),e.min=(r,n)=>e.check(kr(r,n)),e.max=(r,n)=>e.check(yn(r,n));let o=e._zod.bag;e.minDate=o.minimum?new Date(o.minimum):null,e.maxDate=o.maximum?new Date(o.maximum):null});function $G(e){return DR(Sm,e)}var lE=ee("ZodArray",(e,t)=>{xV.init(e,t),Oe.init(e,t),e.element=t.element,e.min=(o,r)=>e.check(la(o,r)),e.nonempty=o=>e.check(la(1,o)),e.max=(o,r)=>e.check(zl(o,r)),e.length=(o,r)=>e.check(Bl(o,r)),e.unwrap=()=>e.element});function vm(e,t){return BR(lE,e,t)}function GG(e){let t=e._zod.def.shape;return oC(Object.keys(t))}var Tm=ee("ZodObject",(e,t)=>{PV.init(e,t),Oe.init(e,t),je.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>oC(Object.keys(e._zod.def.shape)),e.catchall=o=>e.clone({...e._zod.def,catchall:o}),e.passthrough=()=>e.clone({...e._zod.def,catchall:zs()}),e.loose=()=>e.clone({...e._zod.def,catchall:zs()}),e.strict=()=>e.clone({...e._zod.def,catchall:qy()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=o=>je.extend(e,o),e.safeExtend=o=>je.safeExtend(e,o),e.merge=o=>je.merge(e,o),e.pick=o=>je.pick(e,o),e.omit=o=>je.omit(e,o),e.partial=(...o)=>je.partial(nC,e,o[0]),e.required=(...o)=>je.required(iC,e,o[0])});function HG(e,t){let o={type:"object",shape:e??{},...je.normalizeParams(t)};return new Tm(o)}function _G(e,t){return new Tm({type:"object",shape:e,catchall:qy(),...je.normalizeParams(t)})}function jG(e,t){return new Tm({type:"object",shape:e,catchall:zs(),...je.normalizeParams(t)})}var Yy=ee("ZodUnion",(e,t)=>{VV.init(e,t),Oe.init(e,t),e.options=t.options});function eC(e,t){return new Yy({type:"union",options:e,...je.normalizeParams(t)})}var cE=ee("ZodDiscriminatedUnion",(e,t)=>{Yy.init(e,t),RV.init(e,t)});function UG(e,t,o){return new cE({type:"union",options:t,discriminator:e,...je.normalizeParams(o)})}var dE=ee("ZodIntersection",(e,t)=>{kV.init(e,t),Oe.init(e,t)});function pE(e,t){return new dE({type:"intersection",left:e,right:t})}var uE=ee("ZodTuple",(e,t)=>{wV.init(e,t),Oe.init(e,t),e.rest=o=>e.clone({...e._zod.def,rest:o})});function mE(e,t,o){let r=t instanceof hh,n=r?o:t,i=r?t:null;return new uE({type:"tuple",items:e,rest:i,...je.normalizeParams(n)})}var tC=ee("ZodRecord",(e,t)=>{LV.init(e,t),Oe.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function fE(e,t,o){return new tC({type:"record",keyType:e,valueType:t,...je.normalizeParams(o)})}function JG(e,t,o){let r=Ol(e);return r._zod.values=void 0,new tC({type:"record",keyType:r,valueType:t,...je.normalizeParams(o)})}var hE=ee("ZodMap",(e,t)=>{DV.init(e,t),Oe.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function XG(e,t,o){return new hE({type:"map",keyType:e,valueType:t,...je.normalizeParams(o)})}var gE=ee("ZodSet",(e,t)=>{FV.init(e,t),Oe.init(e,t),e.min=(...o)=>e.check(Cs(...o)),e.nonempty=o=>e.check(Cs(1,o)),e.max=(...o)=>e.check(Wl(...o)),e.size=(...o)=>e.check(Np(...o))});function ZG(e,t){return new gE({type:"set",valueType:e,...je.normalizeParams(t)})}var yc=ee("ZodEnum",(e,t)=>{AV.init(e,t),Oe.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let o=new Set(Object.keys(t.entries));e.extract=(r,n)=>{let i={};for(let a of r)if(o.has(a))i[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new yc({...t,checks:[],...je.normalizeParams(n),entries:i})},e.exclude=(r,n)=>{let i={...t.entries};for(let a of r)if(o.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new yc({...t,checks:[],...je.normalizeParams(n),entries:i})}});function oC(e,t){let o=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new yc({type:"enum",entries:o,...je.normalizeParams(t)})}function QG(e,t){return new yc({type:"enum",entries:e,...je.normalizeParams(t)})}var yE=ee("ZodLiteral",(e,t)=>{EV.init(e,t),Oe.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function KG(e,t){return new yE({type:"literal",values:Array.isArray(e)?e:[e],...je.normalizeParams(t)})}var CE=ee("ZodFile",(e,t)=>{MV.init(e,t),Oe.init(e,t),e.min=(o,r)=>e.check(Cs(o,r)),e.max=(o,r)=>e.check(Wl(o,r)),e.mime=(o,r)=>e.check(Lp(Array.isArray(o)?o:[o],r))});function qG(e){return $R(CE,e)}var SE=ee("ZodTransform",(e,t)=>{OV.init(e,t),Oe.init(e,t),e._zod.parse=(o,r)=>{if(r.direction==="backward")throw new NP(e.constructor.name);o.addIssue=i=>{if(typeof i=="string")o.issues.push(je.issue(i,o.value,t));else{let a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=o.value),a.inst??(a.inst=e),o.issues.push(je.issue(a))}};let n=t.transform(o.value,o);return n instanceof Promise?n.then(i=>(o.value=i,o)):(o.value=n,o)}});function rC(e){return new SE({type:"transform",transform:e})}var nC=ee("ZodOptional",(e,t)=>{WV.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function hm(e){return new nC({type:"optional",innerType:e})}var vE=ee("ZodNullable",(e,t)=>{zV.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gm(e){return new vE({type:"nullable",innerType:e})}function YG(e){return hm(gm(e))}var TE=ee("ZodDefault",(e,t)=>{BV.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function bE(e,t){return new TE({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():je.shallowClone(t)}})}var IE=ee("ZodPrefault",(e,t)=>{$V.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function NE(e,t){return new IE({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():je.shallowClone(t)}})}var iC=ee("ZodNonOptional",(e,t)=>{GV.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function xE(e,t){return new iC({type:"nonoptional",innerType:e,...je.normalizeParams(t)})}var PE=ee("ZodSuccess",(e,t)=>{HV.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function eH(e){return new PE({type:"success",innerType:e})}var VE=ee("ZodCatch",(e,t)=>{_V.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function RE(e,t){return new VE({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var kE=ee("ZodNaN",(e,t)=>{jV.init(e,t),Oe.init(e,t)});function tH(e){return AR(kE,e)}var aC=ee("ZodPipe",(e,t)=>{UV.init(e,t),Oe.init(e,t),e.in=t.in,e.out=t.out});function ym(e,t){return new aC({type:"pipe",in:e,out:t})}var sC=ee("ZodCodec",(e,t)=>{aC.init(e,t),JV.init(e,t)});function oH(e,t,o){return new sC({type:"pipe",in:e,out:t,transform:o.decode,reverseTransform:o.encode})}var wE=ee("ZodReadonly",(e,t)=>{XV.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function LE(e){return new wE({type:"readonly",innerType:e})}var DE=ee("ZodTemplateLiteral",(e,t)=>{ZV.init(e,t),Oe.init(e,t)});function rH(e,t){return new DE({type:"template_literal",parts:e,...je.normalizeParams(t)})}var FE=ee("ZodLazy",(e,t)=>{qV.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.getter()});function AE(e){return new FE({type:"lazy",getter:e})}var EE=ee("ZodPromise",(e,t)=>{KV.init(e,t),Oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function nH(e){return new EE({type:"promise",innerType:e})}var ME=ee("ZodFunction",(e,t)=>{QV.init(e,t),Oe.init(e,t)});function iH(e){return new ME({type:"function",input:Array.isArray(e?.input)?mE(e?.input):e?.input??vm(zs()),output:e?.output??zs()})}var bm=ee("ZodCustom",(e,t)=>{YV.init(e,t),Oe.init(e,t)});function aH(e){let t=new BP({check:"custom"});return t._zod.check=e,t}function sH(e,t){return GR(bm,e??(()=>!0),t)}function OE(e,t={}){return HR(bm,e,t)}function WE(e){return _R(e)}function lH(e,t={error:`Input not instance of ${e.name}`}){let o=new bm({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...je.normalizeParams(t)});return o._zod.bag.Class=e,o}var cH=(...e)=>jR({Codec:sC,Boolean:Tc,String:Cc},...e);function dH(e){let t=AE(()=>eC([Dy(e),qA(),YA(),rE(),vm(t),fE(Dy(),t)]));return t}function pH(e,t){return ym(rC(e),t)}var uH={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function mH(e){bi({customError:e})}function fH(){return bi().customError}var lC;lC||(lC={});var cC={};Om(cC,{bigint:()=>CH,boolean:()=>yH,date:()=>SH,number:()=>gH,string:()=>hH});function hH(e){return aR(Cc,e)}function gH(e){return mR(vc,e)}function yH(e){return vR(Tc,e)}function CH(e){return bR(bc,e)}function SH(e){return FR(Sm,e)}bi(eR());var Nxe=wa;var vH=Je("renameLayers"),TH=`Propose names for the elements in provided React JSX fragment of a web site.

**Naming Rules:**
1. Never use an ancestor's name in a descendant's name. A descendant's name must never repeat any part of its ancestors name.
    - INCORRECT: "Pricing Plans", "Pricing Plans Icon", "Pricing Plans Title"
    - CORRECT: "Pricing Plans", "Icon", "Title"
2. Evaluate the entire fragment, paying special attention to the text in the children of RichText components, to determine the theme of the content, e.g. "Savings Goals" or "Pricing Plans", and use this to inform the individual names.
3. When an element is a layout wrapper (e.g., flex, grid), describe its function or structure. Use this to replace generic wrappers like 'Body,' 'Content,' or 'Group.' (Example: '2x2 Grid,' 'Info Stack,' 'Action Bar'). (Never: 'Icon Flex,' 'Details Group').
4. Titles should be short. Aim for 1 word (80%). Use 2-3 words only when necessary (20%).
5. All names must use Title Case, including spaces.
6. Ignore "*-container" suffixes.
7. Ignore the attribute value of data-framer-name="*".

**Response Format:**
- Respond with a single line of text.
- Do not include any other text, explanation, or preamble.
- The line must be a list of "class-name Proposed Name" pairs separated by semicolons.
- The class name must be the class name of the JSX element.

**Example Output:**
framer-asifd Title; framer-adfda Content; framer-fdsafd Footer; framer-aht4dq Submit Button;
`,bH=";",IH=wa.object({className:wa.string(),name:wa.string()});function NH(e){let t=e.trim();S(t.length>0,"Trimmed result is empty");let[o,...r]=t.split(" ");return IH.parse({className:o,name:r.join(" ")})}function xH(e){return Ct(e)||z(e)||Ye(e)||ue(e)||Be(e)}async function zE(e,t){let o=performance.now(),r=0,n=e.stores.scopeStore.active;if(xH(n))try{e.scheduler.process(()=>e.beginUndoGroup());for(let i of e.tree.withoutDescendants(t)){let{jsx:a,ctx:s}=await XA(i,n,{componentLoader:e.componentLoader,modulesStore:e.stores.modulesStore,treeStore:e.stores.treeStore,engineChanges:e.scheduler.changes,assetMap:e.stores.assetStore.assetMap},void 0,"",!0);if(!a)continue;let l=new pu(bH,NH,c=>{e.scheduler.processWhenReadyAsync(()=>{let{className:d,name:u}=c,m=e.tree.get(s.css.getNodeIdForClassName(d));!m||!Bd(m)||Ht(m)||Ne(m)||A(m.name)||(m.set({name:HT(u)}),r++)})});await new du("renameLayers").start({model:"google/gemini-2.5-flash",messages:[{role:"system",content:TH},{role:"user",content:`\`\`\`
${a.toString()}\`\`\``}],onText:c=>l.addToken(c)}),l.finalize()}}catch(i){throw vH.error("Failed to generate layer names:",i),i}finally{await e.scheduler.processWhenReadyAsync(()=>e.endUndoGroup()),Lt("rename_layers",{duration:performance.now()-o,count:r})}}function _xe(e){return At(e)&&!Ee(e)}function jxe(e){return qe(e)&&!Po(e)}function BE(e){return Gt(e)&&!Po(e)}function $E(e,t){return _c(t)&&(Je("app").warn("Inserting a symbol is no longer supported."),t.isMaster=!1,t.replicaInfo=null,t.originalid=null),S(!e.tree.has(t.id),"Tree should not contain node with same id as inserted template"),e.stores.scopeStore.insertNode(t),t}function _E(e){let t={width:200,height:200,codeComponentIdentifier:e.identifier,intrinsicWidth:null,intrinsicHeight:null,slotsAreChildNodes:at.isOn("componentSlotsAreChildNodes")},{defaultProps:o,annotations:r}=e;if(o!==void 0&&(Hm(o.width)&&(t.width=o.width,t.intrinsicWidth=o.width),Hm(o.height)&&(t.height=o.height,t.intrinsicHeight=o.height)),r){let n=Ib(r);n.width&&(t.width=n.width),n.height&&(t.height=n.height)}return new ea(t)}function aPe(e){return e.sort(PH)}var GE=new Map;function HE(e){let t=GE.get(e);if(t)return t;let o=e.split("/").map(r=>r.trim()).join("");return GE.set(e,o),o}function PH(e,t){if(e.name===null)return-1;if(t.name===null)return 1;let o=HE(e.name),r=HE(t.name);return o.localeCompare(r,void 0,{numeric:!0})}function sPe(e){if(_C(e)&&e.file==="./canvas.tsx"||e.identifier==="framer/Stack")return!1;let t=he(e.identifier);return fo(t)&&t.type==="screen"?!1:e.type==="component"||e.type==="master"}function lPe(e){let t=e.split("/"),o=t[t.length-1];return S(Uo(o),"Last section is required"),o.trim()}function cPe(e,t,o){return t.name?t.name:o?En(e,o):"Unknown"}function jE(e,{allowVariants:t,allowLockedNodes:o}={}){return!o&&fn(e)||Jo(e)||!t&&(Ee(e)||Po(e))||BE(e)||Zs(e)||$e(e)||ni(e)?!1:Re(e)}async function _Pe(e,t,o,r){function n(){wH(e,[t],o,r)}if(!Z(o)){n();return}let i=he(o.codeComponentIdentifier);if(!i||i.kind!=="externalModuleExport"){n();return}await e.stores.modulesStore.addExternalModulesToProject([i],{onTreeUpdate:n})}function VH(e,t,o){if(!yl(t))return;let r=WT(e.tree,t);if(!ue(r))return;S(r.isLoaded(),"smart component must be loaded"),o.set({formSubmitButtonId:t.id});let n=r.getPrimaryVariant();r.getReplicaVariants().forEach(i=>{ze.resetOverridesByProperty(e.tree,i,i,["htmlTag","link"])}),Gb(n)&&n.set({htmlTag:"button",link:void 0})}function RH(e,t,o){if(!Z(e)||!Z(t)||!e.cache.formContainerAncestorId)return;let r=o.tree.get(e.cache.formContainerAncestorId);er(r)&&VH(o,t,r)}function kH(e,t,o){let r=Fb(o.tree,e);r&&wn(e,r)&&r.set({dataSourceLoaderId:t.id})}function wH(e,t,o,r){let n={},i=new Set;t.forEach(a=>{let s=null;if(Gt(a)){if(!Ir(a))return;let C=Cn(e.tree,a),T=ze.getReplicaForTemplateNode(e.tree,a);if(!C||!T||!Ee(T))return;a=C,s=T}let l=$E(e,o);RH(a,l,e),kH(a,l,e);let c=e.tree.getNodeParent(a),d=c||e.tree.getScopeNodeFor(a)||e.stores.scopeStore.active,u=d.children.indexOf(a),m=eu(e.tree,e.componentLoader,a,l,d);if(l.set(m),c&&lt(a)&&Ka(l)){l.set(pi(a));let C=new su([[a.id,l.id]]);Wn(e.tree,e.componentLoader,c,C,ut(c)||_r(c)),i.add(l.id)}if(Z(l)&&DH(e.componentLoader,a,l,new Set(Object.keys(m))),At(a)&&!Ee(a)&&Z(l)&&LH(e,a,l),FH(e,d,a,l),mt(a))for(let C of a.children)ut(C)&&e.moveNode(C.id,l.id);e.deleteNode(a.id),e.moveNode(l.id,d.id,u);let h=AH(e.tree,e.componentLoader,a,l);Re(l)&&h&&(r?e.tree.current(l)?.set({left:h.left,right:h.right,top:h.top,bottom:h.bottom,centerAnchorX:h.centerAnchorX,centerAnchorY:h.centerAnchorY}):e.tree.current(l)?.set(h)),s?n[a.id]=Yo(s.id,l.id):n[a.id]=l.id});for(let a of e.stores.selectionStore.ids)i.add(n[a]??a);e.stores.selectionStore.set(Array.from(i))}function LH(e,t,o){if(Ee(t))return;let r=o.getLocalSmartComponentNodeId();if(!r)return;let n=e.tree.getNode(r);if(!(!n||!ue(n))&&n.originalSymbolId===t.replicaInfo.master){for(let i of t.walk())if(!(!vN(i)||!i.isTarget)&&i.originalid){if(Fe(i)&&i.fillType==="image"&&A(i.fillImage)){let a=o.getRawControlProp(`symbol_${i.originalid}`);a&&a.type==="image"&&(a.value=i.fillImage)}else if(Zs(i)){let a=o.getRawControlProp(`symbol_${i.originalid}`);a&&a.type==="string"&&(a.value=i.styledText.text)}}}}function DH(e,t,o,r){let n;e:for(let a of t.walk()){if(!Qt(a)&&!Z(a))continue;let s=_d(e,a);for(let[,l]of Object.entries(s))if(n===void 0)n=l;else if(n){n=null;break e}}if(!n)return;let i=e.componentForIdentifier(o.codeComponentIdentifier);if(i?.properties)for(let a in i.properties){if(r?.has(a)||i.properties[a]?.type!=="eventhandler")continue;let l={type:"eventhandler",value:n};o.set({[kt(a)]:l});return}}function FH(e,t,o,r){let n=t?Js(t):null;if(!n||!xo(n))return;let i=e.tree.getSmartComponentNodeFor(n);if(i)for(let a of i.getReplicaVariants()){let s=a.replicaInfo;if(!(o.id in s.overrides))continue;let l={...s};l.overrides={...l.overrides};let c={},d=l.overrides[o.id];for(let u in d){let m=d[u];if(u==="_deleted"){if(!Ze(m))continue;let h=m.filter(C=>C in r);h.length&&(c._deleted=h)}else u in r&&(c[u]=m)}delete l.overrides[o.id],l.overrides[r.id]=c,e.tree.current(a)?.set({replicaInfo:l})}}function AH(e,t,o,r){if(!Re(o)||!Re(r))return;let n=o.constraintValues();if(ul(o)&&ul(r)&&(bd(o)&&(n.gridItemFillCellWidth=!0),ml(o)&&(n.gridItemFillCellHeight=!0)),!Z(r))return n;if(Nb(o)){let i=r.getSupportedLayout(t),a=e.getRect(o);o.widthType===2&&!Yn(i.width)&&(n.widthType=0,n.width=a.width),o.widthType===5&&(n.widthType=Yn(i.width)?2:0),o.heightType===2&&!Yn(i.height)&&(n.heightType=0,n.height=a.height),o.heightType===5&&(n.heightType=Yn(i.height)?2:0)}return n}function jPe(e){return HC(e)?_E(e):null}var UE=Ec(ES(),1);function JE(e){let t={};for(let o of e.walk()){let r={};tr(o)&&(r.strokeDashArray=o.strokeDashArray,r.strokeDashOffset=o.strokeDashOffset,B(o.strokeWidth)||(r.strokeWidth=o.strokeWidth)),ji(o)&&(r.boxShadows=o.boxShadows),ai(o)&&(r.radius=o.radius),Gi(o)&&(r.radiusTopLeft=o.radiusTopLeft,r.radiusTopRight=o.radiusTopRight,r.radiusBottomRight=o.radiusBottomRight,r.radiusBottomLeft=o.radiusBottomLeft),Ks(o)&&(r.pathSegments=o.pathSegments),Fo(o)&&o.fillType==="image"&&o.fillImageResize==="tile"&&(r.fillImageTileSize=o.fillImageTileSize??1),t[o.id]=r}return(0,UE.Map)(t)}function dC(e,t,o){t.forEach((r,n)=>{let i=e.getNode(n);if(!i)return;let a={};tr(i)&&(te(r.strokeWidth)&&(a.strokeWidth=go(r.strokeWidth*o,2)),A(r.strokeDashArray)&&(a.strokeDashArray=MH(r.strokeDashArray,o)),te(r.strokeDashOffset)&&(a.strokeDashOffset=go(r.strokeDashOffset*o,2))),bv(i)&&mv(r.boxShadows)&&(a.boxShadows=EH(r.boxShadows,o)),ai(i)&&(te(r.radius)&&(a.radius=go(r.radius*o,2)),te(r.radiusTopLeft)&&(a.radiusTopLeft=go(r.radiusTopLeft*o,2)),te(r.radiusTopRight)&&(a.radiusTopRight=go(r.radiusTopRight*o,2)),te(r.radiusBottomRight)&&(a.radiusBottomRight=go(r.radiusBottomRight*o,2)),te(r.radiusBottomLeft)&&(a.radiusBottomLeft=go(r.radiusBottomLeft*o,2))),Ks(i)&&r.pathSegments&&(a.pathSegments=i.pathSegments.map((s,l)=>{let d=r.pathSegments[l].radius*o;return s.merge({radius:d})})),Fo(i)&&te(r.fillImageTileSize)&&(a.fillImageTileSize=r.fillImageTileSize*o),i.set(a)})}function EH(e,t){if(!(!e||B(e)))return e.map(o=>ld(o,{x:go(o.x*t,2),y:go(o.y*t,2),blur:go(o.blur*t,2),spread:go(o.spread*t,2)}))}function MH(e,t){let o=[],r=e.split(",");for(let n of r){let i=parseFloat(n);if(!te(i))continue;let a=go(i*t,2);o.push(a)}return o.join(", ")}function XE(e,t){let o=e.getRect(t),r={width:o.width,height:o.height};if(!Fe(t)||!Co(t))return r;let n=Wd(t);if(n.perSide)n.top&&(r.height-=n.top),n.bottom&&(r.height-=n.bottom),n.right&&(r.width-=n.right),n.left&&(r.width-=n.left);else if(n.top){let i=n.top*2;r.width-=i,r.height-=i}return r.width=Math.max(1,r.width),r.height=Math.max(1,r.height),r}function IVe(e,t,o,r){e.getNodesWithTrait(o,Ht).forEach(i=>{let{descendantPaths:a}=Ul(t,i,!0,o),s=a.valueSeq().toArray(),l=vo.boundingBox(s),c={...l};r==="horizontal"?(c.x=l.x+l.width,c.width=-l.width):(c.y=l.y+l.height,c.height=-l.height);let d=c.width>-1&&c.width<1?1:c.width,u=c.height>-1&&c.height<1?1:c.height,m=[l.x,l.x+l.width],h=[c.x,c.x+d],C=[l.y,l.y+l.height],T=[c.y,c.y+u],N=d/l.width,P=u/l.height;a.forEach((R,W)=>{let M=R.pathSegments.map(j=>j.merge({x:Io(j.x,m,h,!1),y:Io(j.y,C,T,!1),handleOutX:j.handleOutX*N,handleOutY:j.handleOutY*P,handleInX:j.handleInX*N,handleInY:j.handleInY*P}));S(t.tree===e);let H=e.get(W);if(!H)return;let J={pathSegments:M,pathClosed:H.pathClosed},oe={pathSegments:Ni(e,H,[J])[0],pathClosed:H.pathClosed},me=H.updateForPath(oe);H.set(me)})})}function NVe(e,t,o){let{tree:r}=e;t.forEach(n=>{let i=r.getRect(n),a=o(i);if(a.width&&a.width<1&&(a.width=1),a.height&&a.height<1&&(a.height=1),$e(n))OH(e,n,a);else if(Pr(n))WH(e,n,a);else{let s=r.getParent(n.id),l=s?XE(r,s):null,c=n.updateForSize(a,l?{sizing:l,positioning:l,viewport:n.cache.viewportRect,layout:rn(s)}:null);r.current(n)?.set(c)}})}function OH(e,t,o){let{tree:r}=e,n=r.getParent(t.id),i=n?r.getRect(n):null,a=t.updateForSize(o,i?{sizing:i,positioning:i,viewport:null,layout:rn(n)}:null);a.sizeToFit=!1,r.current(t)?.set(a)}function WH(e,t,o){let{tree:r}=e,n=r.getRect(t),i=td.update(n,o,mi(t)?te(t.aspectRatio):!1),a={...n,...i},s=a.width>-1&&a.width<1?1:a.width,l=a.height>-1&&a.height<1?1:a.height,c=[n.x,n.x+n.width],d=[a.x,a.x+s],u=[n.y,n.y+n.height],m=[a.y,a.y+l],h=s/n.width,C=l/n.height,{descendantPaths:T,descendantBasicShapes:N}=Ul(e,t);T.forEach((P,R)=>{let M=Ni(r,t,[P])[0].map(j=>j.merge({x:Io(j.x+n.x,c,d,!1)-n.x,y:Io(j.y+n.y,u,m,!1)-n.y,handleOutX:j.handleOutX*h,handleOutY:j.handleOutY*C,handleInX:j.handleInX*h,handleInY:j.handleInY*C})),H=ca(r,t,{pathSegments:M,pathClosed:!0});S(e.tree===r);let J=r.get(R);if(!J)return;let oe={pathSegments:Ni(r,J,H)[0],pathClosed:J.pathClosed},me=J.updateForPath(oe);J.set(me)}),N.forEach((P,R)=>{if(P===null)return;let H=P.map(pe=>r.convertPointToNode(t,pe)).map(pe=>({x:Io(pe.x+n.x,c,d,!1)-n.x,y:Io(pe.y+n.y,u,m,!1)-n.y})).map(pe=>r.convertPointToCanvas(t,pe)),J=r.get(R);if(!J)return;let K=H.map(pe=>r.convertPointToNode(J,pe)),oe=de.boundingRectFromPoints(K),me=de.center(oe),j=Ad(J,me),Pe={x:j.x-oe.width/2,y:j.y-oe.height/2,width:oe.width,height:oe.height};J.set(Pe)})}function ZE(e,t,o,r,n,i){let{tree:a}=e,s=a.getNode(t.id),l=i.width>-1&&i.width<1?1:i.width,c=i.height>-1&&i.height<1?1:i.height,d=l/n.width,u=c/n.height;o.forEach((m,h)=>{let C=a.getNode(h);if(!C)return;let N={pathSegments:m.pathSegments.map(M=>M.merge({x:M.x*d,y:M.y*u,handleOutX:M.handleOutX*d,handleOutY:M.handleOutY*u,handleInX:M.handleInX*d,handleInY:M.handleInY*u})),pathClosed:m.pathClosed},R={pathSegments:yk(a,s,C,[N])[0],pathClosed:C.pathClosed},W=C.updateForPath(R);C.set(W)}),r.forEach((m,h)=>{if(m===null)return;let C=m.map(R=>({x:R.x*d,y:R.y*u})),T=a.getNode(h),N=C.map(R=>a.convertPointFromNodeToDescendant(s,T,R,!1)),P=de.boundingRectFromPoints(N);e.tree.get(h)?.set(P)})}function QE(e,t,o,r,n,i=a=>a.canvasMatrix()){let a=r.width>-1&&r.width<1?1:r.width,s=r.height>-1&&r.height<1?1:r.height,l=[o.x,o.x+o.width],c=[r.x,r.x+a],d=[o.y,o.y+o.height],u=[r.y,r.y+s],m=a/o.width,h=s/o.height,C=n?{x:0,y:0}:t.rect;t.descendantPaths&&t.descendantPaths.forEach((T,N)=>{let R=(n?T.pathSegments:tg(t.canvasMatrix.inverse(),[T])[0]??[]).map(oe=>oe.merge({x:Io(oe.x+C.x,l,c,!1)-C.x,y:Io(oe.y+C.y,d,u,!1)-C.y,handleOutX:oe.handleOutX*m,handleOutY:oe.handleOutY*h,handleInX:oe.handleInX*m,handleInY:oe.handleInY*h})),W=n?{pathSegments:R,pathClosed:T.pathClosed}:{pathSegments:tg(t.canvasMatrix,[{pathSegments:R,pathClosed:T.pathClosed}])[0]??[],pathClosed:T.pathClosed},M=e.get(N);if(!M)return;let J={pathSegments:Ni(e,M,[W])[0],pathClosed:M.pathClosed},K=M.updateForPath(J);M.set(K)}),t.descendantBasicShapes&&t.descendantBasicShapes.forEach((T,N)=>{if(T===null)return;let R=(n?T:T.map(j=>St.convertPoint(t.canvasMatrix.inverse(),j))).map(j=>({x:Io(j.x+C.x,l,c,!1)-C.x,y:Io(j.y+C.y,d,u,!1)-C.y})),W=n?R:R.map(j=>St.convertPoint(t.canvasMatrix,j)),M=e.get(N);if(!M)return;let H=W.map(j=>St.convertPoint(i(M).inverse(),j)),J=de.boundingRectFromPoints(H),K=de.center(J),oe=Ad(M,K),me={x:Gm(oe.x-J.width/2),y:Gm(oe.y-J.height/2),width:J.width,height:J.height};M.set(me)})}function qE(e,t,o,r,n){if(o!==1)for(let[i]of r.parentsInitialState){let a=r.parentsInitialState.get(i);if(!a)continue;let s=[];for(let l of t)a.selectedNodeIds.has(l.id)&&s.push(l);eM(s,o,GH(e,i,o,r,n),!0)}}function YE(e,t){let o=new Map,r=new Map,n={},i=new Set;for(let a of e.tree.withoutDescendants(t)){let s=a.parentid;if(!s)continue;let l=e.tree.getNode(s);S(l,"Parent must exist"),zH(e,a,r,i),$H(e,a,l,o),n[s]??=[],n[s].push(a)}for(let[a,s]of o){let l=n[a];S(l,"Nodes must exist"),s.selectionBoundingFrame=e.tree.getBoundingFrameForNodes(l)}return{parentsInitialState:o,nodesInitialState:r,nonScalableNodes:i}}function zH(e,t,o,r){for(let{node:n,skipChildren:i}of t.walkWithSkipChildren()){if(o.has(n.id))continue;let a=n.id===t.id,s=e.tree.isInlineVectorNode(n),l=Ht(n)&&(s||a);if(!YH(e.componentLoader,n,a)){r.add(n.id),i();continue}let c=l?Ul(e,n):void 0,d=$e(n)?gk(e,n):void 0,u=$e(n)||l?JE(n.draftOrCurrent()):void 0,m=Z(n)?BH(e.componentLoader,n):void 0;o.set(n.id,{rect:de.round(e.tree.getRect(n,!1),2),matrix:e.tree.transformMatrixToNode(n),codeComponentControlProps:m,scalableShapeStylesMap:u,...c,...d}),$e(n)&&i()}}function BH(e,t){let o=e.reactComponentForIdentifier(t.codeComponentIdentifier);if(!(!o||!o.properties))return t.getControlProps(o.properties)}function $H(e,t,o,r){let n=r.get(o.id)??{matrix:e.tree.transformMatrixToNode(o).invertSelf(),selectedNodeIds:new Set,selectionBoundingFrame:{x:0,y:0,width:0,height:0}};n.selectedNodeIds.add(t.id),r.set(o.id,n)}function GH(e,t,o,r,n){let i=r.parentsInitialState.get(t);S(i,"Parent must be present in initial state");let a=i.selectionBoundingFrame,s={...a,width:a.width*o,height:a.height*o};return{initialRect:a,resizedRect:s,engine:e,tree:e.tree,initialState:r,anchorPoint:n??{x:.5,y:.5}}}function eM(e,t,o,r){if(e.length===0)return!1;let n=!1;for(let i of e){if(o.initialState.nonScalableNodes.has(i.id))continue;let a=e_(i)&&eM(i.children,t,o,!1),s=HH(i,o,t,a,r);n||=s||a}return n}function HH(e,t,o,r,n){let i=KH(e,o,n),a=_H(e,t,o,r,n,i);return e.set(i),(a||r)&&JH(e,t,o,n),a}function _H(e,t,o,r,n,i){return Ve(e)?jH(e,o,t,n,i):$e(e)?UH(e,o,t,n,i):Ht(e)?t_(e,o,t):Z(e)?o_(e,o,t,n,i):Ae(e)?tM(e,o,t,r,n,i):!1}function jH(e,t,o,r,n){let i=!1;if(!e.textFitViewBoxSize){qH(e,o.tree);let a=e.draftOrCurrent().updateForScale(t);Object.assign(n,a),i=!0}return e.widthType!==2&&(i=$s("width",e,t,o,!1,r,n)||i),e.heightType!==2&&(i=$s("height",e,t,o,!1,r,n)||i),i}function UH(e,t,o,r,n){let i=o.initialState.nodesInitialState.get(e.id),a=i?.shapeContainerDescendantPaths,s=i?.shapeContainerDescendantBasicShapes,l=i?.scalableShapeStylesMap;return S(l,"Shape container styles should be available in initial state"),S(a,"Shape container paths should be available in initial state"),S(s,"Shape container shapes should be available in initial state"),ZE(o.engine,e,a,s,e,{width:e.width*t,height:e.height*t}),dC(o.tree,l,t),$s("width",e,t,o,!0,r,n),$s("height",e,t,o,!0,r,n),!0}function JH(e,t,o,r){if(r)XH(e,o,t);else if(Re(e)){let n={};e.left&&(n.left=Se(e.left,o)),e.right&&(n.right=Se(e.right,o)),e.top&&(n.top=Se(e.top,o)),e.bottom&&(n.bottom=Se(e.bottom,o)),e.set(n)}}function XH(e,t,o){if(!Re(e)&&!$d(e))return;let r=o.initialState.nodesInitialState.get(e.id);S(r,"Node must be present in initial state");let n=e.parentid?o.initialState.parentsInitialState.get(e.parentid):void 0;S(n,"Node parent must be present in the initial state"),n.selectedNodeIds.size===1?ZH(e,t,o,r):QH(e,o,r,n)}function ZH(e,t,o,r){let n=r.rect,i={...n,width:n.width*t,height:n.height*t},s=Ht(e)||$e(e)?e.clone({rotation:0}):e,l=Nm(n,o.anchorPoint),c=Nm(i,o.anchorPoint),d=St.convertPoint(s.originAdjustedMatrix(null,n),l),u=St.convertPoint(s.originAdjustedMatrix(null,i),c),m=Le.subtract(d,u),h=de.round(de.offset(i,m),2);if(Re(e)){let{widthType:C,heightType:T,maxHeight:N,minHeight:P,maxWidth:R,minWidth:W,...M}=Mf(e.constraints(),h,o.tree.getParentSizeInfo(e,o.tree.getParent(e.id)),null,!1);e.set(M)}else e.set({x:h.x,y:h.y})}function QH(e,t,o,r){let n=Le.add(Nm(t.initialRect,t.anchorPoint),t.initialRect),i=Le.add(Nm(t.resizedRect,t.anchorPoint),t.resizedRect),a=Le.subtract(n,i),s=r.matrix??null,l=KE(s,t.initialRect),c=KE(s,de.offset(t.resizedRect,a)),d=[l.x,l.x+l.width],u=[c.x,c.x+c.width],m=[l.y,l.y+l.height],h=[c.y,c.y+c.height],C=o.rect,T={x:Io(C.x,d,u,!1),y:Io(C.y,m,h,!1)},N={x:Io(C.x+C.width,d,u,!1),y:Io(C.y+C.height,m,h,!1)},P=de.round(de.fromTwoPoints(T,N));if(Re(e)){let R=Mf(e.constraints(),P,t.tree.getParentSizeInfo(e,t.tree.getParent(e.id)),null,!1);delete R.widthType,delete R.heightType,e.set(R)}else e.set({x:P.x,y:P.y})}function KE(e,t){if(!e)return t;let o=St.convertPointsWithClipping(e,de.cornerPoints(t));return de.boundingRectFromPoints(o)}function KH(e,t,o){let r={};return Ur(e)&&(r.borderWidth=Se(e.borderWidth,t),r.borderBottom=Se(e.borderBottom,t),r.borderLeft=Se(e.borderLeft,t),r.borderTop=Se(e.borderTop,t),r.borderRight=Se(e.borderRight,t)),ji(e)&&(r.boxShadows=rM(e.boxShadows,t)),tr(e)&&(r.strokeWidth=Se(e.strokeWidth,t)),Zo(e)&&(r.padding=Se(e.padding,t),r.paddingBottom=Se(e.paddingBottom,t),r.paddingLeft=Se(e.paddingLeft,t),r.paddingTop=Se(e.paddingTop,t),r.paddingRight=Se(e.paddingRight,t)),Gi(e)&&(r.radiusBottomLeft=Se(e.radiusBottomLeft,t),r.radiusBottomRight=Se(e.radiusBottomRight,t),r.radiusTopLeft=Se(e.radiusTopLeft,t),r.radiusTopRight=Se(e.radiusTopRight,t)),ai(e)&&(r.radius=Se(e.radius,t)),eo(e)&&(r.gridColumnMinWidth=Se(e.gridColumnMinWidth,t),r.gridColumnWidth=Se(e.gridColumnWidth,t),e.gridRowHeightType==="fixed"&&(r.gridRowHeight=Se(e.gridRowHeight,t))),Co(e)&&(r.gap=oM(e.gap,t)),ra(e)&&(r.formInputFontSize=nM(e.formInputFontSize,t),e.formInputFontLetterSpacingUnit==="px"&&(r.formInputFontLetterSpacing=Se(e.formInputFontLetterSpacing,t)),e.formInputFontLineHeightUnit==="px"&&(r.formInputFontLineHeight=Se(e.formInputFontLineHeight,t))),bl(e)&&(r.blur=Se(e.blur,t,0),r.backgroundBlur=Se(e.backgroundBlur,t,0)),Fo(e)&&e.fillType==="image"&&e.fillImageResize==="tile"&&(r.fillImageTileSize=Se(e.fillImageTileSize??1,t)),mn(e)&&(r.minWidth=Im(e.minWidth,t,o),r.maxWidth=Im(e.maxWidth,t,o),r.minHeight=Im(e.minHeight,t,o),r.maxHeight=Im(e.maxHeight,t,o)),r}function tM(e,t,o,r,n,i){if(!st(e))return i.width=Se(e.width,t),i.height=Se(e.height,t),!0;let a=!1;return a=$s("width",e,t,o,r,n,i)||a,a=$s("height",e,t,o,r,n,i)||a,a}function qH(e,t){let o=e.getTextStylePresets(!1);for(let r of o){let n=t.getNode(r);io(n)&&e.draftOrCurrent().detachTextStylePreset(n,!1)}}function $s(e,t,o,r,n,i,a){let s=e==="width"?"widthType":"heightType",l=t[s],c=r.initialState.nodesInitialState.get(t.id)?.rect;S(c,"node should have cached rect");let d=e==="width"?"gridItemFillCellWidth":"gridItemFillCellHeight";if(ul(t)&&t[d]&&i)return a[d]=!1,a[e]=Se(c[e],o),a[s]=0,!0;switch(l){case 0:return a[e]=Se(t[e],o),!0;case 4:return a[e]=Se(t[e],o,4),!0;case 1:return i?(a[e]=Se(t[e],o,4),!0):!1;case 3:return i?(a[e]=Se(c[e],o),a[s]=0,!0):!1;case 2:if(!n){let m=r.tree.getNodeParent(t),C=(m&&dr(m)?m.layout:void 0)==="grid"?c[e]:t[e];return a[e]=Se(C,o),a[s]=0,!0}return!1;case 5:return!0;default:G(l)}}function YH(e,t,o){let r=Z(t)?t.getSupportedLayout(e):void 0;return!(r?.width==="auto"&&r?.height==="auto"||Ne(t)||ut(t)&&!o)}function e_(e){return!(!e.children||$e(e)||Ht(e))}function Se(e,t,o=2){return te(e)?go(e*t,o):e}function oM(e,t){return te(e)?Se(e,t):A(e)?od(e,o=>Se(o,t)):e}function Im(e,t,o){if(F(e))return e;let[r,n]=Zi(e);return Number.isNaN(r)||n==="%"&&!o?e:Gr(Se(r,t,0),n)}function rM(e,t){if(!(!e||B(e)))return e.map(o=>o.type==="realistic"?o:ld(o,{x:Se(o.x,t),y:Se(o.y,t),spread:Se(o.spread,t)}))}function t_(e,t,o){let r=o.initialState.nodesInitialState.get(e.id);return r?(QE(o.tree,{canvasMatrix:r.matrix,rect:r.rect,descendantPaths:r.descendantPaths,descendantBasicShapes:r.descendantBasicShapes},o.initialRect,o.resizedRect,!0,n=>{let i=o.initialState.nodesInitialState.get(n.id);return S(i,"Basic shape initial state must exist"),i.matrix}),r.scalableShapeStylesMap&&dC(o.tree,r.scalableShapeStylesMap,t),!0):!1}function Nm(e,t){return{x:e.width*t.x,y:e.height*t.y}}function o_(e,t,o,r,n){let i=Ae(e)?tM(e,t,o,!1,r,n):!1,a=o.initialState.nodesInitialState.get(e.id)?.codeComponentControlProps;if(!a)return i;for(let s in a){let l=a[s];if(!(!l||B(l.value)))switch(l.type){case"borderradius":n[kt(s)]={...l,value:n_(l.value,t)};break;case"padding":n[kt(s)]={...l,value:i_(l.value,t)};break;case"gap":n[kt(s)]={...l,value:oM(l.value,t)};break;case"boxshadow":n[kt(s)]={...l,value:rM(l.value,t)};break;case"font":n[kt(s)]={...l,value:s_(l.value,t)};break;case"border":n[kt(s)]={...l,value:l_(l.value,t)};break;case"array":case"boolean":case"collectionreference":case"color":case"slot":case"cursor":case"customcursor":case"date":case"enum":case"eventhandler":case"file":case"link":case"linkrelvalues":case"multicollectionreference":case"number":case"object":case"pagescope":case"richtext":case"scrollsectionref":case"string":case"transition":case"fusednumber":case"image":case"trackingid":case"vectorsetitem":break;default:G(l)}}return i}function r_(e){return e.includes("%")}function n_(e,t){return B(e)||r_(e)?e:od(e,o=>Se(o,t))}function i_(e,t){return B(e)?e:od(e,o=>Se(o,t))}var a_={px:2,rem:3};function nM(e,t){if(F(e))return e;let[o,r]=te(e)?[e,"px"]:$i(e);return Gr(Se(o,t,a_[r]),r)}function s_(e,t){if(F(e))return e;let o=nM(e.fontSize,t);return{...e,fontSize:o,lineHeight:e.lineHeight?.[1]==="px"?[Se(e.lineHeight[0],t),"px"]:e.lineHeight,letterSpacing:e.letterSpacing?.[1]==="px"?[Se(e.letterSpacing[0],t),"px"]:e.letterSpacing}}function l_(e,t){return!e||q(e)?e:{...e,borderWidth:Se(e.borderWidth,t),borderTop:Se(e.borderTop,t),borderRight:Se(e.borderRight,t),borderBottom:Se(e.borderBottom,t),borderLeft:Se(e.borderLeft,t)}}var c_;(Qn=>{function e(f){return f.some(g=>cM(g))}Qn.canCopyNodes=e;function t(f){return f.some(g=>iM(g))}Qn.canDuplicateNodes=t;function o(f,g){return e(g)&&s(f,g)}Qn.canCutNodes=o;function r(f,g,y=void 0,v=!0){let{documentSettingsStore:b,codeGenerationStore:x,modalStore:V,canvasStore:L,scopeStore:w,selectionStore:O,treeStore:$}=f.stores,X=$.tree,ve=X.withoutDescendants(X.getNodes(g)),Ge=w.active,Qe=ve.length===1?ve[0]:void 0;if(!F(Qe)&&ad(Qe)&&!Ne(Qe)&&Fe(Qe)&&ue(Ge)){let Ce=X.getRect(Qe),Sr=Gl(X,Ge,Qe,Ce),ro=Qn.createVariant(f.componentLoader,$,O,L,Ge,Qe,Sr);return ro?new Set([ro.id]):void 0}let He=ve.find(Ce=>Ne(Ce)&&Fe(Ce));if(He&&Fe(He)){let Ce=$.tree.getScopeNodeFor(He);if(Ce&&z(Ce)){Ce.abTestingParentId?f.loadScopesThenProcess([Ce,$.tree.getAnalyticsScopeNode()],async([Sr,ro])=>{Sr&&Hw(f,Sr,ro,"context_menu")}):V.set({type:"DuplicateWebPage",source:"context_menu",duplicateFromId:Ce.id});return}}let _e=ve.map(Ce=>X.getRect(Ce)),Ke=new Map,Vt=new Set,dt=[],it=new Map,bo=new Map,mo=0;if(ve.forEach((Ce,Sr)=>{if(!iM(Ce))return;let ro=X.getParent(Ce.id);if(et(Ce))if(ro&&Z(ro)){if(!IT(ro,f.componentLoader))return}else return;for(let Ot of Ce.walk())Fe(Ot)&&mo++;let bt=f.cloneNode(Ce,!1,!0,Ke);if(Ke.set(Ce.id,bt.id),bo.set(Ce.id,bt.id),Vt.add(bt.id),it.set(Ce,bt),Ce.isMaster)Bh({});else if(Ce.replicaInfo){let{master:Ot}=Ce.replicaInfo,Jt=Ot&&X.getNode(Ot);Jt&&Um(Jt)||Bh({})}else IS(Ce)&&(!y||y.node&&NS(y.node))&&Ek(f,Ce,Ke);if(y){let Ot=X.getParent(Ce.id);if(y.node){let Jt=y.node;if(qe(y.node)&&(Jt=Cn(X,y.node),!Jt))return;if(wf(f.tree,Jt,bt,w.active.id,f.componentLoader)){let _o=Ot&&Br(Ot)&&Br(Jt),Kn=Ot&&Fe(Ot)&&Fe(Jt);if(_o||Kn)f.moveNode(bt.id,Jt.id,y.insertionIndex);else if(Re(bt)){f.moveNode(bt.id,Jt.id,y.insertionIndex);let Ma=X.getParentSizeInfo(bt,Jt,!0,!1),Mi=bt.updateForSize(_e[Sr]??{},Ma);Ot||(Mi.left=0,Mi.top=0),f.tree.current(bt)?.set(Mi)}else Qn.convertNodeToNewParent(f,bt,Ot,y.node,y.insertionIndex,Ce);if(Po(y.node)){ug(f,bt,y.node,Jt,Vt,Ke);let Ea=ze.getReplicaForTemplateNode(X,y.node);if(Ea){let Ma=Yo(Ea.id,bt.id);bo.set(Ce.id,Ma)}}}}else Qn.convertNodeToNewParent(f,bt,Ot,y.node,y.insertionIndex,Ce),Br(Ot)&&_e[Sr]&&f.tree.current(bt)?.set(bt.updateForSize(_e[Sr],null))}}),!y){let Ce=ve.some(ro=>X.isGroundNode(ro)),Sr=ve.some(ro=>xr(ro)&&ro.resolveValue("rotation")!==0);if(ve.length){let ro=ve.map(wo=>X.convertFrameToCanvas(wo)),bt=de.merge(...ro),Ot,Jt=K(f,g),_o=oe(X,ve),Kn=ve.some(wo=>Ht(wo)),Ea=b.lastDuplicationMap,Ma=!1;if(!Kn&&Jt&&!_o&&!Sr&&Ea){let wo=Ea.keys(),Mm=f.tree.getBoundingFrameForNodes(X.getNodes(wo));Ma=!0,Ot=Le.subtract(bt,Mm)}let Mi=Ot||{y:0,x:0},Em=ve[0];if(!Kn&&Ce&&!Ma&&Em){let wo=ak(X,w.active,Em,bt,ve.every(mr)?{x:f.tree.getRect(Em).width}:Ot);Mi=Le.subtract(wo,bt)}for(let wo of ve){let{x:Mm,y:nO,width:iO,height:aO}=X.getRect(wo),vn=it.get(wo);if(!vn)continue;let Hs=f.tree.getParent(wo.id),_s=f.tree.getParent(vn.id);if(_s&&Hs&&Po(Hs)){ug(f,vn,Hs,_s,Vt,Ke);let OC=ze.getReplicaForTemplateNode(X,Hs);if(OC){let cO=Yo(OC.id,vn.id);bo.set(wo.id,cO)}}if(_s&&Br(_s))continue;let EC=Mm+Mi.x,MC=nO+Mi.y,sO=f.tree.getParentSizeInfo(wo,Hs),lO=vn.updateForRect({rect:{x:Ht(wo)?EC:Math.round(EC),y:Ht(wo)?MC:Math.round(MC),width:iO,height:aO},parentSizeInfo:sO,constraintsLocked:!1,shouldGuessPinToBottom:!0,shouldGuessPinToRight:Qr(f.tree,vn,_s)});f.tree.current(vn)?.set(lO),Ce&&X.isGroundNode(vn)&&dt.push(vn.rect())}}}b.lastDuplicationMap=bo;let Sn=[];for(let Ce of it.values())Wn(X,f.componentLoader,Ce,Ke,!1),mr(Ce)&&Sn.push(Ce);if(Sn.length&&x.createVectorSet(Sn),dt.length){let Ce=de.merge(...dt);L.scrollToCenter(de.center(Ce))}return v&&Vt.size>0&&f.stores.selectionStore.set(Vt,{sticky:!0}),mo>0&&Lt("layout_frame",{source:"duplication",count:mo}),Vt}Qn.duplicateNodes=r;function n(f){if(f.length>=50)return!0;let y=f.length;return f.forEach(v=>{y+=xg(v)}),y>=50}function i(f,g,y){let v=f.tree.withoutDescendants(g);function b(){let x=[],V=[];v.forEach(L=>{if(Ir(L))if(kd(f.tree,L))V.push(L);else{let w=f.tree.get(L.originalid);w&&mC(w)&&x.push(w.id)}else mC(L)&&x.push(L.id)}),V.forEach(L=>L.set({visible:!1})),f.deleteNodes(x),f.stores.selectionStore.clear(),f.stores.treeStore.setHighlight(null)}y&&n(v)?f.stores.modalStore.set({type:"Confirmation",variant:"destructive",title:"Delete Selection",description:"You are about to delete the selected layers for all project collaborators.",confirmLabel:"Delete",onConfirm:b,source:"delete_node"}):b()}Qn.deleteOrHideNodes=i;function a(f,g){f.tool.deleteAction?f.tool.deleteAction():g&&i(f,g,!0)}Qn.deleteAction=a;function s(f,g){return f.tool.deleteAction?!!f.tool.canDelete&&f.tool.canDelete():!!g&&g.some(y=>u_(y))}Qn.canDeleteOrHideNodes=s;function l(f,g){return In(g)?!1:Gt(g)?Ir(g):!Qo(g)}Qn.canRenameNode=l;function c(f,g){return g.filter(y=>l(f,y)).length===1}Qn.canRename=c;function d(f,g){return f.stores.chromeStore.contentPanelTab!=="Pages"||f.stores.scopeStore.active.id===f.tree.root.homePageNodeId||g.length!==0?!1:z(f.stores.scopeStore.active)||Ye(f.stores.scopeStore.active)}Qn.canRenameActivePage=d;function u(f,g){if(d(f,g)){let y=f.stores.scopeStore.active.id,v=Vn(f.tree,y)?.id||y;Gp(v)}else g.length===1&&(f.stores.chromeStore.layersExpanded=!0,f.stores.chromeStore.contentPanelTab="Layers",f.scheduler.runBeforeNextFrame(()=>{let y=document.querySelectorAll(".layerPanelPlaceholder.active");if(y.length===1&&y[0]){let v=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0}),b=y[0].parentElement;b&&b.dispatchEvent(v)}}))}Qn.rename=u;async function m(f,g){g.length!==0&&await aP({key:"generate-layer-names",progress:{variant:"progress",text:"Renaming layers\u2026"},error:{variant:"error",text:"Failed to rename layers"},success:{variant:"success",text:"Done"},waitTime:1e3},()=>zE(f,g))}Qn.renameLayers=m;function h(f,g){let y=f.tree,v=y.withoutDescendants(g),b=Aa(v);R(y,g,b)&&kC(f,b,"front")}Qn.sendToFront=h;function C(f,g){let y=f.tree,v=y.withoutDescendants(g),b=Aa(v);P(y,g,b)&&kC(f,b,"back")}Qn.sendToBack=C;function T(f,g){let y=f.tree,v=y.withoutDescendants(g),b=Aa(v);R(y,g,b)&&wC(f,b,1)}Qn.sendForward=T;function N(f,g){let y=f.tree,v=y.withoutDescendants(g),b=Aa(v);P(y,g,b)&&wC(f,b,-1)}Qn.sendBackward=N;function P(f,g,y){if(RC(g))return!1;if(!y){let v=f.withoutDescendants(g);y=Aa(v)}return LC(f,y,-1)}Qn.sendBackwardEnabled=P;function R(f,g,y){if(RC(g))return!1;if(!y){let v=f.withoutDescendants(g);y=Aa(v)}return LC(f,y,1)}Qn.sendForwardEnabled=R;function W(f,g){return ne(f,g,0)}Qn.addFrame=W;function M(f,g){return ne(f,g,1)}Qn.addStack=M;function H(f,g){let y=f.stores.scopeStore.active,v=f.tree.withoutDescendants(g);return v.length>1&&Te(f,v)&&(!z(y)||v.every(b=>f.tree.isGroundNode(b)))}Qn.canWrapInAutoSizedFrame=H;function J(f,g,y){let v=W(f,g);S(v!==void 0,"new frame ID must be defined");let b=f.tree.getNode(v);S(b!==null,"new frame must exist");let x=f.tree.withoutDescendants([b]);return Zw(f,x,y),b}Qn.wrapInAutoSizedFrame=J;function K(f,g){let{documentSettingsStore:y,selectionStore:v}=f.stores;if(!y.lastDuplicationMap||!Ql(g,v.ids))return!1;let b=[...y.lastDuplicationMap.values()];if(!Ql(v.ids,b))return!1;let x=[...y.lastDuplicationMap.keys()];return Ql(v.previousIds,x)}function oe(f,g){let y=f.getCommonGroundNode(g);return!!y&&Br(y)}function me(f,g,y){if(y!==null){let v=g.flatMap(L=>f.convertCornerPointsToCanvas(L)),b=f.transformMatrixToNode(y),x=(Nl(y)?b:St.flatProjectionMatrix(b)).invertSelf(),V=v.map(L=>St.convertPoint(x,L));return de.roundToOutside(de.boundingRectFromPoints(V))}return de.roundToOutside(de.merge(...g.map(v=>f.convertFrameToCanvas(v))))}Qn.getUntransformedBoundingRect=me;function j(f,g,y,v,b,x){let V={top:y.y,left:y.x,width:y.width,height:y.height,fillEnabled:!1},L=b.length===1?b[0]:null;S(L!==void 0,"node must be defined",b),v&&Object.assign(V,Pe(g,y,v,L,x));let w=v===null,O=z(f.stores.scopeStore.active);return V.overflow=w||O?"clip":"visible",V}function Pe(f,g,y,v,b){let x=f.getViewportRect(y),V=f.getRect(y),L=v?f.getParentSizeInfo(v,y):{sizing:V,positioning:V,viewport:x,layout:rn(y)},w=!!v&&Re(v),O=pe(v,b),$=xb({rect:g,parentSizeInfo:L,currentConstraints:O,constraintsLocked:w,shouldGuessPinToBottom:ta(f,null,y),shouldGuessPinToRight:Qr(f,null,y),floatingPosition:null});return b&&y?{...os(v,y),...Ie(v),...$,widthType:Co(y)?3:1,heightType:2,width:1,left:0}:{...os(v,y),...Ie(v),...$}}function pe(f,g){let v=!!f&&Re(f)?f.constraints():void 0;if(!v)return;let b={...v};return g?(b.widthType===5&&(b.widthType=2),b.heightType===5&&(b.heightType=2)):(_m(b.widthType)&&(b.widthType=0),_m(b.heightType)&&(b.heightType=0)),b}function Ie(f){if(!(!f||!Ae(f)))return{width:f.width,height:f.height}}function we(f,g,y,v,b,x,V,L,w){let O=x?.id??ao;switch(g){case 0:{let $=f.createFrame(O,{id:y,...w},v);return f.moveNode($.id,O,V),S($&&mt($),"Fail to create a wrapping frame: the created frame should have the `children` field"),L.forEach(X=>{let ve=Ei(f.tree,X,x,$);f.moveNode(X.id,$.id),f.tree.current(X)?.set(ve)}),$}case 1:{let $=k(f,y,O,w,L,b);return f.moveNode($.id,O,V),$}case 2:{let $=f.createShapeContainer(O,{id:y,...w});return f.moveNode($.id,O,V),S($&&mt($),"Fail to create a wrapping frame: the created frame should have the `children` field"),L.forEach(X=>{let ve=Ei(f.tree,X,x,$);f.moveNode(X.id,$.id),f.tree.current(X)?.set(ve)}),$}default:G(g)}}function k(f,g,y,v,b,x,V){let L=gg(f,b,x),w=f.createNode(An,{id:g,...v,...L},y,V);S(no(w),"Fail to create stack: the created node should have stack layout");let{stackDirection:O}=L;return tw(f,g,x,b,O),w}function ne(f,g,y){let v=f.tree;if(!Te(f,g))return;let b=v.sortVisually(v.withoutDescendants(g)),x=b[0]?v.getParent(b[0].id):null,V=x&&Po(x),L=V?f.tree.getNode(x.originalid):x,w=!0,O=V?b.map(_e=>{if(!Gt(_e))return _e;let Ke=f.tree.getNode(_e.originalid);return S(Ke,"Fail to create a wrapping frame: the original node must exist"),w&&(w=!Ke.cache.visible),Ke}):b,$=x?.children.findIndex(_e=>b.includes(_e))??-1,X=v.newId(),ve=me(v,O,L),Ge=j(f,v,ve,L,O,y===1),Qe=we(f,y,X,O[0]?.id,ve,L,$,O,Ge),He=X;if(V){S(x,"Fail to create a wrapping frame: parentNode should not be null"),S(qe(x),"Fail to create a wrapping frame: parentNode should be a replica node"),w&&pg(f,Qe,x,L);let _e=ze.getReplicaForTemplateNode(f.tree,x);S(_e,"Fail to create a wrapping frame: replica must exist");let Ke=me(v,b,x),Vt=j(f,v,Ke,x,b,y===1);gl(v,_e,Qe.id,Vt),ze.replicaWithChanges(f.tree,_e.draftOrCurrent());let dt=Yo(_e.id,X);He=dt;let it=f.tree.get(dt);if(S(it&&mt(it),"Fail to create a wrapping frame: replica wrapping node should exist and should have the `children` field"),y===0||y===2)b.forEach(bo=>{let mo=Ei(v,bo,x,it);f.tree.current(bo)?.set(mo)});else if(y===1){S(Fe(Qe),"Fail to create a wrapping frame: the wrapping node should be a FrameNode"),S(no(Qe),"Fail to create a wrapping frame: the wrapping node should have stack layout");let bo=gg(f,b,Ke);gl(v,_e,Qe.id,bo),Yk(f,Qe,bo.stackDirection,b,Ke)}}return f.stores.selectionStore.set(He),X}function ae(f){return Ys(f)||Ee(f)||lt(f)||an(f)||In(f)||et(f)?!1:Gt(f)?Ir(f):!0}function Te(f,g){if(g.length===0)return!1;switch(f.tool.enum){case 4:case 5:case 10:break;default:return!1}if(!g.every(V=>ae(V)))return!1;let y=f.tree,v=y.withoutDescendants(g),[b,x]=v.reduce(([V,L],w)=>{let O=y.isInlineVectorNode(w)||!Ht(w)&&!lt(w),$=v[0]?y.getParentId(v[0]):void 0,X=y.getParentId(w);return[V&&$===X,L&&O]},[!0,!0]);return b&&x}Qn.wrappingEnabled=Te;function gt(f){return f.some(ur)}Qn.overflowEnabled=gt;function yt(f){f.stores.chromeStore.removePanelOverrides(),f.stores.chromeStore.chromeIsVisible=!0,f.stores.chromeStore.pagesExpanded=!0,f.stores.chromeStore.contentPanelTab="Pages";let g=new Set(f.stores.scopeStore.getDesignPageNodes().map(v=>v.resolveValue("name")??"")),y=f.createNode(hN,{name:Eo("Design",g,{startIndex:g.size+1,omitCountIfFirst:!0})},f.tree.root.id);return f.stores.scopeStore.select(y.id,{keepHistory:!1}),f.scheduler.runAtEndOfFrame(()=>Gp(y.id)),y.id}Qn.createDesignPage=yt;function be(f){f.stores.chromeStore.removePanelOverrides(),f.stores.chromeStore.chromeIsVisible=!0,f.stores.chromeStore.pagesExpanded=!0,f.stores.chromeStore.contentPanelTab="Pages";let g=new Set(f.stores.scopeStore.getCanvasPageNodes().map(x=>x.resolveValue("name")??"")),y=f.createNode(bb,{name:Eo("Canvas",g,{startIndex:g.size+1,omitCountIfFirst:!1})},f.tree.root.id),v=CN("iPhone_390_844"),b=f.createFrame(y.id,{width:v.screenWidth,height:v.screenHeight,name:v.title,framePreset:v.id,isScreen:!0});f.stores.codeGenerationStore.updateComponent(b.id).catch(vr),f.stores.scopeStore.select(y.id,{keepHistory:!1}),qR({pageId:y.id}),f.scheduler.runAtEndOfFrame(()=>Gp(y.id))}Qn.createCanvasPage=be,Qn.toggleContentManagementScope=f=>{let{chromeStore:g,selectionStore:y,scopeStore:v,analyticsStore:b,siteSettingsStore:x,codeEditorStore:V}=f.stores,L=g.mainView;if(L===2){v.selectPreviousActiveScope();return}switch(L){case 0:f.cancelTool();break;case 5:g.setLocalizationsVisible(!1);break;case 6:b.close();break;case 4:x.close();break;case 1:V.closeEditor();break;case 3:break;default:G(L)}let w=f.tree.getContentManagementNode()?.loaded;if(w&&w.children.length>0){let O=v.active,$=y.nodes.at(0);v.select(w.id,{keepHistory:!1});let X=m_(f,O,$);if(X){y.set(X);return}if(y.ids.length===0){let ve=w.children[0];ve&&y.set(ve.id)}}else lu(f.tree),v.select(qf,{keepHistory:!1})};function Nt(f,g){f.stores.chromeStore.chromeIsVisible=!0,f.stores.scopeStore.select(qf,{keepHistory:!1}),f.stores.selectionStore.set(g)}Qn.openContentCollection=Nt;function Ut(f,g,y,v){f.stores.modalStore.set({type:"CreateComponent",source:g,onSuccess:b=>{let x=b.resolveValue("name");if(We(x)||We(f.tree.getEntityRootNode()))return;let V=Qp(f.tree,x,y??Cl);da(f.tree,V,b.id),v?.(b)}})}Qn.makeComponent=Ut;function oo(f,g){return oO(f,g)}Qn.canMakeComponent=oo;function Cr(f,g){if(g.length!==1||un(f.stores.scopeStore.active))return;let y=g[0];y&&_c(y)&&ze.canMakeMaster(y)&&f.tree.current(y)?.set({isMaster:!0,replicaInfo:null,originalid:null})}Qn.makeMaster=Cr;function sr(f,g){for(let y of g)if(y.originalid&&qe(y)&&ze.overrideKeys(f,[y]).size>0)return!0;return!1}Qn.canResetToMasterValues=sr;function uo(f,g){for(let y of g){if(!y.originalid)continue;let b=ze.getReplicaForTemplateNode(f,y);b&&ze.resetOverrides(f,b,y)}}Qn.resetToMasterValues=uo;function lr(f,g,y){for(let v of g){if(!qe(v))continue;let b=ze.getReplicaForTemplateNode(f,v);b&&ze.resetOverridesByProperty(f,b,v,y)}}Qn.resetPropertiesToMasterValues=lr;function Go(f,g){if(g.length===0)return!1;for(let y of g){if(xo(y))return!1;if(ad(y)){let v=f.tree.getScopeNodeFor(y);if(!v)return!1;if(ue(v)){let{hover:b,pressed:x}=v.getGesturesForTopLevelVariant(y);return!(b||x)}return z(v)&&!Ne(y)}if(At(y))return!0}return!1}Qn.canDetachFromMaster=Go;function Gs(f,g){let y=new Map;g.filter(At).forEach(b=>{if(!jE(b,{allowVariants:!0}))return;let x=b.clone({parentid:null});x.replicaInfo=null,ov(x)&&(x.isVariant=void 0);for(let w of x.walk())w.originalid=null;S(b.id!==x.id),f.tree.insertNode(x);let V=f.tree.getParent(b.id)||f.stores.scopeStore.active,L=V.children.indexOf(b);f.tree.removeNode(b),f.moveNode(x.id,V.id,L),f.tree.current(x)?.set(x.constraintValues()),y.set(b.id,x.id)}),Wn(f.tree,f.componentLoader,f.tree.root,y,!1);let v=f.stores.selectionStore.ids.map(b=>y.get(b)??b);return f.stores.selectionStore.set(v),y}Qn.detachFromMaster=Gs;function Zn(f,g){if(!La(g))return;let y=Ho(g);g.filter(Jr).forEach(b=>b.set({visible:!y})),f.stores.treeStore.setHighlight(ao)}Qn.visibility=Zn;function La(f){return f.some(Jr)}Qn.visibilityEnabled=La;let Ho=f=>f.every(g=>g.isVisible());function qr(f){return Ho(f)?"Hide":"Show"}Qn.visibilityTitle=qr;function Da(f,g){let y=f.withoutDescendants(g);if(!Fi(y))return;let v=!wc(y),b=new Set;for(let x of y){if(!qi(x))continue;let V=x.cache.lockedByParent,L=v===V?void 0:v;x.set({locked:L});for(let w of x.descendants())b.add(w)}for(let x of b)qi(x)&&x.locked!==void 0&&x.set({locked:void 0})}Qn.toggleLock=Da;function Fi(f){return f.some(qi)}Qn.toggleLockEnabled=Fi;function wc(f){return f.some(g=>qi(g)&&fn(g))}function IC(f){return wc(f)?"Unlock":"Lock"}Qn.toggleLockTitle=IC;function Lc(f){return f.every(mr)}Qn.copyURLEnabled=Lc;function Dc(f){return f.length>0&&f.every(b=>Fa(b))?`Remove ${f.length>1?"Viewboxes":"Viewbox"}`:`Remove ${f.length>0&&f.find(b=>!Br(b))===void 0?"Stack":"Frame"}${f.length>1?"s":""}`}Qn.removeFrameTitle=Dc;function NC(f,g){Ai(f,g)&&XM(f,g)}Qn.removeFrame=NC;function Ai(f,g){if(g.length===0)return!1;let y=f.stores.scopeStore.active.id;return g.every(v=>{if(!Fe(v)&&!Br(v)&&!Fa(v)||!v.children||v.children.length===0||Jo(v)||At(v)||Gt(v)&&!Ir(v))return!1;let b=f.tree.getParent(v.id);if(!b)return!0;for(let x of v.children)if(!wf(f.tree,b,x,y,f.componentLoader))return!1;return!0})}Qn.removeFrameEnabled=Ai;function Fa(f){return $e(f)&&!mr(f)}function xC(f,g){g.forEach(y=>{let v=f.getParentSizeInfo(y);if(y.intrinsicWidth!==null&&y.intrinsicHeight!==null){let b={width:y.intrinsicWidth,height:y.intrinsicHeight},x=b.width/b.height;if(Ys(y))y.set(tP(y,b,{aspectRatio:x}),f);else if(mi(y)&&y.aspectRatio){y=y.set({aspectRatio:null},f);let V=y.updateForSize(b,v);V.aspectRatio=x,y.set(V,f)}else y.set(y.updateForSize(b,v),f)}})}Qn.resetToIntrinsicSize=xC;function Ei(f,g,y,v){let b=f.getRect(g),x=f.getOriginPoint(g),V=f.convertPointToCanvas(g,{x:b.width*x.x,y:b.height*x.y});if(v){let $=f.transformMatrixToNode(v),X=Nl(v)?$:St.flatProjectionMatrix($);V=St.convertPoint(X.inverse(),V)}let L={...b,x:V.x-b.width*x.x,y:V.y-b.height*x.y},w=g.updateForRect({rect:L,parentSizeInfo:f.getParentSizeInfo(g,v),constraintsLocked:!1,shouldGuessPinToBottom:v?ta(f,g,v):!0,shouldGuessPinToRight:Qr(f,g,v)});if(Br(v)||(w.widthType===3&&(w.widthType=0,w.width=b.width),w.heightType===3&&(w.heightType=0,w.height=b.height)),xr(g)){let $=g.resolveValue("rotation")-JM(f,y,v);$!==0&&(w.rotation=$)}return v&&Co(v)&&!lo(g)&&!jr(g)&&(w.top=null,w.left=null,w.bottom=null,w.right=null),Object.assign(w,os(g,v)),w}Qn.convertNodeToNewParentUpdate=Ei;function PC(f,g,y,v,b=-1,x){let{tree:V}=f,L=g;if(Gt(g)&&(L=Cn(V,g),!L))return null;let w=v;if(v&&qe(v)&&(w=Cn(V,v),!w))return null;let O=y;if(y&&qe(y)&&(O=Cn(V,y),!O))return null;let $=Ei(V,x??L,Gt(g)?O:y,Gt(g)?w:v);if(f.tree.current(L)?.set($),f.moveNode(L.id,w?w.id:f.stores.scopeStore.active.id,b),L.id!==g.id){S(y,"Current parent must exist when editing variants");let ve=ze.getReplicaForTemplateNode(V,y);S(ve,"The current parent should located in a variant node");let Ge=v?ze.getReplicaForTemplateNode(V,v):null;if(ve.id===Ge?.id){let Qe=Ei(V,g,y,v);V.current(g)?.set(Qe)}}return{originalNode:L,originalCurrentParent:O,originalNewParent:w}}Qn.convertNodeToNewParent=PC;function Fc(f,g){if(!ti(f)&&!fn(f)&&(g.push(f.id),!!f.children))for(let y of f.children)Fc(y,g)}function Ac(f,g){let y=new Set;return g.forEach(v=>{let b=f.getParent(v.id);b&&y.add(b.id)}),y}function Wj(f,g){let y=f.withoutDescendants(f.getNodes(g));return Ac(f,y).size>0}Qn.canSelectAncestor=Wj;function zj(f,g){VC(f,g,"parent")}Qn.selectParent=zj;function Bj(f,g){VC(f,g,"groundNode")}Qn.selectGroundNode=Bj;function VC(f,g,y){let{tree:v}=f,b=v.withoutDescendants(v.getNodes(g)),x=null;if(y==="groundNode"){let $=new Set(b.map(X=>v.getGroundNodeFor(X).id));$.size>0&&(x=Array.from($))}else{let $=Ac(v,b);$.size>0&&(x=Array.from($))}if(!x)return!1;let{selectionStore:V,overlayStore:L,treeStore:w}=f.stores;V.set(x,{sticky:!0,switchToLayers:!0,switchToProperties:!0});let O=b.length===1?b[0]:null;return O&&L.activeOverlays.has(O.id)&&L.exitEditMode(V,!1),w.setHighlight(null),!0}Qn.selectAncestor=VC;function $j(f,g){let y=f.tree,v=[];if(f.tool.selectAll){f.tool.selectAll();return}else{let b=g.map(x=>{let V=y.get(x);if(Ht(V)){let w=bx(y,V);return w&&y.isGroundNode(w)?w.id:ao}let L=y.getGroundFrameAncestor(x,!0);return L!==null?L.id:ao});if(new Set(b).size===1&&b[0]!==null){let x=b[0];v=y.getSubtreeNodes(x).filter(V=>fn(V)?!1:V.id!==x).map(V=>V.id)}if(v.length===0)for(let x of f.stores.scopeStore.active.children)Fc(x,v)}f.stores.selectionStore.set(v)}Qn.selectAll=$j;function Gj(f,g){let y=new Set;for(let v of g){let b=f.tree.get(v);if(!b)continue;let x=f.tree.getSiblingsIncludingSelf(b);for(let V of x)y.add(V.id)}f.stores.selectionStore.set(y)}Qn.selectAllSiblings=Gj;function Hj(f,g){return f.tree.getNodes(g).some(y=>mt(y)&&y.children.length>0)}Qn.canSelectChildren=Hj;function _j(f,g){let y=new Set;for(let v of g){let b=f.tree.get(v);if(!b)continue;let x=es(b);for(let V of x)y.add(V.id)}y.size>0&&f.stores.selectionStore.set(y)}Qn.selectAllChildren=_j;function jj(f,g){let y=g.length>0?f.tree.getNodes(g):f.stores.scopeStore.active.getGroundNodes(),v=[];y.map(L=>{Xe(L)?v.push(...f.tree.getSiblingsIncludingSelf(L)):v.push(L)});let b=new Set,x=new Set,V=L=>{if(!b.has(L.id)){if(Xe(L)&&x.add(L.id),L.children)for(let w of L.children)V(w);b.add(L.id)}};for(let L of v)V(L);f.stores.selectionStore.set(x)}Qn.selectAllTextNodes=jj;function Uj(f,g){let[y]=f.tree.getNodes(g);if(!y||!Xe(y))return;let v=[],b=Ve(y)?xn(y.getTextStylePresets(!1)):void 0,x=xn(y.getFonts(!1)),V=xn(y.getFontSizes(!1).map(w=>ii(w)?Gr(...w):te(w)?Gr(w,"px"):w)),L=xn(y.getTextColors(!1));if(!(qs(b)||js(b))&&!(qs(x)||js(x))&&!(qs(V)||js(V))&&!(qs(L)||js(L))){for(let w of f.stores.scopeStore.active.walk())Po(w)||!Xe(w)||(Ve(w)?xn(w.getTextStylePresets(!1)):void 0)!==b||xn(w.getFonts(!1))!==x||xn(w.getFontSizes(!1).map(Ge=>ii(Ge)?Gr(...Ge):te(Ge)?Gr(Ge,"px"):Ge))!==V||xn(w.getTextColors(!1))!==L||v.push(w);f.stores.selectionStore.set(v)}}Qn.selectAllTextNodesWithSameFontStyles=Uj;function Jj(f,g){let y=f.tree.getNodes(g);S(g.length===1,"Cannot have multiple layers selected");let[v]=y;if(!v||!Fe(v))return;let b=[],V=Bv(f.tree,v.id)??f.stores.scopeStore.active;for(let L of V.walk())Fe(L)&&_M(v,L,f.tree)&&b.push(L);f.stores.selectionStore.set(b)}Qn.selectAllLayersWithSameFill=Jj;function _M(f,g,y){if(Nr(f)&&!f.fillEnabled||Nr(g)&&!g.fillEnabled)return!1;let{fillType:v}=f;if(v!==g.fillType||v===void 0)return!1;switch(v){case"color":return!A(f.fillColor)||!A(g.fillColor)?!1:Oa.equals(mg(f.fillColor,y,void 0),mg(g.fillColor,y,void 0));case"linear-gradient":return f.fillLinearGradient&&g.fillLinearGradient?f.fillLinearGradient.equals(g.fillLinearGradient):!1;case"radial-gradient":return f.fillRadialGradient&&g.fillRadialGradient?f.fillRadialGradient.equals(g.fillRadialGradient):!1;case"conic-gradient":return f.fillConicGradient&&g.fillConicGradient?f.fillConicGradient.equals(g.fillConicGradient):!1;case"image":return f.fillImage===g.fillImage;default:G(v)}}function RC(f){return f.some(g=>Od(g)?Gt(g)?!Ir(g):!1:!0)}function Aa(f){let g={};return f.forEach(y=>{let v=y.parentid?y.parentid:il,b=g[v];b||(b=[],g[v]=b),b.push(y)}),g}function kC(f,g,y){let v=f.tree;for(let b in g){let x=b===il?v.root:v.get(b);if(!x||!g[b])continue;let V=v.sortVisually(g[b]);y==="back"&&V.reverse();let L=y==="front"?-1:0,w=Po(x)&&jc(x);V.forEach(O=>{let $=O.originalid?v.get(O.originalid):O;S($,"Cannot send",O.id,"backward/forward: original node must exist."),w&&Od($)?Df($.id,x,L):f.tree.moveNodeIndex($,L)})}}function jM(f,g,y){let v=f.tree.getParent(y.id);if(!v)return null;let b=v.children.indexOf(y),x=g==="backward"?b-1:b+1,V=v.children[x];if(!V||!hi(V))return null;let L=f.tree.convertFrameToCanvas(y),w=f.tree.convertFrameToCanvas(V);if(g==="backward")return{...L,y:w.y};let O=w.height-L.height;return{...L,y:w.y+O}}function UM(f,g,y){let v=jM(f,g,y),{canvasStore:b}=f.stores;!v||de.containsRect(b.getCanvasVisibleRectTakingOverlaysIntoAccount(),v)||b.zoomToCenter(v,{zoom:b.zoom,maxZoom:.5,animated:!0})}function wC(f,g,y){let v=f.tree,b=Object.keys(g).length===1;for(let x in g){let V=x===il?v.root:v.get(x);if(!V||!mt(V))continue;let L=Po(V)&&jc(V),w=g[x],O=b&&w?.length===1,$=Rn(V)?V.getChildrenInVisualOrder():V.children,X=!1;for(let ve=0,Ge=$.length;ve<Ge;ve++){let Qe=y===1?Ge-ve-1:ve,He=$[Qe];if(!w?.includes(He))X=!0;else if(X)if(L&&Od(He))S(He.originalid,"Cannot send nodes: nodes in a replica variant parent must have originalid."),Df(He.originalid,V,Qe+y);else{O&&ou(v,He)&&UM(f,y===-1?"backward":"forward",He);let Ke=He.originalid?v.get(He.originalid):He,Vt=V.originalid?v.get(V.originalid):V;S(Ke,"Cannot send node",He.id,": original child node does not exist."),S(Vt,"Cannot send node",V.id,": original parent node does not exist."),f.moveNode(Ke.id,Vt.id,Qe+y)}}}}function LC(f,g,y){for(let v in g){let b=v===il?f.root:f.get(v);if(!b||!mt(b))continue;let x=g[v],V=Rn(b)?b.getChildrenInVisualOrder():b.children,L=!1;for(let w=0,O=V.length;w<O;w++){let $=y===1?O-w-1:w,X=V[$];if(!x?.includes(X))L=!0;else if(L)return!0}}return!1}function JM(f,g,y){let v=0,b=0;return g&&(v=f.totalAncestorRotation(g)),y&&(b=f.totalAncestorRotation(y)),Math.round(b-v)}function Xj(f){if(f.length!==1)return!1;let g=f[0];return g&&Ss(g)&&!g.originalid}Qn.reversePathDirectionEnabled=Xj;function Zj(f,g){let y=f.current(g);y&&y.set({pathSegments:vo.reverse(y.pathSegments)})}Qn.reversePathDirection=Zj;function Qj(f,g){let y=Zl(g,f);return y.length===0?!1:y.every(v=>Ht(v)&&!v.originalid&&es(v).length>0)}Qn.canUngroup=Qj;function XM(f,g){if(g.length===0)return;let y=f.tree,v=y.sortVisually(Zl(g,y)),b=y.withoutDescendants(v),x=[];return b.forEach(V=>{if(!mt(V))return;let L=V,w=null;if(Gt(V)){if(L=Cn(y,V),!L)return;w=ze.getReplicaForTemplateNode(y,V)}let O=y.getParent(V.id);if(V.children.length>0){let $=y.getIndex(V),X=L?.id??V.id;[...es(V)].forEach((Ge,Qe)=>{let He=Ge;if(Gt(Ge)&&(He=Cn(y,Ge),!He))return;if(ut(He)){y.removeNode(He);return}let _e=O,Ke=_e;if(_e&&qe(_e)&&(Ke=Cn(y,_e),!Ke))return;let Vt=Qn.convertNodeToNewParentUpdate(y,He,L,Ke);if(f.moveNode(He.id,Ke?.id??null,$+Qe,X),f.tree.current(He)?.set(Vt),X=He.id,w){let dt=Qn.convertNodeToNewParentUpdate(y,Ge,V,_e);f.tree.current(Ge)?.set(dt)}x.push(Ge.id)}),f.deleteNode(L.id)}}),f.stores.selectionStore.set(x),x}Qn.ungroup=XM;function Kj(f,g){return!g.hasPreferredSize(f.componentLoader)}Qn.canSetDefaultSize=Kj;function qj(f,g){if(g.hasPreferredSize(f.componentLoader))return;let y=g.getPreferredSize(f.componentLoader),v={aspectRatio:null};y.width==="auto"?(v.width=1,v.widthType=2):te(y.width)&&(v.width=y.width,v.widthType=0),y.height==="auto"?(v.height=1,v.heightType=2):te(y.height)&&(v.height=y.height,v.heightType=0),Re(g)&&te(g.top)&&te(g.bottom)&&(v.bottom=null),Re(g)&&te(g.left)&&te(g.right)&&(v.right=null),jw(g,v,"context_menu_default_size_item"),g.set(v,f.tree)}Qn.setDefaultSize=qj;function ZM(f,g){if(!f.stores.toolStore.isDefaultToolActive)return!1;let y=Zl(g,f.tree);return y.length===0?!1:y.every(v=>Ht(v)&&!v.originalid)}Qn.canJoinInGroup=ZM;function Yj(f,g){let y=f.tree;if(S(g.length>0,"No nodes"),!ZM(f,g))return;let v=Zl(g,y),b=y.sortVisually(y.withoutDescendants(v)),x=b[0],V=x?y.getParent(x.id):void 0,L=V?V.id:ao,w=x?y.getIndex(x):void 0,O=y.newId();f.createShapeGroup(L,{id:O},w),b.forEach($=>{let X=Qn.convertNodeToNewParentUpdate(y,$,y.getParent($.id),V);f.moveNode($.id,O),f.tree.current($)?.set(X)}),f.stores.selectionStore.set(O)}Qn.joinInGroup=Yj;function eU(f,g){if(g.originalid)return null;let y={width:g.width,height:g.height},v=iw(g.svg,gp.createEmpty,y,g);if(v){v.name=g.name||g.originalFilename,v.parentid=g.parentid;let b=f.cloneNode(v),x=g.parentid===null,V=x?"rgb(255,255,255)":"transparent",{aspectRatio:L,...w}=g.constraintValues();f.tree.current(b)?.set({...w,width:v.width,height:v.height,fillEnabled:x,fillColor:V});let O=f.tree.getParent(g.id);if(O!==null&&mt(O)){let $=O.children.indexOf(g);f.moveNode(b.id,O.id,$)}return DC(f,b.id,y),f.deleteNode(g.id),b.id}return null}Qn.convertSVGToShape=eU;function DC(f,g,y){let v=f.tree.get(g);if(!$e(v))return;let b=v.width>=v.height?"width":"height",x=b==="width"?"height":"width",V=y[b]/v[b];if(V===1)return;qE(f,[v],V,YE(f,[v]),QM(v));let L=f.tree.current(v);S(L,"Node must exist after scaling");let w=y[x]-L[x];if(w===0)return;L.set({[x]:y[x]});let O=x==="width"?"x":"y";for(let $ of L.children){let X=f.tree.current($);!X||!$d(X)||X.set({[O]:X[O]+w/2})}}Qn.scaleVector=DC;function QM(f){let g=f.constraints(),y=0,v=0;return g.top===!1&&g.bottom===!1?v=.5:g.top===!1&&(v=1),g.left===!1&&g.right===!1?y=.5:g.left===!1&&(y=1),{x:y,y:v}}function tU(f,g){if(g.length>1)return!1;let y=ze.getReplicaForTemplateNode(f,g[0]);if(!y)return!1;let v=ze.getMaster(f,y);if(ti(v))return!1;for(let b=0,x=g.length;b<x;b++){let V=g[b];if(ze.overrideKeys(f,[V]).size>0)return!0}return!1}Qn.canUpdateMasterFromInstance=tU;function oU({tree:f},g){function y(w,O){for(let $ of["id","update","cache","children","mutable","parentid","originalid","isMaster","isVariant","isBreakpoint","replicaInfo","duplicatedFrom","gesture"])delete w[$];if(O)for(let $ of ze.positionKeysToIgnore)delete w[$];return w}function v(w,O){let $;if(O)for(let X of ze.positionKeysToIgnore)w[X]!==void 0&&($=$||{},$[X]=w[X]);return w.gesture&&($||($={}),$.gesture=w.gesture),$}let b=ze.getReplicaForTemplateNode(f,g[0]);if(!b)return;let x=ze.getMaster(f,b);if(ti(x))return;let V={...b.replicaInfo.overrides},L={...b.replicaInfo,overrides:V};for(let w=0,O=g.length;w<O;w++){let $=g[w];if(!$?.originalid)continue;let X=f.get($.originalid),ve=y($.raw(),At($));X?.set(ve);let Ge=v(V[$.originalid]??{},At($));Ge?V[$.originalid]=Ge:delete V[$.originalid]}b.asDraft().replicaInfo=L}Qn.updateMasterFromInstance=oU;function rU(f,g){let y=FC(f,g);return!y||Um(y)?0:bS(y)?2:1}Qn.canGoToMaster=rU;let FC=(f,g)=>{let y=null;for(let b=0,x=g.length;b<x;b++){let V=g[b],L=ze.getReplicaForTemplateNode(f,V);if(L){if(!y)y=L.originalid;else if(y!==L.originalid)return null}}if(!y)return null;let v=f.get(y);return!v||!Jo(v)?null:v};function nU(f,g){if(g.length===1){let v=f.tree.getNode(g[0]?.originalid);if(!v)return;AC(f,v);return}let y=FC(f.tree,g);y&&(ze.showMaster(f.tree,y),AC(f,y))}Qn.goToMaster=nU;function AC(f,g){let y=f.tree.getScopeNodeFor(g),v=f.stores.scopeStore.active;Jo(g)&&ze.showMaster(f.tree,g),y===null&&(f.moveNode(g.id,v.id),y=v),f.stores.scopeStore.select(y.id,{keepHistory:!1}),f.stores.selectionStore.set(g);let b=f.tree.convertFrameToCanvas(g);f.stores.canvasStore.scrollToCenter(de.center(b))}Qn.showNodeOnCanvas=AC;function iU(f,g){f.exitMode(),f.stores.modalStore.set({type:"CodeFileCreation",source:"main_menu",creationType:"Component",parentId:g})}Qn.createCodeComponent=iU;function aU(f){f.exitMode(),f.stores.modalStore.set({type:"CodeFileCreation",source:"main_menu",creationType:"Override"})}Qn.createCodeOverride=aU;function sU(f,g,y,v,b,x,V,{id:L,gesture:w,overrides:O,overrideSize:$,variantName:X,viewportHeight:ve,selectAndCenter:Ge=!0}={}){w&&S(ad(x),"gesture variant should inherit from top level variant");let Qe=b.getPrimaryVariant(),He=null;if(!w){let Vt=new Set(b.getTopLevelVariants().map(dt=>dt.resolveValue("name")??""));X?He=Eo(X,Vt):He=Eo(Ne(x)?"Breakpoint":"Variant",Vt,{startIndex:Vt.size+1,omitCountIfFirst:!1})}if(O||(O=w?void 0:x.replicaInfo?.overrides),He&&Ne(x)){let Vt=Jk(f,g,He,x);Vt&&(O?O=Xi(Vt,O):O=Vt);let dt={};x.children.forEach(it=>{if(!jc(it)||Re(it)&&it.widthType===2||!(it.originalid?g.tree.getNode(it.originalid):it))return;let mo=g.tree.getRect(it);nP(g.tree,it,mo,x,V.width,dt)}),O||(O={}),O=Xi(O,dt)}let _e=ze.create(g.tree,Qe,{owner:L,overrides:O,inheritsFrom:w?x.id:void 0,duplicatedFrom:hl(x)});if(g.tree.insertNode(_e,b.id,-1),!_e)return;let Ke={top:V.y,left:V.x,gesture:w,isBreakpoint:ci(b)?!0:void 0,name:He};if(ve&&(Ke.viewportHeight=ve),$&&(Ke.width=V.width,Ke.widthType=0,Ne(_e)||(Ke.height=V.height,Ke.heightType=0)),_e.set(Ke),ue(b)){let Vt=hs(w)?"variant":w??"variant";tk({variantId:_e.id,variantType:Vt,componentId:b.id})}else Ne(_e)&&Lt("breakpoint_create",{scopeId:b.id,breakpointId:_e.id,width:_e.width});return Ge&&(y?.set(_e.id),v?.scrollToCenter(de.center(V))),_e}Qn.createVariant=sU;function KM(f,g){return f.filter(y=>rs(y)?Vb(y)!==g:Kr(y)?Ok(y)!==g:!0)}function lU(f,g,y){for(let v of g.walk()){let b=_d(f.componentLoader,v);for(let[x,V]of Object.entries(b)){let L=KM(V,y);if(L.length!==V.length){if(Qt(v))f.tree.current(v)?.set({[x]:L});else if(Z(v)){let w={type:"eventhandler",value:L};f.tree.current(v)?.set({[x]:w})}}}}}Qn.removeActionsWithTarget=lU;function cU(f,g){let y=f.tree.getParent(g.id)||f.stores.scopeStore.active;if(qe(y))return!1;let v=f.stores.treeStore.getPartialIndexes();return g.codeComponentIdentifier in v.localSmartComponentNameByIdentifier}Qn.canDetachVariantInstance=cU;function dU(f,g,y,v){if(!y)return null;let b={...Kp(g,f.componentLoader),...Xw(f.componentLoader,g)},x=new Map;y.getTopLevelVariants().forEach(dt=>x.set(dt.id,dt));let V=A(b.variant)&&x.get(b.variant)||y.getPrimaryVariant();S(Fe(V),"Variant must be a frame node");let L=f.tree.getParent(g.id)||f.tree.getScopeNodeFor(g)||f.stores.scopeStore.active;if(qe(L))return null;let w=new Map,O=ql(V,new Map,new Map,w);w.set(g.id,O.id);let $=f.tree.getScopeNodeFor(L);if(z($)||ue($)){let dt=$.getTopLevelReplicaVariants();for(let it of dt){let bo=Yo(it.id,g.id),mo=f.tree.getNode(bo);if(!mo||!Z(mo))continue;let Sn=mo.getResolvedControlPropValues(f.componentLoader).variant;if(!A(Sn))continue;if(v){let _o=v.get(Sn);_o&&(Sn=_o)}let Ce=A(Sn)?x.get(Sn):void 0;if(!Ce||!Fe(Ce)||!Ee(Ce))continue;let Sr=bs(Uw(Ce,f.tree,f.componentLoader,mo,y.id),w),ro={},bt=w.get(V.id)??V.id;if(tl(Ce)){let _o=bs(Ce.replicaInfo.overrides,w,!0);Object.assign(ro,{..._o,[bt]:Jw(_o[bt]??{})})}let Ot=Xi(Sr,ro);if(tl(Ce)){let{opacity:_o,rotation:Kn}=it.replicaInfo.overrides?.[g.id]||{};cu(Ot[bt]??{},{opacity:_o,rotation:Kn})}else if(it.replicaInfo.overrides?.[g.id]){let{opacity:_o,rotation:Kn}=Ce;cu(it.replicaInfo.overrides[g.id]??{},{opacity:_o,rotation:Kn})}let Jt={};mo.heightType===2&&(Jt.heightType=Ce.heightType,Jt.height=Ce.height),mo.widthType===2&&(Jt.widthType=Ce.widthType,Jt.width=Ce.width),f.tree.current(it)?.set({replicaInfo:{...it.replicaInfo,overrides:Xi({...it.replicaInfo.overrides,[g.id]:{}},{...Ot,[bt]:{...it.replicaInfo.overrides[g.id],...Ot[bt],...Jt}})}})}}let X=eu(f.tree,f.componentLoader,g,O,L);cu(X,{opacity:q(V.opacity)?b[V.opacity.id]:V.opacity,rotation:q(V.rotation)?b[V.rotation.id]:V.rotation});let ve=g.constraintValues(),Ge=V.constraintValues();ve.widthType===2&&Ge.widthType!==2&&(ve.widthType=Ge.widthType),ve.heightType===2&&Ge.heightType!==2&&(ve.heightType=Ge.heightType),O.set({...ve,...X,...L?pi(g):void 0,isVariant:!1,isMaster:!1,gesture:void 0,replicaInfo:null,originalid:null,name:g.name??En(f.componentLoader,g)});let Qe=JN(y),He=new Map([...Qe??[],...Object.entries(b)]),_e=new Map;_e.set(y.id,He);let Ke={};for(let dt of O.walk()){if(dt.originalid=null,ns(dt))for(let[it,bo]of Object.entries(dt.getActions(f.componentLoader)))bo&&dt.set({[it]:bo.filter(mo=>Vd(mo)||si(mo))});if(He.size>0){let it=cp(f.tree,y.id,dt,_e,Ke);it&&dt.set(it)}}S(O.id!==V.id);let Vt=L.children.indexOf(g);f.tree.insertNode(O,L.id,Vt);for(let dt of g.children)ut(dt)&&f.tree.moveNode(dt,Ke[dt.id]??O.id);return Wn(f.tree,f.componentLoader,L,w,ut(L)||_r(L)),f.deleteNode(g.id),lt(O)&&f.scheduler.runBeforeNextFrame(()=>{f.stores.overlayStore.showOverlay(f.stores.selectionStore,O,O.parentid)}),O}Qn.detachSmartComponentOrWebPageInstance=dU;function pU(f){qM(f,{openLibrary:!0})}Qn.toggleTeamLibrary=pU;function qM(f,{openLibrary:g}={}){let{modalStore:y,popoverStore:v}=f.stores;y.active.type==="QuickActions"?y.dismiss():(f.cancelTool(),v.active=0,y.set({type:"QuickActions",source:"main_menu",initialCategory:g?{type:"TeamLibraryCategory"}:void 0}),g?Lt("ui_interaction",{page:"main-menu",id:"team-library"}):Lt("ui_interaction",{page:"main-menu",id:"quick-actions"}))}Qn.toggleQuickActions=qM;function uU(f){return!!Ne(f)}Qn.canCreateBreakpoint=uU;function mU(f,g,y,v,b){let{modalStore:x}=f.stores;x.active.type!=="CustomBreakpoint"&&(f.cancelTool(),x.set({type:"CustomBreakpoint",actionType:g,baseNodeId:y,name:v,width:b,source:"undefined"}))}Qn.showCustomBreakpointModal=mU;function fU(f,g,y,v,b,x,V,L){let w={...v,width:b},O=Qn.createVariant(f.componentLoader,f.stores.treeStore,f.stores.selectionStore,f.stores.canvasStore,y,g,w,{overrideSize:!0,variantName:x,viewportHeight:V,selectAndCenter:L});return S(Ne(O),"Created node is not a breakpoint variant"),O}Qn.createBreakpoint=fU;function YM(f){return f.some(g=>g!==f&&Jo(g))}Qn.containsMaster=YM;function eO(f){return Fe(f)||oi(f)||$e(f)||Xe(f)||Qc(f)||RS(f)||Kc(f)}Qn.nodeTypeCanBePrimaryVariantSource=eO;function tO(f,g){return!(!eO(g)||Hk(f,g)||Ee(g)||At(g)||Jo(g)||YM(g))}Qn.canConvertNodeToSmartComponentPrimaryVariant=tO;function oO(f,g){let y=g.length;if(y===0)return!0;let v=g[0];return S(v,"node must be defined",g),y===1&&tO(f.tree,v)}Qn.canMakeSmartComponent=oO;function rO(f,g){if(g.length!==1)return!1;let v=g[0];if(S(v,"node must be defined",g),!Fe(v)||qe(v))return!1;let b=f.tree.get(v.parentid);return Ct(b)}Qn.canMakeWebPagePrimaryBreakpoint=rO;async function hU(f,g){if(!rO(f,g))return;let y=g[0];S(y,"node must be defined",g);let v=y.resolveValue("name");return f.createWebPage({primaryBreakpointTemplateId:y.id,shouldRemovePanelOverrides:!1,startEditingPageTitle:!1,preferredPath:v?Fx(v):void 0})}Qn.convertNodeToWebPagePrimaryBreakpoint=hU;function gU(f,g,y="Template",v,b){let x=new An({...Li,...d_(v),isMaster:!0,isVariant:!0,isBreakpoint:!0,widthType:0,heightType:0,width:v?.width??1200,name:v?.name??"Desktop"}),V=new Nx;x.addChild(V);let L=Eo(y,p_(f)),w=new ZN({baseVariantId:x.id,name:L});S(w.isLoaded(),"A newly created LayoutTemplateNode must be loaded."),w.addChild(x),f.latestTree().insertNode(w);let O=Qp(f,L,b??Sl);return da(f,O,w.id),Lt("layout_template_create",{source:g}),w}Qn.createLayoutTemplate=gU;function yU(f,g,y=!0,v=null,b=Bt(),x="context_menu",V=0){let L=new oh({name:g,id:b});if(S(L.isLoaded(),"A newly created VectorSetNode must be loaded"),f.tree.latestTree().insertNode(L),da(f.tree,v??Ya,L.id),y)for(let O of g_())f.tree.latestTree().insertNode(O,L.id);let w=f.tree.current(L);return S(w,"A newly created VectorSetNode must exist"),f.stores.codeGenerationStore.createVectorSet(w.getVectorSetItems()),Lt("vector_set_create",{source:x,items:y?3:V}),L}Qn.createVectorSet=yU;async function CU(f,g,y){let v=f.tree.get(y);if(!Zt(v))return;let b=v.isLoaded()?v:await v.load();if(!b)return;let x=b.children.find(mr);if(!mr(x))return;let V=f.tree.getRect(x);f.scheduler.process(()=>{let L=sM(f,g),w=[],O=Nr(x)?{fillEnabled:x.fillEnabled,fillType:x.fillType,fillColor:x.fillColor}:void 0;for(let $ of L){let X=f.tree.get($);if(!X)continue;let ve=f.tree.getIndex(X),Ge=Gl(f.tree,b,X,V,V.width),Qe=aM(X,Ge,O);if(mr(Qe)){if(f.tree.insertNode(Qe,b.id),w.push(Qe),DC(f,Qe.id,V),Lt("vector_set_item_create",{source:"context_menu"}),y!==f.stores.scopeStore.active.id){let He=new ea({...lM(X),codeComponentIdentifier:Oi("vector",Qe.id,"default").value,width:X.width,height:X.height,widthType:0,heightType:0,slotsAreChildNodes:at.isOn("componentSlotsAreChildNodes"),name:X.name});f.tree.insertNode(He,X.parentid,ve)}f.tree.removeNode(X)}}w.length!==0&&(f.stores.scopeStore.select(v.id,{keepHistory:!1}),f.stores.selectionStore.set(w),f.stores.chromeStore.layersExpanded=!0,f.stores.chromeStore.contentPanelTab="Layers",f.stores.codeGenerationStore.createVectorSet(w))})}Qn.addToVectorSet=CU;function SU(f,g,y="Icon Set",v="context_menu"){let b=new oh({name:y});S(b.isLoaded(),"A newly created VectorSetNode must be loaded");let x=sM(f,g),V=0,L=[];for(let w of x){let O=f.tree.get(w);if(!O)continue;let $=f.tree.getRect(O),X=aM(O,{x:V,y:0});if(!mr(X))continue;let ve=f.tree.getIndex(O);L.push(X),b.addChild(X),V+=$.width*2;let Ge=new ea({...lM(O),codeComponentIdentifier:Oi("vector",X.id,"default").value,width:O.width,height:O.height,widthType:0,heightType:0,slotsAreChildNodes:at.isOn("componentSlotsAreChildNodes"),name:O.name});f.tree.insertNode(Ge,O.parentid,ve),f.tree.removeNode(O)}f.tree.latestTree().insertNode(b),da(f.tree,Ya,b.id),f.stores.codeGenerationStore.createVectorSet(L),f.stores.scopeStore.select(b.id,{keepHistory:!1}),f.stores.selectionStore.set(L),f.stores.chromeStore.layersExpanded=!0,f.stores.chromeStore.contentPanelTab="Layers",Lt("vector_set_create",{source:v,items:x.size})}Qn.createVectorSetFromNodes=SU;function vU(f,g,y,v,b){let x=y.clone({children:[],name:"Vector"}),{scopeStore:V,codeGenerationStore:L,selectionStore:w,canvasStore:O}=f;V.insertNode(x,g.id),S(Re(x),"Vector must be pinnable."),x.set({top:v.y,left:v.x}),L.createVectorSet([x]),w.set(x.id),O.scrollToCenter(de.center(v)),Lt("vector_set_item_create",{source:b})}Qn.createVectorSetItem=vU})(c_||={});var Li={height:XN,left:0,top:0,layout:"stack",stackDirection:"vertical",stackAlignment:"center",stackDistribution:"start",stackWrapEnabled:!1,gap:0,padding:0,paddingPerSide:!1,paddingLeft:0,paddingBottom:0,paddingTop:0,paddingRight:0,overflow:"clip"};function d_(e){if(!e||!dr(e)||!Zo(e)||!Nr(e))return;let t=Wd(e),o={gap:e.resolveValue("gap")??Li.gap,padding:t.perSide?Li.padding:t.top,paddingPerSide:t.perSide??Li.paddingPerSide,paddingLeft:t.left??Li.paddingLeft,paddingBottom:t.bottom??Li.paddingBottom,paddingTop:t.top??Li.paddingTop,paddingRight:t.right??Li.paddingRight,fillEnabled:e.resolveValue("fillEnabled"),fillType:e.resolveValue("fillType"),fillColor:e.resolveValue("fillColor"),fillLinearGradient:e.resolveValue("fillLinearGradient"),fillRadialGradient:e.resolveValue("fillRadialGradient"),fillConicGradient:e.resolveValue("fillConicGradient"),fillImage:B(e.fillImage)?void 0:e.fillImage,fillImageOriginalName:e.resolveValue("fillImageOriginalName"),fillImageResize:e.resolveValue("fillImageResize"),fillImagePixelWidth:e.resolveValue("fillImagePixelWidth"),fillImagePixelHeight:e.resolveValue("fillImagePixelHeight"),fillImagePositionX:e.resolveValue("fillImagePositionX"),fillImagePositionY:e.resolveValue("fillImagePositionY"),fillImageTileSize:e.resolveValue("fillImageTileSize")};return Ld(e)&&(o.fillImageAlts=e.fillImageAlts?[...e.fillImageAlts]:void 0),o}function p_(e){let t=new Set;return e.root.children.forEach(o=>{if(!Be(o))return;let r=o.resolveValue("name");r&&t.add(r)}),t}function cM(e){return!(Qo(e)||an(e)||In(e))}function mC(e){return!(xo(e)||an(e)||In(e)||Gt(e))}function u_(e){return Ir(e)&&e.isVisible()?!0:mC(e)}function iM(e){return cM(e)?Gt(e)?Ir(e):!0:!1}function Ic(e,t){if(xt(t)){let o=pn(e.tree,t.dataIdentifier);if(o)return o.id}return null}function m_(e,t,o){if(o){let n=Ic(e,o);if(n)return n;for(let i of o.ancestors()){let a=Ic(e,i);if(a)return a}}let r=Ic(e,t);if(r)return r;if(o)for(let n of o.walk()){let i=Ic(e,n);if(i)return i}for(let{node:n,skipChildren:i}of t.walkWithSkipChildren())if(o&&n.id===o.id)i();else{let a=Ic(e,n);if(a)return a}return null}function aM(e,{x:t,y:o},r){if(Ht(e)){let n=new On({...r,isVectorSetItem:!0,width:e.width,height:e.height,left:t,top:o,name:e.name}),i=e.clone({x:0,y:0});return n.addChild(i),n}return e.clone({...r,isVectorSetItem:!0,left:t,top:o})}function sM(e,t){return new Set(t.map(o=>{if(!o)return null;if($e(o))return o.getPrimaryId();let r=e.tree.getAncestorThatMatches(o,i=>f_(e,i),!0,!0);if(!r)return null;let n=e.tree.getNodeParent(r);return n&&$e(n)?n.getPrimaryId():r.getPrimaryId()}))}function f_(e,t){return Ht(t)&&e.tree.isRootVectorNode(t)}function lM(e){return Re(e)?{top:e.top,bottom:e.bottom,left:e.left,right:e.right,centerAnchorX:e.centerAnchorX,centerAnchorY:e.centerAnchorY,constraintsLocked:e.constraintsLocked}:{top:e.y,left:e.x}}var h_="rgb(0, 153, 255)",pC={fillType:"color",fillColor:h_,fillEnabled:!0},uC={isVectorSetItem:!0,top:0,width:40,height:40,autoSize:!1},g_=()=>{let e=new sh({...pC,x:-3,y:-3,width:46,height:46,polygonSides:3,centered:!0,radius:1}),t=new sh({...pC,x:0,y:0,width:40,height:40,polygonSides:4,centered:!0,radius:1}),o=new Kx({...pC,x:2,y:2,width:36,height:36}),r=new On({...uC,name:"Triangle"});r.addChild(e);let n=new On({...uC,left:80,name:"Diamond"});n.addChild(t);let i=new On({...uC,left:160,name:"Oval"});return i.addChild(o),[r,n,i]};function Di(e,t){return`${e??""}.${t}`}function Nc(e,t){return`${e??""}[${t}]`}function Vwe(e){let t=[],o=e.split(".");for(let r of o){let[n,i]=r.split("[");if(n.length!==0&&t.push({type:"object",key:n}),i){let a=i.slice(0,-1);S(a.length>0),t.push({type:"array",id:a})}}return t}var xc=e=>e;function wwe(e){return e.filter(Uo)}var Pm=p`params`,Vm={type:"siteMetadata",localIdName:"siteMetadata",localId:cr("siteMetadata","siteMetadata")};function lLe(e){return{type:"webPageMetadata",localIdName:e,localId:cr("webPageMetadata",e)}}var cLe=xc(async(e,t)=>{let{assetMap:o,componentLoader:r,treeStore:n,modulesStore:i}=t,a=new Hn(o),s=new Vr,l=new Xr("siteMetadata",r,i,s),c=new Dn(e,s),d=new Ln(s),u=new gn(e,r,l,s,void 0,n,i),m=new zn(e,n,c,d,s,l,a),h=new Jn(s,c,m,a,u),C=new Pa(e,c,n,r,l,s,d,h,i,"siteMetadata"),T=new Mr(r,d,void 0,l,c,C,void 0,h,i,"siteMetadata"),N=pM(e,a,T,c,C,void 0,void 0,void 0);return[{type:"siteMetadata",revision:void 0,source:uM(e,N,l,d,C,T,c,void 0),artifacts:{assets:a.keys}}]}),dLe=xc(async(e,t,o)=>{let{componentLoader:r,treeStore:n,modulesStore:i,assetMap:a}=t,{serializationId:s}=o,l=new Hn(a),c=new Vr,d=new Xr("webPageMetadata",r,i,c),u=new Dn(e,c),m=new Ln(c),h=new gn(e,r,d,c,void 0,n,i),C=new zn(e,n,u,m,c,d,l),T=new Jn(c,u,C,l,h),N=new Pa(e,u,n,r,d,c,m,T,i,"webPageMetadata"),P=new Mr(r,m,void 0,d,u,N,void 0,T,i,"webPageMetadata"),R=e.getVariableControlMap(n.tree,void 0,r,r.activeBundleHash),W=pM(e,l,P,u,N,C_(n.tree,r,e,d),S_(d),R);W.viewport=await v_(e);let M=Object.entries(e.getBreakpointValues()).map(([J,K])=>({hash:_t(J),mediaQuery:BN(K)}));W.breakpoints=M;let H=uT(e);return W.elements=H,W.serializationId=s,[{type:"webPageMetadata",source:uM(e,W,d,m,N,P,u,R),artifacts:{assets:l.keys},revision:e.moduleSourceRevision}]});function pLe(e,t){let o=new Set;function r(n){let i=Al(),a=n.matchAll(i);for(let[,s]of a)s&&t?.has(s)&&o.add(s)}for(let n in e.webMetadata){let i=n,a=e.webMetadata[i];switch(i){case"title":case"description":case"socialImage":A(a)&&r(a),q(a)&&o.add(a.id);break;case"noIndex":case"noIndexSite":if(!B(a))continue;q(a)?o.add(a.id):Xt(a)?tn(a)&&o.add(a.startValue.id):G(a);break;case"favicon":case"faviconDark":case"appleTouchIcon":case"googleAnalyticsTrackingId":case"reducedMotion":case"language":case"languageTitle":case"adaptLayoutToTextDirection":case"canonicalURL":case"customCanonicalURL":case"rewriteCanonicalHostname":case"rewriteCanonicalPath":case"optOutOfHTMLPlugin":case"automaticLocale":case"preserveQueryParams":case"enableFormsUTMTracking":case"translatePagePaths":case"translatePagePathsWithAI":break;default:}}if(e.titleLocalized)for(let n of Object.values(e.titleLocalized))A(n.value)&&r(n.value);if(e.descriptionLocalized)for(let n of Object.values(e.descriptionLocalized))A(n.value)&&r(n.value);return o}function pM(e,t,o,r,n,i,a,s){let l={},c=n.add(xm(e,e.webMetadata?.title,o,r,s)??i,e.titleLocalized,(C,T)=>(S(T.variables),xm(e,e.titleLocalized?.[C]?.value,T.valueTransforms,T.variables,s)));F(c)||(l.title=c);let d=n.add(xm(e,e.webMetadata?.description,o,r,s)??a,e.descriptionLocalized,(C,T)=>(S(T.variables),xm(e,e.descriptionLocalized?.[C]?.value,T.valueTransforms,T.variables,s)));if(F(d)||(l.description=d),e.webMetadata?.favicon){let C=t.resolve(e.webMetadata.favicon);S(C,"Favicon is not a valid asset reference"),l.favicon=C.src}let u=e.webMetadata?.socialImage;if(q(u)){let C=$t(u.id,e.id),T=r.create(C);l.socialImage=o.wrapInToImageSrc(T)}else if(u){let C=t.resolve(u);S(C,"Social image is not a valid asset reference"),l.socialImage=C.src}let m="noindex",h="max-image-preview:large";if(B(e.webMetadata?.noIndex)){let C=dM(e.webMetadata.noIndex,e.id,r,o);l.robots=p`${C} ? ${h} : ${m}`}else e.webMetadata?.noIndex===!0?l.robots=m:l.robots=h;if(!F(e.webMetadata?.noIndexSite))if(B(e.webMetadata?.noIndexSite)){let C=dM(e.webMetadata.noIndexSite,e.id,r,o);l.framerSearch={index:C}}else l.framerSearch={index:!e.webMetadata?.noIndexSite};return l}function dM(e,t,o,r){let n,i;if(q(e)){let a=$t(e.id,t);n=o.create(a),i=n}else if(Xt(e)){S(tn(e),"Fetch is not supported for no index");let a=$t(e.startValue.id,t);n=o.create(a),i=n;for(let s of e.transforms)i=r.wrapInValueTransform(i,s,void 0,void 0)}else G(e);return p`${n} !== undefined && ${i} === false`}function y_(e,t,o,r){if(!o||!xt(e))return;let n=r.getBindings(e.id);if(n.size===0)return;let i=new Set(n.keys()),a=t.addImport("framer",{exportSpecifier:"QueryEngine"}),s=t.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"});function l(T){let N=t.addModuleImport(T);return S(N,"Can't import collection"),N}let c=gs(e),d=new Set,u=Sp(o,i,d,c,l),m=Cp(e.dataIdentifier,o,d,c,l),h=new Y({from:m,select:u,where:I.fn(s,p`pathVariables`,c)}),C=new Y({from:m,select:u});return p.joinLines(p`export async function fetchMetadata(pathVariables, activeLocale) {`,p`  const queryEngine = new ${a}();`,p``,p`  const query = ${h};`,p``,p`  const result = await queryEngine.query(query, activeLocale);`,p`  if (result.length === 0) {`,p`    throw new Error("No data matches pathVariables");`,p`  }`,p``,p`  const params = result[0];`,p`  return metadata(params, activeLocale);`,p`}`,p``,p`export async function fetchAllMetadata(pathVariableKeys, activeLocale) {`,p`  const queryEngine = new ${a}();`,p``,p`  const query = ${C};`,p``,p`  for (const pathVariableKey of pathVariableKeys) {`,p`    query.select.push({`,p`      collection: ${c},`,p`      name: pathVariableKey,`,p`      type: "Identifier",`,p`    });`,p`  }`,p``,p`  const results = await queryEngine.query(query, activeLocale);`,p``,p`  return results.map(result => ({`,p`    metadata: metadata(result, activeLocale),`,p`    pathVariables: Object.fromEntries(`,p`      pathVariableKeys.map(pathVariableKey => [pathVariableKey, result[pathVariableKey]])`,p`    )`,p`  }));`,p`}`)}function uM(e,t,o,r,n,i,a,s){let l=a.getBindings(e.id),c=[];for(let[m,h]of l){let C=p`${Pm}?.[${m}]`,T=s?.get(m);if(T&&T.type==="enum"){let P=i.wrapInValueTransform(C,{name:"enumToDisplayName"},T);C=p`${C} !== undefined ? ${P} : undefined`}let N=p`const ${h} = ${C}`;c.push(N)}let d=p.joinLines(p`export default function metadata(${Pm}, ${fe.activeLocale}) {`,...c,p`return ${t}`,p`}`),u=z(e)?y_(e,o,s,a):void 0;return p.joinSections(p.linesFrom(o.statements),...n.list(),...r.list(),d,u,p`export const metadataVersion = 1`)}function xm(e,t,o,r,n,i){if(yo(t))return;let a=Al();return nt.replaceAll(t,a,(s,l)=>{let[c,d]=sp(l,i);if(!n?.has(c))return s;let u=$t(c,e.id),m=r.create(u),h=m;return n?.get(c)?.type==="responsiveimage"&&(h=o.wrapInToImageSrc(h)),h=o.wrapInTemplateFilters(h,d),p`${m} !== undefined ? ${h} : ${s}`})}function uLe(e,t,o,r){let n=r?.title,i=Pc(e,t,o);return n||i}function C_(e,t,o,r){let n=r.addImport(`../${Vm.localId}`,{exportSpecifier:"default",importBinding:"siteMetadata"}),i=p`${n}(${Pm}, ${fe.activeLocale}).title`,a=Pc(e,t,o);return p`${i} || ${a}`}function S_(e){let t=e.addImport(`../${Vm.localId}`,{exportSpecifier:"default",importBinding:"siteMetadata"});return p`${t}(${Pm}, ${fe.activeLocale}).description`}function Pc(e,t,o){if(xt(o)){let i=t.dataForIdentifier(o.dataIdentifier);if(i?.name)return i.name+" Detail"}let r=KI(e,o);return ms(r??"/")}async function v_(e){let t=e.isLoaded()?e:await e.load();return t?t.getReplicaVariants().length>0?"width=device-width":`width=${t.getPrimaryVariant().width}`:"width=device-width"}function jt(e,t=!1){let o=(t?ds(e):e).trim();return o===""?0:o.split(/\W+\b/).length}function fC(e){return ue(e)||z(e)||Be(e)}function yLe(e){return fC(e)||Rt(e)||$r(e)||Lo(e)||bn(e)}function NLe(e){qt(lf(e),"Array gallery control must be Array of Object controls");let t=e.control,o;for(let r in t.controls){qt(!o,"Multiple item properties found in gallery control");let n=t.controls[r];qt(n?.type==="responsiveimage"),o=[r,n]}return qt(o,"Gallery control must have at least one item property"),o}function xLe(e,t){if(!rl(t)||!t.value)return;let o=t.value[e];if(o?.type==="image")return o}function PLe(e){return e?e.filter(t=>!T_(t)):[]}function T_(e){if(!rl(e)||!e.value)return!1;let t=Object.values(e.value);if(t.length!==1)return!1;let o=t[0];return sv(o)?F(o.value):!1}function mM(e){if(!lf(e))return!1;let t=Object.values(e.control.controls);return t.length!==1?!1:t[0]?.type==="responsiveimage"}function fM(e){return`${e??"Field"} is required`}function hM(e,t){return`Exceeded max length by ${oI(e-t,"character","characters")}`}function LLe(e){return`Must have at least ${e.minCount} ${gM(e)}`}function DLe(e){return`Must have at most ${e.maxCount} ${gM(e)}`}var FLe="Slug value is already taken and must be unique";function gM(e){return mM(e)?"images":"items"}function hC(e,t){let o=t.getRouteSegmentRootNode().getRouteSegmentIdToRawPathMap(t).get(e.id);return o?Yi(o):"Unknown"}function b_(e,t,o){if(e.id===t.root.homePageNodeId)return"Home";let n=Si(t,e);if(!n)return"Unknown";let i=e.dataIdentifier;if(!i)return Yi(n);let a=o.dataForIdentifier(i);return a?Yi(QI(a,n)):Yi(n)}function I_(e,t){let o=t.getParent(e.id);return Rt(o)?mp(o,e)??"Unknown":"Unknown"}function GLe(e,t,o){if(Lo(e))return"Site";if(bn(e))return hC(e,t);if(Rt(e))return e.resolveValue("name")||"Unknown";if($r(e))return I_(e,t)||"Unknown";if(z(e))return b_(e,t,o);if(ue(e))return e.resolveValue("name")||"Unknown";if(Be(e))return e.resolveValue("name")||"Unknown";G(e,"Invalid localization scope")}function yM(e){let t=cs(e);for(let o of t.querySelectorAll("*"))o.tagName!=="BR"&&(o.removeAttribute("class"),o.removeAttribute("style"),o.removeAttribute("data-styles-preset"));return t.innerHTML}function _De(e){return e==="hidden"?null:e}var jDe=["new","needsReview","done","hidden"],N_="controlPropKey";function UDe(e){return N_ in e}function JDe(e){return"groups"in e}var x_="collectionNodeId";function XDe(e){return x_ in e}var P_={string:!0,richtext:!0,image:!0,enum:!0,link:!0,slug:!0};function V_(e){return e in P_}function vM(e){return V_(e.type)}var R_={string:!0,richtext:!0,image:!0,link:!0};function TM(e){return e in R_}function k_(e){return e?e.type==="richtext"?!0:e.type==="RichTextNode"?e.textType==="rich-text":!1:!1}function ZDe(e){return e?e.type==="image"||e.type==="FrameNode":!1}function QDe(e){return e?e.type==="nodeLink"||e.type==="link":!1}function KDe(e){return e?e.type==="RootNode"||e.type==="WebPageNode":!1}function qDe(e){return e?.type==="slug"||w_(e)}function w_(e){return e?.type==="RouteSegmentNode"}function L_(e){return yo(e)||e===""||JR(e)}function YDe(e,t){if(!e||k_(e))return!1;if(e.value.includes(`
`))return!0;let o=e.localizedValues[t.id];return o?!!o.value?.includes(`
`):!1}function bM(e,t,o){return t?t.hash!==o||t.needsReview?"needsReview":"done":L_(e)?"done":"new"}function Mt(e,t,o,r,n,i){return Object.fromEntries(t.map(a=>{let s=o[a.id];if(n?.[a.id])return[a.id,"warning"];if(i){let l=i(a);if(l)return[a.id,l]}return[a.id,bM(e,s,r)]}))}function CC(e){return t=>e[t.id]?null:"done"}function SC(e,t,o){return r=>{if(A(e)&&t){let n=t[r.id];if(n)return bM(e,n,o)}return null}}var Tt={};Object.freeze(Tt);function D_(e,t,o,r,n,i,a){let s=(l,c,d)=>{if(q(c)||!A(c)||c.length===0&&!d)return;let u=rt(c),m=d??Tt,h=Mt(c,i,m,u);a.push({type:e.name,transformId:e.id,keyPath:Di(t,l),nodeId:n.id,scopeId:r.id,property:l,value:c,controlPropKey:o,controlPropName:void 0,ancestorControlKeyPath:void 0,valueWordCount:jt(c),hash:u,localizedValues:m,localizedValueStatuses:h,managedByPluginButUserEditable:!1})};s("truthy",e.truthy,e.truthyLocalized),s("falsy",e.falsy,e.falsyLocalized),e.fallback&&s("fallback",e.fallback.value,e.fallback.valueLocalized)}function F_(e,t,o,r,n,i,a,s){if(t.outputType!=="string")return;for(let u of t.cases){if(tn(e)&&e.startValue.id===BT)break;if(q(u.to)||!A(u.to)||u.to.length===0&&!u.toLocalized)continue;let m=rt(u.to),h=u.toLocalized??Tt,C=Mt(u.to,a,h,m),T=Di(o,"cases");s.push({type:"convertFromEnum",transformId:t.id,keyPath:Nc(T,u.id),nodeId:i.id,scopeId:n.id,caseId:u.id,isDefaultCase:!1,value:u.to,ancestorControlKeyPath:void 0,controlPropKey:r,controlPropName:void 0,valueWordCount:jt(u.to),hash:m,localizedValues:h,localizedValueStatuses:C,managedByPluginButUserEditable:!1})}if(!t.default||q(t.default)||!A(t.default))return;let l=rt(t.default),c=t.defaultLocalized??Tt,d=Mt(t.default,a,c,l);s.push({type:"convertFromEnum",transformId:t.id,keyPath:Di(o,"default"),nodeId:i.id,scopeId:n.id,caseId:null,isDefaultCase:!0,ancestorControlKeyPath:void 0,value:t.default,controlPropKey:r,controlPropName:void 0,valueWordCount:jt(t.default),hash:l,localizedValues:c,localizedValueStatuses:d,managedByPluginButUserEditable:!1})}function km(e,t,o,r,n,i,a){if(!(!CS(o.outputType)||o.outputType!=="string")){for(let s of o.transforms)if(yS(s))switch(s.name){case"convertFromEnum":{F_(o,s,r,n,e,t,i,a);break}case"convertFromBoolean":{D_(s,r,n,e,t,i,a);break}case"prefix":case"suffix":{if(q(s.value)||s.value.length===0&&!s.valueLocalized)return;let l=rt(s.value),c=s.valueLocalized??Tt,d=Mt(s.value,i,c,l);a.push({type:s.name,transformId:s.id,keyPath:Nc(r,s.id),controlPropKey:n,controlPropName:void 0,ancestorControlKeyPath:void 0,nodeId:t.id,scopeId:e.id,value:s.value,valueWordCount:jt(s.value),hash:l,localizedValues:c,localizedValueStatuses:d,managedByPluginButUserEditable:!1});continue}default:}}}function A_(e,t,o,r,n,i){if(Xt(o.textContent)){if(!wt(e,o,"textContent"))return;km(t,o,o.textContent,o.id,o.id,r,n);return}if(B(o.htmlContent)||B(o.textContent))return;let a=wt(e,o,"html"),s=wt(e,o,"htmlLocalized");if(!a&&!s)return;let l=o.html,c=ds(l),d=yp(l),u=i==="canvasHtmlAsTextContentIfPossible"?d:"rich-text",m=u==="text"?c:yM(l);if(u==="text"&&!s&&Gt(o)){let P=e.getNode(o.originalid);if(P&&ds(P.html)===c)return}let C=rt(d===u?m:c),T=o.htmlLocalized??Tt,N=Mt(m,r,T,C);n.push({type:"RichTextNode",keyPath:E_(o.id),nodeId:o.id,scopeId:t.id,value:m,valueWordCount:jt(m,!0),textType:u,hash:C,localizedValues:T,localizedValueStatuses:N,managedByPluginButUserEditable:!1,inherited:!s})}function E_(e){return`${e}_html`}function CM(e){if(Lo(e))return"RootNode";if(z(e))return"WebPageNode";G(e)}function SM(e,t,o,r){let n={};for(let i of t){let a=o[i.id];if(!a||!a.value)continue;let s=GN({collectionData:r,componentLoader:e,type:"id",value:a.value});s&&(n[i.id]=s)}return n}function IM(e,t,o,r,n,i){let a=null;if(z(r)&&(a=t.dataForIdentifier(r.dataIdentifier)),r.webMetadata?.title||r.titleLocalized){let s=r.webMetadata?.title??e.root.webMetadata?.title??"",l=rt(s),c=r.titleLocalized??Tt,d=SM(t,n,c,a),u=Mt(s,n,c,l,d);i.push({type:CM(r),keyPath:`${r.id}_title`,nodeId:r.id,scopeId:o.id,value:s,valueWordCount:jt(s),hash:l,localizedValues:c,localizedValueStatuses:u,managedByPluginButUserEditable:!1,key:"title",dataIdentifier:za(r)?r.dataIdentifier:void 0,warnings:d})}if(r.webMetadata?.description||r.descriptionLocalized){let s=r.webMetadata?.description??e.root.webMetadata?.description??"",l=rt(s),c=r.descriptionLocalized??Tt,d=SM(t,n,c,a),u=Mt(s,n,c,l,d);i.push({type:CM(r),keyPath:`${r.id}_description`,nodeId:r.id,scopeId:o.id,value:s,valueWordCount:jt(s),hash:l,localizedValues:c,localizedValueStatuses:u,managedByPluginButUserEditable:!1,key:"description",dataIdentifier:za(r)?r.dataIdentifier:void 0,warnings:d})}}function M_(e){return`${e}_fillImageLocalized`}function O_(e,t,o,r,n){if(!so(o)||!A(o.fillImage)||o.fillImage.length===0)return;let i=wt(e,o,"fillImage"),a=wt(e,o,"fillImageLocalized"),s=wt(e,o,"altAttribute"),l=wt(e,o,"altAttributeLocalized");if(!i&&!a&&!s&&!l)return;let c=o.altAttribute??ls,d=rt(c),u=o.altAttributeLocalized??Tt,m=o.fillImage,h=rt(m),C=o.fillImageLocalized??Tt,T=Mt(c,r,u,d,void 0,SC(m,C,h));n.push({type:"FrameNode",keyPath:M_(o.id),nodeId:o.id,scopeId:t.id,value:c,valueWordCount:jt(c),hash:d,localizedValues:u,localizedValueStatuses:T,managedByPluginButUserEditable:!1,inherited:!l,supportsAlt:!0,image:m,imageHash:h,imageLocalizedValues:C,imageInherited:!a,positionX:Zm(o.fillImagePositionX)?o.fillImagePositionX:void 0,positionY:Zm(o.fillImagePositionY)?o.fillImagePositionY:void 0,supportsFocalPoint:!0})}function NM(e,t,o,r){if(!at.isOn("localizedLinks"))return;let n=t.getLink();if(!cn(n))return;let i=n.url,a=rt(i),s=t.linkLocalized??Tt,l=Mt(i,o,s,a,void 0,CC(s));r.push({type:"nodeLink",keyPath:`${t.id}_linkLocalized`,nodeId:t.id,scopeId:e.id,value:i,valueWordCount:i?1:0,hash:a,localizedValues:s,localizedValueStatuses:l,managedByPluginButUserEditable:!1,aiTranslationDisabled:!0})}function W_(e,t,o,r,n){O_(e,t,o,r,n),NM(t,o,r,n)}function wm(e){return!!(TM(e)||e==="array"||e==="object")}function Rm(e,t,o){return`${e}.${t}.${o??""}`}function z_(e){if(z(e)&&gd(e))return e.layoutTemplateIdentifier;if(Z(e))return e.codeComponentIdentifier}function B_(e,t,o,r,n,i){let a=z_(r);if(!a)return;let s=t.componentForIdentifier(a);if(!s)return;let l=r.getControlProps(s.properties);function c(d,u,m,h=void 0){let C=u.type;if(C==="array"&&nS(u.value)){if(m.type!=="array")return;let T=m.control;for(let N of u.value){if(!wm(N.type))continue;let P=Nc(h,N.id);c(d,N,T,P)}}if(C==="object"&&Ue(u.value)){if(m.type!=="object")return;for(let T in u.value){let N=u.value[T];if(!N||!wm(N.type))continue;let P=Di(h,T),R=m.controls[T];R&&c(d,N,R,P)}}if(TM(C))switch(C){case"string":{if(!wt(e,r,kt(d))||m.type==="string"&&(m.preventLocalization||m.optional&&We(u.value))||(Xt(u.value)&&km(o,r,u.value,Di(r.id,d),d,n,i),!A(u.value)))break;let T=u.value,N=rt(T),P=u.valueLocalized??Tt,R=Mt(T,n,P,N);i.push({type:"string",keyPath:Rm(r.id,d,h),controlPropKey:d,controlPropName:m.title||Tn(d),ancestorControlKeyPath:h,nodeId:r.id,scopeId:o.id,value:T,valueWordCount:jt(T),hash:N,localizedValues:P,localizedValueStatuses:R,managedByPluginButUserEditable:!1});break}case"link":{if(!at.isOn("localizedLinks")||!wt(e,r,kt(d))||(Xt(u.value)&&km(o,r,u.value,Di(r.id,d),d,n,i),!cn(u.value)))break;let T=u.value.url,N=rt(T),P=u.valueLocalized??Tt,R=Mt(T,n,P,N,void 0,CC(P));i.push({type:"link",keyPath:Rm(r.id,d,h),controlPropKey:d,controlPropName:m.title||Tn(d),ancestorControlKeyPath:h,nodeId:r.id,scopeId:o.id,value:T,valueWordCount:T?1:0,hash:N,localizedValues:P,localizedValueStatuses:R,managedByPluginButUserEditable:!1,aiTranslationDisabled:!0});break}case"richtext":{if(C!=="richtext"||!A(u.value)||m.type==="richtext"&&m.preventLocalization||!wt(e,r,kt(d)))break;let T=u.value,N=rt(T),P=u.valueLocalized??Tt,R=Mt(T,n,P,N);i.push({type:"richtext",keyPath:Rm(r.id,d,h),controlPropKey:d,controlPropName:m.title||Tn(d),ancestorControlKeyPath:h,nodeId:r.id,scopeId:o.id,value:T,valueWordCount:jt(T,!0),hash:N,localizedValues:P,localizedValueStatuses:R,managedByPluginButUserEditable:!1,contentType:void 0});break}case"image":{if(!u||u.type!=="image"||!A(u.value)||m.type!=="responsiveimage"&&m.type!=="image"||!wt(e,r,kt(d)))break;let T=m.type==="responsiveimage",N=u.alt??ls,P=rt(N),R=T?u.altLocalized??Tt:Tt,W=u.value,M=rt(W),H=u.valueLocalized??Tt,J=Mt(N,n,R,P,void 0,SC(W,H,M)),K=m.type==="responsiveimage";i.push({type:"image",keyPath:Rm(r.id,d,h),controlPropKey:d,controlPropName:m.title||Tn(d),ancestorControlKeyPath:h,nodeId:r.id,scopeId:o.id,value:N,valueWordCount:jt(N),hash:P,localizedValues:R,localizedValueStatuses:J,managedByPluginButUserEditable:!1,supportsAlt:T,image:W,imageHash:M,imageLocalizedValues:H,supportsFocalPoint:K,positionX:K?u.positionX:void 0,positionY:K?u.positionY:void 0});break}default:}}for(let d in l){let u=l[d];if(!u)continue;let m=s.properties[d];m&&c(d,u,m)}}function $_(e,t,o,r){switch(t.bindingType){case"form":{let n=t.formSelectOptions;if(!n||n.length===0)return;for(let i of n){let a=i.title;if(!a)continue;let s=i.titleLocalized??Tt,l=rt(a),c=Mt(a,o,s,l);r.push({type:"FormSelectNode",keyPath:`${t.id}_${i.id}`,nodeId:t.id,optionId:i.id,scopeId:e.id,value:a,valueWordCount:jt(a),hash:l,localizedValues:s,localizedValueStatuses:c,managedByPluginButUserEditable:!1})}break}case"variable":{if(!t.variableBinding||!Ro(e)||!qo(e))return;let n=e.getVariable(t.variableBinding.id);if(!n)return;ja(n,jn(e))&&r.push(gC(t,e,o,"allItemsLabel",t.allItemsLabelWithDefault,t.allItemsLabelLocalized)),n.type==="boolean"&&(r.push(gC(t,e,o,"booleanTrueLabel",t.booleanTrueLabelWithDefault,t.booleanTrueLabelLocalized)),r.push(gC(t,e,o,"booleanFalseLabel",t.booleanFalseLabelWithDefault,t.booleanFalseLabelLocalized)));break}default:G(t.bindingType)}}function gC(e,t,o,r,n,i){let a=i??Tt,s=rt(n),l=Mt(n,o,a,s);return{type:"formSelectGenericOption",keyPath:`${e.id}_${r}`,nodeId:e.id,key:r,scopeId:t.id,value:n,valueWordCount:jt(n),hash:s,localizedValues:a,localizedValueStatuses:l,managedByPluginButUserEditable:!1}}function G_(e,t,o,r,n){let i=`${o.id}_placeholder`;if(B(o.formInputPlaceholder)){if(q(o.formInputPlaceholder)||!wt(e,o,"formInputPlaceholder"))return;km(t,o,o.formInputPlaceholder,i,o.id,r,n);return}if(!o.formInputPlaceholder||!wt(e,o,"formInputPlaceholder"))return;let a=rt(o.formInputPlaceholder),s=o.formInputPlaceholderLocalized??Tt;n.push({keyPath:i,type:"FormPlainTextInputNode",nodeId:o.id,scopeId:t.id,value:o.formInputPlaceholder,valueWordCount:jt(o.formInputPlaceholder),hash:rt(o.formInputPlaceholder),localizedValues:s,localizedValueStatuses:Mt(o.formInputPlaceholder,r,s,a),managedByPluginButUserEditable:!1})}function xM(e,t,o,r,n,i,a){z(r)&&IM(e,t,o,r,n,i),Ve(r)&&A_(e,o,r,n,i,a),(Z(r)||z(r))&&B_(e,t,o,r,n,i),Fe(r)&&W_(e,o,r,n,i),(oi(r)||$e(r))&&NM(o,r,n,i),Qc(r)&&G_(e,o,r,n,i),Kc(r)&&$_(o,r,n,i)}var PM=(e,t)=>t?`${e.update}-${t.update}`:e.update.toString();function Rc(e,t,o,r,n,i,a,s){if(t.mutable||o?.mutable)return;let l=t.cache.localizationSourceGroup;if(l&&!(l.update!==PM(t,o)||l.componentHash!==n||l.locales!==r||l.parentVariables!==i||!en(l.subGroups,a)||!en(l.settings,s))&&!(kl(e,t)&&l.includedLocales!==t.includedLocales))return l}function kc(e,t,o,r,n,i,a,s,l){t.mutable||o?.mutable||(t.cache.localizationSourceGroup={update:PM(t,o),locales:n,componentHash:i,parentVariables:a,group:r,includedLocales:kl(e,t)?t.includedLocales:void 0,subGroups:s,settings:l})}function H_(e,t,o,r,n,i,a){let s=z(o)&&o.abTestingParentId!==void 0;if(kM(e,o)&&!s)return;let l=a==="canvasHtmlAsTextContentIfPossible";if(l){let m=Rc(e,o,void 0,r,n,kn,void 0,void 0);if(m){m.group&&i.push(m.group);return}}let c=[];for(let m of o.walk())xM(e,t,o,m,r,c,a);let d=kl(e,o),u;if(c.length>0){let m=z(o)?Pc(e,t,o):o.resolveValue("name")??"Unknown";s&&(m=`${m} \xB7 ${o.resolveValue("name")||En(t,o)}`),u={type:"sourceGroup",name:m,groupType:z(o)?"page":Be(o)?"template":"component",nodeId:o.id,supportsLocaleVisibility:d,includedLocaleIds:d?Op(e,o):void 0,items:c},i.push(u)}l&&kc(e,o,void 0,u,r,n,kn,void 0,void 0)}function Vc(e,t,o){return o?`${e}.${t}.${o}`:`${e}.${t}`}function __(e){return e.type!=="rich-text"?e.value.length:ds(e.value).length}function yC(e,t,o){let r=o.required,n=o.type==="link"?void 0:o.options?.maxLength;if(!r&&!te(n))return;let i={};for(let a of e){let s=t[a.id];if(!ol(s))continue;let l=__(s);r&&l===0?i[a.id]=fM(o.name):te(n)&&l>n&&(i[a.id]=hM(l,n))}return i}function VM(e,t,o,r){let n={};for(let i of e){let a=t[i.id];if(!ol(a))continue;let l=o[i.id]?.get(a.value);l&&l>1&&(n[i.id]=r)}return n}function j_(e,t,o,r,n,i,a,s,l){let c=i.type;switch(c){case"string":{if(fd(i))return;let d;if(s){if(s.type!==c||!A(s.value))return;d=s.value}else{if(wv(i))return;d=i.initialValue}let u=rt(d),m=s?.valueLocalized??Tt,h=yC(r,m,i),C=Mt(d,r,m,u,h);return{type:"string",keyPath:Vc(o.id,a,n),nodeId:o.id,scopeId:t,controlPropKey:a,controlPropName:i.name,ancestorControlKeyPath:n,value:d,valueWordCount:jt(d),hash:u,localizedValues:m,localizedValueStatuses:C,managedByPluginButUserEditable:i.userEditable??!1,warnings:h}}case"link":{if(!s||s.type!==c||!cn(s.value)||!at.isOn("localizedLinks"))return;let d=s.value.url,u=rt(d),m=s?.valueLocalized??Tt,h=yC(r,m,i),C=Mt(d,r,m,u,h);return{type:"link",keyPath:Vc(o.id,a,n),nodeId:o.id,scopeId:t,controlPropKey:a,controlPropName:i.name,ancestorControlKeyPath:n,value:d,valueWordCount:d?1:0,hash:u,localizedValues:m,localizedValueStatuses:C,managedByPluginButUserEditable:i.userEditable??!1,warnings:h,aiTranslationDisabled:!0}}case"slug":{if(e.root.translatePagePaths==="no"||!s)return;S(s.type==="string","expected slug controlType to be a string"),S(A(s.value),"expected slug value to be a string");let d=s.value,u=rt(d),m=s?.valueLocalized??Tt,h=VM(r,m,l,"Each item in the Collection must have a unique slug"),C=Mt(d,r,m,u,h,e.root.translatePagePaths==="legacy"?CC(m):void 0);return{type:"slug",keyPath:Vc(o.id,a,n),controlPropKey:a,controlPropName:i.name,ancestorControlKeyPath:n,nodeId:o.id,scopeId:t,value:d,valueWordCount:jt(d),hash:u,localizedValues:m,localizedValueStatuses:C,managedByPluginButUserEditable:i.userEditable??!1,warnings:h,aiTranslationDisabled:!e.root.translatePagePathsWithAI,collectionItemIsDraft:o.isDraft??!1}}case"richtext":{let d;if(fd(i))return;if(s){if(s.type!==c||!A(s.value))return;d=s.value}else d=i.initialValue;let u=rt(d),m=s?.valueLocalized??Tt,h=yC(r,m,i),C=Mt(d,r,m,u,h);return{type:"richtext",keyPath:Vc(o.id,a,n),nodeId:o.id,scopeId:t,controlPropKey:a,controlPropName:i.name,ancestorControlKeyPath:n,value:d,valueWordCount:jt(d,!0),hash:u,localizedValues:m,localizedValueStatuses:C,managedByPluginButUserEditable:i.userEditable??!1,warnings:h,contentType:i.type==="richtext"?i.contentType:void 0}}case"image":{let d;if(s){if(s.type!==c||!A(s.value))return;d=s.value}else{if(!A(i.initialValue))return;d=i.initialValue}let u=rt(d),m=s?.valueLocalized??Tt,h=s?.alt??ls,C=rt(h),T=s?.altLocalized??Tt,N=Mt(h,r,T,C,void 0,SC(d,m,u));return{type:"image",keyPath:Vc(o.id,a,n),nodeId:o.id,scopeId:t,controlPropKey:a,controlPropName:i.name,ancestorControlKeyPath:n,value:h,valueWordCount:jt(h),hash:C,localizedValues:T,localizedValueStatuses:N,supportsAlt:!0,image:d,imageHash:u,imageLocalizedValues:m,managedByPluginButUserEditable:i.userEditable??!1,supportsFocalPoint:!0,positionX:s?.positionX,positionY:s?.positionY}}case"enum":return;default:}}function U_(e,t,o,r,n,i){let a=o.id;function s(l,c,d,u=void 0){if(c&&c.type==="array"){if(d.type!=="array"||B(c.value))return;for(let h of c.value){if(!wm(h.type)||!rl(h)||!h.value)continue;let C=Nc(u,h.id);for(let T of d.itemVariables){if(!Vo(T))continue;let N=h.value[T.id];if(!N||!wm(N.type))continue;let P=Di(C,T.id);s(l,N,T,P)}}}if(!vM(d))return;let m=j_(e,a,o,r,u,d,l,c,i);m&&n.push(m)}for(let l of t.variables){if(!Vo(l))continue;let c=o.getControlProp(l.id);s(l.id,c,l)}}var RM=dS((e,t)=>({translatePagePaths:e,translatePagePathsWithAI:t}));function J_(e,t,o,r,n,i){let a=RM(e.root.translatePagePaths,e.root.translatePagePathsWithAI),s=Rc(e,o,void 0,r,Qi,t.variables,void 0,a);if(s){s.group&&i.push(s.group);return}let l=[],c=Op(e,o);if(U_(e,t,o,r,l,n),l.length>0){for(let u of l)u.insetLevel=1;let d={type:"sourceGroup",groupType:"collectionItem",collectionName:t.resolveValue("name")??"Unknown",collectionNodeId:t.id,supportsLocaleVisibility:!0,includedLocaleIds:c,name:mp(t,o)??"Unknown",nodeId:o.id,items:l};kc(e,o,void 0,d,r,Qi,t.variables,void 0,a),i.push(d)}}function X_(e,t,o,r){let n=o.name,i=rt(n),a=o.nameLocalized??Tt,s=Mt(n,r,a,i);return{type:"enum",keyPath:`${e.id}_${t.id}_${o.id}`,nodeId:e.id,scopeId:e.id,variableId:t.id,enumCaseId:o.id,value:n,valueWordCount:jt(n),hash:i,localizedValues:a,localizedValueStatuses:s,managedByPluginButUserEditable:!1}}function Z_(e,t,o,r){let n=[],i=Q_(o,t);for(let d of t.getUnsortedChildren())J_(e,t,d,o,i,n);let a=Rc(e,t,void 0,o,Qi,kn,n,void 0);if(a){a.group&&r.push(a.group);return}let s=t.variables.filter(vM);if(s.length===0)return;let l=[];for(let d of s){let u=d.type;switch(u){case"enum":{if(fd(d))break;for(let m of d.cases)l.push(X_(t,d,m,o));break}case"string":case"richtext":case"image":case"link":case"slug":break;default:}}let c=l.length>0||n.length>0?{type:"sourceGroup",groupType:"collection",name:t.resolveValue("name")??"Unknown",nodeId:t.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:l,groups:n}:void 0;kc(e,t,void 0,c,o,Qi,kn,n,void 0),c&&r.push(c)}function Q_(e,t){let o={};for(let n of e)o[n.id]=new Map;let r=t.getSlugVariable();if(!r)return o;for(let n of t.getUnsortedChildren()){let i=n.getControlProp(r.id);if(i&&(S(i.type==="string","expect slug control type to be be of type string"),S(A(i.value),"expected slug control prop value to be string"),!!i.valueLocalized))for(let a in i.valueLocalized){let s=i.valueLocalized[a],l=o[a];if(!l||!s?.value)continue;let c=(l.get(s.value)??0)+1;l.set(s.value,c)}}return o}function K_(e,t,o){let r=e.getParent(o.id)?.children??[],n={};for(let i of t)i.id!==tf&&(n[i.id]=new Map);for(let i of r){if(!bn(i))continue;let{segment:a,segmentLocalized:s}=i;for(let l of t){if(l.id===tf)continue;let d=nv(l,s)?.value??a,u=n[l.id];if(!u)continue;let m=(u.get(d)??0)+1;u.set(d,m)}}return n}function q_(e,t,o,r){let n=Rc(e,e.root,void 0,o,Qi,kn,void 0,void 0);if(n){n.group&&r.push(n.group);return}let i=[];IM(e,t,e.root,e.root,o,i);let a=i.length>0?{type:"sourceGroup",groupType:"settings",name:"Site Settings",nodeId:e.root.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:i}:void 0;kc(e,e.root,void 0,a,o,Qi,kn,void 0,void 0),a&&r.push(a)}function Y_(e,t,o,r){for(let n of t.children)Z_(e,n,o,r)}function ej(e,t,o,r,n,i){if(!yx(o))return;let a=Yi(o.segment),s=rt(o.segment),l=o.segmentLocalized??Tt,c=VM(r,l,K_(e,n,o),"Sibling pages must have unique slugs");i.push({keyPath:o.id,type:"RouteSegmentNode",nodeId:o.id,scopeId:t.id,value:a,valueWordCount:jt(a),hash:rt(o.segment),localizedValues:l,localizedValueStatuses:Mt(o.segment,r,l,s,c,void 0),managedByPluginButUserEditable:!1,warnings:c,aiTranslationDisabled:!e.root.translatePagePathsWithAI})}function tj(e,t,o,r,n,i,a){let s=fT(e,"includeDrafts"),l=new Set;for(let c of o.walk())bn(c)&&oj(e,t,c,r,s,n,i,a,l)}function oj(e,t,o,r,n,i,a,s,l){let c=o.webPageId?e.get(o.webPageId):void 0,d=z(c)&&c.isLoaded()?c:null,u=RM(e.root.translatePagePaths,e.root.translatePagePathsWithAI),m=c&&l.has(c.id),h=d||o,C=h===d?o:void 0,T=Rc(e,h,C,r,i,kn,void 0,u);if(T){T.group&&a.push(T.group);return}let N=[];if(e.root.translatePagePaths==="yes"&&ej(e,h,o,r,n,N),c&&!m){for(let M of c.walk())xM(e,t,h,M,r,N,s);l.add(c.id)}let P,R=z(c)?Pc(e,t,c):ms(hC(o,e));z(h)&&h.abTestingParentId&&(R=`${R} \xB7 ${h.resolveValue("name")||En(t,h)}`),o.segment===""&&(R=`${R} /`);let W=kl(e,h);N.length>0&&(P={type:"sourceGroup",name:R,groupType:"page",nodeId:h.id,supportsLocaleVisibility:W,includedLocaleIds:W?Op(e,h):void 0,items:N},a.push(P)),kc(e,h,C,P,r,i,kn,void 0,u)}function eFe(e,t,o,r,n){let i=[];if(!o||o.length===0)return i;q_(e,t,o,i);for(let a of e.root.children){let s=z(a)&&a.abTestingParentId!==void 0;kM(e,a)&&!s||(fC(a)&&(S(a.isLoaded(),"Scope node must be fully loaded"),H_(e,t,a,o,r,i,n)),Xs(a)&&(S(a.isLoaded(),"Scope node must be fully loaded"),Y_(e,a,o,i)),LS(a)&&tj(e,t,a,o,r,i,n))}return i}function kM(e,t){return z(t)&&t.id!==e.root.homePageNodeId}function tFe(e,t){return ei(e,t)}function oFe(e,t){return en(e,t)}function nFe(e){window.addEventListener("beforeunload",t=>{e()&&(t.preventDefault(),t.returnValue="You have unsaved changes. They might be lost if you leave the page.")})}function wM(e,t){let o=e.itemVariables.length===1&&e.itemVariables[0]?.type==="image"?e.itemVariables[0]:void 0,r=p`item`,n={[Fn]:p`typeof ${r}?.[${Fn}] === "string" ? ${r}[${Fn}] : undefined`};for(let a of e.itemVariables){let s=cd(a.name);s?n[a.id]=p`${r}?.[${s}] ?? ${r}?.[${a.id}]`:n[a.id]=p`${r}?.[${a.id}]`}let i=t.bindings.create("arrayFromHumanReadable"+e.id);return t.declarations.file.create(p.joinLines(p`const ${i} = (value) => {${p.joinLines(p`if (!Array.isArray(value)) return`,p`return value.map(${r} => {${p.joinLines(o?p`if (typeof ${r} === "string") return { [${o.id}]: ${r} }`:void 0,p`return ${n}`)}})`)}}`)),i}function rj(e){return[e[1],e[0]]}var nj=new Map(Object.entries(De).map(rj));function LM(e,t){let o=t.addImport("framer",{exportSpecifier:"ControlType"}),r=nj.get(e),n=new I(r);return p`${o}.${n}`}var ij={boolean:"boolean",number:"number",string:"string",richtext:"string",fusednumber:"any",enum:"string",segmentedenum:"string",color:"string",image:"string",responsiveimage:"{src: string; srcSet?: string; alt?: string}",file:"string",componentinstance:"any",slot:"any",array:"any[]",eventhandler:"any",transition:"Record<string, any>",link:"string",linkrelvalues:"string[] | undefined",pagescope:"string",date:"string",object:"Record<string, any>",font:"Record<string, any> | undefined",scrollsectionref:"React.MutableRefObject<HTMLElement>",customcursor:"string",border:"Record<string, any>",cursor:"string",boxshadow:"string",gap:"string",padding:"string",borderradius:"string",collectionreference:"string | undefined",multicollectionreference:"string[] | undefined",trackingid:"string | undefined",vectorsetitem:"React.ComponentType<any> | undefined"};function aj(e){return e?new I(ij[e]):p`any`}var DM="variant";function sj(e){return!F(e?.defaultValue)}function lj(e,t,o){if(!ue(e))return{};S(e.isLoaded(),"Node must be loaded to generate controls");let r=e.getTopLevelVariants();if(r?.length<2)return{};let n=[],i=[];for(let a of r){let s=a.resolveValue("name")??En(t,a);n.push(a.id),i.push(s)}return{[DM]:{type:LM("enum",o),title:"Variant",options:n,optionTitles:i}}}function cj(e,t,o,r){if(e.type==="responsiveimage"&&pl(e)&&dl(e.__vekterDefault)){let{assetReference:n,alt:i}=e.__vekterDefault,a=o.assets?.resolveResponsiveImage(n,{focalPoint:e.__vekterDefault});return a&&A(i)&&(a.alt=i),a}else if(Ja(e))switch(e.type){case"responsiveimage":{let n=o.assets?.resolveResponsiveImage(e.__defaultAssetReference);return n||void 0}case"file":{let n=o.assets?.resolve(e.__defaultAssetReference);return n?n.src:void 0}}else{if(t?.type==="array")return t.initialValue?t.initialValue.map(n=>{let i={};if(!n||n.type!=="object"||!Ue(n.value))return i;for(let a in n.value){let s=n.value[a];if(!s||s.type!=="image"||!A(s.value))continue;let l=o.assets?.resolveResponsiveImage(s.value,{focalPoint:s});l&&(l.alt=s.alt??"",i[a]=l)}return i}):[];if(sj(e)){if(t&&ja(t,r))return;let n=e.defaultValue;if(e.type==="vectorsetitem")return S(xv(n),"Vector set item must be a module export identifier"),o.imports.addModuleImport(n.identifier);if(e.type==="richtext"&&A(n))return Ti(n,{collectors:o,useFramerMotion:r==="SmartComponent"});if(e.type==="boxshadow"&&VI(n))return RI(n,"emptyStringWhenEmpty",i=>Hr(i)?cl(i):Oa.toFormatString(i));if(to(n))return Hr(n)?cl(n):n}}}function Lm(e,t){return p`${e}?: ${t};`}var FM=["id","width","height"],dj=Object.fromEntries(FM.map(e=>{let t=new I(e);return[t,t]}));function pj(e,t){let o=new Y(e);return Y.addSpreadAtEnd(o,t),o}var AM=[{name:fe.style,type:p`Record<string, unknown>`},{name:fe.className,type:p`string`},{name:fe.layoutId,type:p`string | number`}];function uj(e,t){if(!ue(e)&&!z(e)&&!Be(e)&&!Zt(e))return[];let o=AM.map(({name:n,type:i})=>({key:ge(n),type:Lm(n,i)})),r=ge(fe.variant);return t&&un(e)?o.concat([{key:r,type:Lm(fe.variant,p`keyof typeof ${t}`),value:p`${t}[props.${fe.variant}] ?? props.${fe.variant} ?? ${e.baseVariantId}`}]):o.concat([{key:r}])}function vC(e,t,o){let r=p`props.${new I(e)}`;return t&&(r=p`${t} ?? ${r}`),o&&(r=p`${r} ?? ${o}`),r}function EM(e,t,o){if(!z(e)||!Si(o.tree,e))return;if(!at.isOn("dynamicFilters")){let a=he(e.dataIdentifier);if(!ot(a))return}let n=e.getVariableDefinitions(o.tree,void 0,t,t.activeBundleHash);if(!n||n.length===0)return;let i=new Map;for(let a of n)z(e)&&e.hasVariable(a.id)||i.set(a.id,a);return i}var mj=[...Yb,DM,...FM,...AM.map(({name:e})=>e.toString()),"name"];function fj(e,t,o,r,n){let i=new Set(mj),a=Object.entries(e).map(([R,{control:W,variable:M,binding:H}])=>{if(!W)return{key:R,binding:H};let J=Qd(cd(W.title)??R,i),K=new I(J),oe=cj(W,M,o,r),me=Lm(K,aj(W.type)),j;if(W.type==="enum"&&W.options&&W.optionTitles&&K){let Pe=new Y;W.options.forEach((Ie,we)=>{if(!A(Ie)||!W.optionTitles)return;let k=W.optionTitles[we];A(k)&&(Pe[k]=Ie)});let pe=o.declarations.file.dedupe("humanReadableEnumMap",Pe);me=Lm(K,p`keyof typeof ${pe}`),j=vC(R,K,oe),j=p`${pe}[${K}] ?? ${j}`}else if(M?.type==="array"){let Pe=wM(M,o),pe=I.fn(Pe,K);j=vC(R,pe,oe)}else j=vC(R,K,oe);return{key:R,binding:H,name:J,type:me,value:j}}),s="",l=[],c=[],d=new Y,u=EM(t,o.componentLoader,o.treeStore),m={},h={...dj},C=uj(t,n);for(let{key:R,binding:W,type:M,value:H,name:J}of[...C,...a]){let K=u?.get(R),oe=W??new I(R);if(K){let me=p`${oe} = ${fe.getFromCurrentRouteData}(${K.id})`;if(iv(K.type)){let j=dn(K.type);to(j)&&(me=p`${me} ?? ${j}`)}l.push(me)}else{let me=o.variables.getSetterBinding(R);if(me){let j=o.bindings.create(`external${R}`),Pe=o.bindings.create(`previous${R}`),pe=o.bindings.create(`setPrevious${R}`);l.push(p`${R}: ${j}`),c.push(p.joinLines(p`const [${oe}, ${me}] = React.useState(${j})`,p`const [${Pe}, ${pe}] = React.useState(${j})`,p`if (${j} !== ${Pe}) {${p.joinLines(I.fn(me,j),I.fn(pe,j))}}`))}else ge(oe)!==R?l.push(p`${R}: ${oe}`):l.push(oe)}M&&(s+=M),H&&(d[R]=H),J&&(m[R]=J,h[J]=new I(J))}r==="LayoutTemplate"&&l.push(fe.children),r==="DesignPage"&&l.push(fe.style),Y.addSpreadAtStart(d,fe.props);let T=o.declarations.file.dedupe("getProps",p`(${pj(h,fe.props)}) => { return ${d} }`),N=l.join(", "),P=N.length>0?new I(`{ ${N}, ...${fe.restProps} }`):fe.restProps;return{variableMap:Wt(m)?void 0:m,types:new I(s),props:p.joinSections(p`const ${P} = ${I.fn(T,fe.props)}`,...c)}}function hj(e,t){let o=[],r=Zt(e),n=MM(e),i=t.variables.getBindings(e.id);for(let s of n){if(!Vo(s))continue;let l=i.get(s.id);!r&&!l||o.push({id:s.id,binding:l,definition:s})}let a=EM(e,t.componentLoader,t.treeStore);if(a)for(let[s]of a){let l=i.get(s);l&&o.push({id:s,binding:l})}return o}function gj(e,t){let{hidden:o,...r}=e;if(!t)return r;let{description:n,...i}=r;return i}function yj(e,t,o,r,n,i,a,s){let{id:l,type:c}=t;switch(c){case"controlReference":{let d=he(Rv(r.tree,t.entityIdentifier));if(!d||!t.entityIdentifier||!ot(d))return;let u=n.addModuleImport(d,{composeWithImports:[n.addImport("framer",{exportSpecifier:"getPropertyControls"})]});if(!u)return;let m=new Y({hidden:p`undefined`,description:p`undefined`});return Y.addSpreadAtStart(m,p`${u}[${t.controlKey}]`),A(o.title)&&(m.title=o.title),A(o.description)&&(m.description=o.description),o.type==="responsiveimage"&&pl(o)&&dl(o.__vekterDefault)&&(m[Ov]=I.fromValue(o.__vekterDefault)),Ja(o)?m[Mv]=I.fromValue(o.__defaultAssetReference):yo(t.initialValue)||(m.defaultValue=I.fromValue(t.initialValue)),p`${u}?.[${t.controlKey}] && ${m}`}case"nodePropertyControlReference":case"array":case"vectorsetitem":case"boolean":case"color":case"date":case"enum":case"eventhandler":case"file":case"image":case"link":case"linkrelvalues":case"number":case"richtext":case"scrollsectionref":case"customcursor":case"cursor":case"transition":case"boxshadow":case"string":case"border":case"borderradius":case"gap":case"padding":case"collectionreference":case"multicollectionreference":case"trackingid":case"slug":{let d={...gj(o,a),type:LM(o.type,n)};return s==="vector"&&i&&(d.hidden=!i.getBinding(e.id,l)),d}default:G(c)}}function MM(e){return qo(e)?e.variables:[]}function Cj(e,t,o,r,n,i,a,s=MM(e)){let l=lj(e,t,r),c=pd(e),d=[...s];if(Rt(e)){let u=JT();d.push(u);let m=XT();d.push(m);let h=jT(e);d.push(h);let C=UT(e);d.push(C)}for(let u of d){if(!Vo(u))continue;let m=Ua(o.tree,t,u,a);if(We(m))continue;S(m.type!=="image","Image variables should become responsive images");let h=yj(e,u,m,o,r,n,c,i);F(h)||(l[u.id]=h)}if(!Wt(l))return new Y(l,1)}function BFe(e,t,o,r,n){let i={},a=[];for(let{id:s,binding:l,definition:c}of hj(e,t)){if(c&&z(e)&&e.hasVariable(c.id))continue;let u=c?Ua(t.treeStore.tree,t.componentLoader,c,o):void 0;i[s]={control:u??void 0,variable:c,binding:l},c&&a.push(c)}return{propertyControls:Cj(e,t.componentLoader,t.treeStore,t.imports,t.variables,r,o,a),...fj(i,e,t,o,n)}}function jFe(e){let t={};for(let[o,r]of e)WM(t,o,r);return t}function UFe(e,t,o){return Oh(e,r=>{WM(r,t,o)})}function JFe(e,t){return e[t]?Oh(e,o=>{let r=o[t];if(r){for(let n of r.dependents){let i=o[n];i&&(i.dependencies.delete(t),Dm(i)&&delete o[n])}for(let n of r.dependencies){let i=o[n];i&&(i.dependents.delete(t),Dm(i)&&delete o[n])}delete o[t]}}):e}function XFe(e,t,o,r,n){let i=new Set,a=[t];for(r=r||new Set,n=n||new Set;a.length>0;){let s=a.pop();if(!s||i.has(s))continue;i.add(s);let l=e[s];if(l){if(r.has(s))n.add(s);else if(!r.size)o.add(s);else{let c=!1;for(let d of l.dependents)if(r.has(d)||n.has(d)){c=!0;break}c?n.add(s):o.add(s)}for(let c of l.dependents)i.has(c)||a.push(c)}}}function ZFe(e,t){let o=new Set,r=[t];for(;vj(r);){let n=r.shift(),i=e[n];if(i){for(let a of i.dependents)o.has(a)||(o.add(a),r.push(a));if(o.has(t))return!0}}return!1}function Sj(e,t){let o=Kd(e,t);if(o)return o.startsWith("collection")&&!t.startsWith("collection")&&!t.startsWith("draftCollection")?o.replace("collection","draftCollection"):o}function WM(e,t,o){let r=e[t];if(!r){if(o.length===0)return;r=OM(e,t)}let n=new Set(r.dependencies);for(let i of o){let a=Sj(i,t);if(!a)continue;r.dependencies.add(a);let s=e[a];s||(s=OM(e,a)),s.dependents.add(t),r.dependencies.add(a),n.delete(a)}for(let i of n){let a=e[i];a&&(a.dependents.delete(t),Dm(a)&&delete e[i])}Dm(r)&&delete e[t]}function Dm(e){return e.dependents.size===0&&e.dependencies.size===0}function OM(e,t){let o={dependents:new Set,dependencies:new Set};return e[t]=o,o}function vj(e){return e.length>0}var Tj=1;function bj(e){return e==="screen"||e==="canvasComponent"}function Ij(e){let t=e.metadata.compatibleCmsVersion;return te(t)?t:0}function Nj(e){let t=rI(e);return e.imports.relative.some(o=>{let r=Kd(o,t);return A(r)&&r.startsWith("collection")})}function xj(e){return bj(e.type)&&Nj(e)}function tAe(e){return xj(e)&&Ij(e)<Tj}var Fm=p`params`,zM=p`snippets`,TC=p`queryLoaders`,Pj=p`snippetsSorting`,bC=p`pathVariables`,Am=p`activeLocale`,BM={type:"snippets",localIdName:"snippets",localId:cr("snippets","snippets")},NAe=xc(async(e,t)=>{let{componentLoader:o,treeStore:r,modulesStore:n,assetMap:i}=t,a=new Hn(i),s=new Vr,l=new Xr("snippets",o,n,s),c=new Dn(e,s),d=new Ln(s),u=new gn(e,o,l,s,void 0,r,n),m=new zn(e,r,c,d,s,l,a),h=new Jn(s,c,m,a,u),C=new Pa(e,c,r,o,l,s,d,h,n,"snippets"),T=new Mr(o,d,void 0,l,c,C,void 0,h,n,"snippets"),N=[],P={headStart:[],headEnd:[],bodyStart:[],bodyEnd:[]};for(let R of e.children)R.disabled||(P[R.placement].push(R.id),(R.pageIds&&R.pageIds.length>0||R.loadMode==="always")&&N.push(R));return[{type:"snippets",revision:e.moduleSourceRevision,source:Vj(N,P,n,r.tree,o,l,d,T,c),artifacts:{assets:a.keys}}]});function Vj(e,t,o,r,n,i,a,s,l){let{pageIds:c,snippets:d}=kj(e,r,n,s,l),u=Lj(c,o,r,n,i,l),m=Rj(),h=p.joinLines(d,u,p`export const ${Pj} = ${t}`,m);return p.joinSections(p.linesFrom(i.statements),...a.list(),h)}function Rj(){return p`export async function getSnippets(pageId, ${bC}, ${Am}) {${p.joinLines(p`const queryLoader = ${TC}[pageId]`,p`const ${Fm} = queryLoader ? await queryLoader(${bC}, ${Am}) : undefined`,p`const result = ${{headStart:[],headEnd:[],bodyStart:[],bodyEnd:[]}}`,p`for (const snippet of ${zM}) {${p.joinLines(p`if (snippet.pageIds && !snippet.pageIds.has(pageId)) continue`,p`const code = snippet.code(${Fm})`,p`if (code) {${p.joinLines(p`result[snippet.placement].push({ ...snippet, code })`)}}`)}}`,p`return result`)}}`}function kj(e,t,o,r,n){let i=new Set,a=[];for(let l of e){let c=l.pageIds?.filter(C=>t.get(C)),d=c&&c.length>0?c:void 0;if(l.pageIds&&l.pageIds.length>0&&!d)continue;let u=l.resolveValue("name"),m=wj(l,t,o,r,n,"escape");m&&l.pageIds&&l.pageIds[0]&&i.add(l.pageIds[0]);let h=m??p`return ${l.code}`;a.push({id:l.id,name:u,loadMode:l.loadMode,placement:l.placement,pageIds:d?p`new Set(${d})`:void 0,code:p`(${Fm}) => { ${h} }`})}let s=p`const ${zM} = ${a}`;return{pageIds:i,snippets:s}}function wj(e,t,o,r,n,i){if(!e.pageIds||e.pageIds.length!==1)return;let a=e.pageIds[0];if(!a)return;let{pageNode:s,controlMap:l,collectionData:c}=$M(a,t,o);if(!s?.dataIdentifier||!l||!c)return;let d=Aj(s,e.code,r,n,l,i);if(!d)return;let u=n.getBindings(a);if(!u)return;let m=[];for(let[h,C]of u??[]){let T=p`${Fm}?.[${h}]`,N=l?.get(h);if(N?.type==="enum"){let P=r.wrapInValueTransform(T,{name:"enumToDisplayName"},N);T=p`${T} !== undefined ? ${P} : undefined`}m.push(p`const ${C} = ${T}`)}return p.joinLines(...m,p`return ${d}`)}function Lj(e,t,o,r,n,i){let a={};for(let s of e){let l=i.getBindings(s);if(!l)continue;let c=new Set(l.keys()),{pageNode:d,collectionData:u,controlMap:m}=$M(s,o,r);if(!d?.dataIdentifier||!m||!u)continue;let h=Dj(d,d?.dataIdentifier,c,n,r,t,m);a[s]=h}if(Object.keys(a).length>0){let s=n.addImport("framer",{exportSpecifier:"QueryEngine"});return p.joinLines(p`const queryEngine = new ${s}()`,p`const ${TC} = ${a}`)}return p`const ${TC} = {}`}function $M(e,t,o){let r=t.getNodeWithTrait(e,z),n=r?.getVariableControlMap(t,void 0,o,o.activeBundleHash),i=o.dataForIdentifier(r?.dataIdentifier);return{pageNode:r,controlMap:n,collectionData:i}}function Dj(e,t,o,r,n,i,a){let s=r.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"}),l=gs(e),c=new Set,d=[],u=Fj(n,i,d),m=Sp(a,o,c,l,u),h=Cp(t,a,c,l,u),C=new Y({from:h,select:m,where:I.fn(s,p`pathVariables`,l)});return p.joinLines(p`async (${bC}, ${Am}) => {${p.joinLines(...d,p`const query = ${C}`,p`const result = await queryEngine.query(query, ${Am})`,p`if (result.length === 0) throw new Error("No data matches pathVariables")`,p`return result[0]`)}}`)}function Fj(e,t,o){let r=new Map;return function(i){let a=r.get(i);if(a)return a;let s=he(i),{exportSpecifier:l,importBinding:c,importSpecifier:d}=Rr(s,"snippets",e,t);S(c,"Can't import collection");let u=new I(c),m=new I(l);o.push(p`const ${u} = await import(${d})`);let h=p`${u}.${m}`;return r.set(i,h),h}}function Aj(e,t,o,r,n,i){if(yo(t))return;let a=Al();return nt.replaceAll(t,a,(s,l)=>{let[c,d]=sp(l,i);if(!n?.has(c))return s;let u=$t(c,e.id),m=r.create(u),h=m;return n?.get(c)?.type==="responsiveimage"&&(h=o.wrapInToImageSrc(h)),h=o.wrapInTemplateFilters(h,d),p`${m} !== undefined ? ${h} : ${s}`})}function GM(e,t){if(ue(e,!0))return["canvasComponent"];if(z(e,!0))return["screen","webPageMetadata"];if(Be(e,!0))return["layoutTemplate"];if(Ye(t.get(e.parentid)))return["screen"];if(Zt(e,!0))return["vectorSet"];if(Ye(e,!0))return["prototype"];if(Bi(e,!0))return["snippets"];if(Ro(e,!0))throw new Error("Unhandled scope node type");if(Rt(e))return["collection","draftCollection"];if(np(e))return["css"];if(qc(e))return["componentPresets"];if($e(e)&&Zt(t.getScopeNodeFor(e)))return["vector"];if(Lo(e))return["siteMetadata"];if(mr(e))return["vector"];if(Ct(t.get(e.parentid)))return["design"];throw new Error(`Unsupported component node: ${e.__class} ${e.id}`)}function HM(e,t){if(!dd(e)||!t.isGroundNode(e))return!1;let o=t.get(e.parentid);return!!(o&&Ye(o))}function QAe(e){return zC(e.type)&&e.type==="snippets"?Vx:e.name}function Ej(e){if(Lo(e))return Vm.localIdName;if(Bi(e,!0))return BM.localIdName;switch(e.id){case vi:return"componentPresets";default:return e.id}}function Mj(e,t){return GM(e,t).map(r=>cr(r,Ej(e)))}function KAe(e,t,o){return e?Mj(e,t).every(r=>!F(o.getModuleEntryByLocalId(r))):!1}function qAe(e,t){if(!Oj(e,t)||Ct(e))return!1;if(!Ro(e)){let o=t.getScopeNodeFor(e);if(Ct(o))return!1}return!0}function Oj(e,t){if(Lo(e))return!0;if(!t.has(e.id))return!1;if(un(e))return!0;if(qe(e))return!1;if(Rt(e)||np(e)||qc(e)||Zt(e))return!0;if(mr(e)){let o=t.get(e.parentid);return Zt(o)}if(Ct(e))return!1;if(t.isGroundNode(e)&&Fe(e)){let o=t.getScopeNodeFor(e);if(Ct(o))return!0}return!!(Ye(e)||HM(e,t)||Bi(e))}export{rk as a,IU as b,uO as c,Xl as d,fO as e,wU as f,Cn as g,_Z as h,pg as i,ug as j,jZ as k,Ek as l,nk as m,dJ as n,Gl as o,pJ as p,xO as q,uJ as r,mJ as s,fJ as t,hJ as u,gJ as v,eQ as w,Mk as x,Kr as y,tQ as z,oQ as A,rQ as B,nQ as C,iQ as D,sW as E,aQ as F,zk as G,mg as H,da as I,CQ as J,SQ as K,cW as L,Zp as M,kQ as N,wQ as O,LQ as P,fg as Q,DQ as R,hg as S,Qp as T,XQ as U,ZQ as V,QQ as W,hW as X,KQ as Y,Ss as Z,Hk as _,rK as $,TJ as aa,lk as ba,_k as ca,ck as da,Uk as ea,dk as fa,qJ as ga,YJ as ha,uk as ia,e1 as ja,mk as ka,GJ as la,Xh as ma,Uh as na,Hl as oa,MJ as pa,OJ as qa,Jh as ra,$p as sa,WJ as ta,pk as ua,Zh as va,VO as wa,_l as xa,XJ as ya,hk as za,D1 as Aa,qh as Ba,LO as Ca,F1 as Da,A1 as Ea,E1 as Fa,Ul as Ga,gk as Ha,ca as Ia,Kh as Ja,M1 as Ka,O1 as La,W1 as Ma,z1 as Na,FO as Oa,B1 as Pa,$1 as Qa,Ck as Ra,Sk as Sa,oX as Ta,Tk as Ua,rX as Va,nX as Wa,iX as Xa,aX as Ya,sX as Za,lX as _a,uX as $a,CW as ab,SW as bb,Xk as cb,Yp as db,LK as eb,ie as fb,eu as gb,Qk as hb,Kk as ib,vW as jb,tw as kb,yg as lb,yY as mb,tu as nb,OY as ob,ou as pb,WY as qb,zY as rb,BY as sb,$Y as tb,iw as ub,fX as vb,hX as wb,Ik as xb,BO as yb,Gp as zb,LW as Ab,l2 as Bb,c2 as Cb,d2 as Db,p2 as Eb,cw as Fb,pw as Gb,uw as Hb,pa as Ib,ru as Jb,mw as Kb,fw as Lb,Hp as Mb,FX as Nb,AX as Ob,_p as Pb,nu as Qb,HW as Rb,vw as Sb,Tw as Tb,bw as Ub,I5 as Vb,XW as Wb,r4 as Xb,Nw as Yb,xw as Zb,Pw as _b,n4 as $b,i4 as ac,a4 as bc,tz as cc,s4 as dc,vt as ec,l4 as fc,c4 as gc,Iw as hc,ng as ic,ig as jc,kw as kc,bs as lc,su as mc,Wn as nc,ql as oc,Ew as pc,Mw as qc,Ow as rc,Ww as sc,zw as tc,uz as uc,C6 as vc,S6 as wc,Ng as xc,u3 as yc,m3 as zc,Gw as Ac,Hw as Bc,lu as Cc,jw as Dc,n8 as Ec,i8 as Fc,Zw as Gc,du as Hc,pu as Ic,T8 as Jc,b8 as Kc,I8 as Lc,N8 as Mc,x8 as Nc,Vk as Oc,tZ as Pc,Up as Qc,Yw as Rc,eL as Sc,tL as Tc,J8 as Uc,X8 as Vc,Z8 as Wc,Q8 as Xc,oL as Yc,ZO as Zc,wZ as _c,LZ as $c,rr as ad,Yl as bd,r9 as cd,ec as dd,Fz as ed,f9 as fd,h9 as gd,g9 as hd,y9 as id,C9 as jd,P9 as kd,aL as ld,Wz as md,V9 as nd,xs as od,pte as pd,ute as qd,mte as rd,vL as sd,vD as td,VB as ud,zn as vd,vpe as wd,Hu as xd,Hn as yd,wfe as zd,aF as Ad,Lfe as Bd,sF as Cd,lF as Dd,$fe as Ed,Gfe as Fd,cF as Gd,T$ as Hd,b$ as Id,I$ as Jd,pF as Kd,uF as Ld,qfe as Md,P$ as Nd,mF as Od,dy as Pd,mhe as Qd,fF as Rd,hF as Sd,yF as Td,_he as Ud,py as Vd,jn as Wd,SF as Xd,E$ as Yd,M$ as Zd,O$ as _d,W$ as $d,z$ as ae,Kge as be,Jn as ce,Zu as de,Qu as ee,qu as fe,PF as ge,VF as he,FF as ie,om as je,lbe as ke,DA as le,AA as me,V0 as ne,EA as oe,XA as pe,Iy as qe,wa as re,Nxe as se,xH as te,_xe as ue,jxe as ve,BE as we,$E as xe,_E as ye,aPe as ze,sPe as Ae,lPe as Be,cPe as Ce,jE as De,_Pe as Ee,VH as Fe,jPe as Ge,JE as He,XE as Ie,IVe as Je,NVe as Ke,QE as Le,qE as Me,YE as Ne,c_ as Oe,cM as Pe,u_ as Qe,xc as Re,wwe as Se,lLe as Te,cLe as Ue,dLe as Ve,pLe as We,uLe as Xe,Pc as Ye,v_ as Ze,fC as _e,yLe as $e,NLe as af,xLe as bf,PLe as cf,T_ as df,mM as ef,fM as ff,hM as gf,LLe as hf,DLe as if,FLe as jf,Di as kf,Nc as lf,Vwe as mf,GLe as nf,yM as of,_De as pf,jDe as qf,UDe as rf,JDe as sf,XDe as tf,k_ as uf,ZDe as vf,QDe as wf,KDe as xf,qDe as yf,w_ as zf,L_ as Af,YDe as Bf,E_ as Cf,M_ as Df,Rm as Ef,xM as Ff,Vc as Gf,j_ as Hf,U_ as If,X_ as Jf,Q_ as Kf,Y_ as Lf,eFe as Mf,tFe as Nf,oFe as Of,nFe as Pf,jFe as Qf,UFe as Rf,JFe as Sf,XFe as Tf,ZFe as Uf,Tj as Vf,bj as Wf,Ij as Xf,xj as Yf,tAe as Zf,BM as _f,NAe as $f,GM as ag,HM as bg,QAe as cg,Ej as dg,Mj as eg,KAe as fg,qAe as gg,Oj as hg,LM as ig,mj as jg,Cj as kg,BFe as lg};
//# sourceMappingURL=https://app.framerstatic.com/chunk-4AXEU7ER.mjs.map
