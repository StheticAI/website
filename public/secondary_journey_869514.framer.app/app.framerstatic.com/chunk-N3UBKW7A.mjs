import{b as pa,c as ua,d as ma,r as Zt}from"https://app.framerstatic.com/chunk-WTXUWG3B.mjs";import{$ as ra,Z as oa,_ as Kt,aa as na,ba as ia,ca as aa,da as sa,e as Ui,f as $i,fa as la,g as Yi,h as Xi,ha as Xe,i as qi,j as Me,na as ca,pa as da}from"https://app.framerstatic.com/chunk-6MRAOEJR.mjs";import{$ as Pi,Da as qt,Ff as Yo,G as ki,Gf as Zi,If as Xo,Jb as Ei,Kf as qo,Oe as Hi,_ as wi,_e as _i,eg as ta,h as Fn,hb as Li,j as Dn,k as An,l as Ln,m as Uo,nc as Bi,pd as Oi,qd as zi,rd as Gi,vc as Vi,vf as Ki,xa as Xt}from"https://app.framerstatic.com/chunk-44NXH25V.mjs";import{e as Wi,f as pt}from"https://app.framerstatic.com/chunk-M5QYI4KS.mjs";import{l as ji}from"https://app.framerstatic.com/chunk-XKNQWOOA.mjs";import{i as Ji}from"https://app.framerstatic.com/chunk-YE4QPCYK.mjs";import{k as _o}from"https://app.framerstatic.com/chunk-EDICM4ZE.mjs";import{g as ha,h as xa,i as va,k as Sa}from"https://app.framerstatic.com/chunk-D6ZKH45E.mjs";import{b as ge,c as Ai}from"https://app.framerstatic.com/chunk-4OLTEPHX.mjs";import{b as _t,f as ya}from"https://app.framerstatic.com/chunk-JKYWWUT6.mjs";import{e as $o,s as Qi,u as ea}from"https://app.framerstatic.com/chunk-SWGLHV6B.mjs";import{Ca as Go,Fe as Ti,Ge as Ri,Ha as Qn,Id as bi,Lc as Si,M as Gn,Ra as ct,Sa as Jn,Ub as hi,V as zo,Va as ei,Vb as gi,W as qn,Zg as Mi,ac as yi,i as Bn,kc as xi,la as Zn,lc as vi,mb as fi,se as Ii,te as Ni,ud as Ci,ui as Wo,xf as Ho,yf as jo}from"https://app.framerstatic.com/chunk-5POO65PD.mjs";import{f as he}from"https://app.framerstatic.com/chunk-2AYHTJDO.mjs";import{c as En}from"https://app.framerstatic.com/chunk-75ILXMIH.mjs";import{b as ga,d as Ko}from"https://app.framerstatic.com/chunk-A6HIHSD7.mjs";import{lh as dt}from"https://app.framerstatic.com/chunk-4AWVAEWD.mjs";import{a as fa}from"https://app.framerstatic.com/chunk-KK4X5BJJ.mjs";import{$g as Kn,Cb as Tn,D as xn,Ed as zt,H as Fo,Hb as Vo,Jf as Oo,Jh as ti,Md as kn,O as Do,Pf as zn,Ql as di,Rd as wn,Sf as Hn,Td as Pn,Tf as Ht,Uf as jn,Wf as jt,Zd as Vn,_f as Wn,_g as _n,_m as pi,b as $e,ba as Ao,bg as Wt,ca as Ot,fg as Un,ga as ee,ha as Cn,hg as Ye,i as st,jo as mi,k as Vt,mb as Eo,me as On,nb as Bo,nk as si,ob as In,pb as Nn,t as _,tf as Gt,ug as $n,vd as Rn,wg as Yn,x as gn,y as yn,yg as Xn,zd as Mn,zj as ai}from"https://app.framerstatic.com/chunk-RD5RW7AD.mjs";import{a as bn,b as Lo}from"https://app.framerstatic.com/chunk-6C6VSETA.mjs";import{c as pn,g as Bt,i as un,r as mn,u as K,v as fn,w as Te,y as fe,z as hn}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import{b as $t,c as Yt}from"https://app.framerstatic.com/chunk-X73OH5FJ.mjs";import{i as U,k as Fi,p as Di}from"https://app.framerstatic.com/chunk-TJRVAIEZ.mjs";import{$b as Rt,Ad as Dt,Cj as ko,Ck as ue,D as k,Dj as Yr,Fj as wo,Fk as Kr,He as Wr,I as Co,J as D,Jh as at,K as T,Kr as oi,Ld as zr,Lm as Zr,Mr as ri,Nr as ni,Om as me,On as tn,Oo as an,Ph as L,Pp as dn,Pr as ii,Qh as z,Rh as Ne,Sp as Et,Tg as it,Uc as Dr,Ud as Gr,Vd as At,Vr as Ut,Wa as Tt,Wc as ze,Ws as ui,X as kr,Xc as Ge,Xq as vn,Y as bo,Yc as Ar,Yj as Xr,_q as Re,bd as Mt,cd as To,cp as sn,dd as nt,ec as Y,ed as Lr,ee as Hr,fa as ne,fd as Er,g as Rr,hd as kt,id as He,ip as ln,jc as Oe,jd as wt,jr as Sn,kd as Pt,ke as Ro,ki as pe,kn as Qr,ld as q,li as J,ln as Jr,mn as en,mp as cn,nd as je,nf as Lt,od as We,qd as Br,qh as Mo,rs as li,sd as ce,sk as qr,tb as wr,ti as Ur,tj as $r,ud as Ft,uk as _r,ur as lt,wc as No,wd as Vr,wk as Po,xd as de,xe as jr,yc as Pr,yd as Ue,ys as ci,zc as Fr,zd as Or}from"https://app.framerstatic.com/chunk-HLNLVHBF.mjs";import{S as So,da as on,ea as rn,f as vo,ga as nn,la as Tc}from"https://app.framerstatic.com/chunk-3CHH3HAB.mjs";import{p as Ve}from"https://app.framerstatic.com/chunk-4XEPQHVZ.mjs";import{b as Tr}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{b as rt,e as H,j as Q,k as Io,m as Ie}from"https://app.framerstatic.com/chunk-CMAEAGWD.mjs";import{Ja as Nt,a as Nc,b as Mr}from"https://app.framerstatic.com/chunk-M6MHZBU3.mjs";import{e as xo,f as Ir,j as Nr}from"https://app.framerstatic.com/chunk-5YIBQAFN.mjs";import{Oa as br,T as V,W as Sr,aa as ae,ea as M,fa as O,ia as Ee,j as ot,ja as se,ka as It,ma as go,na as Cr,oa as yo,qa as Be,ra as le,v as vr}from"https://app.framerstatic.com/chunk-5V7XAOIL.mjs";import{a as C,b as be}from"https://app.framerstatic.com/chunk-YOOGIIWU.mjs";import{c as et,d as Ic,e as tt,j as I,k as re,l as ho}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var ft=et(ye=>{"use strict";ye.removeLeadingAndTrailingHTTPWhitespace=e=>e.replace(/^[ \t\n\r]+/u,"").replace(/[ \t\n\r]+$/u,"");ye.removeTrailingHTTPWhitespace=e=>e.replace(/[ \t\n\r]+$/u,"");ye.isHTTPWhitespaceChar=e=>e===" "||e==="	"||e===`
`||e==="\r";ye.solelyContainsHTTPTokenCodePoints=e=>/^[-!#$%&'*+.^_`|~A-Za-z0-9]*$/u.test(e);ye.soleyContainsHTTPQuotedStringTokenCodePoints=e=>/^[\t\u0020-\u007E\u0080-\u00FF]*$/u.test(e);ye.asciiLowercase=e=>e.replace(/[A-Z]/ug,t=>t.toLowerCase());ye.collectAnHTTPQuotedString=(e,t)=>{let o="";for(t++;;){for(;t<e.length&&e[t]!=='"'&&e[t]!=="\\";)o+=e[t],++t;if(t>=e.length)break;let r=e[t];if(++t,r==="\\"){if(t>=e.length){o+="\\";break}o+=e[t],++t}else break}return[o,t]}});var Xs=et((gx,Ys)=>{"use strict";var{asciiLowercase:oo,solelyContainsHTTPTokenCodePoints:Dp,soleyContainsHTTPQuotedStringTokenCodePoints:Ap}=ft();Ys.exports=class{constructor(t){this._map=t}get size(){return this._map.size}get(t){return t=oo(String(t)),this._map.get(t)}has(t){return t=oo(String(t)),this._map.has(t)}set(t,o){if(t=oo(String(t)),o=String(o),!Dp(t))throw new Error(`Invalid MIME type parameter name "${t}": only HTTP token code points are valid.`);if(!Ap(o))throw new Error(`Invalid MIME type parameter value "${o}": only HTTP quoted-string token code points are valid.`);return this._map.set(t,o)}clear(){this._map.clear()}delete(t){return t=oo(String(t)),this._map.delete(t)}forEach(t,o){this._map.forEach(t,o)}keys(){return this._map.keys()}values(){return this._map.values()}entries(){return this._map.entries()}[Symbol.iterator](){return this._map[Symbol.iterator]()}}});var Ks=et((yx,_s)=>{"use strict";var{removeLeadingAndTrailingHTTPWhitespace:Lp,removeTrailingHTTPWhitespace:qs,isHTTPWhitespaceChar:Ep,solelyContainsHTTPTokenCodePoints:lr,soleyContainsHTTPQuotedStringTokenCodePoints:Bp,asciiLowercase:cr,collectAnHTTPQuotedString:Vp}=ft();_s.exports=e=>{e=Lp(e);let t=0,o="";for(;t<e.length&&e[t]!=="/";)o+=e[t],++t;if(o.length===0||!lr(o)||t>=e.length)return null;++t;let r="";for(;t<e.length&&e[t]!==";";)r+=e[t],++t;if(r=qs(r),r.length===0||!lr(r))return null;let n={type:cr(o),subtype:cr(r),parameters:new Map};for(;t<e.length;){for(++t;Ep(e[t]);)++t;let i="";for(;t<e.length&&e[t]!==";"&&e[t]!=="=";)i+=e[t],++t;if(i=cr(i),t<e.length){if(e[t]===";")continue;++t}let a=null;if(e[t]==='"')for([a,t]=Vp(e,t);t<e.length&&e[t]!==";";)++t;else{for(a="";t<e.length&&e[t]!==";";)a+=e[t],++t;if(a=qs(a),a==="")continue}i.length>0&&lr(i)&&Bp(a)&&!n.parameters.has(i)&&n.parameters.set(i,a)}return n}});var Qs=et((xx,Zs)=>{"use strict";var{solelyContainsHTTPTokenCodePoints:Op}=ft();Zs.exports=e=>{let t=`${e.type}/${e.subtype}`;if(e.parameters.size===0)return t;for(let[o,r]of e.parameters)t+=";",t+=o,t+="=",(!Op(r)||r.length===0)&&(r=r.replace(/(["\\])/ug,"\\$1"),r=`"${r}"`),t+=r;return t}});var ol=et((Sx,tl)=>{"use strict";var zp=Xs(),Gp=Ks(),Hp=Qs(),{asciiLowercase:Js,solelyContainsHTTPTokenCodePoints:el}=ft();tl.exports=class{constructor(t){t=String(t);let o=Gp(t);if(o===null)throw new Error(`Could not parse MIME type string "${t}"`);this._type=o.type,this._subtype=o.subtype,this._parameters=new zp(o.parameters)}static parse(t){try{return new this(t)}catch{return null}}get essence(){return`${this.type}/${this.subtype}`}get type(){return this._type}set type(t){if(t=Js(String(t)),t.length===0)throw new Error("Invalid type: must be a non-empty string");if(!el(t))throw new Error(`Invalid type ${t}: must contain only HTTP token code points`);this._type=t}get subtype(){return this._subtype}set subtype(t){if(t=Js(String(t)),t.length===0)throw new Error("Invalid subtype: must be a non-empty string");if(!el(t))throw new Error(`Invalid subtype ${t}: must contain only HTTP token code points`);this._subtype=t}get parameters(){return this._parameters}toString(){return Hp(this)}isJavaScript({prohibitParameters:t=!1}={}){switch(this._type){case"text":switch(this._subtype){case"ecmascript":case"javascript":case"javascript1.0":case"javascript1.1":case"javascript1.2":case"javascript1.3":case"javascript1.4":case"javascript1.5":case"jscript":case"livescript":case"x-ecmascript":case"x-javascript":return!t||this._parameters.size===0;default:return!1}case"application":switch(this._subtype){case"ecmascript":case"javascript":case"x-ecmascript":case"x-javascript":return!t||this._parameters.size===0;default:return!1}default:return!1}}isXML(){return this._subtype==="xml"&&(this._type==="text"||this._type==="application")||this._subtype.endsWith("+xml")}isHTML(){return this._subtype==="html"&&this._type==="text"}}});function Ca(e){return e.homeNodeId}function Rc(e,t){let o=Ca(t);return o?e.getNode(o):null}function ba(e,t,o){let r=wc(e,t);return!!r&&r.id===o.id}function ut(e,t){return t?.parentid===e.id&&!Br(t)}function Ia(e,t){let o=e.get(t.homeNodeId);return ut(t,o)}function Mc(e,t,o){if(o&&!ut(t,o))return;let r=Ca(t);o&&o.id===r||o===r||t.set({homeNodeId:o?o.id:null})}function Na(e,t){let o=e.get(t.homeNodeId);if(o){let r=e.getGroundNodeFor(o);if(ut(t,r))return r}if(!t.isLoaded())return null;for(let r=t.children.length-1;r>=0;r--){let n=t.children[r];if(n&&kc(t,n))return n}return null}function kc(e,t){return!(!t||!ut(e,t)||Ue(t)||ce(t)&&!Ur(t))}function wc(e,t){let o=Rc(e,t);return ut(t,o)?o:Na(e,t)}function Ta(e,t){let o=Na(e,t);Mc(e,t,o)}function Ra(e,t,o){!(o&&o.enum===10)&&!Ia(e,t)&&(Ta(e,t),ae("app").debug("updated home node:",t.id,t.homeNodeId))}var{onewayMethodTemplate:Vm,voidMethodTemplate:Om,valueMethodTemplate:Pc,streamMethodTemplate:zm}=Nr,Qo;(t=>t.service={id:"__ColorSampler__",fingerprint:"2f07b191423077f3239a93a5dec7e417",methods:{sampleColor:{}},newOutgoingWrapper:o=>({sampleColor:Pc.bind(-1,"sampleColor",!1,o)})})(Qo||={});var Jo;(r=>{r.service=Qo.service;function t(n){let i=xo.shared();return{expect:()=>i.expectWithoutDiscovery(r.service,n),discover:a=>i.discover(r.service,n,a),register:a=>i.register({channel:n,service:r.service,implementation:a})}}r.on=t;async function o(n){xo.shared().unregister(n)}r.unregister=o})(Jo||={});var Fc={track:!0};function Ma(e){let t={...e,event:"preview_shown"};Tr(t,Fc)}var Qt=class extends Tt("VekterTool"){constructor(o,r){super();I(this,"enum",54);I(this,"wantsAutoscrolling",!1);I(this,"engine");I(this,"onKeyDown");I(this,"onKeyPress");I(this,"onKeyUp");I(this,"displaySelectionBox",!1);I(this,"displaySelectionHandles",!1);I(this,"displayPaddingHandles",!1);I(this,"displayGapHandles",!1);I(this,"displayViewportHandle",!1);I(this,"displayViewportLabel",!1);I(this,"cmsBadge","hidden");I(this,"fromTool");this.engine=o}start(){}stop(){}cancel(){}update(){}};function ka(e,t){if(e===t)return!0;if(e.constructor!==t.constructor)return!1;let o=e.keys();for(let r of o){switch(r){case"id":case"left":case"right":case"top":case"bottom":case"widthFactor":case"heightFactor":case"centerAnchorX":case"centerAnchorY":case"children":case"parentid":case"styledText":case"cache":case"update":case"mutable":case"isMaster":case"originalid":case"replicaInfo":case"duplicatedFrom":continue}if(r.startsWith("_"))continue;let n=e[r],i=t[r];if(r==="rotation"&&(n=n??0,i=i??0),!ne(n,i))return!1}return!0}var wa="https://app.framerstatic.com/cursor-add-IHXMK5V3.png";var Pa="https://app.framerstatic.com/cursor-add@2x-WG7RHQ23.png";var Fa="https://app.framerstatic.com/cursor-comment-QGQDR57U.png";var Da="https://app.framerstatic.com/cursor-comment@2x-PP6ZCJLC.png";var Aa="https://app.framerstatic.com/cursor-disconnect-722HITSN.png";var La="https://app.framerstatic.com/cursor-disconnect@2x-M4OU4BU4.png";var Ea="https://app.framerstatic.com/cursor-feedback-BOBWQH3Z.png";var Ba="https://app.framerstatic.com/cursor-feedback@2x-6D4B4MBW.png";var Va="https://app.framerstatic.com/cursor-grab-JYEIMIFP.png";var Oa="https://app.framerstatic.com/cursor-grab@2x-4B6OJX4Y.png";var za="https://app.framerstatic.com/cursor-grabbing-CCTK7ER7.png";var Ga="https://app.framerstatic.com/cursor-grabbing@2x-ZOANBS36.png";var Ha="https://app.framerstatic.com/cursor-insert-KYQDIEGK.png";var ja="https://app.framerstatic.com/cursor-insert@2x-PM53FSGF.png";var Wa="https://app.framerstatic.com/cursor-remove-XCWM6E2X.png";var Ua="https://app.framerstatic.com/cursor-remove@2x-BFMFKNIR.png";var $a="https://app.framerstatic.com/cursor-swap-A6ZB67AX.png";var Ya="https://app.framerstatic.com/cursor-swap@2x-5RC3LPB5.png";var Xa="https://app.framerstatic.com/cursor-vector-add-L3563YFF.png";var qa="https://app.framerstatic.com/cursor-vector-add@2x-24A2HJDM.png";var _a="https://app.framerstatic.com/cursor-vector-point-6OWAA3FG.png";var Ka="https://app.framerstatic.com/cursor-vector-point@2x-4OEKRKH6.png";var Za="https://app.framerstatic.com/cursor-vector-OLHKU4LP.png";var Qa="https://app.framerstatic.com/cursor-vector@2x-YFL4EEVU.png";var Ja="https://app.framerstatic.com/cursor-zoom-in-OM3BVHOO.png";var es="https://app.framerstatic.com/cursor-zoom-in@2x-P6ATI4AM.png";var ts="https://app.framerstatic.com/cursor-zoom-out-GBEPMY25.png";var os="https://app.framerstatic.com/cursor-zoom-out@2x-KTAPS6BT.png";var rs="https://app.framerstatic.com/resize-east-west-BDB3IO5W.png";var ns="https://app.framerstatic.com/resize-east-west@2x-P2ESOE6Y.png";var is="https://app.framerstatic.com/resize-east-JAX5DWRA.png";var as="https://app.framerstatic.com/resize-east@2x-TJVB6UZL.png";var ss="https://app.framerstatic.com/resize-nesw-3PXP4DUS.png";var ls="https://app.framerstatic.com/resize-nesw@2x-YELXUNDJ.png";var cs="https://app.framerstatic.com/resize-north-east-MRZ4X3CM.png";var ds="https://app.framerstatic.com/resize-north-east@2x-X5R3JQXW.png";var ps="https://app.framerstatic.com/resize-north-south-LLKELU2V.png";var us="https://app.framerstatic.com/resize-north-south@2x-MGGC2Q54.png";var ms="https://app.framerstatic.com/resize-north-west-AUOA2P6A.png";var fs="https://app.framerstatic.com/resize-north-west@2x-KGEAKVUC.png";var hs="https://app.framerstatic.com/resize-north-RJIYLK2K.png";var gs="https://app.framerstatic.com/resize-north@2x-ML7ZK43B.png";var ys="https://app.framerstatic.com/resize-nwse-UIUNGWH6.png";var xs="https://app.framerstatic.com/resize-nwse@2x-SD7XXHBC.png";var vs="https://app.framerstatic.com/resize-south-east-MDTJVKO2.png";var Ss="https://app.framerstatic.com/resize-south-east@2x-PUMM4W7M.png";var Cs="https://app.framerstatic.com/resize-south-west-6RR44G4U.png";var bs="https://app.framerstatic.com/resize-south-west@2x-RZWPHIGU.png";var Is="https://app.framerstatic.com/resize-south-5AJIAZZQ.png";var Ns="https://app.framerstatic.com/resize-south@2x-LMAF42C5.png";var Ts="https://app.framerstatic.com/resize-west-5JWNMNHP.png";var Rs="https://app.framerstatic.com/resize-west@2x-533X6C2X.png";var Ms="https://app.framerstatic.com/touch-active-CQT44XON.png";var ks="https://app.framerstatic.com/touch-active@2x-N44WHZVB.png";var ws="https://app.framerstatic.com/touch-K4JGV3WE.png";var Ps="https://app.framerstatic.com/touch@2x-M3Y2EBTW.png";var Fs={"cursor-add":[wa,Pa],"cursor-disconnect":[Aa,La],"cursor-comment":[Fa,Da],"cursor-feedback":[Ea,Ba],"cursor-grab":[Va,Oa],"cursor-grabbing":[za,Ga],"cursor-insert":[Ha,ja],"cursor-remove":[Wa,Ua],"cursor-swap":[$a,Ya],"cursor-vector-add":[Xa,qa],"cursor-vector-point":[_a,Ka],"cursor-vector":[Za,Qa],"cursor-zoom-in":[Ja,es],"cursor-zoom-out":[ts,os],"resize-nesw":[ss,ls],"resize-nwse":[ys,xs],"resize-north-east":[cs,ds],"resize-north-west":[ms,fs],"resize-south-east":[vs,Ss],"resize-south-west":[Cs,bs],"resize-east-west":[rs,ns],"resize-west":[Ts,Rs],"resize-east":[is,as],"resize-north-south":[ps,us],"resize-north":[hs,gs],"resize-south":[Is,Ns],"touch-active":[Ms,ks],touch:[ws,Ps]};var X=(e,t=16)=>{let o=H(t)?t:t.x,r=H(t)?t:t.y,[n,i]=Fs[e];return vr()?`url(${n}) ${o} ${r}, auto`:`-webkit-image-set(url(${n}) 1x, url(${i}) 2x) ${o} ${r}, default`},tr={x:6,y:2},fg=X("cursor-vector",tr),hg=X("cursor-vector-add",tr),gg=X("cursor-vector-point",tr),yg=X("cursor-disconnect",{x:5,y:5}),xg=X("cursor-add",{x:5,y:5}),vg=X("cursor-remove",{x:5,y:5}),Sg=X("cursor-swap",{x:5,y:5}),Cg=X("cursor-feedback",{x:15,y:15}),bg=X("cursor-comment",{x:15,y:15}),Jt={x:16,y:16},Ig=X("cursor-insert",Jt),Ng=X("cursor-zoom-in",Jt),Tg=X("cursor-zoom-out",Jt),Ds=X("cursor-grabbing",Jt),Ld=(e,t)=>{switch(e){case 0:{if(t.x&&t.y)return 8;if(t.x)return 6;if(t.y)return 2;break}case 1:{if(t.x)return 7;break}case 2:{if(t.x&&t.y)return 6;if(t.x)return 8;if(t.y)return 0;break}case 3:{if(t.y)return 5;break}case 5:{if(t.y)return 3;break}case 6:{if(t.x&&t.y)return 2;if(t.x)return 0;if(t.y)return 8;break}case 7:{if(t.x)return 1;break}case 8:{if(t.x&&t.y)return 0;if(t.x)return 2;if(t.y)return 6;break}default:break}return e},Ed=e=>8-e,Bd=(e,t,o)=>{let{fx:r,fy:n}=e,i=t.findIndex(d=>d.fx===r&&d.fy===n),a=Ld(i,o),s=t[a];C(s,"handle must be defined",s,t);let l=Ed(a),c=t[l];return C(c,"handle must be defined",c,t),k.angleFromX(c,s)},Vd=e=>{switch(e){case 0:return 15;case 1:return 8;case 2:return 9;case 3:return 14;case 5:return 10;case 6:return 13;case 7:return 12;case 8:return 11}},qe=e=>`url("data:image/svg+xml,<svg width='32' height='32' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><path fill-rule='evenodd' clip-rule='evenodd' d='M16 9C17.103 9 18 9.897 18 11V21C18 22.103 17.103 23 16 23C14.897 23 14 22.103 14 21V11C14 9.897 14.897 9 16 9ZM21.3564 12.2148C21.5684 12.2148 21.7824 12.2658 21.9734 12.3608L26.7354 14.7438C27.2064 14.9788 27.4994 15.4518 27.5004 15.9788C27.5004 16.5068 27.2074 16.9808 26.7364 17.2158L21.9744 19.5988C21.7834 19.6948 21.5694 19.7458 21.3564 19.7458C20.5934 19.7458 19.9734 19.1248 19.9734 18.3618V13.5978C19.9734 13.2188 20.1234 12.8648 20.3964 12.6028C20.6554 12.3528 20.9974 12.2148 21.3564 12.2148Z' id='b'/><filter x='-50%25' y='-50%25' width='200%25' height='200%25' filterUnits='objectBoundingBox' id='a'><feGaussianBlur stdDeviation='1' in='SourceAlpha' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' in='shadowBlurOuter1'/></filter></defs><g fill='none' fill-rule='evenodd'><g transform='translate(0, 1)'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='rotate(${e} 0 0)' transform-origin='center center'/></g><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill-rule='evenodd' clip-rule='evenodd' d='M16 10C16.552 10 17 10.448 17 11V21C17 21.552 16.552 22 16 22C15.448 22 15 21.552 15 21V11C15 10.448 15.448 10 16 10ZM26.2884 15.638L21.5274 13.256C21.2734 13.129 20.9734 13.314 20.9734 13.598V18.362C20.9734 18.647 21.2734 18.832 21.5274 18.705L26.2884 16.322C26.5704 16.181 26.5704 15.779 26.2884 15.638Z' fill='%23000'/></g></g></svg>") 16 16, pointer`,Od=e=>`url("data:image/svg+xml,<svg width='32' height='32' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><path d='m20.252 20.196 5.006-2.898a1.5 1.5 0 0 0 0-2.596l-5.006-2.898A1.5 1.5 0 0 0 18 13.102v5.796a1.5 1.5 0 0 0 2.252 1.298Zm-8.504 0-5.006-2.898a1.5 1.5 0 0 1 0-2.596l5.006-2.898A1.5 1.5 0 0 1 14 13.102v5.796a1.5 1.5 0 0 1-2.111 1.37l-.14-.072Z' id='b'/><filter x='-50%25' y='-50%25' width='200%25' height='200%25' filterUnits='objectBoundingBox' id='a'><feGaussianBlur stdDeviation='1' in='SourceAlpha' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' in='shadowBlurOuter1'/></filter></defs><g fill='none' fill-rule='evenodd'><g transform='translate(0, 1)'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='rotate(${e} 0 0)' transform-origin='center center'/></g><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path d='m19.75 19.317 5-2.884a.5.5 0 0 0 0-.866l-5-2.884a.5.5 0 0 0-.75.433v5.768a.5.5 0 0 0 .67.47l.08-.037Zm-7.5 0-5-2.884a.5.5 0 0 1 0-.866l5-2.884a.5.5 0 0 1 .75.433v5.768a.5.5 0 0 1-.75.433Z' fill='%23000'/></g></g></svg>") 16 16, pointer`,er=e=>e+180,zd=(e,t,o)=>{if(t){let r=t.x.max&&t.x.min,n=t.y.max&&t.y.min,i=Vd(e),a=i===8||i===12,s=i===14||i===10;if(a&&n||s&&r)return;if(s&&t.x.max)return qe(er(o));if(s&&t.x.min)return qe(o);if(a&&t.y.max)return qe(er(o));if(a&&t.y.min)return qe(o);let l=i===15||i===13||i===9||i===11;if(l&&t.x.max&&t.y.max)return qe(er(o));if(l&&t.x.min&&t.y.min)return qe(o)}return Od(o)},Rg=(e,t,o,r={})=>{let n=t.findIndex(i=>i.fx===e.fx&&i.fy===e.fy);if(!(n<-1))return zd(n,o,Bd(e,t,r))},Gd=e=>{switch(e){case 0:return[6,2];case 2:return[0,8];case 8:return[2,6];case 6:return[8,0];default:return[8,0]}},Hd=(e,t)=>{let{fx:o,fy:r}=e,n=t.findIndex(h=>h.fx===o&&h.fy===r),i=t[n];C(i,"handle must be defined",i,t);let[a,s]=Gd(n),l=t[a],c=t[s];C(l&&c,"handle must be defined",a,s,t);let d=k.angleFromX(i,l),u=k.angleFromX(i,c),p=Math.abs(d-u),m=(p>180?360-p:p)/2,f=[t[0],t[4],t[2]];return(Lt.isClockwise(f)?d:u)+m-180},jd=e=>`url("data:image/svg+xml,<svg width='32' height='32' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><path d='M13.6614 7.0093L13.8655 7.04543L18.2004 8.12942C19.3315 8.41227 19.7211 9.82063 18.8967 10.645L18.2864 11.2544C20.3261 13.9396 20.3266 17.6871 18.2873 20.3726L18.8967 20.982C19.7212 21.8064 19.3315 23.2158 18.2004 23.4986L13.8655 24.5816C12.767 24.8562 11.7719 23.8616 12.0461 22.7632L13.1301 18.4282L13.1955 18.2251C13.586 17.2529 14.8727 16.9582 15.6457 17.731L16.1321 18.2173C17.0452 16.7509 17.0457 14.8749 16.1321 13.4087L15.6457 13.896C14.8213 14.7204 13.413 14.3308 13.1301 13.1997L12.0461 8.86477C11.7887 7.83475 12.6477 6.89604 13.6614 7.0093Z' id='b'/><filter x='-50%25' y='-50%25' width='200%25' height='200%25' filterUnits='objectBoundingBox' id='a'><feGaussianBlur stdDeviation='1' in='SourceAlpha' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0' in='shadowBlurOuter1'/></filter></defs><g fill='none' fill-rule='evenodd'><g transform='translate(0, 1)'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='rotate(${e} 0 0)' transform-origin='center center'/></g><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path d='M14.1003 12.957L13.0166 8.62221C12.9251 8.25602 13.2568 7.92432 13.6229 8.01587L17.9578 9.09958C18.3348 9.19384 18.4649 9.66339 18.19 9.9382L14.9389 13.1893C14.6641 13.4641 14.1946 13.3341 14.1003 12.957Z' fill='%23000'/><path d='M16.6495 10.9417C19.5422 13.5453 19.5422 18.0823 16.6495 20.6858L15.9795 19.9417C18.431 17.7354 18.431 13.8922 15.9795 11.6858L16.6495 10.9417Z' fill='%23000'/><path d='M14.1003 18.6705L13.0166 23.0053C12.9251 23.3715 13.2568 23.7032 13.6229 23.6116L17.9578 22.5279C18.3348 22.4337 18.4649 21.9641 18.19 21.6893L14.9389 18.4382C14.6641 18.1634 14.1946 18.2934 14.1003 18.6705Z' fill='%23000'/></g></g></svg>") 16 16, pointer`,Mg=(e,t)=>jd(Hd(e,t));var or=e=>Math.max(.5,4/e),Ud=e=>Math.max(.5,16/e),rr=(e,t,o)=>{let r=new Set,n=new Set;return e.forEach(i=>{if(t!==void 0){let m=i.width*t,f=i.height*t;if(m<12&&f<12)return}let a=o?.5:1,{x:s,y:l}=qt({x:i.x,y:i.y},a),{x:c,y:d}=qt({x:i.x+i.width/2,y:i.y+i.height/2},a),{x:u,y:p}=qt({x:i.x+i.width,y:i.y+i.height},a);r.add(s).add(c).add(u),n.add(l).add(d).add(p)}),{x:r,y:n}},As=(e,t,o,r)=>{let n=new Map,i=t?o.x:o.y,a=null,s=null;if(typeof o.width=="number"&&typeof o.height=="number"){let{width:l,height:c}=o;a=t?o.x+l/2:o.y+c/2,s=t?o.x+l:o.y+c}return e.forEach(l=>{let c=Math.abs(i-l),d=Math.abs((a||0)-l),u=Math.abs((s||0)-l),p=null;if(c<r?p=l:a!==null&&d<r?p=l-Math.abs(a-i):s!==null&&u<r&&(p=l-Math.abs(s-i)),p!==null){let m=new Set,f=n.get(p)??m;n=n.set(p,f.add(l))}}),n},Bs=(e,t,o)=>{let r=As(e.x,!0,t,o),n=As(e.y,!1,t,o);return{x:r,y:n}},Ls=(e,t)=>{let o=0,r;return e.forEach((n,i)=>{t!==void 0&&i===t||n.size>o&&(o=n.size,r=[i,n])}),r},$d=(e,t)=>{let o=Ls(e.x,t?t.x:void 0),r=Ls(e.y,t?t.y:void 0);return{x:o,y:r}},Vs=(e,t)=>{if(!t)return e;let o=rr(t);return{x:new Set([...e.x,...o.x]),y:new Set([...e.y,...o.y])}},Os=(e,t,o,r,n)=>{e=Vs(e,n);let i=or(t),a=Bs(e,o,i),s=$d(a,r),[l,c]=s.x?s.x:[void 0,new Set],[d,u]=s.y?s.y:[void 0,new Set];return{point:{x:l,y:d},snapLines:{x:c,y:u}}},Es=(e,t,o,r,n,i)=>{let a=null;return e.forEach(s=>{let l=i(s);if(a=D.intersection(l,r),a===null)return;if(n||k.distance(a,o)<=t)return!1;a=null}),a},zs=(e,t,o,r,n,i=!1)=>{e=Vs(e,n);let a=or(t),s=Bs(e,o,a),l=D.isOrthogonal(r)||i,c=Ud(t),d=null,u=new Set,p=new Set;if(d=Es(Array.from(s.x.keys()),c,o,r,l,f=>D({x:f,y:0},{x:f,y:100})),d!==null)return{point:d,snapLines:{x:u.add(d.x),y:p}};if(d=Es(Array.from(s.y.keys()),c,o,r,l,f=>D({x:0,y:f},{x:100,y:f})),d!==null)return{point:d,snapLines:{x:u,y:p.add(d.y)}};let m=D.perpendicular(r,o);return d=D.intersection(r,m),d===null&&(d=o),{point:d,snapLines:{x:u,y:p}}},Gs=(e,t,o,r)=>{let n={...t},i=[],a=[],s=[],l=[],c=or(r),{x:d,y:u}=o,p="height"in o?o.height:0,m="width"in o?o.width:0,f=d+m,b=u+p,S={x:d,y:u,width:m,height:p};return e.siblingFrames.forEach(g=>{e.horizontalDistances.forEach((h,v)=>{let y=h.filter(x=>T.overlapVertically(S,x));if(y.length!==0&&T.overlapVertically(S,g)){if(Math.abs(g.x-v-f)<c){let x={x:g.x-v,y:g.y,width:v,height:g.height};if(y=y.filter(N=>!T.overlapHorizontally(N,x)),y.length===0)return;if(T.doesNotIntersect(x,e.siblingFrames)){let N=g.x-v-m;(n.x===void 0||n.x===N)&&(i.push(...y),s.push(x),n.x=N)}}else if(Math.abs(T.maxX(g)+v-d)<c){let x={x:T.maxX(g),y:g.y,width:v,height:g.height};if(y=y.filter(N=>!T.overlapHorizontally(N,x)),y.length===0)return;if(T.doesNotIntersect(x,e.siblingFrames)){let N=T.maxX(g)+v;(n.x===void 0||n.x===N)&&(i.push(...y),s.push(x),n.x=N)}}}}),e.verticalDistances.forEach((h,v)=>{let y=h.filter(x=>T.overlapHorizontally(S,x));if(y.length!==0&&T.overlapHorizontally(S,g)){if(Math.abs(g.y-v-b)<c){let x={y:g.y-v,x:g.x,height:v,width:g.width};if(y=y.filter(N=>!T.overlapVertically(N,x)),y.length===0)return;if(T.doesNotIntersect(x,e.siblingFrames)){let N=g.y-v-p;(n.y===void 0||n.y===N)&&(a.push(...y),l.push(x),n.y=N)}}else if(Math.abs(T.maxY(g)+v-u)<c){let x={y:T.maxY(g),x:g.x,height:v,width:g.width};if(y=y.filter(N=>!T.overlapVertically(N,x)),y.length===0)return;if(T.doesNotIntersect(x,e.siblingFrames)){let N=T.maxY(g)+v;(n.y===void 0||n.y===N)&&(a.push(...y),l.push(x),n.y=N)}}}})}),{distanceSnap:n,distanceFramesX:i,distanceFramesY:a,horizontalDistanceFrames:s,verticalDistanceFrames:l}};var eo=class{constructor(t,o){this.engine=t;this.excludedNodes=o;I(this,"snapX",null);I(this,"snapY",null);I(this,"snapConstraint",null);I(this,"distanceFramesX",[]);I(this,"distanceFramesY",[]);I(this,"snappingZoom",-1);I(this,"snappingFrame",{x:0,y:0,width:0,height:0});I(this,"linesCache",new Map);I(this,"distanceCache",new Map);I(this,"snapForShapes",!1)}start(){this.snapForShapes=this.engine.stores.toolStore.shapeToolActive||this.engine.stores.selectionStore.nodes.every(t=>me(t))}stop(){this.engine.stores.snapLinesStore.clear()}validateCaches(){let{canvasStore:t}=this.engine.stores,o=t.getCanvasVisibleRect();(this.snappingZoom!==t.zoom||!T.equals(this.snappingFrame,o))&&(this.snappingZoom=t.zoom,this.snappingFrame=o,this.linesCache=new Map,this.distanceCache=new Map)}snap(t,o,r,n,i,a,s,l=!1){let{snapLinesStore:c,canvasStore:d}=this.engine.stores;if(o===!1)return this.snapX=null,this.snapY=null,this.snapConstraint=null,this.distanceFramesX=[],this.distanceFramesY=[],c.clear(),t;this.validateCaches();let u=this.getOrthogonalLines(r,l),p;i?p=zs(u,d.zoom,t,i,s,this.snapForShapes):p=Os(u,d.zoom,t,a,s);let m=Array.from(p.snapLines.y),f=Array.from(p.snapLines.x),b=i!==void 0?i:null,S=null;if(n!==void 0&&i===void 0){let y=this.getSiblingDistances(n);S=Gs(y,p.point,t,d.zoom)}S&&S.distanceSnap.x!==void 0&&(p.point.x=S.distanceSnap.x),S&&S.distanceSnap.y!==void 0&&(p.point.y=S.distanceSnap.y);let g={x:H(p.point.x)?p.point.x:t.x,y:H(p.point.y)?p.point.y:t.y};S!==null&&(S.horizontalDistanceFrames.forEach(y=>{let x="height"in t?t.height:0,N=Math.min(y.y,g.y),P=Math.max(T.maxY(y),g.y+x);S.distanceFramesX.push({...y,y:N,height:P-N})}),S.verticalDistanceFrames.forEach(y=>{let x="width"in t?t.width:0,N=Math.min(y.x,g.x),P=Math.max(T.maxX(y),g.x+x);S.distanceFramesY.push({...y,x:N,width:P-N})}));let h=S?S.distanceFramesX:[],v=S?S.distanceFramesY:[];return this.snapX=f,this.snapY=m,c.x=new Set(f),c.y=new Set(m),this.snapConstraint=b,this.distanceFramesX=h,this.distanceFramesY=v,g}getOrthogonalLines(t,o=!1){let{tree:r}=this.engine,{canvasStore:n,scopeStore:i,persistedUserDefaults:a,overlayStore:s}=this.engine.stores,{active:l}=i,c=n.getCanvasVisibleRect(),d=this.engine.tool.enum===40,u=this.snapForShapes||d,{displayRulers:p}=a,m=p&&Jn(l)?{x:new Set(l.guidesX),y:new Set(l.guidesY)}:{x:new Set,y:new Set};return t.forEach(f=>{let b={x:new Set,y:new Set},S={x:new Set,y:new Set};if(!this.linesCache.has(f)){let h=[],v=[...this.excludedNodes],y=l.getGroundNodesOfType(Si,R=>!v.includes(R.id));if(!f)v.push(...y.map(R=>R.id)),h.push(...r.getSubtreeNodes(l.id,v)),h.push(...y);else{h.push(...r.getSubtreeNodes(f,v));let R=r.getNode(f);if(p&&R&&ei(R)){let w=R.guidesX.map(j=>ct(r,R,"x",j));b.x=new Set(w);let A=R.guidesY.map(j=>ct(r,R,"y",j));b.y=new Set(A)}if(a.displayGrids&&R&&(!Wt(R)||R.resolveValue("rotation")===0)&&hi(R)&&R.overlayGrid){let w=[],A=[],j=r.convertFrameToCanvas(R);if(!R.overlayGrid)return;let W=gi(R.overlayGrid,j);R.overlayGrid?.type==="column"&&W.forEach($=>w.push(ct(r,R,"x",$))),R.overlayGrid?.type==="row"&&W.forEach($=>A.push(ct(r,R,"y",$))),S.x=new Set(w),S.y=new Set(A)}if(o&&R&&Rn(R)){let w=T.atOrigin(r.getRect(R));w.height=Mn(R,w);let j=T.cornerPoints(w).map($=>r.convertPointToCanvas(R,$,!0)),W=T.boundingRectFromPoints(j);b.y.add(W.y+W.height)}}h=h.filter(R=>{if(s.editModeActive){if(s.activeRelativeOverlayTriggers.has(R.id))return!0;if(!kn(R,s.activeOverlays))return!1}return!R.isVisible()||Dt(R)?!1:Ue(R)?!R.sizeToFit:!0});let x=h.map(R=>r.convertFrameToCanvas(R)).filter(R=>T.intersects(R,c)),N=rr(x,n.zoom,u),P={x:new Set([...N.x,...b.x,...S.x]),y:new Set([...N.y,...b.y,...S.y])};this.linesCache=this.linesCache.set(f,P)}let g=this.linesCache.get(f);g&&(m.x=new Set([...m.x,...g.x]),m.y=new Set([...m.y,...g.y]))}),m}getSiblingDistances(t){let{tree:o}=this.engine,r=this.engine.stores.canvasStore.getCanvasVisibleRect();if(!this.distanceCache.has(t)){let i=[];if(t)i=o.getNode(t).children;else{let p=this.engine.stores.scopeStore.active.getGroundNodes();p&&(i=p)}let a=[...this.excludedNodes],s=i.filter(p=>!a.includes(p.id)).map(p=>T.pixelAligned(o.convertFrameToCanvas(p))).filter(p=>T.intersects(r,p)),l=Li(s),c=new Map,d=new Map,u=(p,m,f)=>{let b=p.get(m)??[];return p.set(m,[...b,f])};l.forEach(([p,m])=>{let f=T.maxY(p),b=T.maxY(m),S=T.maxX(p),g=T.maxX(m);if(T.overlapHorizontally(p,m)){let h=Math.min(p.x,m.x),y=Math.max(S,g)-h;if(f<m.y){let x=m.y-f,N={y:f,x:h,width:y,height:x};T.doesNotIntersect(N,s)&&(c=u(c,x,N))}else if(b<p.y){let x=p.y-b,N={y:b,x:h,width:y,height:x};T.doesNotIntersect(N,s)&&(c=u(c,x,N))}}if(T.overlapVertically(p,m)){let h=Math.min(p.y,m.y),y=Math.max(f,b)-h;if(S<m.x){let x=m.x-S,N={x:S,y:h,width:x,height:y};T.doesNotIntersect(N,s)&&(d=u(d,x,N))}else if(g<p.x){let x=p.x-g,N={x:g,y:h,width:x,height:y};T.doesNotIntersect(N,s)&&(d=u(d,x,N))}}}),this.distanceCache=this.distanceCache.set(t,{verticalDistances:c,horizontalDistances:d,siblingFrames:s})}let n=this.distanceCache.get(t);return En(n,"cant read distances"),n}};function Hs(e,t){if(t.length!==1)return!1;let o=e.get(t[0]);return!!(o&&Ht(o))}function Xy(e){return e instanceof nr}var nr=class extends Tt("MoveTool",Qt){constructor(o,r){super(o);this.options=r;I(this,"enum",10);I(this,"wantsAutoscrolling",!0);I(this,"isCancelled",!1);I(this,"nodesBeginState");I(this,"startCanvasRect");I(this,"hasMoved",!1);I(this,"maxSize");I(this,"nodesInMoveToolBaseFontSize",{});I(this,"highlightedParents",new Set);I(this,"shouldHighLightParents",!0);I(this,"commonParentAfterLastUpdate");I(this,"topLevelFrameNodesAfterLastUpdate",[]);I(this,"snapper");I(this,"isSkewed");I(this,"cloneCache",new Map);I(this,"renamedIds",new Map);I(this,"canMoveToStackOrGrid",!1);I(this,"activeStackOrGrid",null);I(this,"commonStackOrGridParentAtStart",null);I(this,"activeStackOrGridInsertion");I(this,"stackOrGridInsertionLine",null);I(this,"displaySelectionBox",!0);I(this,"cmsBadge","visible");I(this,"displaySelectionHandles",!0);I(this,"stateToken");I(this,"scopeIdAtStart");I(this,"lastAltKeyDownTime",0);I(this,"updateNodesInMoveToolBaseFontSize",(o,r)=>{if(o===r)return;let n=this.nodesInMoveToolBaseFontSize[o];H(n)&&(this.nodesInMoveToolBaseFontSize={...this.nodesInMoveToolBaseFontSize,[r]:n})});this.displaySelectionHandles=!r?.reorderNode}selectionIds(){return this.options?.reorderNode?[this.options.reorderNode.id]:this.engine.stores.selectionStore.ids}start(){let{engine:o}=this,{tree:r,componentLoader:n}=o,{scopeStore:i,mouseStore:a,modulesStore:s}=o.stores,l=this.selectionIds();this.snapper=new eo(o,l);let c=r.withoutDescendants(r.getNodes(l));this.nodesBeginState=Cp(r,n,c,a.latest.canvasMousePosition),this.maxSize=cp(this.nodesBeginState),this.startCanvasRect=T.merge(...c.map(u=>r.convertFrameToCanvas(u))),this.canMoveToStackOrGrid=ap(c,r),this.commonStackOrGridParentAtStart=sp(r,c),this.nodesInMoveToolBaseFontSize=c.reduce((u,p)=>{let m=cn(i.active,r,s,p.id);return H(m)&&(u[p.id]=m),u},{});let d=c[0];this.isSkewed=c.length===1&&!!d&&Bn(r.convertCornerPointsToCanvas(d)),o.beginUndoGroup(),o.stores.treeStore.setHighlight(null),this.scopeIdAtStart=o.stores.scopeStore.activeId,this.stateToken=o.getStateToken(),this.shouldHighLightParents=!c.every(lt)}cancel(){let{engine:o}=this;o.stores.toolStore.updateDragAndDropPlaceholder(null),to(this.activeStackOrGrid),this.activeStackOrGrid=null,o.discardUndoGroup(),this.isCancelled=!0}stop(){let{engine:o}=this;this.isCancelled||(this.toolUpdate(!0),o.endUndoGroup()),this.hasMoved||this.options?.moveToolDidExitWithoutMoving?.(),this.snapper.stop()}resetToBeginState(){this.engine.resetTreeAndSelectionWithToken(this.stateToken)}update(){let{engine:o}=this,{mouseStore:r,mouseCursorStore:n,scopeStore:i,toolStore:a}=o.stores,{canvasMouseDownPosition:s,canvasMiddleMouseButtonDownPosition:l}=r;if(!s||l){o.exitTool();return}if(this.scopeIdAtStart!==i.activeId){a.updateDragAndDropPlaceholder(null),to(this.activeStackOrGrid),r.setMouseDown(!1),o.exitTool();return}if(this.toolUpdate(),this.options?.reorderNode&&(n.current=Ds),this.nodesBeginState.size===0){o.exitTool();return}}validateNodesBeginState(){let{engine:o}=this;this.nodesBeginState.forEach((r,n)=>{o.tree.has(n.id)||this.nodesBeginState.delete(n)})}validateNodesInMoveToolBaseFontSize(){let{engine:o}=this,r=Object.keys(this.nodesInMoveToolBaseFontSize);r.every(i=>{let a=this.nodesInMoveToolBaseFontSize[i];return o.tree.has(i)&&H(a)})||(this.nodesInMoveToolBaseFontSize=r.reduce((i,a)=>{let s=this.nodesInMoveToolBaseFontSize[a];return!o.tree.has(a)||!H(s)||(i[a]=s),i},{}))}noInputChange(){let{previous:o,latest:r}=this.engine.stores.mouseStore,{altKey:n,cmdKey:i,spacebar:a,canvasMousePosition:s}=r;return s.x===o.canvasMousePosition.x&&s.y===o.canvasMousePosition.y&&n===o.altKey&&i===o.cmdKey&&a===o.spacebar}shouldCopy(o){return this.engine.stores.mouseStore.latest.altKey?(this.lastAltKeyDownTime=performance.now(),!0):o?performance.now()-this.lastAltKeyDownTime<200:!1}addReorderOffsetIfNeeded(o){return this.options?.reorderOffset?k.add(o,this.options.reorderOffset):o}getMouseWithReorderOffset(){return this.addReorderOffsetIfNeeded(this.engine.stores.mouseStore.latest.canvasMousePosition)}getPreviousMouseWithReorderOffset(){return this.addReorderOffsetIfNeeded(this.engine.stores.mouseStore.previous.canvasMousePosition)}toolUpdate(o=!1){let{engine:r}=this,n=!!this.options?.reorderNode;if(o&&!this.hasMoved){this.options?.reorderNode&&r.stores.selectionStore.set(this.options.reorderNode);return}let{tree:i}=r,{scopeStore:a,effectStore:s,mouseStore:l,documentSettingsStore:c,toolStore:d,chromeStore:u,selectionStore:p,canvasStore:m}=r.stores,{previous:f,latest:b}=l,{altKey:S,cmdKey:g,spacebar:h,canvasMousePosition:v}=b;if(this.scopeIdAtStart!==a.activeId||lp(this.nodesBeginState)||Xt(r,"canDesign")||u.isPreviewingLocaleOnCanvas)return;let y=Xd(l,this.options?.directionLock);if(!y||!this.hasMoved&&y.x===0&&y.y===0||(this.hasMoved=!0,s.exitPreview(),!o&&this.noInputChange()))return;this.resetToBeginState(),this.validateNodesBeginState(),this.validateNodesInMoveToolBaseFontSize();let x=new Map,N=S&&g;this.displaySelectionHandles=!1,this.highlightedParents.clear(),to(this.activeStackOrGrid),np(r,this.nodesBeginState,x,this.shouldCopy(o)&&!N,this.cloneCache,this.renamedIds);let{ctrlKey:P}=l,R=P&&i.getNodes(this.selectionIds()).every(Hn),w=T.offset(this.startCanvasRect,y),{insertionIndex:A,insertionLine:j,activeStackOrGrid:W,isLiveSorting:$,wrap:Ze}=pp(r,this.getMouseWithReorderOffset(),this.getPreviousMouseWithReorderOffset(),this.selectionIds(),this.nodesBeginState,this.canMoveToStackOrGrid&&!h&&!g,!!this.options?.reorderNode,this.commonStackOrGridParentAtStart,this.maxSize,this.activeStackOrGridInsertion,R);this.activeStackOrGridInsertion=A,this.stackOrGridInsertionLine=j,this.activeStackOrGrid=W,$&&!o&&this.makeGroundNodes(x),d.updateDragAndDropPlaceholder(this.activeStackOrGrid);let{activeNodes:ve,extraSnapRects:we}=yp(i,this.nodesBeginState,x,g),Pe=k.distance(f.canvasMousePosition,v)*m.zoom,Se=!!(this.activeStackOrGrid&&!$),Fe=!this.isSkewed&&(Pe<10&&Se?!0:!this.activeStackOrGrid);this.snapper.excludedNodes=this.selectionIds();let De=this.snapper.snap(w,Fe,this.topLevelFrameNodesAfterLastUpdate,this.commonParentAfterLastUpdate,void 0,void 0,we,Hs(i,this.selectionIds())),G=k.pixelAligned(k.subtract(this.startCanvasRect,De)),E=new Set(this.selectionIds()),Ce=this.activeStackOrGrid&&H(this.activeStackOrGridInsertion);if(o&&Ce||this.nodesBeginState.forEach((B,Z)=>{let{unableToMove:Ae,startFromStackOrGrid:yc,disableReparenting:xc}=B;if(Ae)return;let lo=x.get(Z)??Z.id,co=i.get(lo);if(!co)return;let vc=lo!==Z.id&&ze(Z),po=i.current(B.parent),Le=B.rect,uo=_t(ir(r.tree,po),B.untransformedPointUnderMouse,k.subtract(B.canvasPointUnderMouse,G)),Qe={...Le,...k.pixelAligned(k.add(Le,uo),Le)},Sc=bp(r.tree,po).translate(uo.x,uo.y).multiply(B.matrix),Je=this.getNewParent(co,po,T.pointsAtOrigin(Qe).map(fo=>Ye.convertPoint(Sc,fo)),Qe,vc,yc,xc||Se),Cc=Z.id!==lo,mo=this.reparentNode(co,Je,E,Cc,$,-1,!0);if(this.shouldHighLightParents&&(this.highlightedParents=Jd(this.highlightedParents,Je,this.activeStackOrGrid)),Je?.id!==B.parent?.id){let fo=_t(ir(r.tree,Je),B.untransformedPointUnderMouse,k.subtract(B.canvasPointUnderMouse,G));Qe={...Le,...k.pixelAligned(k.add(Le,fo),Le)}}let bc=this.getUpdatedNodeConstraints(i,mo,Qe,B,Je,R);mo.set(bc),tp(r,mo,B,Qe)}),o){if(r.tree.beginAllowPartialScopeAccess(),Rp(r,this.nodesBeginState,x),kp(r,this.nodesBeginState,x),wp(r,this.nodesBeginState,x),r.tree.endAllowPartialScopeAccess(),d.updateDragAndDropPlaceholder(null),to(this.activeStackOrGrid),Ce&&this.insertSelectionIntoStackOrGrid(x,E,$,Ze),Mp(x,r.tree),n||p.set(E),x.size>0){let B=new Map;for(let[Z,Ae]of x.entries())B.set(Z.id,Ae);c.lastDuplicationMap=B}this.renamedIds.clear();return}n||p.set(E),this.commonParentAfterLastUpdate=_d(i,ve),this.topLevelFrameNodesAfterLastUpdate=i.getTopLevelFrameNodes(ve)}getUpdatedNodeConstraints(o,r,n,i,a,s){let l=i.parent?i.parent.id===a?.id:a===null,c=Tp(i,l),u=o.getParentSizeInfo(r,a,!0,!1),p=r.updateForRect({rect:n,parentSizeInfo:u,updateSize:!1,constraintsLocked:Uo(r,c),shouldGuessPinToBottom:Ho(o,r),shouldGuessPinToRight:jo(o,r,a)});return!c&&$e(r)&&(p.constraintsLocked=!1),s?p.position="absolute":Object.assign(p,Wn(r,a)),p}getNewParent(o,r,n,i,a,s,l){let{engine:c}=this;if(l)return r;if(this.activeStackOrGrid)return ue;let{tree:d}=c,{mouseStore:u}=c.stores,{cmdKey:p,altKey:m,spacebar:f,canvasMousePosition:b}=u.latest,S=m&&p,g=r&&me(r),h=o.originalid&&!Dr(o)&&!ko(o),v=!f&&(!p||S)&&!g&&!h,y=r;if(v||a){if(y=Zd(c,o,n,this.selectionIds(),b,m),m&&y&&d.isGroundNode(y)){let x=d.getRect(y.draftOrCurrent());(x.width<=i.width&&x.height<=i.height||y.id===o.duplicatedFrom?.[o.duplicatedFrom.length-1])&&(y=null)}!a&&Qd(d,n,r,y,s)&&(y=r)}return y}reparentNode(o,r,n,i,a,s,l){let{engine:c}=this,d=c.tree.getParent(o.id);return Wo(r,d)&&s===-1&&!i?o:ze(o)&&r&&Ge(r)?this.reparentNodeInsideVariant(o,r,s):ze(o)?this.moveNodeOutOfVariant(o,r,s,n,a,l):r&&Ge(r)?this.moveNodeIntoVariant(o,r,s,n):(c.moveNode(o.id,r?r.id:ue,s),nt(r)&&Vo(o)&&(Fr(r)?o.gridItemFillCellHeight===!0&&o.set({gridItemFillCellHeight:void 0}):(o.gridItemFillCellWidth===void 0&&o.set({gridItemFillCellWidth:!0}),o.gridItemFillCellHeight===void 0&&o.set({gridItemFillCellHeight:!0}))),o)}reparentNodeInsideVariant(o,r,n){let{engine:i}=this;return An(i,o,r),i.moveNode(o.originalid,r.originalid,n),o}moveNodeOutOfVariant(o,r,n,i,a,s){let{engine:l}=this,c=l.tree.getNode(o.originalid);if(C(c,"original node must exist"),!wn(l.tree,o)||a)this.updateNodesInMoveToolBaseFontSize(o.id,c.id),Fn(l,o,c,i),l.moveNode(c.id,r?r.id:ue,n);else if(s){let d=this.cloneCache.get(o.id)??l.cloneNode(o,!1,!1);this.cloneCache.set(o.id,d);let u=d.cloneWithIds();return l.stores.scopeStore.insertNode(u,r?r.id:ue,n),this.updateNodesInMoveToolBaseFontSize(o.id,u.id),l.tree.current(o)?.set({visible:!1}),i.delete(o.id),i.add(u.id),u}return c}moveNodeIntoVariant(o,r,n,i){let{engine:a}=this,s=a.tree.getNode(r.originalid);C(s,"original node of the new parent should exist"),a.moveNode(o.id,s?.id??ue,n);let l=Dn(a,o,r,s,i,this.renamedIds);return this.updateNodesInMoveToolBaseFontSize(o.id,l),o}insertSelectionIntoStackOrGrid(o,r,n,i){if(Ie(this.activeStackOrGrid)||!H(this.activeStackOrGridInsertion))return;let{engine:a}=this,s=Array.from(this.nodesBeginState.keys()).map(u=>o.get(u)??u.id),l=this.activeStackOrGrid,c=up(this.activeStackOrGridInsertion,l,s);if(i&&To(l)){let u=qi(a,l,i);u&&(l=u)}let d=nt(l);this.nodesBeginState.forEach((u,p)=>{let m=o.get(p)??p.id,f=a.tree.getNode(m);if(!f)return;C(!Ie(l),"stackOrGrid must be a valid node");let b=p.id!==m;if(n&&!b&&Yr(l)&&zo(f)){qn(f.getPrimaryId(),l,c),c++;return}let S=this.reparentNode(f,l,r,b,n,c,!0);if($e(S)){let g={top:0,left:0,right:null,bottom:null,...u.startSizeProps};if(!u.parent||u.parent.id!==l.id){let v=g.widthType===3||g.widthType===1,y=g.heightType===3||g.heightType===1;v&&(d||l.widthType===2)&&(g.width=u.rect.width,g.widthType=0),y&&(d||l.heightType===2)&&(g.height=u.rect.height,g.heightType=0)}S.set(g)}else S.set(u.startSizeProps);c++})}makeGroundNodes(o){let{engine:r}=this;this.nodesBeginState.forEach((n,i)=>{let a=o.get(i)??i.id,s=r.tree.getNode(a);if(!s)return;let l=i.id!==a;this.reparentNode(s,null,new Set,l,!0,-1,!1)})}};function Xd(e,t){let{canvasMousePosition:o,shiftKey:r}=e.latest,n=e.previous;return n.canvasMouseDownPosition?qd(n.canvasMouseDownPosition,o,r,t):void 0}function qd(e,t,o,r){let n=k.pixelAligned(k.subtract(t,e));return r?r==="horizontal"?n.y=0:n.x=0:o&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),n}function _d(e,t){let o=t.map(i=>i?e.getParent(i.id):void 0);if(!(new Set(o).size===1))return;let n=o[0];return n?n.id:ue}function Kd(e,t,o,r,n,i){let{tree:a}=e;if(!Zr(o)||Un(o)||Lr(o)||!Gn(a,o,t,n,e.componentLoader))return!1;let s=a.getAncestors(o.id);return s.push(o.id),!($i(s,r)||s.some(d=>d===t.id)||i&&ka(t,o))}function Zd(e,t,o,r,n,i){let{tree:a}=e,s=e.stores.scopeStore.active,l=a.getPotentialParents(s,e.stores.overlayStore.activeOverlays,o,n,e.componentLoader,t);return a.sortVisually(l).reverse().find(u=>Kd(e,t,u,r,s.id,i))||ue}function Qd(e,t,o,r,n){if(n||!o||!r||!!Wo(r,o)||!(!r||e.getAncestors(o.id).find(l=>r!==null&&l===r.id)))return!1;let s=e.convertCornerPointsToCanvas(o);return Lt.intersects(s,t)}function Jd(e,t,o){let r=o||t;return!r||me(r)||Ue(r)&&r.sizeToFit?e:e.add(r.id)}function ep(e,t,o){let r={x:t.rect.x-o.x,y:t.rect.y-o.y};if(Wt(e)){let n=e.resolveValue("rotation"),i=new DOMMatrix().rotateSelf(0,0,-n);r=Ye.convertPoint(i,r)}return r}function tp(e,t,o,r){let{tree:n}=e,{cmdKey:i,altKey:a}=e.stores.mouseStore.latest;!i||a||o.children.forEach((s,l)=>{if(o.startFromStackOrGrid)return;let c=n.getNode(l);if(!c)return;let d=ep(t,o,r),u=T.offset(s.frame,d),p=c.updateForRect({rect:u,parentSizeInfo:n.getParentSizeInfo(c,t),constraintsLocked:Uo(c),shouldGuessPinToBottom:Ho(n,c),shouldGuessPinToRight:jo(n,c,n.getParent(c.id))});op(c,p),e.tree.get(l)?.set(p)})}function op(e,t){return $e(e)&&((e.widthType===2||e.widthType===3)&&(delete t.width,delete t.widthType),(e.heightType===2||e.heightType===3)&&(delete t.height,delete t.heightType)),t}function rp(e){let t=1/0,o=0;for(let r=0,n=e.length;r<n;r++){let i=e[r];i>=t||(t=i,o=r)}return o}function np(e,t,o,r,n,i=new Map){r&&ip(e,t,o,n,i)}function ip(e,t,o,r,n=new Map){t.forEach((a,s)=>{if(lt(s)||me(s)&&ze(s))return;let l=r.get(s.id)??e.cloneNode(s,!1,!1,n);r.set(s.id,l);let c=l.cloneWithIds();e.stores.scopeStore.insertNode(c,s.parentid),n.set(s.id,c.id),o=o.set(s,c.id),Ar(s)&&Ln(e,s,n)});let i=Array.from(o.values());for(let a of i){let s=e.tree.getNode(a),l=e.tree.getParent(a),c=!!l&&(Ft(l)||zt(l));s&&Bi(e.tree,e.componentLoader,s,n,c)}e.stores.selectionStore.set(i)}function ap(e,t){return e.every(o=>!Np(o,t))}function sp(e,t){let o=null;for(let r=0,n=t.length;r<n;r++){let i=t[r];if(!i||lt(i))return null;let a=e.getParent(i.id);if(!To(a)&&!nt(a))return null;if(!o)o=a;else if(o.id!==a.id)return null}return o}function lp(e){for(let t of e.values())if(!t.unableToMove)return!1;return!0}function cp(e){let t=0,o=0;return e.forEach(r=>{let{width:n,height:i}=r.rect;n>t&&(t=n),i>o&&(o=i)}),{width:t,height:o}}function dp(e,t,o){let r=e.tree.get(o.id);if(!r)return!1;let n=e.tree.getGroundNodeFor(r),i=e.tree.convertFrameToCanvas(n);return T.containsPoint(i,t)}function pp(e,t,o,r,n,i,a,s,l,c,d){let u=e.tree.getNodes(r);if(u.length===0)return{insertionIndex:null,insertionLine:null,activeStackOrGrid:null,isLiveSorting:!1};if(d||s&&u.every(f=>Ht(f)||jn(f)))return{insertionIndex:null,insertionLine:null,activeStackOrGrid:s,isLiveSorting:!1};let p=null;if(a?s&&(p=s):s&&dp(e,t,s)?p=s:i&&(p=Xi(e,t,u,s)),!p)return{insertionIndex:null,insertionLine:null,activeStackOrGrid:p,isLiveSorting:!1};let m=!!s&&s.id===p.id;if(m)return{insertionIndex:gp(e.tree,e.stores.layoutCache,t,o,n,p,e.tree.convertPointToNode(p,t),c),insertionLine:null,activeStackOrGrid:p,isLiveSorting:m};{let{insertionIndex:f,insertionLine:b,wrap:S}=Yi(p,e,t,l);return{insertionIndex:f,insertionLine:b,activeStackOrGrid:p,isLiveSorting:m,wrap:S}}}function up(e,t,o){let r=0,n=0;for(let i of t.getChildrenInVisualOrder()){if(n===e)break;o.includes(i.id)||(i.isVisible()&&n++,r++)}return r}function mp(e){let t=[];for(let o of e.values())o.placeholderItem&&t.push(o.placeholderItem);return t}function fp(e,t,o,r,n,i,a){let s=t-o;if(s===0)return!0;if(!a)return e?i==="ltr"?Math.sign(n.x)===Math.sign(s):Math.sign(n.x)!==Math.sign(s):Math.sign(n.y)===Math.sign(s);let l=r[o],c=r[t];if(!l||!c)return!0;let d=e?{a:l.y,b:T.maxY(l)}:{a:l.x,b:T.maxX(l)},u=e?{a:c.y,b:T.maxY(c)}:{a:c.x,b:T.maxX(c)};if(d.b-u.a>=0&&u.b-d.a>=0)return!0;let m=u.a>=d.b?1:-1;return e?Math.sign(n.y)===m:Math.sign(n.x)===m}function hp(e,t){let o=js(t),r=0;for(let n=0;n<=e;n++){let i=o[n];i&&!jt(i,t)&&r++}return r}function gp(e,t,o,r,n,i,a,s){let l=Ui(i,t);if(!l)return 0;let c=ri(e,i);c&&(l=Pp(i,c,l));let d=l.map(v=>k.distance(T.center(v),a)),u=rp(d);u=u+hp(u,i);let p=u,m=Pr(i),f=m||i.stackDirection==="horizontal",b=m||!!i.stackWrapEnabled,S=k.subtract(o,r),g=s!==void 0,h=s===null;if(g&&!h){let v=s,y=e.root.getHorizontalLayoutDirection();p=fp(f,u,v,l,S,y,b)?u:v}else if(h){let v=i.children.filter(y=>y.isVisible()).length;(f&&S.x<0||!f&&S.y<0)&&(p=v)}return i.cache.placeholders={index:p,sizes:mp(n)},p}function to(e){e&&(e.cache.placeholders=null)}function yp(e,t,o,r){let n=[],i=Array.from(t.keys());if(o.size>0){n.push(...i.map(a=>e.convertFrameToCanvas(a))),i.length=0;for(let[a,s]of o){let l=e.getNode(s);l&&i.push(l)}}if(r){let a=xp(t);n.push(...a)}return{activeNodes:i,extraSnapRects:n}}function xp(e){let t=[];return e.forEach(o=>{o.children.forEach(r=>{t.push(r.canvasFrame)})}),t}function js(e){return Pn(e)?e.getChildrenInVisualOrder():zn(e)}function vp(e,t){let o=new Map;if(me(t))return o;let r=js(t),n=No(t);return r.forEach(i=>{if(n&&!jt(i,t))return;let a=e.getRect(i),s=e.convertFrameToCanvas(i);o.set(i.id,{frame:a,canvasFrame:s})}),o}function Sp(e){let t={};return jr(e)&&(t.width=e.width,t.height=e.height),$e(e)&&(t.widthType=e.widthType,t.heightType=e.heightType),t}function Cp(e,t,o,r){let n=e.sortVisually(o),i=new Map;return n.forEach(a=>{let s=Ip(e,t,a,r);i.set(a,s)}),i}function ir(e,t){return t?e.transformMatrixToNode(t):Ye.identity()}function bp(e,t){if(t){let o=e.transformMatrixToNode(t);return si(t)?o:Ye.flatProjectionMatrix(o)}return Ye.identity()}function Ip(e,t,o,r){let n=e.getParent(o.id),i=!!(n&&No(n)),a=i&&ze(o)&&!ko(o)||Hr(o)||!zo(o),s=e.getRect(o),l;if(jt(o,n)&&(l={width:s.width,height:s.height},nt(n))){let m={};pi(o,m,{componentLoader:t}),Vo(o)&&(o.gridItemFillCellWidth&&(m.width="100%"),o.gridItemFillCellHeight&&(Ve.isOn("gridBentoLayout")||n.gridRowHeightType!=="fit")&&(m.height="100%")),l.style=m}let c=_t(ir(e,n),{x:0,y:0},r),u=ni(e,o)?oi(e,o):void 0,p=u&&!Ge(u)?u.id:void 0;return{parent:n,rect:s,matrix:o.originAdjustedMatrix(null,s),untransformedPointUnderMouse:c,canvasPointUnderMouse:n?e.convertPointToCanvas(n,c):c,children:vp(e,o),startFromStackOrGrid:i,unableToMove:a,startSizeProps:Sp(o),constraintsLocked:$e(o)?o.constraintsLocked:!1,placeholderItem:l,disableReparenting:lt(o),repeaterId:p}}function Np(e,t){if(!me(e))return!1;let o=t.getParent(e.id);return Dt(o)||Or(o)}function Tp(e,t){return t?e.constraintsLocked:!1}function Rp(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n,a=e.stores.scopeStore.active;We(a)&&ba(e.tree,a,i)&&Ra(e.tree,a)})}function Mp(e,t){if(!(e.size>0))return;let r=0;for(let n of e.values()){let i=t.getNode(n);if(i)for(let a of i.walk())Mt(a)&&r++}r>0&&he("layout_frame",{source:"duplication",count:r})}function kp(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n,a=e.tree.getParent(i.id);if(a&&(zt(a)||zt(i)||Ft(a)))for(let{node:s,skipChildren:l}of i.walkWithSkipChildren())Ft(s)&&(e.stores.overlayStore.cleanupOverlay(e.stores.selectionStore,s.id,s.parentid,!1),e.tree.removeNode(s),l())})}function wp(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n;if(!r.repeaterId||i.parentid===r.repeaterId)return;let a=e.tree.get(r.repeaterId);kt(a)&&ii(a)})}function Pp(e,t,o){if(o.length===0)return o;let r=e.children.findIndex(a=>a.id===t.id);C(r>=0,"Must have repeated item node as child");let n=o.length-e.children.length+1,i=o[r];return C(i,"Must have a rect"),[...o.slice(0,r),i,...o.slice(r+n)]}var ar=new Wr(async()=>{let e=await Promise.all([import("https://app.framerstatic.com/dist-QQ2LXD6V.mjs"),import("https://app.framerstatic.com/dist-EZVESS7Y.mjs"),import("https://app.framerstatic.com/dist-Z5YLEBXY.mjs"),import("https://app.framerstatic.com/dist-7WM25YWQ.mjs"),import("https://app.framerstatic.com/dist-Z2BXEQZM.mjs"),import("https://app.framerstatic.com/dist-GBVMIGFI.mjs"),import("https://app.framerstatic.com/dist-NBGG27WF.mjs"),import("https://app.framerstatic.com/dist-YL6PRWQE.mjs"),import("https://app.framerstatic.com/prosemirror-suggest-HNREWP6R.mjs")]);return Object.assign({},...e)});function Zy(){ar.preload()}async function Qy(){return ar.readMaybeAsync()}function Jy(){return ar.use()}var nx="arpwu8w",ix="a1pulxae";var Fp={"3g2":"video/3gpp2","3gp":"video/3gpp","3gpp":"video/3gpp","3mf":"model/3mf",aac:"audio/aac",ac:"application/pkix-attr-cert",adp:"audio/adpcm",adts:"audio/aac",ai:"application/postscript",aml:"application/automationml-aml+xml",amlx:"application/automationml-amlx+zip",amr:"audio/amr",apng:"image/apng",appcache:"text/cache-manifest",appinstaller:"application/appinstaller",appx:"application/appx",appxbundle:"application/appxbundle",asc:"application/pgp-keys",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",au:"audio/basic",avci:"image/avci",avcs:"image/avcs",avif:"image/avif",aw:"application/applixware",bdoc:"application/bdoc",bin:"application/octet-stream",bmp:"image/bmp",bpk:"application/octet-stream",btf:"image/prs.btif",btif:"image/prs.btif",buffer:"application/octet-stream",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cer:"application/pkix-cert",cgm:"image/cgm",cjs:"application/node",class:"application/java-vm",coffee:"text/coffeescript",conf:"text/plain",cpl:"application/cpl+xml",cpt:"application/mac-compactpro",crl:"application/pkix-crl",css:"text/css",csv:"text/csv",cu:"application/cu-seeme",cwl:"application/cwl",cww:"application/prs.cww",davmount:"application/davmount+xml",dbk:"application/docbook+xml",deb:"application/octet-stream",def:"text/plain",deploy:"application/octet-stream",dib:"image/bmp","disposition-notification":"message/disposition-notification",dist:"application/octet-stream",distz:"application/octet-stream",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",dot:"application/msword",dpx:"image/dpx",drle:"image/dicom-rle",dsc:"text/prs.lines.tag",dssc:"application/dssc+der",dtd:"application/xml-dtd",dump:"application/octet-stream",dwd:"application/atsc-dwd+xml",ear:"application/java-archive",ecma:"application/ecmascript",elc:"application/octet-stream",emf:"image/emf",eml:"message/rfc822",emma:"application/emma+xml",emotionml:"application/emotionml+xml",eps:"application/postscript",epub:"application/epub+zip",exe:"application/octet-stream",exi:"application/exi",exp:"application/express",exr:"image/aces",ez:"application/andrew-inset",fdf:"application/fdf",fdt:"application/fdt+xml",fits:"image/fits",g3:"image/g3fax",gbr:"application/rpki-ghostbusters",geojson:"application/geo+json",gif:"image/gif",glb:"model/gltf-binary",gltf:"model/gltf+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gram:"application/srgs",grxml:"application/srgs+xml",gxf:"application/gxf",gz:"application/gzip",h261:"video/h261",h263:"video/h263",h264:"video/h264",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",held:"application/atsc-held+xml",hjson:"application/hjson",hlp:"application/winhlp",hqx:"application/mac-binhex40",hsj2:"image/hsj2",htm:"text/html",html:"text/html",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",img:"application/octet-stream",in:"text/plain",ini:"text/plain",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",iso:"application/octet-stream",its:"application/its+xml",jade:"text/jade",jar:"application/java-archive",jhc:"image/jphc",jls:"image/jls",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpf:"image/jpx",jpg:"image/jpeg",jpg2:"image/jp2",jpgm:"image/jpm",jpgv:"video/jpeg",jph:"image/jph",jpm:"image/jpm",jpx:"image/jpx",js:"text/javascript",json:"application/json",json5:"application/json5",jsonld:"application/ld+json",jsonml:"application/jsonml+json",jsx:"text/jsx",jt:"model/jt",jxl:"image/jxl",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",kar:"audio/midi",ktx:"image/ktx",ktx2:"image/ktx2",less:"text/less",lgr:"application/lgr+xml",list:"text/plain",litcoffee:"text/coffeescript",log:"text/plain",lostxml:"application/lost+xml",lrf:"application/octet-stream",m1v:"video/mpeg",m21:"application/mp21",m2a:"audio/mpeg",m2t:"video/mp2t",m2ts:"video/mp2t",m2v:"video/mpeg",m3a:"audio/mpeg",m4a:"audio/mp4",m4p:"application/mp4",m4s:"video/iso.segment",ma:"application/mathematica",mads:"application/mads+xml",maei:"application/mmt-aei+xml",man:"text/troff",manifest:"text/cache-manifest",map:"application/json",mar:"application/octet-stream",markdown:"text/markdown",mathml:"application/mathml+xml",mb:"application/mathematica",mbox:"application/mbox",md:"text/markdown",mdx:"text/mdx",me:"text/troff",mesh:"model/mesh",meta4:"application/metalink4+xml",metalink:"application/metalink+xml",mets:"application/mets+xml",mft:"application/rpki-manifest",mid:"audio/midi",midi:"audio/midi",mime:"message/rfc822",mj2:"video/mj2",mjp2:"video/mj2",mjs:"text/javascript",mml:"text/mathml",mods:"application/mods+xml",mov:"video/quicktime",mp2:"audio/mpeg",mp21:"application/mp21",mp2a:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mp4a:"audio/mp4",mp4s:"application/mp4",mp4v:"video/mp4",mpd:"application/dash+xml",mpe:"video/mpeg",mpeg:"video/mpeg",mpf:"application/media-policy-dataset+xml",mpg:"video/mpeg",mpg4:"video/mp4",mpga:"audio/mpeg",mpp:"application/dash-patch+xml",mrc:"application/marc",mrcx:"application/marcxml+xml",ms:"text/troff",mscml:"application/mediaservercontrol+xml",msh:"model/mesh",msi:"application/octet-stream",msix:"application/msix",msixbundle:"application/msixbundle",msm:"application/octet-stream",msp:"application/octet-stream",mtl:"model/mtl",mts:"video/mp2t",musd:"application/mmt-usd+xml",mxf:"application/mxf",mxmf:"audio/mobile-xmf",mxml:"application/xv+xml",n3:"text/n3",nb:"application/mathematica",nq:"application/n-quads",nt:"application/n-triples",obj:"model/obj",oda:"application/oda",oga:"audio/ogg",ogg:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",omdoc:"application/omdoc+xml",onepkg:"application/onenote",onetmp:"application/onenote",onetoc:"application/onenote",onetoc2:"application/onenote",opf:"application/oebps-package+xml",opus:"audio/ogg",otf:"font/otf",owl:"application/rdf+xml",oxps:"application/oxps",p10:"application/pkcs10",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",pdf:"application/pdf",pfr:"application/font-tdpfr",pgp:"application/pgp-encrypted",pkg:"application/octet-stream",pki:"application/pkixcmp",pkipath:"application/pkix-pkipath",pls:"application/pls+xml",png:"image/png",prc:"model/prc",prf:"application/pics-rules",provx:"application/provenance+xml",ps:"application/postscript",pskcxml:"application/pskc+xml",pti:"image/prs.pti",qt:"video/quicktime",raml:"application/raml+yaml",rapd:"application/route-apd+xml",rdf:"application/rdf+xml",relo:"application/p2p-overlay+xml",rif:"application/reginfo+xml",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rmi:"audio/midi",rnc:"application/relax-ng-compact-syntax",rng:"application/xml",roa:"application/rpki-roa",roff:"text/troff",rq:"application/sparql-query",rs:"application/rls-services+xml",rsat:"application/atsc-rsat+xml",rsd:"application/rsd+xml",rsheet:"application/urc-ressheet+xml",rss:"application/rss+xml",rtf:"text/rtf",rtx:"text/richtext",rusd:"application/route-usd+xml",s3m:"audio/s3m",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",ser:"application/java-serialized-object",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",sgi:"image/sgi",sgm:"text/sgml",sgml:"text/sgml",shex:"text/shex",shf:"application/shf+xml",shtml:"text/html",sieve:"application/sieve",sig:"application/pgp-signature",sil:"audio/silk",silo:"model/mesh",siv:"application/sieve",slim:"text/slim",slm:"text/slim",sls:"application/route-s-tsid+xml",smi:"application/smil+xml",smil:"application/smil+xml",snd:"audio/basic",so:"application/octet-stream",spdx:"text/spdx",spp:"application/scvp-vp-response",spq:"application/scvp-vp-request",spx:"audio/ogg",sql:"application/sql",sru:"application/sru+xml",srx:"application/sparql-results+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",stk:"application/hyperstudio",stl:"model/stl",stpx:"model/step+xml",stpxz:"model/step-xml+zip",stpz:"model/step+zip",styl:"text/stylus",stylus:"text/stylus",svg:"image/svg+xml",svgz:"image/svg+xml",swidtag:"application/swid+xml",t:"text/troff",t38:"image/t38",td:"application/urc-targetdesc+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",text:"text/plain",tfi:"application/thraud+xml",tfx:"image/tiff-fx",tif:"image/tiff",tiff:"image/tiff",toml:"application/toml",tr:"text/troff",trig:"application/trig",ts:"video/mp2t",tsd:"application/timestamped-data",tsv:"text/tab-separated-values",ttc:"font/collection",ttf:"font/ttf",ttl:"text/turtle",ttml:"application/ttml+xml",txt:"text/plain",u3d:"model/u3d",u8dsn:"message/global-delivery-status",u8hdr:"message/global-headers",u8mdn:"message/global-disposition-notification",u8msg:"message/global",ubj:"application/ubjson",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",vrml:"model/vrml",vtt:"text/vtt",vxml:"application/voicexml+xml",war:"application/java-archive",wasm:"application/wasm",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webmanifest:"application/manifest+json",webp:"image/webp",wgsl:"text/wgsl",wgt:"application/widget",wif:"application/watcherinfo+xml",wmf:"image/wmf",woff:"font/woff",woff2:"font/woff2",wrl:"model/vrml",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",x3d:"model/x3d+xml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3dz:"model/x3d+xml",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xcs:"application/calendar+xml",xdf:"application/xcap-diff+xml",xdssc:"application/dssc+xml",xel:"application/xcap-el+xml",xenc:"application/xenc+xml",xer:"application/patch-ops-error+xml",xfdf:"application/xfdf",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xhvml:"application/xv+xml",xlf:"application/xliff+xml",xm:"audio/xm",xml:"text/xml",xns:"application/xcap-ns+xml",xop:"application/xop+xml",xpl:"application/xproc+xml",xsd:"application/xml",xsf:"application/prs.xsf+xml",xsl:"application/xml",xslt:"application/xml",xspf:"application/xspf+xml",xvm:"application/xv+xml",xvml:"application/xv+xml",yaml:"text/yaml",yang:"application/yang",yin:"application/yin+xml",yml:"text/yaml",zip:"application/zip"};function Ws(e){let t=(""+e).trim().toLowerCase(),o=t.lastIndexOf(".");return Fp[~o?t.substring(++o):t]}var Us=tt(Tc(),1);var mt=tt(Mr(),1);async function $s(e,t,o=1/0,r){r??=new Xe(e,{silent:!0});let n=[],i=[],a=[];for(let l of t){if(a.length>=o){i.push(l);continue}if(!Yt.includes(l.type)){n.push(l);continue}let c=r.add(l);a.push(c)}return n.length>0&&ge({type:"add",key:"importUploadImagesUnsupported",variant:"warning",text:(0,mt.jsxs)("span",{className:dt,children:["Skipped ",n.length," unsupported images"]}),duration:1e4}),i.length>0&&ge({type:"add",key:"importUploadImagesSkipped",variant:"warning",text:(0,mt.jsxs)("span",{className:dt,children:["Skipped ",i.length," images over field limit"]}),duration:1e4}),sr(r,a).catch(()=>{}),(await Promise.all(a)).filter(pt)}async function sr(e,t){let o="uploadEmbeddedImagesByUrl",r={type:"add",key:o,variant:"progress",icon:"image",duration:1/0,showCloseButton:"never"};for await(let{completed:i,started:a}of e.statusUpdates())ge({...r,text:(0,mt.jsxs)("span",{className:dt,children:["Adding ",i," of ",a," images\u2026"]})});await Promise.allSettled(t);let{failed:n}=e.status;n>0&&ge({type:"add",key:"importUploadImagesFailed",variant:"warning",text:(0,mt.jsxs)("span",{className:dt,children:["Failed to upload ",n," ",(0,Us.default)("image",n)]}),duration:5e3}),ge({type:"remove",key:o})}var nl=tt(ol(),1);var rl=ae("ChooseFileService"),dr=class{constructor(t,o,r){this.engine=t;this.assetService=o;this.filePickerRef=r;I(this,"assetUploader");this.assetUploader=new Xe(this.engine)}async pickFile({allowedFileTypes:t,multiple:o}={}){let r=this.filePickerRef.current;if(!r)return null;let i=!t||t.includes("*")||t.includes("*/*")?void 0:t?.flatMap(s=>{let l=nl.default.parse(s)?.essence,c=Ws(s),d=s.startsWith(".")?s:`.${s}`;return l?[l]:c?[c,d]:[d]}),a=await r.show(i,o);return a.isFiles()?a.value:null}async pickImage({allowedFileTypes:t=$t,multiple:o}={}){return this.pickFile({allowedFileTypes:t,multiple:o})}async pickAndUploadImage(t={}){try{let o=await this.pickImage(t);if(!o)return[];if(o.length===1){let r=await this.assetUploader.add(o[0]);if(!r)return[];if(await this.assetService.refresh().catch(V),pt(r))return[r]}else return await $s(this.engine,o,t.maxUploads)}catch(o){rl.warn("Failed to upload file:",o)}return[]}async pickAndUploadFile(t){try{let o=await this.pickFile(t);if(!o)return;let r=o[0];return r?await this.assetUploader.add(r):void 0}catch(o){rl.warn("Failed to upload file:",o)}}async addImages(t){if(!t?.length)return[];let r=(await Promise.all(Array.from(t,n=>this.assetUploader.add(n)))).filter(pt);return r.length===0||await this.engine.stores.assetStore.assetService?.refresh().catch(V),r}},{service:il,resolve:Wp}=Wi();function Mx(e,t,o){Wp(new dr(e,t,o))}var al=class{constructor(){I(this,"nodeIdToRenderIdToRect",new Map);I(this,"nodeIdToLayoutTemplateSelectorToRect",new Map);I(this,"nodeIdToRenderIdToChildrenRects",new Map)}processLayoutMeasurements(t){let o=new Set,r=new Set;for(let{nodeId:n,renderId:i,layoutMetrics:a,layoutTemplateSelector:s}of t){let{childrenRects:l,...c}=a;r.has(n)||this.nodeIdToLayoutTemplateSelectorToRect.delete(n),r.add(n);let d=s?this.nodeIdToLayoutTemplateSelectorToRect.get(n)?.get(s):this.nodeIdToRenderIdToRect.get(n)?.get(i),u=this.nodeIdToRenderIdToChildrenRects.get(n)?.get(i);if(!(ne(d,c,!0)&&Up(u,l))){if(s){let p=this.nodeIdToLayoutTemplateSelectorToRect.get(n)??new Map,m=c.matrix?DOMMatrixReadOnly.fromMatrix(c.matrix):void 0;p.set(s,{...c,matrix:m}),this.nodeIdToLayoutTemplateSelectorToRect.set(n,p)}else{let p=this.nodeIdToRenderIdToRect.get(n)??new Map;p.set(i,T.from(c)),this.nodeIdToRenderIdToRect.set(n,p)}if(l){let p=this.nodeIdToRenderIdToChildrenRects.get(n)??new Map;p.set(i,l),this.nodeIdToRenderIdToChildrenRects.set(n,p)}o.add(n)}}return o}getContentSize(t){let o=this.getRect(t),r=this.getChildrenRects(t);if(!o||!r)return;let{width:n,height:i}=T.merge(...r);return{width:n,height:i}}getRect(t){let o=$o(t);return this.nodeIdToRenderIdToRect.get(o)?.get(t)}getRects(t){return this.nodeIdToRenderIdToRect.get(t)}getLayoutTemplateRects(t){return this.nodeIdToLayoutTemplateSelectorToRect.get(t)}getChildrenRects(t){let o=$o(t);return this.nodeIdToRenderIdToChildrenRects.get(o)?.get(t)}pruneAfterTreeChanges(t){for(let o of t){let r=o.to.parentid&&o.from?.parentid&&o.to.parentid!==o.from.parentid;o.removed?(this.nodeIdToRenderIdToRect.delete(o.id),this.nodeIdToRenderIdToChildrenRects.delete(o.id),this.nodeIdToLayoutTemplateSelectorToRect.delete(o.id)):r&&this.nodeIdToRenderIdToRect.delete(o.id)}}};function Up(e,t){return e===t?!0:e===void 0||t===void 0||e.length!==t.length?!1:t.every((o,r)=>T.equals(o,e[r]??null))}async function sl(e,t){await t.updateComponent(e.id,1)}async function ll(e,{codeGenerationStore:t,modulesStore:o,treeStore:r},n,i={}){let{waitForAll:a=!0,persist:s=!0}=i,l=Zt(r.tree,n,e),c=[],d=[];for(let p of l)d.push(Be("screen",p.id,"default").value),p!==e&&c.push(sl(p,t));let u=sl(e,t);return c.push(u),await Promise.all(a?c:[u]),s&&await t.persistence.process(),Ei(n,d,o)}function cl(e,t){if(ce(e)&&wi(t,e)){let o=Pi(t,e);return C(q(o),"PreviewRenderer: WebPage Scope node must exist and be a WebPageNode"),C(o.isLoaded(),"PreviewRenderer: WebPage Scope node must fully loaded"),{entryNode:o.getPrimaryVariant(),entryScopeNode:o}}if(q(e)&&e.isLoaded())return{entryNode:e.getPrimaryVariant(),entryScopeNode:e};if(Mt(e)){let o=t.getGroundNodeFor(e),r=t.getScopeNodeFor(o);if(je(r))return{entryNode:o,entryScopeNode:r}}if(wo(e)){let o=t.getScopeNodeFor(e);return C(sn(o),"PreviewRenderer: Scope node must exist and be a node supports breakpoint variants"),C(o.isLoaded(),"PreviewRenderer: Scope node with breakpoint variants must be fully loaded"),{entryNode:o.getPrimaryVariant(),entryScopeNode:o}}if($r(e)&&!wo(e)){let o=t.getScopeNodeFor(e);return C(He(o),"PreviewRenderer: Smart Component Scope node must exist and be a SmartComponentNode"),{entryNode:e,entryScopeNode:o}}if(_n(e)&&e.isVectorSetItem){let o=t.getScopeNodeFor(e);return C(Pt(o),"PreviewRenderer: Scope node must exist and be a VectorSetNode"),{entryNode:e,entryScopeNode:o}}return{entryNode:e}}function dl(e,t){let o=e.getGroundNodeFor(t),r=e.getScopeNodeFor(o);return We(r)&&!ce(o)}var pl=ae("renderInfoForPreviewItem");function _e(e){let t=e.root.getDefaultLocale(),o=e.root.locales,r=[t];return o&&r.push(...o),r}function ul(e,t,o,r,n,i,a){let s=[],l=[],c={global:i.root.globalPageEffect,routes:{}},d=new Set,u=_e(i),m=Sn.vekterLocalesToRouterLocales(u,{includeDrafts:!0}).find(h=>h.id===n);for(let h of i.root.children){if(!wt(h)&&!q(h))continue;if(wt(h)&&s.push({id:h.id,moduleIdentifier:ga(),layoutTemplate:{moduleIdentifier:h.instanceIdentifier}}),q(h)){let x=h.isLoaded()?Ko(vn(h)):[],N=ui(i,h),P=pa(e,h);P&&l.push(P),ua(e,h,R=>{l.push(R)}),s.push({id:h.id,moduleIdentifier:h.instanceIdentifier,collectionId:P?.collectionId,path:N,elements:x,layoutTemplate:Yp(a,h,m)}),h.isLoaded()&&ma(c,h)}let y=a.componentForIdentifier(h.instanceIdentifier)?.fonts;if(!y){pl.debug("Did not find fonts for component:",h.instanceIdentifier);continue}for(let x of fa(y))d.add(x)}let f=r?t.getPathSlugs(o.id,r,m):void 0,b=[],S=f?.unresolvedSlugs;for(let h in S){let v=S[h];C(v),b.push({variableId:h,collectionId:v.collectionId,collectionItemId:v.collectionItemId})}let g=f?.pathVariables?Ko(f.pathVariables):[];return pl.debug("renderInfoFor",{webPageNode:o,collectionItemNodeId:r,initialUnresolvedPathSlugs:b}),{kind:"webpage",routes:s,collectionUtils:l,locales:u,initialPathVariables:g,pageEffects:c,preloadFonts:Array.from(d),initialRoute:o.id,initialUnresolvedPathSlugs:b,initialLocaleId:n,adaptLayoutToTextDirection:i.root.adaptLayoutToTextDirection}}function Yp(e,t,o){if(!ln(t))return;let r=t.getResolvedControlPropValues(e,ya(),void 0,o);return{moduleIdentifier:t.layoutTemplateIdentifier,props:Sr(r)?void 0:r,richTextControlKeys:t.getRichTextControlKeys(e),vectorSetItemControls:t.getComponentVectorSetChildren(e)}}function fl(e,{treeStore:t,chromeStore:o,previewStore:r,modulesStore:n},i){if(!i)return{kind:"empty"};switch(i.type){case"component":return C(It(i.componentId),"Previewing component should provide module identifier",i.componentId),{kind:"module",layout:"component",moduleIdentifier:i.componentId,locales:_e(t.tree),initialLocaleId:o.canvasLocaleId,adaptLayoutToTextDirection:t.tree.root.adaptLayoutToTextDirection};case"node":{let a=t.tree.get(i.nodeId);C(a,"Previewing node should provide correct node id",i.nodeId);let s=cl(a,t.tree),l=s.entryScopeNode;if(wt(l))return ul(n,r,l,i.collectionItemNodeId,o.canvasLocaleId,t.tree,e);if(je(l))return{kind:"module",moduleIdentifier:Be("design",a.id,"default").value,layout:"design-screen",locales:_e(t.tree),initialLocaleId:o.canvasLocaleId,adaptLayoutToTextDirection:t.tree.root.adaptLayoutToTextDirection};if(q(s.entryScopeNode))return ul(n,r,s.entryScopeNode,i.collectionItemNodeId,o.canvasLocaleId,t.tree,e);if(He(s.entryScopeNode)){let c={variant:{type:"enum",value:s.entryNode.id}};return{kind:"module",moduleIdentifier:s.entryScopeNode.instanceIdentifier,controlProps:c,layout:"component",locales:_e(t.tree),initialLocaleId:o.canvasLocaleId,adaptLayoutToTextDirection:t.tree.root.adaptLayoutToTextDirection}}if(Pt(s.entryScopeNode))return{kind:"module",moduleIdentifier:Be("vector",s.entryNode.id,"default").value,layout:"component",locales:_e(t.tree),initialLocaleId:o.canvasLocaleId,adaptLayoutToTextDirection:t.tree.root.adaptLayoutToTextDirection};if(ce(s.entryNode)){let c=e.reactComponentForIdentifier(s.entryNode.codeComponentIdentifier),d=c?s.entryNode.getControlProps(c.properties):{};return{kind:"module",moduleIdentifier:s.entryNode.codeComponentIdentifier,controlProps:d,layout:"component",locales:_e(t.tree),initialLocaleId:o.canvasLocaleId,adaptLayoutToTextDirection:t.tree.root.adaptLayoutToTextDirection}}if(dl(t.tree,s.entryNode)){let c=t.tree.getGroundNodeFor(s.entryNode),d=Zt(t.tree,e,s.entryNode),u=[];for(let p of d){let m=t.tree.getGroundNodeFor(p),f=Be("screen",m.id,"default").value;u.push({id:m.id,moduleIdentifier:f})}return{kind:"prototype",routeId:c.id,routes:u}}throw new Error(`Unsupported node for preview: ${a.id}`)}default:be(i)}}var Xp="getVectorSetItems";function hl(e){return Xp in e}function gl(e,t){return e.getNodesWithTrait(t,r=>Zn(r,e)).flatMap(r=>{if(r.moduleSourceRevision===void 0)return[];let n=ta(r,e).filter(a=>!a.includes("draftCollection")),i=r.moduleSourceRevision;return n.map(a=>({moduleIdentifier:Cr(a,"default").value,moduleRevision:i}))})}function qp(e){return e.mainView===1?e.codeEditorPreviewVisible:e.mainView===3}function wv(e,t={}){let{previewStore:o,fullsizePreviewStore:r,loadingStore:n,chromeStore:i,treeStore:a,modulesStore:s}=e.stores;if(!n.hasMinimalEditableData)return;let{visible:l,shownOnLaunch:c,source:d="unknown"}=t,u=qp(i),p=typeof l=="boolean"?l:!u;if(i.setPreviewVisible(p),!u&&p){o.addActiveSession();let m=o.computePreviewItem();if(!_p(e.componentLoader,{treeStore:a,previewStore:o,chromeStore:i,modulesStore:s},m))o.item=m;else if(m?.type==="node"){let f=a.tree.get(m.nodeId);C(f,"Did not find previewNode",m.nodeId),r.updatePreviewSize(f)}Kp(e,m).then(f=>{o.targetModuleRevisions=gl(a.tree,f)}).catch(V).finally(()=>{o.item=m}),Ma({shown_on_launch:c,source:d})}else u&&!p&&(o.removeActiveSession(),o.stickyPreviewItem=!1,o.item=void 0)}function _p(e,t,o){if(!o||o.type!=="node")return!1;let{modulesStore:r}=t,n=fl(e,t,o);switch(n.kind){case"module":{let i=le(n.moduleIdentifier);return se(i)?!r.getModuleEntryByLocalId(i.localId):!1}case"webpage":{let i=yo("screen",n.initialRoute);return!r.getModuleEntryByLocalId(i)}case"prototype":{let i=yo("prototype",n.routeId);return!r.getModuleEntryByLocalId(i)}case"empty":return!1;default:be(n)}}async function Kp(e,t){if(!t)return[];let o=await Zp(e,t),{codeGenerationStore:r}=e.stores,n=await r.generateAndUpdateQueuedComponents();return await r.serialization.idle(),[o,...n]}async function Zp(e,t){let{componentLoader:o,stores:r}=e,{codeGenerationStore:n,treeStore:i,modulesStore:a}=r;if(t.type==="component"){if(!n.canSerialize(t.componentId))return;await n.updateComponent(t.componentId,1);return}else if(t.collectionItemNodeId){let s=i.tree.getParent(t.collectionItemNodeId);return!s||!n.canSerialize(s.id)?void 0:(await n.updateComponent(s.id,1),s.id)}else{let s=i.tree,l=s.get(t.nodeId);C(l,"Did not find previewNode",t.nodeId);let c=s.getCanvasScopeNodeFor(l);if(C(c,"Tried triggering code generation for non canvas scope node:",l.id),hl(c))return!Kn(l)||!n.canSerialize(l.id)?void 0:(await n.updateComponent(l.id,1),l.id);if(Tn(c))return n.canSerialize(c.id)?(await n.updateComponent(c.id,1),c.id):void 0;if(We(c))return n.canSerialize(l.id)?(await ll(l,{codeGenerationStore:n,treeStore:i,modulesStore:a},o),l.id):void 0;if(je(c))return n.canSerialize(l.id)?(await n.updateComponent(l.id,1),l.id):void 0;be(c)}}function Av(e){let{newContentAsDraft:t}=e.stores.persistedUserDefaults;return!(!t||e.stores.publishStore.publishStatus===1)}var yl=class extends Ut{constructor(){super(...arguments);I(this,"menu",null);I(this,"isOpen",!1)}show(o,r,n="validate"){let i=Sa(o,n==="validate"?{validateAction:ha,appAccelerators:xa,appAcceleratorsWindows:va}:null);this.menu={items:i,config:r,startTime:performance.now()},this.isOpen=!0}close(){this.scheduler.processWhenReady(()=>{this.menu&&(this.menu.config.onDone?.(),this.menu.config.onCancel?.(),this.menu=null,this.isOpen=!1)})}};var Ke,xe,xl=class extends Ut{constructor(o){super();this.modulesStore=o;ho(this,Ke,new Map);ho(this,xe,new Map);I(this,"_forceUpdate",0)}rerender(){this._forceUpdate++}queue(o){if(re(this,xe).has(o))return;let r=new br;re(this,xe).set(o,r),this.rerender()}cache(o,r){let n=re(this,xe).get(o);n&&n.resolve(r),re(this,xe).delete(o),re(this,Ke).set(o,r),this.rerender()}getByGlobalId(o){let r=this.modulesStore.getPersistedModuleByGlobalId(o);if(!r)return;let n=ci(r.localId)[1],i=re(this,xe).get(n);if(i)return i;let a=re(this,Ke).get(n);if(a)return a;let s=this.modulesStore.forType("vector").getByStableName(n)?.transientSVGIcon;if(s)return{svg:s}}delete(o){re(this,Ke).delete(o),this.rerender()}};Ke=new WeakMap,xe=new WeakMap;function Jv(e,t){if(!Mi(e)){t.onlyNodesWithFormInputFontStyles=!1;return}J("formInputFontFamily",t,e),Qp(t,e),J("formInputFontColor",t,e),J("formInputFontWeight",t,e),J("formInputFontStyle",t,e),J("formInputFontLineHeight",t,e),J("formInputFontLineHeightUnit",t,e),J("formInputFontTextAlignment",t,e),J("formInputFontLetterSpacing",t,e),J("formInputFontLetterSpacingUnit",t,e),z(t.formInputFontSelector)&&(t.formInputFontSelector=new Set),Io(e.formInputFontSelector)&&t.formInputFontSelector.add(e.formInputFontSelector),t.formInputOpenTypeFontFeatures=pr(t.formInputOpenTypeFontFeatures,e.formInputOpenTypeFontFeatures),t.formInputVariationAxes=ur(t.formInputVariationAxes,e.formInputVariationAxes)}function Qp(e,t){let o=e.formInputFontSize,r=e.formInputFontSizeUnit;if(O(o)&&O(r)||Q(t.formInputFontSize))return;let[n,i]=H(t.formInputFontSize)?[t.formInputFontSize,"px"]:it(t.formInputFontSize);if(z(r))e.formInputFontSizeUnit=i;else if(pe(i,r)){e.formInputFontSizeUnit=M,e.formInputFontSize=M;return}z(o)?e.formInputFontSize=n:pe(n,o)&&(e.formInputFontSize=M)}function pr(e,t){let o=new Set(Ne(e)?Object.keys(e):void 0),r=t??[],n=Ne(e)?e:{};for(let i of r){if(!at(i))continue;let a=n[i];Q(a)&&(n[i]=Ne(e)?M:!0),o.delete(i)}for(let i of o)at(i)&&(n[i]=M);return n}function ur(e,t){let o=Ne(e)?e:{},r=new Set(Object.keys(o));if(Io(t))for(let n in t){let i=o[n];r.delete(n),!O(i)&&(Q(i)?o[n]=t[n]:i!==t[n]&&(o[n]=M))}for(let n of r)o[n]=M;return o}var eu={borderBottom:M,borderLeft:M,borderRight:M,borderTop:M,borderWidth:M,borderColor:M,borderStyle:M,borderPerSide:M};function F(e,t){return O(t)?M:z(t)?e:pe(e,t)?M:e}function tu(e,t){return O(t)?M:z(t)||ne(e,t)?e:M}function ou(e,t,o){return C(Ne(e)),O(e)?M:e.length!==t.length?M:(e.forEach((r,n)=>{let i=t[n];C(i);let a=r.type;switch(a){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"number":case"object":case"richtext":case"string":case"transition":case"image":case"responsiveimage":case"scrollsectionref":case"customcursor":case"border":case"cursor":gt(r,i,o);break;default:be(a)}}),e)}function gt(e,t,o){switch(e.type){case"array":{if(C(t.type==="array"),C(o.type==="array"),O(e.value))break;if(z(e.value)){if(Rt(t.value)){e.value=t.value;break}e.value=t.value.map(r=>su(o.control,r.id))}if(Rt(t.value)){e.value=F(t.value,e.value);break}if(Rt(e.value)){e.value=M;break}e.value=ou(e.value,t.value,o.control);break}case"slot":{if(C(t.type===e.type),O(e.value))break;C(o.type==="slot"),C(!Y(t.value),"Slots don't support dynamic values"),z(e.value)?e.value=t.value:e.value=M;break}case"object":if(C(t.type===e.type),O(e.value))break;if(C(o.type==="object"),z(e.value))if(t.value===null)e.value=null;else{e.value={};for(let r in o.controls){let n=o.controls[r];C(n);let i=au(n);i&&(e.value[r]=i)}}if(e.value===null||t.value===null){e.value!==t.value&&(e.value=M);break}for(let r in e.value){let n=o.controls[r];C(n);let i=e.value[r];C(i);let a=t.value[r];C(a,"getControlProps(), should have added these if they were missing from the document data"),gt(i,a,n)}break;case"transition":if(C(t.type===e.type),O(e.value))break;if(z(e.value)){e.value=t.value;break}if(Y(e.value)||Y(t.value)||!e.value||!t.value){e.value=F(t.value,e.value);break}ne(e.value,t.value)||(e.value=M);break;case"responsiveimage":if(C(t.type==="image"),e.value=F(t.value,e.value),e.type==="responsiveimage"){let r=rt(t.alt)?t.alt:"";e.alt=F(r,e.alt);let{positionX:n,positionY:i}=t;e.positionX=F(n,e.positionX),e.positionY=F(i,e.positionY)}break;case"fusednumber":C(t.type===e.type),e.single=F(t.value.single,e.single),e.isFused=F(t.isFused,e.isFused),e.fused[0]=F(t.value.fused[0],e.fused[0]),e.fused[1]=F(t.value.fused[1],e.fused[1]),e.fused[2]=F(t.value.fused[2],e.fused[2]),e.fused[3]=F(t.value.fused[3],e.fused[3]);break;case"link":{if(C(t.type===e.type),O(e.value))break;if(z(e.value)){e.value=t.value;break}if(Y(e.value)||Y(t.value)||!e.value||!t.value){e.value=F(t.value,e.value);break}if(!Po(e.value,t.value)){e.value=M;break}break}case"linkrelvalues":{if(C(t.type===e.type),O(e.value))break;if(z(e.value)){e.value=t.value;break}if(Y(e.value)||Y(t.value)||!e.value||!t.value){e.value=F(t.value,e.value);break}ne(e.value,t.value)||(e.value=M);break}case"pagescope":if(C(t.type===e.type),O(e.value))break;if(z(e.value)){e.value=t.value;break}if(!e.value||!t.value){e.value=F(t.value,e.value);break}if(!Po(e.value,t.value)){e.value=M;break}break;case"font":{if(C(o.type==="font"),C(t.type===e.type),O(e.value))break;if(z(e.value)){if(Q(t.value)){e.value=t.value;break}let b=new Set([t.value.fontSelector]),S=L,g=new Set,h=new Set,v=L,y=L,x=L,N=new Set,P={};if(o.displayFontSize){let[w,A]=Mo(t.value.fontSize)?it(t.value.fontSize):[];S=w,A&&g.add(A)}if(o.displayTextAlignment&&(y=t.value.textAlignment),o.controls==="extended"){let[w,A]=t.value.lineHeight??[];v=w,A&&h.add(A);let[j,W]=t.value.letterSpacing??[];x=j,W&&N.add(W)}t.value.openTypeFontFeatures&&(P=(t.value.openTypeFontFeatures??[]).reduce((w,A)=>(at(A)&&(w[A]=!0),w),{}));let R=t.value.variationAxes??{};e.value={fontSelector:b,lineHeightValue:v,lineHeightUnits:h,fontSizeValue:S,fontSizeUnits:g,textAlignment:y,letterSpacingValue:x,letterSpacingUnits:N,openTypeFontFeatures:P,variationAxes:R};break}if(Q(e.value)){Q(t.value)||(e.value=M);break}if(Q(t.value)){e.value=M;break}let{fontSelector:r,lineHeight:[n,i]=[],fontSize:a,textAlignment:s,letterSpacing:[l,c]=[],openTypeFontFeatures:d,variationAxes:u}=t.value;e.value.fontSelector.add(r);let[p,m]=Mo(a)?it(a):[],f=e.value.fontSizeValue!==p||!Q(m)&&!e.value.fontSizeUnits.has(m);o.displayFontSize&&f&&(e.value.fontSizeValue=M,m&&e.value.fontSizeUnits.add(m)),o.displayTextAlignment&&e.value.textAlignment!==s&&(e.value.textAlignment=M),o.controls==="extended"&&(e.value.lineHeightValue!==n&&(e.value.lineHeightValue=M),i&&e.value.lineHeightUnits.add(i),e.value.letterSpacingValue!==l&&(e.value.letterSpacingValue=M),c&&e.value.letterSpacingUnits.add(c)),e.value.openTypeFontFeatures=pr(e.value.openTypeFontFeatures,d),e.value.variationAxes=ur(e.value.variationAxes,u);break}case"customcursor":case"scrollsectionref":{C(t.type===e.type);let r=ne(t.value,e.value)?e.value:t.value;e.value=F(r,e.value);break}case"border":{if(C(t.type===e.type),z(e.value)){Y(t.value)?e.value=t.value:Ie(t.value)?e.value=null:e.value={...t.value};break}if(Y(t.value)||Y(e.value)||Ie(t.value)||Ie(e.value)){pe(t.value,e.value)&&(e.value=eu);break}let r=e.value;r.borderTop=F(t.value.borderTop,r.borderTop),r.borderRight=F(t.value.borderRight,r.borderRight),r.borderBottom=F(t.value.borderBottom,r.borderBottom),r.borderLeft=F(t.value.borderLeft,r.borderLeft),r.borderWidth=F(t.value.borderWidth,r.borderWidth),r.borderColor=F(t.value.borderColor,r.borderColor),r.borderStyle=F(t.value.borderStyle,r.borderStyle);break}case"boxshadow":C(t.type===e.type),e.value=an(t.value,e.value);break;case"multicollectionreference":C(t.type===e.type),e.value=tu(t.value,e.value);break;case"gap":{if(C(t.type===e.type),e.value=F(t.value,e.value),!O(e.columnGap)){let r=Y(t.value)?M:xi(t.value);z(e.columnGap)?e.columnGap=r:pe(r,e.columnGap)&&(e.columnGap=M)}if(!O(e.rowGap)){let r=Y(t.value)?M:vi(t.value);z(e.rowGap)?e.rowGap=r:pe(r,e.rowGap)&&(e.rowGap=M)}break}case"boolean":case"color":case"date":case"enum":case"file":case"number":case"richtext":case"string":case"image":case"cursor":case"padding":case"borderradius":case"collectionreference":case"trackingid":case"vectorsetitem":C(t.type===e.type),e.value=F(t.value,e.value);break;default:}}function yt(e){switch(e.type){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"linkrelvalues":case"number":case"richtext":case"string":case"transition":case"boxshadow":case"image":case"object":return{type:e.type,value:L};case"array":case"slot":case"font":case"pagescope":case"scrollsectionref":case"customcursor":case"border":case"cursor":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"vectorsetitem":return{type:e.type,value:L};case"gap":return{type:e.type,value:L,columnGap:L,rowGap:L};case"trackingid":return{type:e.type,value:L,trackingIdAIPrompt:L};case"fusednumber":return{type:"fusednumber",isFused:L,single:L,fused:[L,L,L,L]};case"responsiveimage":return{type:"responsiveimage",value:L,alt:L,positionX:L,positionY:L};case"eventhandler":return null;default:return null}}var ru={number:!0,enum:!0,boolean:!0,string:!0,richtext:!0,color:!0,image:!0,responsiveimage:!0,file:!0,transition:!0,link:!0,date:!0,object:!0,array:!0,fusednumber:!0,font:!0,pagescope:!0,scrollsectionref:!0,customcursor:!0,border:!0,cursor:!0,boxshadow:!0,gap:!0,padding:!0,borderradius:!0,collectionreference:!0,multicollectionreference:!0,trackingid:!0};function nu(e){return Object.hasOwn(ru,e)}function iu(e){return nu(e.type)}function au(e){let t=yt(e);return t?(C(iu(t)),t):null}function su(e,t){let o=yt(e);C(o);let r=o;return r.id=t,r}function gS(e,t){let o={};for(let r in e){let n=e[r];if(!n)continue;let i=yt(n);i&&(o[r]=i)}for(let r of t)for(let n in r){let i=e[n];if(C(i),i.type==="eventhandler")continue;let a=o[n];C(a,"Each control prop should have a corresponding reduced control prop");let s=r[n];C(s),gt(a,s,i)}return o}function MS(e,t,o,r,n,i){let a=r.id;if(!a)return;let s=e.getNodeWithTrait(r.providerId,Oe);if(!s)return;let l=s.dataIdentifier;if(!se(l))return;let c=Re(e,l);if(!c)return;i??=Me(s,o);let d=e.getNodeWithTrait(i,de);if(!d)return;let u=Gt(e,o,a,d,c);u&&(d=u.collectionItemNode,c=u.collectionNode,a=u.variableId);let m=c.getPropertyControls(e,t)[a];if(!m)return;let f=c.getVariable(a);if(!f)return;let b=d.getControlProp(a),{controlProp:S,reducedControlProp:g}=lu(m,b);if(Qi(S)&&(C(g,"Reduced control prop should not be null when a collection control prop is present"),c.id===d.parentid&&!(c.managedByPlugin&&!f.userEditable)&&f.type===n&&S.type===n))return{collectionNode:c,collectionItemNode:d,variableDefinition:f,controlDescription:m,rawControlProp:b,controlProp:S,reducedControlProp:g,variableId:a}}var vl=new WeakMap;function lu(e,t){let o=vl.get(e);if(o&&o.rawControlProp===t){let{controlProp:i,reducedControlProp:a}=o;return{controlProp:i,reducedControlProp:a}}let r=dn(e,t),n=yt(e);return n&&r&&gt(n,r,e),vl.set(e,{rawControlProp:t,controlProp:r,reducedControlProp:n}),{controlProp:r,reducedControlProp:n}}var no=tt(Nc(),1);function Sl(e){return e!=null&&typeof e=="object"&&e.nodeType===1}function Cl(e,t){return t&&e==="hidden"?!1:e!=="visible"&&e!=="clip"}function mr(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let o=getComputedStyle(e,null);return Cl(o.overflowY,t)||Cl(o.overflowX,t)}return!1}function ro(e,t,o,r,n,i,a,s){return i<e&&a>t||i>e&&a<t?0:i<=e&&s<=o||a>=t&&s>=o?i-e-r:a>t&&s<o||i<e&&s>o?a-t+n:0}function fr(e,t){let{scrollMode:o,block:r,inline:n,boundary:i,skipOverflowHiddenElements:a}=t,s=typeof i=="function"?i:w=>w!==i;if(!Sl(e))throw new TypeError("Invalid target");let l=document.scrollingElement||document.documentElement,c=[],d=e;for(;Sl(d)&&s(d);){if(d=d.parentNode,d===l){c.push(d);break}d===document.body&&mr(d)&&!mr(document.documentElement)||mr(d,a)&&c.push(d)}let u=window.visualViewport,p=u?.width??innerWidth,m=u?.height??innerHeight,f=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,{height:S,width:g,top:h,right:v,bottom:y,left:x}=e.getBoundingClientRect(),N=r==="start"||r==="nearest"?h:r==="end"?y:h+S/2,P=n==="center"?x+g/2:n==="end"?v:x,R=[];for(let w of c){let{height:A,width:j,top:W,right:$,bottom:Ze,left:ve}=w.getBoundingClientRect();if(o==="if-needed"&&h>=0&&x>=0&&y<=m&&v<=p&&h>=W&&y<=Ze&&x>=ve&&v<=$)return R;let we=getComputedStyle(w),Pe=parseInt(we.borderLeftWidth,10),Se=parseInt(we.borderTopWidth,10),Fe=parseInt(we.borderRightWidth,10),De=parseInt(we.borderBottomWidth,10),G=0,E=0,Ce="offsetWidth"in w?w.offsetWidth-w.clientWidth-Pe-Fe:0,B="offsetHeight"in w?w.offsetHeight-w.clientHeight-Se-De:0;if(l===w)r==="start"?G=N:r==="end"?G=N-m:r==="nearest"?G=ro(b,b+m,m,Se,De,b+N,b+N+S,S):G=N-m/2,n==="start"?E=P:n==="center"?E=P-p/2:n==="end"?E=P-p:E=ro(f,f+p,p,Pe,Fe,f+P,f+P+g,g),G=Math.max(0,G+b),E=Math.max(0,E+f);else{r==="start"?G=N-W-Se:r==="end"?G=N-Ze+De+B:r==="nearest"?G=ro(W,Ze,A,Se,De+B,N,N+S,S):G=N-(W+A/2)+B/2,n==="start"?E=P-ve-Pe:n==="center"?E=P-(ve+j/2)+Ce/2:n==="end"?E=P-$+Fe+Ce:E=ro(ve,$,j,Pe,Fe+Ce,P,P+g,g);let{scrollLeft:Z,scrollTop:Ae}=w;G=Math.max(0,Math.min(Ae+G,w.scrollHeight-A+B)),E=Math.max(0,Math.min(Z+E,w.scrollWidth-j+Ce)),N+=Ae-G,P+=Z-E}R.push({el:w,top:G,left:E})}return R}function bl(e){return e===Object(e)&&Object.keys(e).length!==0}function cu(e,t="auto"){let o="scrollBehavior"in document.body.style;e.forEach(({el:r,top:n,left:i})=>{r!==document.body&&(r.scroll&&o?r.scroll({top:n,left:i,behavior:t}):(r.scrollTop=n,r.scrollLeft=i))})}function du(e){return e===!1?{block:"end",inline:"nearest"}:bl(e)?e:{block:"start",inline:"nearest"}}function hr(e,t){let o=!e.ownerDocument.documentElement.contains(e);if(bl(t)&&typeof t.behavior=="function")return t.behavior(o?[]:fr(e,t));if(o)return;let r=du(t);return cu(fr(e,r),r.behavior)}function FS(e,t){let o=(0,no.useRef)(null),r=typeof e=="function";if((0,no.useLayoutEffect)(()=>{t&&requestAnimationFrame(()=>{let n=r?o.current:e&&"current"in e?e.current:null;n&&hr(n,{scrollMode:"if-needed",block:"center"})})},[t,r,e]),r)return n=>{o.current=n,e(n)}}var pu="codemark",xt=100,Il=new hn(pu);function te(e,t){var o,r;return"schema"in e?(o=t?.markType)!==null&&o!==void 0?o:e.schema.marks.code:(r=t?.markType)!==null&&r!==void 0?r:e.state.schema.marks.code}function ie(e,t){return e.resolve(Math.min(Math.max(1,t),e.nodeSize-2))}function Rl(e,t,o,r){var n;let i=e.isInSet((n=t.state.storedMarks)!==null&&n!==void 0?n:t.state.doc.resolve(o).marks()),a=t.state.doc.rangeHasMark(o,r,e);return!!(i||a)}var Nl={match:/`((?:[^`\w]|[\w])+)`$/,handler:(e,t,o,r,n,i,a,s)=>{if(Rl(e,t,n,i))return!1;let l=r[1],c=e.create(s),d=n+l.length,u=t.state.tr.delete(n,i).insertText(l).addMark(n,d,c),p=u.setSelection(K.create(u.doc,d)).removeStoredMark(e),m=p.setMeta(a.input,{transform:p,from:n,to:i,text:`\`${l}${o}`});return t.dispatch(m),!0}},Tl={match:/^`((?:[^`\w]|[\w])+)`/,handler:(e,t,o,r,n,i,a,s)=>{if(Rl(e,t,n,i))return!1;let l=e.create(s),c=r[1],d=n,u=t.state.tr.delete(n,i).insertText(c).addMark(n,n+c.length,l),p=u.setSelection(K.create(u.doc,d)).addStoredMark(l),m=p.setMeta(a.input,{transform:p,from:n,to:i,text:`\`${c}${o}`});return t.dispatch(m),!0}};function uu(e,t,o,r,n,i,a){if(t.composing)return!1;let{state:s}=t,l=s.doc.resolve(o);if(l.parent.type.spec.code)return!1;let c="\uFFFC",d=l.parent.textBetween(Math.max(0,l.parentOffset-xt),l.parentOffset,void 0,c)+n,u=n+l.parent.textBetween(l.parentOffset,Math.min(l.parent.nodeSize-2,l.parentOffset+xt),void 0,c),p=Nl.match.exec(d),m=Tl.match.exec(u);if(p){let f=Nl.handler(e,t,n,p,o-p[0].length+n.length,r,i,a);if(f)return f}return m?Tl.handler(e,t,n,m,o,r+m[0].length-n.length,i,a):!1}function Ml(e,t){t||(t={});let o=new fe({isInputRules:!0,state:{init:()=>null,apply(r,n){let i=r.getMeta(o);return i||(r.selectionSet||r.docChanged?null:n)}},props:{handleTextInput(r,n,i,a){let s=te(r,t);return uu(s,r,n,i,a,{input:o,cursor:e},t.attrs)}}});return o}function oe(e,t,o="next"){let r={action:o};return e.dispatch(e.state.tr.setMeta(t,r)),!1}function kl(e,t,o,r,n){if(e.state.selection.empty||o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{from:i,to:a}=e.state.selection;if(a-i>=xt||e.state.doc.rangeHasMark(i,a,r))return!1;let s=e.state.tr.addMark(i,a,r.create(n)),l=s.setSelection(K.create(s.doc,a)).removeStoredMark(r);return e.dispatch(l),!0}function mu(e,t,o,r,n){var i;if(o.metaKey)return oe(e,t);if(o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:a,doc:s}=e.state;if(!a.empty)return!1;let l=t.getState(e.state),c=a.$from,d=!!r.isInSet(c.marks()),u=!!r.isInSet((i=c.marksAcross(ie(s,a.from+1)))!==null&&i!==void 0?i:[]);return c.pos===e.state.doc.nodeSize-3&&c.parentOffset===c.parent.nodeSize-2&&l?.active?(e.dispatch(e.state.tr.removeStoredMark(r)),!0):d===u&&c.parentOffset!==0?!1:d&&(!l?.active||l.side===-1)&&c.parentOffset!==0?(e.dispatch(e.state.tr.removeStoredMark(r)),!0):u&&l?.side===-1?(e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0):!1}function wl(e,t,o,r,n){if(mu(e,t,o,r,n))return!0;let{selection:a}=e.state,s=a.$from;return a.empty&&s.parentOffset===s.parent.nodeSize-2?oe(e,t):!1}function fu(e,t,o,r,n){var i;if(o.metaKey)return oe(e,t);if(o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:a,doc:s}=e.state,l=t.getState(e.state),c=!!r.isInSet(a.$from.marks()),d=!!r.isInSet((i=ie(s,a.empty?a.from-1:a.from+1).marks())!==null&&i!==void 0?i:[]);if(c&&l?.side===-1&&a.$from.parentOffset===0)return!1;if(l?.side===0&&a.$from.parentOffset===0)return e.dispatch(e.state.tr.removeStoredMark(r)),!0;if(c&&d&&l?.side===0)return e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0;if(c&&!d&&l?.active&&a.$from.parentOffset===0||!c&&l?.active&&l?.side===0)return e.dispatch(e.state.tr.removeStoredMark(r)),!0;if(c===d)return!1;if(d||!a.empty&&c){let u=a.empty?a.from-1:a.from,p=e.state.tr.setSelection(K.create(s,u));return!a.empty&&d?e.dispatch(p.addStoredMark(r.create(n))):e.dispatch(p.removeStoredMark(r)),!0}if((d||!a.empty&&c)&&!l?.active){let u=a.empty?a.from-1:a.from;return e.dispatch(e.state.tr.setSelection(K.create(s,u)).removeStoredMark(r)),!0}if(c&&!l?.active&&a.$from.parentOffset>0)return e.dispatch(e.state.tr.setSelection(K.create(s,a.from-1)).addStoredMark(r.create(n))),!0;if(c&&!d&&l?.active&&l.side!==-1)return e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0;if(c&&!d&&l?.active){let u=a.from-1;return e.dispatch(e.state.tr.setSelection(K.create(s,u)).addStoredMark(r.create(n))),!0}return!1}function Pl(e,t,o,r,n){if(fu(e,t,o,r,n))return!0;let{selection:a}=e.state,s=a.$from,l=t.getState(e.state);return s.pos===1&&s.parentOffset===0&&l?.side===-1?!0:a.empty&&s.parentOffset===0?oe(e,t):!1}function Fl(e,t,o,r){if(o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=ie(i,n.from-1),s=!!r.isInSet(a.marks()),l=a.parentOffset===0,c=!!r.isInSet(ie(i,n.to+1).marks());if((!s||l)&&!c)return oe(e,t);let d=t.getState(e.state);if(n.empty&&d?.side===-1){let u=e.state.tr.delete(n.from-1,n.from);return e.dispatch(u),!0}return!1}function Dl(e,t,o,r){if(o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=!!r.isInSet(n.$from.marks()),s=n.$from.parentOffset===0,l=!!r.isInSet(ie(i,n.to+2).marks());return(!a||s)&&!l?oe(e,t):!1}function Al(e,t){var o,r;if(!e)return null;let{selection:n,doc:i}=e;if(!n.empty)return null;let a=!!t.isInSet((o=e.storedMarks)!==null&&o!==void 0?o:[]),s=!!t.isInSet(n.$from.marks()),l=!!t.isInSet((r=ie(i,n.from+1).marks())!==null&&r!==void 0?r:[]),c=n.$from.parentOffset===0;return s!==l||!s&&a!==s||s&&c?e.tr.removeStoredMark(t):null}function hu(){let e=document.createElement("span");return e.classList.add("fake-cursor"),e}function gu(e){e||(e={});let t=new fe({key:Il,appendTransaction:(o,r,n)=>{var i;let a=t.getState(r),s=(i=o[0])===null||i===void 0?void 0:i.getMeta(t);return a?.next||s?.action==="click"?Al(n,te(n,e)):null},state:{init:()=>null,apply(o,r,n,i){var a;let s=o.getMeta(t);if(s?.action==="next")return{next:!0};let l=te(i,e),c=l.isInSet((a=i.storedMarks)!==null&&a!==void 0?a:i.doc.resolve(o.selection.from).marks()),d=l.isInSet(i.doc.resolve(o.selection.from).marks()),u=l.isInSet(ie(i.doc,o.selection.from+1).marks()),p=o.selection.$from.parentOffset===0;return o.selection.empty?!c&&u&&(!d||p)?{active:!0,side:-1}:c&&(!d||p)?{active:!0,side:0}:!c&&d&&!u?{active:!0,side:0}:c&&d&&!u?{active:!0,side:-1}:null:null}},props:{attributes:o=>{var r;let{active:n=!1}=(r=t.getState(o))!==null&&r!==void 0?r:{};return Object.assign({},n?{class:"no-cursor"}:{})},decorations:o=>{var r;let{active:n,side:i}=(r=t.getState(o))!==null&&r!==void 0?r:{};if(!n)return Lo.empty;let a=bn.widget(o.selection.from,hu,{side:i});return Lo.create(o.doc,[a])},handleKeyDown(o,r){switch(r.key){case"`":return kl(o,t,r,te(o,e),e.attrs);case"ArrowRight":return wl(o,t,r,te(o,e),e.attrs);case"ArrowLeft":return Pl(o,t,r,te(o,e),e.attrs);case"Backspace":return Fl(o,t,r,te(o,e));case"Delete":return Dl(o,t,r,te(o,e));case"ArrowUp":case"ArrowDown":case"Home":case"End":return oe(o,t);case"e":case"a":return r.ctrlKey?oe(o,t):!1;default:return!1}},handleClick(o){return oe(o,t,"click")}}});return t}function Ll(e){let t=gu(e),o=Ml(t,e);return[t,o]}var qS=Ll;var oC=e=>(t,o)=>{if(!o)return!1;let r=t.selection,n=r.$from.node(1);if(!_(n)||!st(n)||r.$to.parentOffset===r.$to.parent.content.size)return!1;let a=n.attrs.tag;return a==="p"||a==="div"?!1:El(e)(t,o)},rC=e=>(t,o)=>{if(!o)return!1;let n=t.selection.$from.node(1);if(!_(n)||st(n))return!1;let i=n.attrs.tag;return i==="p"||i==="div"?!1:El(e)(t,o)},El=e=>(t,o)=>{if(!o)return!1;let r=e.nodes.lineBreak.create(),n=t.tr.replaceSelectionWith(r).scrollIntoView();return o(n),!0},nC=e=>(t,o)=>{let r=t.selection;if(r.from!==r.to)return!1;let n=r.$from.node(-1);return!gn(n)||xn(r.$from.node(-3))||r.$from.parentOffset!==0||r.$from.index(-1)!==0||r.$from.index(-2)!==0?!1:Ji(e.nodes.listItem)(t,o&&(i=>{if(r.$from.depth>3){let a=r.$from.before(-1);i.join(a)}o(i)}))};function sC(e){return _o(/^([ai]|\d+)\.\s$/iu,e.nodes.numberedList,t=>{let o=t[1];switch(o){case"a":return{listStyleType:"lower-alpha"};case"A":return{listStyleType:"upper-alpha"};case"i":return{listStyleType:"lower-roman"};case"I":return{listStyleType:"upper-roman"};default:return{start:Number(o)}}},(t,o)=>o.childCount+o.attrs.start===Number(t[1]))}function lC(e){return _o(/^\s*([-+*])\s$/u,e.nodes.bulletedList)}function gC(){return new fe({appendTransaction(e,t,o){let r,n=o.selection.$from.parent;if(t.selection instanceof Te&&e.find(a=>a.steps.find(s=>s instanceof un))){let a=t.doc.firstChild,s=_(n)&&!st(n);if(a&&_(a)&&s){let l=yu(a);if(r??=o.tr,l){let c=l.marks.find(Vt);r.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c?.attrs.inlineStyles??{}});for(let d of l.marks)r.addMark(0,o.doc.content.size,d),r.addStoredMark(d)}else{let c=a.attrs.inlineStyles;r.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c})}}}return r}})}function yu(e){for(let t=0;t<e.childCount;t++){let o=e.child(t);if(yn(o))return o}}function CC(e,t){let o=t.getFontsForLoading().filter(i=>!So.isSelectorLoaded(i)),r=t.getTextStylePresets(!1).filter(Kr),n=e.getNodesWithTrait(r,Gr).filter(i=>!So.isSelectorLoaded(i.font)).map(i=>i.font);return o.push(...n),o}var Bl=[ee.youtube,ee.vimeo,ee.codeblock,ee.twitter];async function Vl(e,t){let o=le(t);Ee(o)&&await e.stores.modulesStore.addExternalModulesToProject([o],{onTreeUpdate(){}})}var Ol=new WeakMap;async function kC(e){let{modules:t}=await e.stores.modulesStore.lookUpModules(Bl.map(Cn)),o=[];for(let r=0;r<t.length;r++){let n=t[r];C(n,"Module must exist");let i=Bl[r];C(i,"Module component must exist"),Ol.set(i,n),C(n.files.module,"Module must have a module file"),o.push(go(n.id,n.saveId,n.files.module,i.exportSpecifier??"default"))}await e.stores.modulesStore.preloadExternalModules(o)}function vt(e,t){let o=Ol.get(t);C(o,"Preloaded module must exist");let r=e.getNodeWithTrait(o.id,Ro);return r?r.codeComponentIdentifier:(C(o.files.module,"Module must have a module file"),go(o.id,o.saveId,o.files.module,t.exportSpecifier??"default").value)}async function zl(e,t){let{moduleIdentifier:o}=await la(e,t);if(o.kind==="externalModuleExport"){let r=e.tree.getNodeWithTrait(o.moduleId,Ro);if(r)return r.codeComponentIdentifier}return o.value}async function ke(e,t,o,r,n={}){await Vl(e,r);let i=o.state,a=i.tr;a.replaceRangeWith(i.selection.from,i.selection.to,t.nodes.module.create({identifier:r,props:n}));let s=i.selection.from===0?0:i.selection.from-1;a.setSelection(fn.create(a.doc,s)),o.dispatch(a)}async function Gl(e,t,o,r,n){let i=await zl(e,r);await ke(e,t,o,i,n)}async function Hl(e,t,o,r,n){he("collection_record_youtube_add",{source:"cms"});let i=n?{url:{type:"string",value:n}}:void 0;try{let a=vt(e.tree,ee.youtube);await ke(e,t,o,a,i),r?.()}catch(a){V(a)}}async function OC(e,t,o,r,n){let i=n?{url:{type:"string",value:n}}:void 0;try{let a=vt(e.tree,ee.twitter);await ke(e,t,o,a,i),r?.()}catch(a){V(a)}}async function jl(e,t,o,r,n){he("collection_record_vimeo_add",{source:"cms"});let i=n?{video:{type:"string",value:n}}:void 0;try{let a=vt(e.tree,ee.vimeo);await ke(e,t,o,a,i),r?.()}catch(a){V(a)}}async function zC(e,t,o,r="",n){let i={code:{type:"string",value:r}};he("collection_record_codeblock_add",{source:"cms"});try{let a=vt(e.tree,ee.codeblock);await ke(e,t,o,a,i),n?.()}catch(a){V(a)}}function Wl(e,t,o,r,n){return r.content.size===0?!1:(e.scheduler.processWhenReady(()=>{let i=t.state,a=i.tr,s=n(r),l=xu(s),c=i.selection.$from.node(1),d=i.selection.$from.before(1),u=!s.content.child(0).isInline,p=i.selection instanceof Te||c?.content.size===0;if(l)a.replaceSelectionWith(l,!0);else if(u&&p){let m=c?d+c.nodeSize:i.selection.to;a.replaceRange(d,m,s)}else a.replaceSelection(s);a.scrollIntoView(),a.setMeta("paste",!0),a.setMeta("uiEvent","paste"),t.dispatch(a)}),!0)}function xu(e){return e.openStart===0&&e.openEnd===0&&e.content.childCount===1?e.content.firstChild:null}var vu=ae("prosemirror:addMedia"),$l=[{extension:"mp4",mimeType:"video/mp4"}];function Ul(e){return e=e.toLowerCase(),$l.some(({extension:t})=>e.endsWith(`.${t}`))}function Su(e){return e.startsWith("video/")}var Yl=[...$t],Xl=new Set(Yt);for(let{extension:e,mimeType:t}of $l)Yl.push(e),Xl.add(t);var Cu="failed-asset-upload-placeholder",ql="updateAssetReferences";function KC(e){return e.getMeta(ql)}function bu(e){return e.setMeta(ql,!0)}async function io(e,t,o,r,{type:n,insertPosition:i,mediaExtractedFromHTML:a}){let s=o.state,l=s.tr,c=new Xe(e,{silent:a}),d=[],u=[],p=[];for(let h of r)if(h instanceof File){let v=Su(h.type);if(C(!a,"we should not receive files if the media is already in a document"),!Xl.has(h.type))continue;let y=URL.createObjectURL(h);d.push({uploadResultTask:c.createTask(h,x=>x),temporaryURL:y,type:v?"video":"image"}),u.push({src:y,isVideo:v}),p.push(y)}else{let v=nn(h.src);if(v){u.push({src:h.src,isVideo:Ul(v.originalFilename??v.identifier)});continue}u.push({src:h.src,isVideo:Ul(h.src)}),d.push({uploadResultTask:c.createTask(h.src,y=>y),temporaryURL:h.src,type:h.type})}if(!d.length)return Promise.resolve();if(!a)for(let{src:h,isVideo:v}of u){let y=t.nodes.image.create({src:h,type:v?"video":"image"});i?l.insert(i,y):s.selection.replaceWith(l,y)}l.scrollIntoView(),(n==="drop"||n==="paste")&&(l.setMeta(n,!0),l.setMeta("uiEvent",n)),o.dispatch(l);let m=d.map(h=>h.uploadResultTask());a&&sr(c,m).catch(()=>{});let b=(await Promise.allSettled(m)).map((h,v)=>Iu(h,v,d)),S=[];b.forEach(h=>{if(h.type==="asset")return S.push(h.asset)});let g=new Map;d.forEach((h,v)=>{let y=b[v];C(y,"Asset upload result must be defined"),g.set(h.temporaryURL,y)}),Nu(o,g),p.forEach(h=>URL.revokeObjectURL(h))}function Iu(e,t,o){switch(e.status){case"fulfilled":{let{value:r}=e,{asset:n}=r;return r.type==="image"?{type:"asset",asset:n,imageSize:r.imageSize}:{type:"asset",asset:n}}case"rejected":{let r=o[t];return C(r,"Upload must be defined"),vu.reportError(new Error(e.reason)),{type:"failed upload"}}}}async function ZC(e,t,o,r){let n=await il.pickFile({allowedFileTypes:Yl});if(!n)return;let i=n[0];return io(e,t,o,[i],r)}function Nu(e,t){let o=e.state,r=o.tr;o.doc.descendants((n,i)=>{if(!Ot(n))return;let a=t.get(n.attrs.src);if(a===void 0)return;let s={...n.attrs};if(a.type==="failed upload")s.src=Cu;else if(a.imageSize){s.src=rn({identifier:vo(a.asset),intrinsicSize:{width:a.imageSize.naturalWidth,height:a.imageSize.naturalHeight}});let l=ji(a.imageSize);s.pixelWidth=l.nonZeroNaturalWidth,s.pixelHeight=l.nonZeroNaturalHeight}else s.src=on(vo(a.asset));r.setNodeMarkup(i,n.type,s),bu(r)}),e.dispatch(r)}function Kl(e){let t=e.querySelector("b[id^='docs-internal-guid']")??e.querySelector("*[id^='docs-internal-guid']")?.parentElement;if(t)for(let o=t.children.length-1;o>=0;o--){let r=t.children[o];if(r){for(r instanceof HTMLDivElement&&Tu(r);_l(r.firstChild);)r.removeChild(r.firstChild);for(;_l(r.lastChild);)r.removeChild(r.lastChild);(r.tagName==="BR"||r.childNodes.length===0)&&r.remove()}}}function _l(e){return e instanceof Element&&e.textContent===""&&e.querySelectorAll("img").length===0}function Tu(e){let t=e.querySelector("table");t===null||t.querySelectorAll("tr").length===0||t.querySelectorAll("th, td").length===0||e.replaceWith(t)}var ao=class extends Bt{constructor(o,r,n){let i=Bt.nodesFromSchema(r),a=Bt.marksFromSchema(r),s={},l={};for(let[c,d]of Object.entries(i))s[c]=(...u)=>d(...u,o);for(let[c,d]of Object.entries(a))l[c]=(...u)=>d(...u,o);super(s,l);this.onAfterSerializeFragment=n}serializeFragment(o,r,n=document.createDocumentFragment()){return super.serializeFragment(o,r,n),this.onAfterSerializeFragment?.(n),n}};var Ru=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,Mu=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function Zl({engine:e,schema:t,stylePresetGetters:o,supportedTags:r,saveChanges:n}){return new fe({props:{clipboardSerializer:new ao(e,t,o?Pu:void 0),transformPastedHTML(i){let a=mi(i);return Kl(a),a.innerHTML},handlePaste(i,a,s){let l=a.clipboardData?.getData("text/plain"),c=a.clipboardData?.getData("text/html");if(Eo(t)){let{clipboardData:d}=a;if(d&&d.files.length>0)return io(e,t,i,d.files,{type:"paste"}).finally(n),!0}if(rt(l)){let u=["http:","https:","mailto:","www."].some(m=>l.startsWith(m)),p=i.state.selection;if(u&&p.from!==p.to&&In(t)){let m=Do(l,e)??_r({url:l}),f=i.state.tr;return f.addMark(p.from,p.to,t.marks.link.create({link:m,openInNewTab:ai(m),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),i.dispatch(f),!0}if(Bo(t)&&Ve.isOn("cmsPasteModules")){let m=le(l);if(It(m))return ke(e,t,i,m.value).catch(V),!0;if(li(l))return Gl(e,t,i,l).catch(V),!0}if(Bo(t)){if(Mu.test(l))return Hl(e,t,i,n,l).catch(V),!0;if(Ru.test(l))return jl(e,t,i,n,l).catch(V),!0}}return Wl(e,i,a,s,d=>{if(o&&c&&wu(c))return d;let u=ca(l);l&&u&&!c&&(d=da(l,t));let p=t.nodes.document.create(void 0),m=new mn(p);m.insert(0,d.content);let f=new Map,b=[];if(m.doc.descendants((g,h)=>{if(_(g)){let v=g.attrs.tag,y=r?.has(v)??!0,x=Go(v)&&y?v:"p";m.setNodeMarkup(h,t.nodes.textBlock,{...g.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:x})}Ot(g)&&b.push({src:g.attrs.src,type:g.attrs.type});for(let v of g.marks){if(!Ao(v)||!qr(v.attrs.link))continue;let y=v.attrs.link.url,x;f.has(y)?x=f.get(y):(x=Do(y,e),f.set(y,x)),x&&m.addMark(h,h+g.nodeSize,v.type.create({...v.attrs,link:x}))}}),b.length&&Eo(t)&&io(e,t,i,b,{type:"paste",mediaExtractedFromHTML:!0}).finally(n),Nn(t)&&o){let h=i.state.selection,y=h.$from.parent,x=y.textContent,N=_(y)&&x.length>0,P=h instanceof Te,w=!c&&l&&l.length>0&&!u;!N&&!w&&!P?Fu(e,t,o.getStylePresetForTag,o.getStylePresetForLink,m):Du(i,t,m)}let S=d.content.child(0).isInline?m.doc.content.child(0).content:m.doc.content;return new pn(S,d.openStart,d.openEnd)})}}})}var Ql="framer-match-formatting",ku=document.createComment(Ql);function wu(e){return e.endsWith(`<!--${Ql}-->`)}function Pu(e){e.appendChild(ku)}function Fu(e,t,o,r,n){n.doc.descendants((i,a)=>{if(_(i)){let s=i.attrs,l=rt(s.textStylePreset)?e.tree.getNodeWithTrait(s.textStylePreset,At):void 0,c=Go(s.tag)?s.tag:"p",d=l??o(c)??Ti(e.tree,c)??Qn.createDefault(c);Ri(e,d),n.setNodeMarkup(a,t.nodes.textBlock,{...i.attrs,blockStyles:l?i.attrs.blockStyles:{},inlineStyles:l?i.attrs.inlineStyles:{},textStylePreset:d.id}),l||n.removeMark(a,i.nodeSize,t.marks.inlineStyles)}if(i.type===t.nodes.text){let s=i.marks.find(Ao);if(s){let l=r()??Ii(e.tree)??bi.createDefault();Ni(e,l),n.addMark(a,a+i.nodeSize,s.type.create({...s.attrs,linkStylePreset:l.id}))}}})}function Du(e,t,o){let r=e.state,n=r.selection;if(n instanceof Te){let c=r.doc.resolve(1);n=new K(c)}let i=n.$from.parent,a=_(i),l=n.$from.marks().find(Vt);if(l)o.addMark(0,o.doc.content.size,l);else if(a){let c=t.marks.inlineStyles.create({inlineStyles:i.attrs.inlineStyles});o.addMark(0,o.doc.content.size,c)}else o.removeMark(0,o.doc.content.size,t.marks.inlineStyles);o.doc.descendants((c,d)=>{if(!_(c))return;let u=a?i.attrs:c.attrs;o.setNodeMarkup(d,t.nodes.textBlock,u)})}function Ab({engine:e,schema:t,nodeId:o,getRichTextNode:r}){return Zl({engine:e,schema:t,stylePresetGetters:{getStylePresetForTag:n=>{let i=r();if(i)return Au(e.tree,i,n)??i.getNodeTextStylePreset(e.tree,n)??void 0},getStylePresetForLink:()=>r()?.getNodeLinkStylePreset(e.tree)??void 0}})}function Au(e,t,o){for(let r of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(r,At);if(n&&n.tag===o)return n}}var Jl={floatingWindowRadius:18,panelPadding:10,panelTitleIndentation:5,sitesPanelHeaderHeight:50,webBarHeight:50};var Lu=["RGB","HSL","HEX","P3"];function Bb(e){return Lu.some(t=>t===e)}function zb(e,t){let o=new Set,r=new Set;for(let n of t){if(r.has(n))continue;let i=e.get(n);if(i){if(Oo(i)){o.add(n);continue}for(let a of i.ancestors())if(!r.has(a.id)&&(r.add(a.id),a.cache.reset(),!!Oo(a))){o.add(a.id);break}}}return o}function Eu(e){let t=bo.isP3String(e)?kr.fromString(e):bo(e);if(t)return t.r*.299+t.g*.587+t.b*.114+(1-t.a)*255}function Wb(e){let t=Eu(e);if(H(t))return t>128?"light":"dark"}function qb(e,t,o,r="default"){if(!t.fallback)return;let n=new Set;n.add(t.id);let i=t.fallback;for(;i;){if(n.has(i))return;n.add(i);let a=o.find(({id:c})=>c===i);if(!a)return;let s=e.localizedValues;r==="imageSrc"&&(C(Ki(e)),s=e.imageLocalizedValues);let l=s?.[i];if(l&&Xr(l))return l;i=a.fallback}}var rm={};Ic(rm,{amethyst:()=>Vu,aquaBlue:()=>Ou,atomDark:()=>zu,atomLight:()=>Gu,ayuDark:()=>Hu,ayuLight:()=>ju,cmsTheme:()=>Bu,cobalt2:()=>Wu,cyberpunk:()=>Uu,dracula:()=>$u,framerDark:()=>St,framerLight:()=>Yu,freeCodeCamp:()=>Xu,githubDark:()=>qu,githubLight:()=>_u,levelUp:()=>Ku,magic:()=>Qu,monokaiPro:()=>Zu,neoCyan:()=>Ju,nightOwl:()=>em,sandpackDark:()=>tm,sandpackLight:()=>om});var Bu={colors:{surface1:U.cmsCodeBlockSurface1,surface3:U.cmsCodeBlockSurface3,disabled:U.cmsCodeBlockDisabled,accent:U.cmsCodeBlockAccent,errorSurface:U.cmsCodeBlockErrorSurface},syntax:{plain:U.cmsCodeBlockPlain,comment:U.cmsCodeBlockComment,keyword:U.cmsCodeBlockKeyword,tag:U.cmsCodeBlockTag,punctuation:U.cmsCodeBlockPunctuation,definition:U.cmsCodeBlockDefinition,property:U.cmsCodeBlockProperty,static:U.cmsCodeBlockStatic,string:U.cmsCodeBlockString},font:{mono:Di.family.monospace,lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Vu={colors:{surface1:"#000000",surface3:"#3b3b4f",disabled:"#858591",accent:"#a26cd6",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#a26cdd",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#57d1b7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Ou={colors:{surface1:"#f8f9fb",surface3:"#e4e7eb",disabled:"#C5C5C5",accent:"#2e7692"},syntax:{plain:"#1F2933",comment:"#A7B6C2",keyword:"#1A56DB",tag:"#1A56DB",punctuation:"#394b59",definition:"#A23DAD",property:"#2e7692",static:"#1A56DB",string:"#1992D4"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},zu={colors:{surface1:"#282c34",surface3:"#2c313c",disabled:"#4d4d4d",accent:"#c678dd",errorSurface:"#ffeceb"},syntax:{plain:"#a8b1c2",comment:"#757575",keyword:"#c678dd",tag:"#e06c75",punctuation:"#a8b1c2",definition:"#62aeef",property:"#d19a66",static:"#a8b1c2",string:"#98c379"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Gu={colors:{surface1:"#fafafa"},syntax:{plain:"#383a42",comment:"#a0a1a7",keyword:"#a626a4",tag:"#e45649",punctuation:"#383a42",definition:"#c18401",property:"#4078f2",static:"#986801",string:"#50a14f"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Hu={colors:{surface1:"#0c1017"},syntax:{comment:"#646a72",definition:"#5ac2ff",keyword:"#ff9040",plain:"#bfbdb6",property:"#ffb454",punctuation:"#bfbdb6",static:"#d2a6ff",string:"#80d962",tag:"#3bbae7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},ju={colors:{surface1:"#fafafa"},syntax:{comment:"#aaaeb1",definition:"#3b9ee6",keyword:"#fa8e3e",plain:"#5c6166",property:"#f2ae49",punctuation:"#5c6167",static:"#a37acc",string:"#87b300",tag:"#56b4d5"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Wu={colors:{surface1:"#193549",surface3:"#1f4662",disabled:"#C5C5C5",accent:"#ffc600",errorSurface:"#0d3a58"},syntax:{plain:"#ffffff",comment:"#0088ff",keyword:"#ff9d00",tag:"#9effff",punctuation:"#e1efff",definition:"#ffc600",property:"#ffc600",static:"#ffee80",string:"#a5ff90"},font:{mono:'"Operator Mono", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Uu={colors:{surface1:"#051c30",surface3:"#042f40",disabled:"#C5C5C5",accent:"#fdf500",errorSurface:"#051c30"},syntax:{plain:"#ffffff",comment:"#1ac5b0",keyword:"#fdf500",tag:"#ffc600",punctuation:"#afd7fa",definition:"#ffc600",property:"#fdf500",static:"#e455ae",string:"#37ebf3"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},$u={colors:{surface1:"#282a36",surface3:"#44475a",disabled:"#6272a4",accent:"#bd93f9",errorSurface:"#44475a"},syntax:{plain:"#f8f8f2",comment:"#6272a4",keyword:"#ff79c6",tag:"#ff79c6",punctuation:"#ff79c6",definition:"#f8f8f2",property:"#50fa7b",static:"#bd93f9",string:"#f1fa8c"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},St={colors:{surface1:"#161820",surface3:"#2f2f2f",disabled:"#4d4d4d",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#eeeeee",comment:"#666666",keyword:"#00BBFF",tag:"#00BBFF",punctuation:"#999999",definition:"#ffcc66",property:"#77dddd",static:"#ff8866",string:"#bb88ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Yu={colors:{surface1:"#fafafa",surface3:"#f3f3f3",disabled:"#c5c5c5",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#666666",comment:"#bbbbbb",keyword:"#0099ff",tag:"#0099ff",punctuation:"#bbbbbb",definition:"#FFAA00",property:"#33cccc",static:"#ff8866",string:"#8855ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Xu={colors:{surface1:"#2a2a40",surface3:"#3b3b4f",disabled:"#858591",accent:"#dbb8ff",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#dbb8ff",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#acd157"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},qu={colors:{surface1:"#0d1117",surface3:St.colors?.surface3,disabled:St.colors?.disabled,accent:St.colors?.accent,errorSurface:St.colors?.errorSurface},syntax:{comment:"#8b949e",definition:"#d2a8ff",keyword:"#ff7b72",plain:"#e6edf3",property:"#79c0ff",punctuation:"#e6edf3",static:"#7ee787",string:"#a5d6ff",tag:"#7ee787"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},_u={colors:{surface1:"#ffffff",surface3:"#f5f5f5",disabled:"#d1d4d8",accent:"#24292e"},syntax:{keyword:"#d73a49",property:"#005cc5",plain:"#24292e",static:"#032f62",string:"#032f62",definition:"#6f42c1",punctuation:"#24292e",tag:"#22863a",comment:"#6a737d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"normal",property:"normal",keyword:"normal"}},Ku={colors:{surface1:"#191324",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Zu={colors:{surface1:"#2D2A2E",surface3:"#484747",disabled:"#444344",accent:"#FFD866",errorSurface:"#c24038"},syntax:{plain:"rgb(252, 252, 250)",comment:"#757575",keyword:"rgb(255, 97, 136)",tag:"rgb(120, 220, 232)",punctuation:"rgb(147, 146, 147)",definition:"rgb(169, 220, 118)",property:"rgb(120, 220, 232)",static:"rgb(171, 157, 242)",string:"rgb(255, 216, 102)"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"normal"}},Qu={colors:{surface1:"#f6f6f8",surface3:"#f6f6f8",disabled:"#C5C5C5",accent:"#ffa600",errorSurface:"#ffeceb"},syntax:{plain:"#151515",comment:"#cacacd",keyword:"#ffa600",tag:"#ff9a4d",punctuation:"#ffb3b3",definition:"#ff6f00",property:"#9900ff",static:"#FF453A",string:"#f53524"},font:{mono:'"Roboto Mono", monospace',lineHeight:"24px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Ju={colors:{surface1:"#2b3935",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},em={colors:{surface1:"#011627",surface3:"#112331",disabled:"#4D4D4D",accent:"#c5e4fd",errorSurface:"#811e18"},syntax:{plain:"#d6deeb",comment:"#999999",keyword:"#c792ea",tag:"#7fdbca",punctuation:"#7fdbca",definition:"#82aaff",property:"#addb67",static:"#f78c6c",string:"#ecc48d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"italic"}},tm={colors:{surface1:"#151515",surface3:"#2F2F2F",disabled:"#4D4D4D",accent:"#90e86f",errorSurface:"#b08df8"},syntax:{plain:"#f0fdaf",comment:"#757575",keyword:"#e5fd78",tag:"#f0fdaf",punctuation:"#ffffff",definition:"#eeeeee",property:"#90e86f",static:"#ffffff",string:"#dafecf"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},om={colors:{surface1:"#ffffff",surface3:"#F3F3F3",disabled:"#C5C5C5",accent:"#3973E0",errorSurface:"#FCF1F0"},syntax:{plain:"#151515",comment:"#999",keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}};function aI(e,t){let{scopeStore:o,treeStore:r}=t.stores,n=[],i=r.tree.root.locales;if(!i||i.length===0)return n;let a=o.active,s=_i(a),l=!1;if(s){let d=n.length;Yo(r.tree,t.componentLoader,a,e,i,n,"canvasHtmlAsTextContentIfPossible"),l=n.length>d}if(de(e)){let d=r.tree.getNodeWithTrait(e.parentid,Vr);if(!d)return n;let u=qo(i,d);Xo(r.tree,d,e,i,n,u)}let c=new Set;if(Ci(r.tree,e,d=>{if(!d.providerId)return;let u=r.tree.get(d.providerId);if(!Oe(u)||!Et(u))return;let p=Re(r.tree,u.dataIdentifier);if(!p)return;let m=Me(u,r.sandboxRepeaterData),f=r.tree.get(m);if(!de(f))return;let b=Zi(f.id,d.id);if(c.has(b))return;let S=qo(i,p),g=[];Xo(r.tree,p,f,i,g,S);let h=g.find(({keyPath:v})=>v===b);h&&n.push(h)}),!l&&s&&Ge(e)){let d=r.tree.getNode(e.getPrimaryId());d&&Yo(r.tree,t.componentLoader,a,d,i,n,"canvasHtmlAsTextContentIfPossible")}return n}async function dI(e){let t=Jo.on(Ir).expect();return new Promise(o=>{Fo(e)&&e.stores.canvasStore.setColorSamplerActive(!0),e.scheduler.runBeforeNextFrame(async()=>{let{color:r}=await t.sampleColor();e.scheduler.process(()=>{Fo(e)&&e.stores.canvasStore.setColorSamplerActive(!1),o(r)})})})}function II(e,t,o){return Yn(o)?sm(e,t,o):Xn(o)?am(e,t,o):$n(o)?lm(e,t,o):null}function nm(e,t){return k(t*Math.sin(Co(e)),t*Math.cos(Co(e))*-1)}function im(e,t){if(e.type==="conic"){let{angle:o,radius:r}=e;return t.map(n=>{let i=o+n.position*360;return nm(i,r)})}return t.map(o=>D.pointAtPercentDistance(e.axis,o.position))}function am(e,t,o){let r=e.getRect(t),n=o.centerAnchorX*r.width,i=o.centerAnchorY*r.height,a=o.widthFactor*r.width,s=o.heightFactor*r.height,l=a*2,c=s*2,d=a+n,u=i-s,p={width:l,height:c},m=e.convertPointToCanvas(t,{x:n,y:i}),f=e.convertPointToCanvas(t,{x:d,y:i}),b=e.convertPointToCanvas(t,{x:n,y:u}),{rotation:S}=e.convertRectToCanvasWithRotation(t),g=D(m,f);return{type:"radial",start:m,end:f,center:D.pointAtPercentDistance(g,0),axis:g,rotation:S,size:p,topCenter:b}}function sm(e,t,o){let r=e.getRect(t),n={x:r.width/2,y:r.height/2},i=e.convertPointToCanvas(t,n),a=o.angle*Math.PI/180,s={x:-Math.sin(a)*100,y:Math.cos(a)*100},l=e.convertPointToCanvas(t,k.add(n,s)),c=D(i,l),d=so(o.angle),u=T.pointsAtOrigin(r),p=Math.floor(d/90)+3,m=u[p%4],f=e.convertPointToCanvas(t,m),b=u[(p+2)%4],S=e.convertPointToCanvas(t,b),g=D.perpendicular(c,f),h=D.intersection(g,c);if(!h)return null;let v=k.subtract(i,h),y=k.add(h,v,v),x=u[(p+1)%4],N=e.convertPointToCanvas(t,x),P=D.perpendicular(g,N),R=D.perpendicular(c,i),w=D.intersection(P,R);if(!w)return null;let A={width:k.distance(w,i)*2,height:k.distance(h,y)};return{type:"linear",start:h,end:y,center:i,axis:D(h,y),startCorner:f,endCorner:S,size:A}}function lm(e,t,o){let r=e.getRect(t),n=e.convertPointToCanvas(t,{x:r.width/2*o.centerAnchorX/.5,y:r.height/2*o.centerAnchorY/.5}),[i,a]=T.midPoints(r),s=T.center(r),l=k.distance(s,i),c=k.distance(s,a),d=Math.min(l,c),u=e.totalAncestorRotation(t),p=so(u+o.angle);return{type:"conic",start:k(s.x,s.y-d),center:n,rotation:0,radius:d,angle:p}}var NI=(e,t,o,r)=>{let n=im(e,t),i=n[0],a=n[n.length-1];if(i.x===a.x&&i.y===a.y&&k.distance(o,i)<r)return!0;let s=D(i,a),l=D.perpendicular(s,o),c=D.intersection(s,l);if(e.type==="radial"&&k.distance(o,e.topCenter)<r)return!0;if(e.type==="conic")return k.distance(o,e.center)<=e.radius+40;if(!c)return!1;let d=k.distance(o,c),u=k.distance(o,i),p=k.distance(o,a),m=k.distance(i,a);return u>m&&p<u?Math.max(p,d)<r:p>m&&u<p?Math.max(u,d)<r:d<r};function cm(e,t){let o=e.reduce((a,s)=>Math.abs(a.position-t)<Math.abs(s.position-t)?a:s),r=e.findIndex(a=>a===o),n=o.position-t>0?r-1:r+1,i=e[n]??o;return[o,i]}function TI(e,t,o,r){let[n,i]=cm(t,o),a=Nt([n.position,i.position],[0,1])(o),s=gr(e,n,r),l=gr(e,i,r);return Nt([0,1],[s,l])(a)}function gr(e,t,o){let r=t.value;if(!en(r))return r;let n=Qr(r),i=n?ki(n,e):null;return i&&zr(i)?i.colorForMode(o):Jr(r)||"transparent"}function RI(e,t,o){return t.map(r=>r.merge({value:gr(e,r,o)}))}function MI(e,t){let o=D(t,e.center),r=e.center.x,n=e.center.y-e.radius,i=D(k(r,n),e.center),a=D.intersectionAngle(i,o),l=so(a)-e.angle,c=so(l);return Math.abs(c/360)}function so(e){if(e===360)return e;let t=e%360;return t<0?360+t:t}function kI(e){return e.sort((t,o)=>t.position-o.position)}function wI(e){let t=!1,o=Nt([e.stops[0]?.position??0,e.stops[e.stops.length-1]?.position??1],[0,1]),r=e.stops.map(n=>((n.position<0||n.position>1)&&(t=!0),n.merge({position:o(n.position)})));return t?r:void 0}var ec="--top-flash-inset",tc="--right-flash-inset",oc="--bottom-flash-inset",rc="--left-flash-inset",nc="--flash-radius",yr="fh6lfgu",xr="d8eehx6",ic="wdvaq7i",ac="ghqxg7a";var bt=2;function sc(e="default"){switch(e){case"glow":return[ac];case"default":return[xr];case"warning":return[xr,ic]}}function Ct(e,t,o){e.style.setProperty(t,`${o??0}px`)}function lc(e,t){Ct(e,ec,t?.inset?.top),Ct(e,tc,t?.inset?.right),Ct(e,oc,t?.inset?.bottom),Ct(e,rc,t?.inset?.left),t?.radius&&Ct(e,nc,t.radius),e.addEventListener("animationend",function o(){e.classList.remove(yr),e.classList.remove(...sc(t?.style)),e.removeEventListener("animationend",o)}),e.classList.add(yr),e.classList.add(...sc(t?.style))}function cc(e){let t=Ve.isOn("agent")?Jl.panelPadding:Fi.values.panelPadding;lc(e,{style:"default",inset:{top:bt,right:-(t-bt),left:-(t-bt),bottom:bt}})}function dc({id:e,flash:t}){let o=document.getElementById(e);o instanceof HTMLDivElement&&(hr(o,{scrollMode:"if-needed",block:"start"}),t&&cc(o))}function pc(e){let t=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:document.defaultView,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(t)}var uc="breadcrumb-collection";function um(e,t,o){let r=e.tree.getNode(o);if(!r)return null;if(!yi(r))return{variableProvider:r,variableId:t};let n=e.tree.getNodeWithTrait(r.dataRepeaterArray.providerId,Et);return n?{variableProvider:n,variableId:r.dataRepeaterArray.id}:null}function mN(e,t,o){let{chromeStore:r,modalStore:n,variablesStore:i,contentManagementStore:a,scopeStore:s,codeEditorStore:l,selectionStore:c}=e.stores;if(o===On){r.setLocalizationsVisible(!0);return}let d=um(e,t,o);if(!d)return;let{variableProvider:u,variableId:p}=d;if(tn(u)&&u.hasVariable(p))i.selectedVariablePath=[p],n.set({type:"Variables",source:"variableReference"});else if(q(u)||Er(u)){let{dataIdentifier:f}=u;if(!f)return;if(Ee(f)){if(r.isViewOnly)return;n.set({type:"Confirmation",title:"External Collection",description:`This is an external ${"Collection".toLowerCase()} preview. To edit, choose a collection to swap in or create a local copy of this collection.`,confirmLabel:"View Options",source:"edit_action",onConfirm:()=>{r.chromeIsVisible=!0,Oe(u)?(c.set(u.id),e.scheduler.runAtEndOfFrame(()=>dc({id:"data-repeater-panel",flash:!0}))):q(u)?e.scheduler.runAtEndOfFrame(()=>{let g=document.getElementById(uc);g&&pc(g)}):void 0}});return}let b=Re(e.tree,f);if(b){q(u)&&C(u.isLoaded(),"Web page node should be loaded");let g=mm({collectionNode:b,engine:e,variableId:p,variableProvider:u});g?(a.pushExistingItemToOverlayStack(g.collectionItemNode.id),a.setCollectionItemControlToHighlight(g.variableId)):(s.select(fi,{keepHistory:!1}),c.set(b),a.setCollectionItemControlToHighlight(p));return}let S=Kt(e.componentLoader,f);S&&l.editFile(S.file)}}function mm({collectionNode:e,engine:t,variableId:o,variableProvider:r}){let n=mc({engine:t,variableProvider:r});if(n)return n;let i=o.split(".");C(i.length>=0,"VariableID must not be empty");let a=Me(r,t.stores.treeStore.sandboxRepeaterData),s=t.tree.getNodeWithTrait(a,de);if(s)return Gt(t.tree,t.stores.treeStore.sandboxRepeaterData,o,s,e)}function mc({engine:e,variableProvider:t}){if(!di(t))return;let[o,...r]=t.collectionFilters?.filters.flatMap(l=>l?.itemKey!=="id"?[]:l.transforms).flatMap(l=>fm(l)??[])??[];if(!o?.providerId||r.length>0)return;let n=e.tree.getNode(o.providerId);if(!n||!(kt(n)||q(n))||!n.dataIdentifier)return;let i=Re(e.tree,n.dataIdentifier);if(!i)return;let a=Me(n,e.stores.treeStore.sandboxRepeaterData),s=e.tree.get(a);if(de(s))return s?{collectionItemNode:s,collectionNode:i,variableId:o.id}:mc({engine:e,variableProvider:n})}function fm(e){if(!(e.name!=="equals"&&e.name!=="isIncludedIn"||!wr(e.value)||!e.value.providerId))return e.value}function fc(e,t,o,r){t.stores.canvasStore.invalidateTransformUntilRendered(()=>{try{t.stores.scopeStore.select(e,r),t.stores.codeEditorStore.closeEditor()}catch{he("open_primary_component_fail",{}),ge({type:"add",variant:"error",key:"invalid-deep-link",text:"Primary component has been deleted",icon:"error",duration:1e4});return}if(!o)return;let n=t.tree.getNode(o);n&&t.tree.getScopeNodeFor(n)?.id===e&&(t.stores.selectionStore.set(n.id),t.stores.canvasStore.zoomToCenter(t.tree.convertFrameToCanvas(n),{animated:!1,maxZoom:1}))})}function hc(e,t,o,r){let n=le(e),i=Xt(t,"canDesign");if(se(n)&&(n.type==="canvasComponent"||n.type==="screen"||n.type==="vector"))return[{label:i?"Open":"Edit",click:()=>{if(n.type==="vector"){let u=t.stores.modulesStore.forType("vector").getByStableName(n.localIdName)?.annotations(null,"default")?.framerVector;if(!ti(u))return;let{set:p}=u;fc(p.id,t,n.localIdName,r);return}let[,d]=n.localId.split("/");d&&fc(d,t,o,r)}}];if(Ee(n)&&n.kind==="externalModuleExport"){if(r.node?.isVectorInstance)return Vi(t,e)?ot():[{label:"Edit",click:()=>sa(t,n.moduleId,r.node?.id),enabled:!i}];let d=t.stores.insertSidebarStore.getEditBehavior(n.moduleId),u=t.componentLoader.componentForIdentifier(n.value)?.annotations,p=t.stores.treeStore.tree.getNode(n.moduleId),f=r.externalModuleType==="canvasComponent"&&p&&p.ownerId==="1h0OTH9KlHTd4pyc9CLt";if(ea(t.stores.treeStore.tree,n)&&d==="block"||Rr(u,"framerDisableUnlink"))return ot();if(!ra(r.externalModuleType))return ot();let{node:b,withUnlinkModal:S,externalModuleType:g}=r;return b&&d==="autoDetach"?[{label:"Detach Instance",enabled:!i,click:async()=>{t.beginUndoGroup(),Ai({key:"auto-detach",progress:{variant:"progress",text:"Expanding layers\u2026"},error:{variant:"error",text:"Failed to detach"}},async()=>{await hm(b,t,n,g)}).catch(V),t.endUndoGroup()}}]:f?[{label:"Edit",click:()=>{aa(t,{identifier:n,moduleType:g,instance:b,enterIsolation:!0}).catch(V)},enabled:!i}]:[{label:"Unlink",click:()=>{ia(t,{identifier:n,moduleType:g,instance:b,withUnlinkModal:S,enterIsolation:!0}).catch(V)},enabled:!i}]}let a=Kt(t.componentLoader,e);if(!a||a.type!=="component"||a.depth!==0)return ot();let s=r.keepHistory?void 0:()=>{t.stores.scopeStore.goBack()},l=Oi(t.stores.treeStore,t.stores.modulesStore,t.stores.pluginStore,n);return[...l&&Gi(t.stores.modulesStore,n)&&!i&&se(e)?[{label:zi(l),click:()=>{s?.(),oa(t,e,l)}}]:[],{label:i?"View Code":"Edit Code",click:()=>{s?.(),t.stores.codeEditorStore.editFile(a.file)},enabled:se(e)}]}async function hm(e,t,o,r){let n=new Map,i=await na(t,{identifier:o,moduleType:r,instance:e,renamedIds:n,isAutoDetach:!0,enterIsolation:!1});if(!i)return null;let{node:a}=i;return He(a)?t.scheduler.processWhenReadyAsync(()=>{let s=Hi.detachSmartComponentOrWebPageInstance(t,e.draftOrCurrent(),a,n);return s&&t.stores.selectionStore.set(s.id),s}):null}function gc(e){return e?.find(o=>o.enabled!==!1)?.click}function gm(e,t,o){return hc(e,t,null,o)}function LN(e,t,o){return gc(gm(e,t,o))}function ym(e,t,{withUnlinkModal:o=!0,externalModuleType:r,activateContentPanel:n}={}){let i=Vn(t.tree,e);return hc(e.codeComponentIdentifier,t,i,{keepHistory:!0,node:e,withUnlinkModal:o,externalModuleType:r,activateContentPanel:n})}function EN(e,t,o={}){return gc(ym(e,t,o))}var VN="My website";var ON="My description",zN="yoursite.url";export{Jo as a,ba as b,ut as c,Mc as d,wc as e,Ra as f,Qt as g,X as h,fg as i,hg as j,gg as k,yg as l,xg as m,vg as n,Sg as o,Cg as p,bg as q,Ig as r,Ng as s,Tg as t,Ds as u,Rg as v,jd as w,Mg as x,or as y,rr as z,Os as A,zs as B,eo as C,Hs as D,aI as E,ka as F,Xy as G,nr as H,gp as I,Ip as J,nx as K,ix as L,dI as M,Jv as N,gt as O,yt as P,gS as Q,MS as R,hr as S,FS as T,qS as U,oC as V,rC as W,El as X,nC as Y,sC as Z,lC as _,Zy as $,Qy as aa,Jy as ba,gC as ca,CC as da,Vl as ea,kC as fa,vt as ga,ke as ha,Hl as ia,OC as ja,zC as ka,$s as la,Ws as ma,ol as na,il as oa,Mx as pa,Cu as qa,KC as ra,bu as sa,io as ta,ZC as ua,Zl as va,Ab as wa,II as xa,nm as ya,im as za,NI as Aa,TI as Ba,gr as Ca,RI as Da,MI as Ea,kI as Fa,wI as Ga,al as Ha,Jl as Ia,bt as Ja,lc as Ka,dc as La,uc as Ma,mN as Na,fc as Oa,hm as Pa,gm as Qa,LN as Ra,ym as Sa,EN as Ta,Lu as Ua,Bb as Va,zb as Wa,ll as Xa,cl as Ya,dl as Za,_e as _a,fl as $a,hl as ab,gl as bb,qp as cb,wv as db,Av as eb,VN as fb,ON as gb,zN as hb,Wb as ib,yl as jb,qb as kb,xl as lb,Bu as mb,qu as nb,_u as ob,rm as pb};
//# sourceMappingURL=https://app.framerstatic.com/chunk-N3UBKW7A.mjs.map
