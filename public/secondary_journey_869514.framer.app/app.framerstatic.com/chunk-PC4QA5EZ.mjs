import{ct as H,et as N,lr as h,v as l}from"https://app.framerstatic.com/chunk-NBRM3IAP.mjs";import{a as C,f as m,g as S,j as b}from"https://app.framerstatic.com/chunk-CMAEAGWD.mjs";import{a as p}from"https://app.framerstatic.com/chunk-YOOGIIWU.mjs";function F(d){let t=[];for(let e of d){let{class:n,properties:o,...r}=e,s={...r,properties:JSON.parse(JSON.stringify(o))};t.push(s)}return t}function I(){l.frame.addScope("is-hidden",1500),l.component.addScope("is-hidden",1500)}function P(){l.frame.removeScope("is-hidden"),l.component.removeScope("is-hidden")}function u(d,t,e){if(b(d.hidden))return!1;if(C(d.hidden))return d.hidden;try{I();let n=d.hidden(t,e);return P(),n}catch{return P(),!1}}var R=class{constructor(t,e){this.componentLoader=t;this.engine=e}async getHiddenStateForControlsByNode(t){let e={};return Object.entries(t).forEach(([n,{controlNames:o}])=>{let r=this.engine?.tree.getNode(n);if(!r)return;p(h(r),"Node is not a CanvasNode with control props (node.__class: ",r.__class,")");let s=r.getControlPropSourceIdentifier();p(s,"Cannot find component identifier for node");let i=this.componentLoader.getPropertyControlsForIdentifier(s);if(!i)return;let a=o??Object.keys(i),c=r.getResolvedControlPropValues(this.componentLoader);e[n]=v(a,i,c)}),e}async getHiddenStateForActionControls({actionIdentifier:t,controlNames:e,actionProps:n}){p(t,"Fail to request hidden state for action controls: missing actionIdentifier");let o=this.componentLoader.componentForIdentifier(t);return e.reduce((s,i)=>{let a=o?o.properties[i]:void 0;return a?(s[i]=u(a,n,n),s):(s[i]=!1,s)},{})}async getHiddenStateForModuleControls({moduleIdentifier:t,controlNames:e,moduleProps:n}){let o=this.componentLoader.getPropertyControlsForIdentifier(t);if(!o)return{};let r=N({assetResolverWithHash:null,variableValueResolver:{getVariableReferenceValue(){throw new Error("getVariableReferenceValue is not implemented for ControlsVisibilityServiceImplementation")}},getResolvedFetchDataValue:void 0,getVariableControlByReference(){throw new Error("getVariableControlByReference is not implemented for  ControlsVisibilityServiceImplementation")},getCanvasTree:()=>this.engine?.tree,componentLoader:this.componentLoader});return v(e??Object.keys(o),o,H(o,n,r))}};function y(d,t,e,n,o,r){let s=d+t;if(e){if(e.hidden&&(r[s]=u(e,n,o)),e.type==="object"){let i=n[t];if(!m(i))return;for(let a in e.controls){let c=e.controls[a];y(s+".",a,c,i,o,r)}}if(e.type==="array"&&e.control.type==="object"){let i=n[t];if(!S(i))return;let a=i.length;for(let c=0;c<a;c++){let f=i[c];if(m(f))for(let g in f){let x=e.control.controls[g];y(s+`[${c}].`,g,x,f,o,r)}}}}}function v(d,t,e){let n={};for(let o of d){let r=t[o];y("",o,r,e,e,n)}return n}export{F as a,R as b};
//# sourceMappingURL=https://app.framerstatic.com/chunk-PC4QA5EZ.mjs.map
