import{a as Ve,b as Ee}from"https://app.framerstatic.com/chunk-QQQMYRCG.mjs";import{a as z}from"https://app.framerstatic.com/chunk-HZI57CLP.mjs";import{j as Y}from"https://app.framerstatic.com/chunk-7WYK4RQK.mjs";import{da as Te}from"https://app.framerstatic.com/chunk-5HXGPRCU.mjs";import{j as xe}from"https://app.framerstatic.com/chunk-26ZI4URE.mjs";import{Pe as ve,sg as ke,xb as Ce,zf as Re}from"https://app.framerstatic.com/chunk-E3BFIQ3T.mjs";import{Ef as ye,af as Ie}from"https://app.framerstatic.com/chunk-XTLBFCBM.mjs";import{a as ge,b as be}from"https://app.framerstatic.com/chunk-6YI2XN42.mjs";import{Ls as q,Oh as me,Ps as Pe,Qs as Se,Tj as de,Ts as Le,Xq as J,bb as se,fr as W,jr as he,kd as ce,pk as ue,qk as pe,rk as k,sk as T,ub as le,xk as fe}from"https://app.framerstatic.com/chunk-NBRM3IAP.mjs";import{a as ne,b as re,j as ie,m as ae}from"https://app.framerstatic.com/chunk-CMAEAGWD.mjs";import{a as te,b as oe}from"https://app.framerstatic.com/chunk-M6MHZBU3.mjs";import{aa as x,fa as ee}from"https://app.framerstatic.com/chunk-5V7XAOIL.mjs";import{a as Z}from"https://app.framerstatic.com/chunk-YOOGIIWU.mjs";import{e as $}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var B=$(te(),1);var _e=x("usePreloadedScope");function We(e,t){if(!t||!re(e))return;let o=t.tree.get(e);!ye(o)||o.isLoaded()||(_e.debug("Loading scope node",e),o.load())}function dt(e){let t=be();(0,B.useEffect)(()=>We(e,t),[e])}function Be(e){let t=(0,B.useContext)(ge);(0,B.useEffect)(()=>We(e,t),[e,t])}function K(e,t,o){return e.replace(se,(n,i)=>i===t.id?o.slug:`:${t.name.toLowerCase()}`)}function Ne(e,t,o,n="Home",i){let a=k(t)&&!i?Ve(t):void 0,s=k(t)?Ee(e,t):null;if(!t||!ue(t)||!s)return;let m="";if(o&&o!==de){let r=e.root.getNonDefaultLocale(o);r?.slug&&(m="/"+r.slug)}if(s.id===e.root.homePageNodeId)return m?m+"/":n;let l=Le(e,s);if(l){if(a?.identifier){let r=J(e,a.identifier);if(r){let c=W(e,o),g=r.getItemToSlug(c)[a.collectionItemId];if(g){let I=r.getSlugVariable();if(I){let y={id:a.collectionItemId,slug:g};return m+K(l,I,y)}}}return}if(ce(s)&&s.dataIdentifier){let r=J(e,s.dataIdentifier);if(r&&!a){let c=r.getSlugVariable();if(c){let d=W(e,o),g=r.getItemToSlug(d);return m+Pe(l,g,c)}}}return m+l}}function Me(e){Be(k(e)?e.webPageId:void 0)}var f=$(te(),1);var we="cjpnope";var D=$(oe(),1),Je=/\W+/u;function Xe(e){return new Set(e.split(Je))}function Ze(e,t,o){return(0,f.useMemo)(()=>{let n=new Set;if(!e||!t)return n;for(let i of o.keys()){let a=t.get(i);!a||!he(a).every(l=>{if(!l)return!1;for(let r of e)if(r.endsWith(l))return!0;return!1})||n.add(i)}return n},[e,t,o])}var Jt=({tree:e,link:t,localeId:o,hideSlugValues:n=!1,homePageName:i="Home",variableInfo:a,...s})=>{Me(t);let m=e.getContentManagementNode(),l=W(e,o),r=e.getRouteSegmentRootNode().getWebPageIdToRawPathMap(e),c=e.root.getDataIdentifierByWebPageIdMap(),d=m?.getSlugVariableByIdentifierMap(),g=m?.getItemToSlugByIdentifierMap(l),I=fe(t,r),y=pe(t)?t.url:"",b=I?"":y,P=Ne(e,t,o,i,n)??b,u=a?.ids,L=Ze(u,r,c);return(0,D.jsx)(et,{...s,link:t,readableLink:P,homePageName:i,variableInfo:a,hideSlugValues:n,webPageIdToRawPathMap:r,dataIdentifierByWebPageIdMap:c,slugVariableByIdentifierMap:d,itemToSlugByIdentifierMap:g,collectionPagesWithVariablesInScope:L,routerLocale:l,selectedPageMissing:I})},et=(0,f.memo)(function({id:t,placeholder:o,link:n,onChange:i,constantChange:a,rightChevron:s,supportsPageLinks:m,hideSlugValues:l,supportsVariables:r,variableInfo:c,autoFocus:d,className:g,enabled:I,readOnly:y,tabIndex:b,onMouseDown:P,homePageName:u,onClear:L,menuOffset:C,menuWidth:p,menuClassName:h,onOpenChange:S,backdropEnabled:v,linkListStickySectionHeaders:R,hasError:V,onBlur:Q,webPageIdToRawPathMap:N,dataIdentifierByWebPageIdMap:M,slugVariableByIdentifierMap:w,itemToSlugByIdentifierMap:U,collectionPagesWithVariablesInScope:O,routerLocale:A,readableLink:j,selectedPageMissing:Ae}){let X=Ae||!!V,[_,je]=(0,f.useState)(()=>Oe(j)),F=(0,f.useMemo)(()=>Ue({webPageIdToRawPathMap:N,dataIdentifierByWebPageIdMap:M,slugVariableByIdentifierMap:w,itemToSlugByIdentifierMap:U,collectionPagesWithVariablesInScope:O,routerLocale:A,homePageName:u,variableInfo:c,collectionPageType:l?"noSlugInScope":"showSlugValues"}),[N,M,w,U,O,A,u,c,l]),H=(0,f.useMemo)(()=>Ue({webPageIdToRawPathMap:N,dataIdentifierByWebPageIdMap:M,slugVariableByIdentifierMap:w,itemToSlugByIdentifierMap:U,collectionPagesWithVariablesInScope:O,routerLocale:A,homePageName:u,variableInfo:c,collectionPageType:"slugInScope"}),[N,M,w,U,O,A,u,c]),Fe=(0,f.useCallback)((E,G)=>{if(G||a){if(E===j)return;let Qe=F.get(E)??H.get(E)??T({url:E});if(i(Qe,G),G)return}let Ke=Oe(E);je(Ke)},[a,j,F,H,i]),He=(0,f.useMemo)(()=>rt(F,H,_),[F,H,_]),$e=!!c?.idOfMutableVariableProvider,qe=r&&$e,Ye=(0,f.useContext)(ke)===null,[ze]=(0,f.useState)(()=>(ae(n)||ie(n)||me(n))&&!qe&&Ye);return(0,D.jsx)(Re,{id:t,clearSelectionOnEmptySearch:!0,autoCompleteEnabled:m,showAllWhenOpened:k(n),tabIndex:b,onMouseDown:P,searchItemValue:!!_,items:He,value:j,placeholder:o||tt(n,X,m),constantChange:!0,rightChevron:s,onChange:Fe,autoFocus:ne(d)?d:ze,menuOffset:C,enabled:I,readOnly:y,hasError:X,getSearchTokens:Xe,wrapperClassName:g,onBlur:Q,rightSlot:L?(0,D.jsx)(ve,{variant:"clean",type:"button",className:we,onClick:L,title:"Remove Link",children:(0,D.jsx)(Ce,{})}):void 0,onOpenChange:S,backdropEnabled:v,menuWidth:p,menuClassName:h,stickySectionHeaders:R,containOverscroll:!0})});function tt(e,t,o){return t?"Missing":ee(e)?"Multiple\u2026":o?"Page or URL\u2026":"URL\u2026"}function ot(e,t){if(e.variableSourceIdentifiers)for(let o in e.variableSourceIdentifiers){if(e.variableSourceIdentifiers[o]===t)return o;for(let n of e.combined.get(o)||[])if(n.type==="collectionreference"&&n.dataIdentifier===t)return o}}function Ue({webPageIdToRawPathMap:e,dataIdentifierByWebPageIdMap:t,slugVariableByIdentifierMap:o,itemToSlugByIdentifierMap:n,collectionPagesWithVariablesInScope:i,routerLocale:a,variableInfo:s,homePageName:m,collectionPageType:l}){let r=new Map;if(!e||l==="slugInScope"&&i.size===0)return r;let c=a.slug?`/${a.slug}`:"";for(let[d,g]of e.entries()){let I=g==="/",y=q(g);if(I){if(l==="slugInScope")continue;let p=T({webPageId:d}),h=c?c+y:m??y;r.set(h,p);continue}let b=t.get(d);if(!b){if(l==="slugInScope")continue;let p=T({webPageId:d});r.set(c+y,p);continue}let P=o?.get(b);if(!P)continue;let u=P.id,L=u;if(s&&!s.ids.has(u)){for(let p of s.ids)if(Ie(p,u)){L=p;break}}let C=n?.get(b);if(l==="slugInScope"||l==="noSlugInScope"){let p=i.has(d),h=q(Se(g,P));if(l==="slugInScope"&&p){Z(s,"variableInfo should exist when inScope");let S=ot(s,b),v=S?{[u]:le(L,S)}:void 0,R=T({webPageId:d,pathVariables:v});r.set(c+h,R)}else if(l==="noSlugInScope"&&!p){if(!C)continue;let S=xe(C);if(!S)continue;let[v,R]=S,V={identifier:b,collectionItemId:v,key:u,value:R},Q=T({webPageId:d,pathVariables:{[u]:V}});r.set(c+h,Q)}continue}if(C)for(let p of Object.keys(C)){let h=C[p];if(!h)continue;let v=q(K(g,P,{id:p,slug:h})),R={identifier:b,collectionItemId:p,key:u,value:h},V=T({webPageId:d,pathVariables:{[u]:R}});r.set(c+v,V)}}return r}function Oe(e){let t=e.trim(),o=t.indexOf("/:");o!==-1&&(t=t.substring(o));let n=t.split("/").filter(Boolean);for(;n.length>0;){let i=n.join("/")+"/",a="/"+i;if(t.startsWith(a)||t.startsWith(i))return a;n.pop()}return null}var nt=/\/$/u;function rt(e,t,o){let n=[],i=Array.from(e.keys()),a=Array.from(t.keys());if(o){let s=[];[...a,...i].forEach(r=>{if(!r.startsWith(o))return;let c=r.replace(o,".../");s.push({type:"option",value:r,title:c})});let l=o.replace(nt,"");return n.push({type:"section",value:l,title:l,items:s}),n}return a.length>0&&n.push({type:"section",value:"CMS",items:a.map(s=>({type:"option",value:s}))}),i.length>0&&n.push({type:"section",value:"Pages",items:i.map(s=>({type:"option",value:s}))}),n}var it=x("invite");async function ro(e,t){try{let o=await Y.post(`/web/projects/${e}/acl`,{...t,permissions:t.permissions??void 0});return{status:0,aclEntry:{...o,kind:o.pending?"invite":"user"}}}catch(o){return z(o)?{status:1,editorLimit:o.data.editorLimit,licenseType:o.data.licenseType,teamId:o.data.teamId,teamName:o.data.teamName}:(it.reportError(o),{status:o instanceof Te&&o.isTemporary?2:3})}}var at=x("invite");async function co(e,{id:t,role:o,permissions:n}){try{return await Y.post(`/web/projects/${e}/acl/${t}`,{role:o,permissions:n??void 0}),{status:0}}catch(i){return z(i)?{status:1,editorLimit:i.data.editorLimit,licenseType:i.data.licenseType,teamId:i.data.teamId,teamName:i.data.teamName}:(at.reportError(i),{status:2})}}var po=()=>({icon:null,title:void 0,body:"No Search Results"});export{Ne as a,dt as b,Me as c,Jt as d,ro as e,co as f,po as g};
//# sourceMappingURL=https://app.framerstatic.com/chunk-5JFHJXCK.mjs.map
