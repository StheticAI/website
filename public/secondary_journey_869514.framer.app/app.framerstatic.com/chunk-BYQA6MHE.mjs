import{$ as Fa,V as wo,Y as po,_ as Ma,aa as Ba,h as Sa,j as Oa,r as Na,w as Ea}from"https://app.framerstatic.com/chunk-YG5NBQAU.mjs";import{K as Ra}from"https://app.framerstatic.com/chunk-V73SJU23.mjs";import{Da as Pa,M as vt,Na as wa,Ua as Ta,la as wt,ma as Vr,na as Gp,oa as Sr}from"https://app.framerstatic.com/chunk-N3UBKW7A.mjs";import{O as vo,s as va}from"https://app.framerstatic.com/chunk-WTXUWG3B.mjs";import{G as Po,a as kn,b as En,ma as xi,xa as ba}from"https://app.framerstatic.com/chunk-44NXH25V.mjs";import{d as Rr,j as xa,k as Ca}from"https://app.framerstatic.com/chunk-M5QYI4KS.mjs";import{a as Tt}from"https://app.framerstatic.com/chunk-HLZ5YMM5.mjs";import{d as Or,j as Ia}from"https://app.framerstatic.com/chunk-D6ZKH45E.mjs";import{a as co}from"https://app.framerstatic.com/chunk-MGNK4Q77.mjs";import{b as Pt}from"https://app.framerstatic.com/chunk-4OLTEPHX.mjs";import{L as ga}from"https://app.framerstatic.com/chunk-VQLYEPJG.mjs";import{b as ha}from"https://app.framerstatic.com/chunk-PD3LTKS4.mjs";import{e as ka}from"https://app.framerstatic.com/chunk-JKYWWUT6.mjs";import{Ec as yi,Mc as hi,jb as bi}from"https://app.framerstatic.com/chunk-5POO65PD.mjs";import{f as Ee}from"https://app.framerstatic.com/chunk-2AYHTJDO.mjs";import{a as Va}from"https://app.framerstatic.com/chunk-RDUOSMUC.mjs";import{$d as dt,Ab as Si,Ad as Di,Bd as zi,Cc as Ni,Cd as _i,Gg as Ce,Hg as ro,Ie as Qe,Je as Fe,Kd as Gi,Ld as Ui,Le as eo,Oe as yt,Pe as oo,Rc as Ei,Re as la,Se as ht,Ta as vi,Tc as Mi,Td as Tr,Te as L,Tg as fa,Ua as wi,Vd as qi,Ve as pa,Wd as Li,Xa as Ti,Xd as Hi,Ya as ki,Yc as Fi,Yd as Ki,Zd as Zi,_c as wr,_d as Ji,_f as Ct,ad as Bi,ae as $i,be as mt,ca as Pr,ce as ft,da as vr,dd as Wi,de as kr,dg as ua,ed as Ai,f as Ci,fb as Wo,fe as Xi,ge as ji,he as Yi,ia as ct,ie as Qi,je as gt,ke as ea,kg as da,le as bt,me as oa,ne as ta,oe as ra,pe as Ir,qe as na,re as ia,rg as ma,sb as Ii,se as aa,sf as xt,sg as to,te as sa,vc as Oi,vf as ca,wb as Ri,xb as ut,yb as Vi,zg as oe}from"https://app.framerstatic.com/chunk-4AWVAEWD.mjs";import{a as C}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import{Af as ui,Ag as pt,Be as Fo,De as Bo,Fe as si,H as Ne,K as ri,ga as st,gf as Cr,ha as ni,hf as li,me as ai,of as pi,pc as ii,ug as di,wf as lt,wg as mi,xf as ci,yg as fi}from"https://app.framerstatic.com/chunk-RD5RW7AD.mjs";import{b as N}from"https://app.framerstatic.com/chunk-75XYEZPL.mjs";import{a as ya}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import{k as gi}from"https://app.framerstatic.com/chunk-X73OH5FJ.mjs";import{i as D,j as Pi,k as Me}from"https://app.framerstatic.com/chunk-TJRVAIEZ.mjs";import{$ as _,$b as $e,A as Rn,Db as Qo,Eb as Fn,Gb as No,Hb as Bn,Ib as ao,Jb as Wn,Kb as Se,Lb as so,Ld as tt,Nb as mr,Nn as ei,Ob as ze,On as xr,Pb as Eo,Ph as Xe,Qb as fr,Qh as nt,Rb as gr,Rh as Mo,Sh as Un,Sk as xe,Tp as lo,Up as Co,Vj as qn,X as me,Xc as zn,Y,_b as Je,ac as et,af as rt,bc as An,cn as jn,da as Sn,dc as xo,fl as Hn,hd as _n,ic as Dn,id as yr,jc as br,jl as Kn,kl as Zn,kn as je,ld as ot,ln as it,ml as Jn,mn as Ye,nk as Ln,pn as Yn,qn as Qn,sb as Yo,tb as Ve,ub as ur,vg as Oe,vm as hr,wm as $n,xm as Xn,yb as dr}from"https://app.framerstatic.com/chunk-HLNLVHBF.mjs";import{V as Mn,aa as oi,d as In,ga as at,ka as ti}from"https://app.framerstatic.com/chunk-3CHH3HAB.mjs";import{a as lr}from"https://app.framerstatic.com/chunk-BUC334RG.mjs";import{p as Nn}from"https://app.framerstatic.com/chunk-4XEPQHVZ.mjs";import{b as Tn}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{a as On,b as B,e as Ze,g as he,h as Re,j as J,l as cr}from"https://app.framerstatic.com/chunk-CMAEAGWD.mjs";import{$f as Gn,Ja as pr,a as q,b,i as Vn}from"https://app.framerstatic.com/chunk-M6MHZBU3.mjs";import{g as wn}from"https://app.framerstatic.com/chunk-JLNGOKO7.mjs";import{T as yo,aa as Cn,ea as Pn,fa as ho,l as jo,ma as vn,ra as sr}from"https://app.framerstatic.com/chunk-5V7XAOIL.mjs";import{a as k,b as De}from"https://app.framerstatic.com/chunk-YOOGIIWU.mjs";import{e as d,j as be}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var kt=d(q(),1),Aa=d(b(),1),Nr=(0,kt.createContext)(void 0);Nr.displayName="ImagePluginPickerButtonContext";function Xu({component:e,children:o}){return(0,Aa.jsx)(Nr.Provider,{value:e,children:o})}function Wa(){return(0,kt.useContext)(Nr)}var It=d(q(),1),Up={},Da=(0,It.createContext)(Up);Da.displayName="ControlPropRowContext";function Yu(){let e=(0,It.useContext)(Da);if(!e)throw new Error("useControlPropRows must be used within a ControlPropRowContext.Provider");return e}var Er=d(q(),1),za=Er.default.createContext(!1),ed=za.Provider;function _a(){return Er.default.useContext(za)}function Rt(e=!0){let o=N(),t=_a();return wo(()=>!Ne(o)||t||!e?null:o.stores.treeStore.variableProviderInfo,[t,e],"VariableProviderInfo")}function Ga(e,o){let{id:t,providerId:r=o?.fallbackProvider}=e;return!o||!r?{variable:void 0,providerId:r}:{variable:o.combined.get(r)?.find(n=>n.id===t),providerId:r}}var pe="dt2vdl5",Vt="dc4gvpv",Ua="s1dpgfha";var qp={track:!0};function Ao(e){let o={...e,event:"variable_reference_delete"};Tn(o,qp)}var Br=d(q(),1);function Lp(e,o){if(yr(o))return o.resolveValue("name")||"Component";if(Dn(o)&&o.dataIdentifier){let t=e.dataForIdentifier(o.dataIdentifier);if(t)return Yo(t.name)}return o.resolveValue("name")||hi(e,o)}function Hp(e){return _n(e)?"List":ot(e)?"Page":yr(e)?"Component":""}function St(e,o,t,r="long"){if(t===ai)return"Localization";let n=e.get(t);if(!n)return"Unknown";let i=Lp(o,n),a=Hp(n);return r==="type"?a:i===a?i:`${i} ${a}`}var qa="by3f1yf",La="b1locfei",Ha="ck79ln6",Ka="ikobvuw",Za="tz41s9a",Ja="c11k2f3d",$a="m1wy3we0";var E=d(b(),1);function Fr(e,o){switch(e){case"string":return(0,E.jsx)(na,{foreground:o});case"richtext":return(0,E.jsx)(ta,{foreground:o});case"number":case"scrollsectionref":return(0,E.jsx)(bt,{foreground:o});case"boolean":return(0,E.jsx)(Li,{foreground:o});case"color":return(0,E.jsx)(Ji,{foreground:o});case"image":return(0,E.jsx)(Yi,{foreground:o});case"eventhandler":return(0,E.jsx)(ft,{foreground:o});case"controlReference":case"nodePropertyControlReference":return(0,E.jsx)(mt,{foreground:o});case"link":return(0,E.jsx)(Qi,{foreground:o});case"linkrelvalues":return(0,E.jsx)(gt,{foreground:o});case"date":return(0,E.jsx)($i,{foreground:o});case"enum":return(0,E.jsx)(mt,{foreground:o});case"file":return(0,E.jsx)(kr,{foreground:o});case"customcursor":case"cursor":return(0,E.jsx)(dt,{foreground:o});case"slug":return(0,E.jsx)(Ir,{foreground:o});case"transition":return(0,E.jsx)(aa,{foreground:o});case"border":return(0,E.jsx)(Hi,{foreground:o});case"boxshadow":return(0,E.jsx)(ra,{foreground:o});case"gap":return(0,E.jsx)(ji,{foreground:o});case"padding":return(0,E.jsx)(oa,{foreground:o});case"borderradius":return(0,E.jsx)(Ki,{foreground:o});case"collectionreference":return(0,E.jsx)(Zi,{foreground:o});case"multicollectionreference":return(0,E.jsx)(ea,{foreground:o});case"array":return(0,E.jsx)(qi,{foreground:o});case"trackingid":return(0,E.jsx)(ia,{foreground:o});case"vectorsetitem":return(0,E.jsx)(sa,{foreground:o});default:return De(e,"Missing icon for variable type")}}function Xa(e,o){if(e.id===Fo)return(0,E.jsx)(vr,{isVariable:!0,foreground:o});if(e.id===Bo)return(0,E.jsx)(Pr,{isVariable:!0,foreground:o});if(ei(e))return(0,E.jsx)(Xi,{foreground:o});if(lt(e)){let t=ci(e);return t?.id===Fo?(0,E.jsx)(vr,{isVariable:!0,foreground:o}):t?.id===Bo?(0,E.jsx)(Pr,{isVariable:!0,foreground:o}):(0,E.jsx)(Ir,{foreground:o})}if(e.type==="controlReference"||e.type==="nodePropertyControlReference"){let{expectedType:t}=e;switch(t){case"enum":case"segmentedenum":return(0,E.jsx)(mt,{foreground:o});case"file":return(0,E.jsx)(kr,{foreground:o});default:De(t,`iconForVariable(), unsupported file reference type: ${t}`)}}return Fr(e.type,o)}var ve=d(b(),1);function Zp(e){return he(e)?xe(e)==="boolean":e==="boolean"}function Jp(e,o,t){if(t.combined.size<=1)return!1;let r=t.combined.keys();for(let n of r){if(n===o.id)continue;let i=e.getNode(n);if(br(i)&&i.dataIdentifier===o.dataIdentifier)return!0}return!1}function $p(e,o,t,r){if(!t||!r||r.combined.size<=1)return;let n=e.get(t);if(!(!br(n)||!Jp(e,n,r)||r.combined.keys().next().value===t))return" ("+St(e,o,t,"type")+")"}function Xp(e){let o=ui(e);return o||e.name||"Unknown"}function jp(e,o,t,r,n,i,a,l){if(n)return Zp(r)?"Condition":"Transform";if(!t)return"Missing";let s=i?"Not ":"",p=Xp(t),f=$p(e,o,a,l)??"";return s+p+f}function Yp(e,o,t){if(t)return(0,ve.jsx)(ct,{});if(e)return Xa(e);let r=Array.isArray(o)?o[0]:o;return k(r),Fr(r)}function Qp(e){return e?.id!==yi}var $d=Br.default.memo(Br.default.forwardRef(function(o,t){let r=N(),{expectedType:n,reference:i,onRemove:a,className:l,onClick:s,hasError:p,isComputedValue:f=!1,isNegated:c=!1,buttonTitle:P,onMenuClick:g,preview:y,...v}=o,h=L(),x=Rt(),{variable:m,providerId:u}=Ga(i,x),I=Qp(m);function S(F){a&&r.stores.contextMenuStore.show([{label:"Remove",enabled:!h,click:()=>{a(i),Ao({variableId:m?.id,variableType:m?.type})}}],{location:{x:F.clientX,y:F.clientY}})}let R=r.scheduler.wrapHandler(()=>{Ne(r)&&m&&u&&I&&wa(r,m.id,u)}),T=F=>{!a||h||(F.stopPropagation(),a(i),Ao({variableId:m?.id,variableType:m?.type}))},G=jp(r.tree,r.componentLoader,m,n,f,c,u,x),M=y??Yp(m,n,f),O=!!g&&!h,A=F=>{h||(F.stopPropagation(),g?.(F))};return(0,ve.jsxs)(Fe,{ref:t,role:"button",direction:"row",alignItems:"center",className:C(qa,pe,s||I||O?Ha:void 0,p&&La,l),tabIndex:0,onContextMenu:S,paddingLeft:4,gap:0,onClick:m?s??R:void 0,title:P??G,...v,children:[(0,ve.jsx)(Qe,{className:Ka,children:M}),(0,ve.jsx)(Ct,{size:6}),(0,ve.jsx)("div",{className:C(eo,Za),children:G}),a&&!h&&(0,ve.jsx)(Qe,{className:Ja,onClick:T,onMouseDown:ja,title:"Remove",children:(0,ve.jsx)(ut,{})}),O&&(0,ve.jsx)(Qe,{className:$a,onClick:A,onMouseDown:ja,children:(0,ve.jsx)(Vi,{})})]})}));function ja(e){e.stopPropagation()}var Ot=d(Gp(),1);function ec(e,o){return o.some(t=>{t==="*"&&(t="*/*");let r=Ot.default.parse(t);if(!r){let n=Vr(t);r=n?Ot.default.parse(n):null}return r?(r.type==="*"||r.type===e.type)&&(r.subtype==="*"||r.subtype===e.subtype):!1})}function oc(e,o){if(o.length===0)return!0;let t=Vr(e)??e,r=Ot.default.parse(t);return r&&ec(r,o)?!0:o.some(n=>n==="*"||n==="*/*"||e===n||e===`.${n}`)}function Ya(e,o){return e.type!=="file"?!1:(k(o,"allowedFileTypes should always be defined for ControlType.File"),e.allowedFileTypes.every(({extension:t})=>oc(t,o)))}function Wr(e,o){return!e||!o||Ve(e)||et(e)?!1:($e(e)||De(e),k(e.startValue.id===o.id),o.type==="boolean"&&e.transforms[0]?.name==="negate")}function Ar(e,o){return Wr(e,o)&&e.transforms.length===1}var ps=d(q(),1);var Qa="tl8565r",dm="bvc2uw9",mm="b1k2nl76",fm="b1i3g548",gm="c77pepd",bm="wnwbz2t",ym="w16ew1wl",hm="r16cr7hr",xm="b1lo74ig",tc="b1119pfk",Cm="b13iwexl",Pm="p1c7z6za",vm=C(Qa,"b1eca53j");var wm="cs3azl6",Tm="a1qeto7i",es=C(Qa,tc,"b8y1dyl"),km="wg2hdtb",Im="s1ha7gxb",Rm="pcukmgx",Vm="p1sb4uyz",Sm="ecrz0ka";var os="i7d4cn1",ts=C(es,"e1otabne"),rs="bhul7u3";var ns="https://app.framerstatic.com/a11y-O773ZVIY.png";var is="https://app.framerstatic.com/rem-typography-BHML23FR.jpg";var as="https://app.framerstatic.com/scroll-targets-2PADIE7F.jpg";var ss="https://app.framerstatic.com/template-page-image-dark-K2Y4MA57.png";var ls="https://app.framerstatic.com/template-page-image-light-2NW7Z5XL.png";var fe=d(b(),1);var cs=e=>{Ee("ui_interaction",{page:"education-tooltip",id:e})},pc=e=>{switch(e){case"templatePage":return{title:"Template Page",actionText:"Watch Video",text:"Layout changes made to this page apply to all pages of the selected CMS collection.",image:{dark:ss,light:ls},href:"https://www.framer.com/academy/lessons/cms-pages-dynamic-content",type:"button"};case"remTypography":return{title:"REM Typography",actionText:"Watch Video",text:"This is the base value per Breakpoint when using REM sizing in your typography.",image:is,href:"https://youtu.be/DGPCFIKUDb8",type:"icon"};case"accessibility":return{title:"Accessibility Tips",actionText:"Learn More",image:ns,text:"Learn about the tools Framer gives you to add meaning to the elements of your website.",href:"https://www.framer.com/learn/accessibility/",type:"icon"};case"scrollTargets":return{title:"Scroll Sections",actionText:"Watch Video",href:"https://www.youtube.com/watch?v=AG1ZEij8Vcw",image:as,text:"Learn how to create links that smoothly scroll to a specific section within your page.",type:"icon"};default:De(e)}};function cc({href:e,actionText:o,tooltipId:t,content:r,image:n}){return(0,fe.jsx)(Ma,{icon:(0,fe.jsx)(Qe,{className:os,title:"",children:(0,fe.jsx)(Ti,{})}),direction:"right",actions:e?(0,fe.jsx)(la,{as:"a",href:e,target:"_blank",onClick:()=>cs(t),children:o}):void 0,...r,image:n})}function uc({href:e,actionText:o,tooltipId:t,content:r,image:n}){let i=(0,ps.useRef)(null),{triggerProps:a,tooltipProps:l}=ua({className:rs,direction:"top",interactive:!0,offset:5,triggerRef:i,delay:"short",initialVisibility:!1,tint:D.panelBackground,alignSelf:"right"});return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)(oo,{ref:i,variant:"default",enabled:!0,className:ts,"aria-expanded":l.visible,onClick:a.onPointerEnter,...a,children:[(0,fe.jsx)(Ri,{}),"Template Page"]}),(0,fe.jsx)(Fa,{title:r.title,text:r.text,actions:(0,fe.jsx)(oo,{variant:"default",onClick:()=>{cs(t),ga(e)},"aria-expanded":l.visible,children:o}),image:n,...l})]})}function us({tooltipId:e}){let{isDarkMode:o}=co(),{actionText:t,href:r,type:n,...i}=pc(e),a;return B(i.image)?a=i.image:i.image&&"dark"in i.image&&"light"in i.image&&(a=o?i.image.dark:i.image.light),(0,fe.jsx)(n==="icon"?cc:uc,{href:r,actionText:t,tooltipId:e,content:i,image:a})}var we=d(q(),1);var ds="ib75oye",ms="dnxepni";var Dr=d(b(),1);function fs(){let e=L();return(0,Dr.jsx)("div",{title:"Drag to reorder or remove",className:C(ds,e&&ms),children:(0,Dr.jsx)(wi,{})})}function gs(e){return e.tree.getNodes(e.stores.selectionStore.ids).every(zn)}function bs(e,o,t=void 0){if(!o&&!t)return!1;let r=e.tree.getNodes(e.stores.selectionStore.ids),n=ii.overrideKeys(e.tree,r,!0);return Ra(n,o,t)}function ys(e,o,t=void 0){va(e.tree,e.tree.getNodes(e.stores.selectionStore.ids),o,t)}var hs=d(q(),1);function xs(e){let o=N(),{supportsFetchDataValues:t,onSelectFetchDataValue:r}=e,n=L(),i=(0,hs.useCallback)(()=>{if(t)return[{label:"Add Fetch",click:()=>{k(r);let a=r();Ee("fetch_computed_value_create",{outputType:a.outputType})},enabled:!n&&!(Ne(o)&&ha(o.tree,o.stores.selectionStore.ids)),submenu:void 0}]},[r,n,t]);if(!(!t||!r))return i}var Rs=d(q(),1);function Ps(e){return e?.type==="transform"}function If(e){return e?.type==="unknownTransform"}function mc(e){return e?.type==="typeError"}function Rf(e){return mc(e)&&"key"in e}function Ge(e,o){return he(o)?o.includes(e):e===o}function fc(e){let o=-1,t=-1;for(let i=0,a=e.length;i<a;i++){let l=e[i];l&&(l.name==="greaterThan"&&l.isNegated?o=i:l.name==="lessThan"&&!l.isNegated&&(t=i))}if(o===-1||t===-1)return;let r=e[o];k(r);let n=e[t];k(n),e[o]=n,e[t]=r}function Et(e,o){e.sort((t,r)=>t.outputType===r.outputType?0:t.outputType===o?-1:1),fc(e)}function Vf(e,o,t){let r=e.at(-1);if(!r)return;let n=so(r);if(n===t)return;let i=No(n);if(i)for(let a of i){let l=Se(a);if(l&&l.includes(t)){e.push(Co({name:a,input:n,output:o??t}));return}}}var zr=2;function gc(e,o,t){let r=[{transformName:e,depth:1}],i=t==="boolean"&&o===t?1:zr,a=new Set;for(;r.length>0;){let{transformName:l,depth:s}=r.shift();if(a.has(l))continue;a.add(l);let p=Se(l);if(p){if(p.includes(t))return!0;if(i!==s&&!gr(l))for(let f of p){let c=No(f);if(c)for(let P of c)r.push({transformName:P,depth:s+1})}}}return!1}var _r=(()=>{let e=new Map;return(o,t,r)=>{let n=o+t+r,i=e.get(n);if(On(i))return i;let a=gc(o,t,r);return e.set(n,a),a}})();function Nt({input:e,output:o,currentTransform:t,currentTransformOutput:r,transformBefore:n,variableConsumesNegated:i,supportedTransformNames:a}){let l=[];return a.forEach(s=>{let p=ao(s);if((!p||!p.includes(e))&&s!==t)return;let f=Se(s),c;if(f.includes(o))c=o;else if(r&&f.includes(r))c=r;else{if(!_r(s,e,o))return;let y=Se(s);c=y.includes(o)?o:y[0]}if(n===s&&t!==s&&!fr(s))return;let P=!!(n&&ze(n));P&&s==="negate"||P&&s==="isSet"||!n&&i&&s==="negate"||(l.push({name:s,isNegated:!1,outputType:c}),ze(s)&&l.push({name:s,isNegated:!0,outputType:c}))}),Et(l,o),l.length>0?l:null}function Cs(e,o,t){if(k(o>=0),o===0||o===1&&t)return null;let r,n=t?1:0;for(let i=o-1;i>=n;i--){let a=e[i];if(k(a),a.name==="negate"){r=a;continue}return r&&!ze(a.name)?r:a}return k(r),r}function bc(e){if(!Re(e))return e;for(let o of e)if(Je(o))return o;throw Error("Expected type must be a computed value type")}function vs({mainInputType:e,inputControl:o,variableIsNegated:t,transforms:r,expectedType:n,propName:i,supportedTransformNames:a=Qo()}){let l=bc(n),s=e==="boolean",p={sections:[],errorBefore:null,errorAfter:null,transformAdditionOptions:[],variableIsNegated:t},f=Ge(e,n),c=e;if(r){let m=t?1:0;for(let u=m,I=r.length;u<I;u++){let S=Cs(r,u,t),R=r[u];if(k(R),!Fn(R.name)){p.sections.push({type:"unknownTransform",transform:R});continue}let T=ao(R.name);if(k(T),!Ge(c,T)){let M=Eo(R.name,!1);u===0?p.errorBefore={type:"typeError",title:M,expected:T,received:c,replaceOptions:Nt({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:null,variableConsumesNegated:s,supportedTransformNames:a})}:(k(S),p.sections.push({type:"typeError",key:`${R.id}-error`,title:M,expected:T,received:c,replaceOptions:Nt({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:S.name,variableConsumesNegated:s,supportedTransformNames:a}),transformBefore:S,transformAfter:R}))}let G=p.sections[p.sections.length-1];if(R.name==="negate"&&G?.type==="transform"&&G.consumesNegated)G.isNegated=!G.isNegated;else{let M=so(R),O=f&&e!=="enum",A=p.sections.some(V=>{if(V.type!=="transform")return!0;let te=so(V.transform);return Ge(te,n)}),F=O||A||!!S;p.sections.push({type:"transform",transform:R,inputType:c,inputControl:m===u?o:void 0,consumesNegated:ze(R.name),isNegated:!1,canBeDeleted:F,replaceOptions:Nt({input:c,output:l,currentTransformOutput:M,currentTransform:R.name,transformBefore:S?.name??null,variableConsumesNegated:s,supportedTransformNames:a})}),c=M}}}let P=r?Cs(r,r.length,t):null,g=P?P.name:null,y=g==="negate",v=g?ze(g):!1,h=!Ge(c,n);return h&&(p.errorAfter={type:"typeError",title:i,expected:n,received:c,replaceOptions:Nt({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:g,variableConsumesNegated:s,supportedTransformNames:a})}),yc(p,P,n,h)&&(a.forEach(m=>{if(g===m&&!fr(m)||m==="negate"&&(!P||y||v))return;let u=ao(m);if(!u||!u.includes(c))return;let I=Se(m),S=I.find(R=>Ge(R,n))??I[0];Ge(c,n)&&!Ge(S,n)||gr(m)&&!Ge(S,n)||(p.transformAdditionOptions.push({name:m,isNegated:!1,outputType:S}),ze(m)&&p.transformAdditionOptions.push({name:m,isNegated:!0,outputType:S}))}),Et(p.transformAdditionOptions,l)),p}function yc(e,o,t,r){return r?!0:t==="boolean"?Nn.isOn("dynamicFilters")?o?.name!=="equals":e.sections.every(n=>n.type!=="transform"):Ge("enum",t)?!o||!o.name?!0:!Se(o.name).includes("enum"):!0}function ws(e,o,t){switch(t.name){case"equals":switch(o.name){case"equals":case"startsWith":case"endsWith":case"contains":case"lessThan":case"greaterThan":case"isAfter":case"isBefore":switch(e){case"string":case"boolean":case"number":case"enum":case"date":case"collectionreference":Hn(e,o.value)&&(t.value=o.value);break}}return;case"isAfter":case"isBefore":switch(o.name){case"isBefore":case"isAfter":case"equals":B(o.value)&&(t.value=o.value);break}break;case"lessThan":case"greaterThan":switch(o.name){case"lessThan":case"greaterThan":t.value=o.value;break;case"equals":Ze(o.value)&&(t.value=o.value);break}break;case"startsWith":case"endsWith":case"contains":switch(o.name){case"startsWith":case"endsWith":case"contains":case"equals":B(o.value)&&(t.value=o.value)}break;case"prefix":case"suffix":switch(o.name){case"prefix":case"suffix":t.value=o.value,t.valueLocalized=o.valueLocalized}break;case"isIncludedIn":switch(o.name){case"isIncludedIn":he(o.value)&&o.value.every(B)&&(t.value=o.value)}break;case"containsAny":case"containsAll":switch(o.name){case"containsAny":case"containsAll":(Ve(o.value)||he(o.value)&&o.value.every(B))&&(t.value=o.value)}break}}function Do(e,o,t,r){return o!=="controlReference"?e.canCreateVariable({type:o}):!t||!r?!1:(Re(t)?t:[t]).some(i=>Yn(i)&&e.canCreateVariable({type:"controlReference",expectedType:i,entityIdentifier:r}))}function hc(e,o,t,r,n){return n&&Do(e,n,t,r)?[n]:Re(o)?o.filter(i=>Do(e,i,t,r)&&i!=="enum"):Do(e,o,t,r)?[o]:[]}function xc({engine:e,dynamicValue:o,canCreateVariable:t,variableType:r,variableCreationType:n,variableInfo:i,onCreateVariable:a,variableReferenceType:l,supportsComputedValues:s,collectionReferenceDataIdentifier:p,controlSourceIdentifier:f,vectorSetIdentifier:c,isReadOnly:P,controlKey:g,allowedFileTypes:y,displayTransformOptions:v,onSelectVariable:h,onSelectComputedValue:x,onRemoveDynamicValue:m,computedValuePopoutId:u,variableFilter:I}){let S=[],R=P||ba(e,"canDesign");if(t){k(i,"variableInfo should be defined");let O=e.tree.getNodeWithTrait(i.idOfMutableVariableProvider,xr);k(O,"variableProviderNode should exist when creating variables");let A=hc(O,r,l,f,n);if(A.length===1){let F=A[0];k(dr(F),"onlyVariableType should be defined"),S.push({label:"Create Variable",enabled:!R,click:()=>{k(i.idOfMutableVariableProvider,"idOfMutableVariableProvider should exist when creating variables"),k(a,"onCreateVariable should be defined"),a(O.id,F)}})}else A.length>1&&S.push({label:"Create Variable",submenu:A.map(F=>({label:Qn(F),enabled:!R,click:()=>{k(i.idOfMutableVariableProvider,"idOfMutableVariableProvider should exist when creating variables"),k(a,"onCreateVariable should be defined"),a(O.id,F)}}))})}let T=Oc(e,i,r,l,s,p,c,f,g,y,v,I),G=Ec({engine:e,variableInfo:i,compatibleVariablesByProvider:T,variableType:r,dynamicValue:o,variableReferenceType:l,collectionReferenceDataIdentifier:p,vectorSetIdentifier:c,controlSourceIdentifier:f,controlKey:g,allowedFileTypes:y,supportsComputedValues:s,onSelectVariable:h,onSelectComputedValue:x,onRemoveDynamicValue:m,readonly:R,variableFilter:I});G.length>0&&S.push({label:"Set Variable",submenu:G});let M=Bc({engine:e,variableInfo:i,dynamicValue:o,variableType:r,supportsComputedValues:s,onSelectComputedValue:x,computedValuePopoutId:u,displayTransformOptions:v,controlSourceIdentifier:f,controlKey:g,readonly:R});return M&&S.push(M),S}function Vs(e){let o=N(),{variableType:t,variableCreationType:r,variableReferenceType:n,dynamicValue:i,onCreateVariable:a,onSelectVariable:l,onRemoveDynamicValue:s,collectionReferenceDataIdentifier:p,controlSourceIdentifier:f,vectorSetIdentifier:c,controlKey:P,allowedFileTypes:g,supportsComputedValues:y,onSelectComputedValue:v,displayTransformOptions:h=!0,computedValuePopoutId:x,variableFilter:m}=e,u=Rt(),{canCreateVariable:I,canAssignVariable:S}=Cc(o,u,e),R=L(),T=(0,Rs.useCallback)(()=>{if(u&&t)return xc({engine:o,variableInfo:u,variableType:t,variableCreationType:r,variableReferenceType:n,supportsComputedValues:y,collectionReferenceDataIdentifier:p,controlSourceIdentifier:f,vectorSetIdentifier:c,controlKey:P,allowedFileTypes:g,displayTransformOptions:h,dynamicValue:i,onSelectComputedValue:v,onSelectVariable:l,isReadOnly:R,onRemoveDynamicValue:s,onCreateVariable:a,canCreateVariable:I,computedValuePopoutId:x,variableFilter:m})},[g,I,p,x,P,f,h,i,R,a,s,v,l,y,r,u,n,t,c,m]);return S?T:void 0}function Cc(e,o,t){let n=!!t.supportsVariables&&Vc(o,t.variableType,t.variableReferenceType,t.supportsComputedValues,t.collectionReferenceDataIdentifier,t.vectorSetIdentifier,t.controlSourceIdentifier,t.controlKey,t.allowedFileTypes,t.variableFilter),i=e.tree.getNodeWithTrait(o?.idOfMutableVariableProvider,xr),l=Pc(i,t)&&!!t.onCreateVariable,s=n&&!!t.onSelectVariable;return{canCreateVariable:l,canAssignVariable:l||s}}function Pc(e,o){if(!e||!o.supportsVariables||!o.variableType)return!1;if(!Re(o.variableType))return Do(e,o.variableType,o.variableReferenceType,o.controlSourceIdentifier);for(let t of o.variableType)if(Do(e,t,o.variableReferenceType,o.controlSourceIdentifier))return!0;return!1}function vc(e){return Ve(e)?e:An(e)?e.startValue:null}function wc(e,o,t,r){if(e.type!=="controlReference"&&e.type!=="nodePropertyControlReference")return!1;let{entityIdentifier:n,controlKey:i,expectedType:a}=e;return n===hr?i===r:!t||!Ac(n,t)||i!==r?!1:he(o)?o.includes(a):o===a}function Tc(e,o){return e.type!=="vectorsetitem"||!o?!1:e.setModuleId===o}function Ts(e,o){let t=[{type:e,depth:1}];for(;t.length>0;){let{type:r,depth:n}=t.shift(),i=n===zr,a=Wn(r);if(a)for(let l of a){let s=ao(l);if(s)for(let p of s)o.has(p)||(o.add(p),dr(p)&&(i||t.push({type:p,depth:n+1})))}}}function kc(e){return Re(e)?Array.from(e).sort().join():e}var Ss=(()=>{let e=new Map;return o=>{let t=kc(o),r=e.get(t);if(r)return r;let n=new Set;if(Re(o))for(let i of o)Ts(i,n);else Ts(o,n);return e.set(t,n),n}})();function Os(e,o,t){if(!o||!t)return;if(t===hr)return k($n(o)),Xn(o);let r=e.reactComponentForIdentifier(t);if(r)return r.properties[o]}function zo(e,o,t,r,n){let i=B(o)?o:o.type;for(let a of Qo()){let l=ao(a);if(!l||!l.includes(i))continue;let s=Se(a),p=Re(t)?t.find(c=>s.includes(c)):s.find(c=>c===t);if(!Je(p))continue;let f=Os(e,r,n);return{outputType:p,valueTransform:Co({name:a,input:o,output:f?.type===p?f:p})}}return null}function Ic(e,o,t,r,n,i){let a=zo(e,o,t,r,n);if(a)return xo(a.outputType,i,[a.valueTransform]);let l=zo(e,o,"boolean",r,n),s=zo(e,"boolean",t,void 0,void 0);if(l&&s)return xo(s.outputType,i,[l.valueTransform,s.valueTransform]);let p=B(o)?o:o.type;throw new Error(`Could not generate computed value with input: ${p}, and output: ${he(t)?t.join(", "):t}`)}function Rc(e,o){for(let t of e)if(o.has(t))return!0;return!1}function ks(e,o,t,r,n,i,a,l,s){if(e==="enum")return!i||!a?!1:o.enums.some(({variable:p,sourceIdentifier:f})=>Ns(p,f,i,a));if(s){for(let[p,f]of o.combined)if(o.variableSourceIdentifiers[p]&&f.some(s))return!0;return!1}return o.flatList.some(p=>Mt(p,void 0,e,t,r,n,i,a,l,s))}function Vc(e,o,t,r,n,i,a,l,s,p){if(!o||!e)return!1;if(Re(o)){if(o.some(c=>ks(c,e,t,n,i,a,l,s,p)))return!0}else if(ks(o,e,t,n,i,a,l,s,p))return!0;if(r){let f=e.types,c=Ss(o);if(c&&Rc(c,f))return!0}return!1}function Mt(e,o,t,r,n,i,a,l,s,p){return p&&!p(e)?!1:he(t)?t.some(f=>Mt(e,o,f,r,n,i,a,l,s,p)):t==="collectionreference"?e.type==="collectionreference"&&e.dataIdentifier===n:t==="multicollectionreference"?e.type==="multicollectionreference"&&e.dataIdentifier===n:t==="vectorsetitem"?Tc(e,i):t==="file"?Ya(e,s):t==="controlReference"||e.type==="nodePropertyControlReference"?wc(e,r,a,l):e.type==="enum"?Ns(e,o,a,l):e.type===t}function Ns(e,o,t,r){return o===t&&e.id===r}function Es(e,o,t){return!t||!o?!1:Ss(o)?.has(e.type)??!1}function Sc(e){let o={children:{}};for(let t of e){let r=t.id.split("."),n=o;for(let i of r)n.children??={},n=n.children[i]??={};n.variable=t}return o}function Oc(e,o,t,r,n,i,a,l,s,p,f,c){let P=[];function g(y,v,h,x,m){let u=[];if(x.includes(v)&&x.length>1)return u;for(let S in y){let R=y[S];if(!R)continue;let{variable:T,children:G}=R;if(J(T)||si(T.id)&&!ot(m)||Cr(T.id,Fo)||Cr(T.id,Bo))continue;if(Mt(T,v,t,r,i,a,l,s,p,c)){u.push({variable:T,isNegated:!1,transforms:null}),n&&T.type==="boolean"&&u.push({variable:T,isNegated:!0,transforms:null});continue}let M;if(G&&T.type==="collectionreference"){let O=T.dataIdentifier;M=g(G,O,[...h,T.id],[...x,v],m)}if(!pi(T.id)){if(Es(T,t,n)){let O=Ms(T,t);if(!f){if(u.push({variable:T,isNegated:!1,transforms:null}),O){let A=O.valueTransformOptions.filter(F=>!mr.has(F.name));n&&T.type==="boolean"&&A.length>0&&u.push({variable:T,isNegated:!0,transforms:null})}continue}if(O&&O.valueTransformOptions.length>0){u.push({variable:T,isNegated:!1,transforms:O.valueTransformOptions,compatibleNestedVariables:M});let A=O.valueTransformOptions.filter(F=>!mr.has(F.name));n&&T.type==="boolean"&&A.length>0&&u.push({variable:T,isNegated:!0,transforms:A})}continue}M&&u.push({variable:T,isNegated:!1,transforms:null,compatibleNestedVariables:M})}}if(u.length!==0)return u}for(let[y,v]of o.combined){let{children:h}=Sc(v);k(h,"Variable tree should have children");let x=o.variableSourceIdentifiers[y];if(!x)continue;let m=e.tree.get(y),u=g(h,x,[],[],m);u&&P.push({providerId:y,providerTitle:St(e.tree,e.componentLoader,y),compatibleVariables:u})}return P}function Nc(e,o,t,r,n){if(!$e(e)||!t||!o)return null;let a=vs({mainInputType:t.type,inputControl:n,variableIsNegated:r,transforms:$e(e)?e.transforms:null,expectedType:o,propName:void 0}).sections.find(Ps);return a?{name:a.transform.name,isNegated:a.isNegated}:null}function Is(e){return e.transforms.find(o=>o.name!=="negate")}function Gr(e,o,t){if(!o||!t)return;let r=o.providerId??e.fallbackProvider;if(!r)return;let n=e.combinedControls.get(r)?.get(o.id);if(n)return n.type===t.type?n:void 0}function Ec({engine:e,variableInfo:o,compatibleVariablesByProvider:t,variableType:r,dynamicValue:n,variableReferenceType:i,collectionReferenceDataIdentifier:a,vectorSetIdentifier:l,controlSourceIdentifier:s,controlKey:p,allowedFileTypes:f,supportsComputedValues:c,onSelectVariable:P,onSelectComputedValue:g,onRemoveDynamicValue:y,readonly:v,variableFilter:h}){let x=[],m=o.fallbackProvider,u=vc(n),I=o.flatList.find(M=>u&&M.id===u.id),S=Wr(n,I),R=Nc(n,r,I,S,Gr(o,u,I));function T(M,O,A){return M.map(F=>{let{variable:V,isNegated:ae,transforms:te,compatibleNestedVariables:Q}=F,Z=Wc(F,O,u,S,m),de=te?.map(j=>({label:Eo(j.name,j.isNegated),enabled:!v,checked:Z&&R?.name===j.name&&R.isNegated===j.isNegated,click:()=>ue(j)}));if(Q){k(V.type==="collectionreference"||V.type==="array","Invalid variable type");let j=V.type==="collectionreference"?V.dataIdentifier:A,se=T(Q,O,j),Pe=Ve(u)&&(u.providerId??m)===O&&li(u.id,V.id);if(Q.length===1&&se.length===1){let re=Q[0],ee=se[0];if(re&&lt(re.variable)&&ee)return{label:V.name,checked:Pe,click:ee.click}}return de&&se.unshift(...de,{type:"separator"}),{label:V.name,checked:Pe,submenu:se}}function ue(j=void 0){if(Z&&!j){n&&y?.(n),Ao({variableId:V.id,variableType:V.type});return}let se=ur(V.id,O);if($e(n)&&n.transforms.length>0&&I?.type===V.type&&!Ar(n,I)&&!j){let ee={...n,startValue:se};if(ae!==S){k(V.type==="boolean");let ce=Array.from(ee.transforms);ee.transforms=ce,ae?ce.unshift(lo()):(k(ce[0]?.name==="negate"),ce.shift())}g?.(ee);return}if(Mt(V,A,r,i,a,l,s,p,f,h)&&!j){if(ae){k(V.type==="boolean"),g?.(xo("boolean",se,[lo()]));return}P?.(ur(V.id,O),V.type),kn({variableId:V.id,variableType:V.type});return}k(Es(V,r,c),"Selected variable should be assignable using a computed value"),k(r,"Variable type should be defined");let Pe=Gr(o,se,V)??V.type,re;if(j){let ee=Os(e.componentLoader,p,s),ce=j.outputType,U=[Co({name:j.name,input:Pe,output:ee?.type===ce?ee:ce})];j.isNegated&&U.push(lo());let ne=he(r)?r.find(Je):r;if(k(Je(ne)),j.outputType!==ne){let le=zo(e.componentLoader,j.outputType,ne,p,s);le&&U.push(le.valueTransform)}re=xo(ne,se,U)}else re=Ic(e.componentLoader,Pe,r,p,s,se);if($e(n)){let ee=Is(n),ce=Is(re);if(ee&&ce){I?.type===V.type&&ws(V.type,ee,ce);let bo=so(ee),U=so(ce);if(bo===U){let ne=n.transforms.findIndex(He=>He===ee),le=n.transforms.slice(ne+1);if(le.length>0){let He=re.transforms.findIndex(Jo=>Jo===ce),Zo=re.transforms.slice(0,He+1);Zo.push(...le),re.transforms=Zo}}}}ae&&(k(V.type==="boolean"),re.transforms=[lo(),...re.transforms]),g?.(re),Ee("computed_value_create",{initialTransformName:re.transforms[0]?.name,inputType:V.type,outputType:re.outputType,source:"property_panel_row"})}return{label:(ae?"Not ":"")+(V.name||"Unknown"),checked:Z,enabled:!v,click:()=>ue(),submenu:de}})}let G=t.entries();for(let[M,{providerId:O,providerTitle:A,compatibleVariables:F}]of G){let V=o.variableSourceIdentifiers[O];if(!V)continue;let ae=T(F,O,V);M===0?x.push(...ae):(M===1&&x.push({type:"separator"}),x.push({label:A,submenu:ae,checked:Ve(u)&&(u.providerId??m)===O}))}return x}function Mc(e,o){let t=new Map,r=No(e);if(!r)return t;for(let n of r){if(!_r(n,e,o))continue;let a=Se(n),l=a.includes(o)?o:a[0];t.set(n,l)}return t}var Fc=(()=>{let e=new Map;return(o,t)=>{let r=o+t;if(e.has(r))return e.get(r);let n=Mc(o,t),i=[];for(let[l,s]of n)l==="negate"&&o==="boolean"||(i.push({name:l,isNegated:!1,outputType:s}),ze(l)&&i.push({name:l,isNegated:!0,outputType:s}));if(i.length===0){e.set(r,void 0);return}Et(i,t);let a={valueTransformOptions:i,outputType:t};return e.set(r,a),a}})();function Ms(e,o){if(!Bn(e.type))return;let t=Array.isArray(o)?o.find(Je):o;if(Je(t))return Fc(e.type,t)}function Bc({engine:e,variableInfo:o,dynamicValue:t,variableType:r,supportsComputedValues:n,onSelectComputedValue:i,computedValuePopoutId:a,displayTransformOptions:l,controlSourceIdentifier:s,controlKey:p,readonly:f}){if(!n||!i||!r||!t||et(t)||!l)return;let c=Ve(t)?t:t.startValue,P=o.flatList.find(m=>m.id===c.id);if(!P)return;let g=Ar(t,P),y=r==="boolean";if($e(t)&&!g)return{label:`Edit ${y?"Condition":"Transform"}`,click:()=>{k(a),Ea.navigation.presentPopout(a)}};if(!Ve(t)&&!g)return;let v=Ms(P,r);if(!v)return;let{valueTransformOptions:h,outputType:x}=v;return{label:`Add ${y?"Condition":"Transform"}`,submenu:h.map(m=>({label:Eo(m.name,m.isNegated),enabled:!f,click:()=>{let u=[];g&&u.push(lo());let I=Gr(o,c,P),S=Co({name:m.name,input:I??P.type,output:m.outputType});if(u.push(S),m.isNegated&&u.push(lo()),B(r)&&m.outputType!==r){let T=zo(e.componentLoader,m.outputType,r,p,s);T&&u.push(T.valueTransform)}let R=xo(x,c,u);i(R)}}))}}function Wc(e,o,t,r,n){return!t||t.id!==e.variable.id||e.isNegated!==r?!1:(t.providerId||n)===o}function Ac(e,o){if(e===o)return!0;let t=sr(e);if(t?.kind!=="externalModuleExport")return e===o;let r=sr(o);return r?.kind!=="externalModuleExport"?e===o:t.moduleId===r.moduleId&&t.exportSpecifier===r.exportSpecifier}var Fs="t3p7r61",Bs="t1ih3ztb",Ws="wkaasce",As="w1vx93q9",Ds="wof63pb";var Be=d(b(),1);function zs({title:e,className:o,displayPlusIcon:t,primaryMenuIsOpen:r,educationTooltip:n,disableTitleTooltip:i=!1,titleTooltip:a,overridden:l,...s}){return(0,Be.jsxs)("div",{className:C(Fs,t&&C(Ws,(r||l)&&As),o),title:e===" "||i?void 0:a??e,...s,children:[t&&(0,Be.jsx)(Bi,{}),(0,Be.jsx)("div",{className:C(eo,Bs,l&&Ds),children:(0,Be.jsx)(pa,{children:e})}),n&&(0,Be.jsxs)(Be.Fragment,{children:[(0,Be.jsx)(Ct,{size:Me.css.inputSpacing}),n]})]})}var _s="p1oxlfbn",Gs="w1xpzgm5",Us="w1chribc";var _o=d(b(),1),To=({title:e,titleClassName:o,children:t,className:r,style:n,disableTitleTooltip:i=!1,titleTooltip:a,reorderColumnCount:l,reorderControlHidden:s,withButtonCursor:p=!1,displayPlusIcon:f=!1,isOverridden:c=!1,primaryMenuIsOpen:P=!1,onMouseDown:g,onContextMenu:y,ReorderControl:v,educationTooltip:h,...x})=>{let m=v!==void 0;m&&Ze(l)&&(n={...n,"--reorder-column-count":l});let u=y?{onContextMenu:y,role:"button"}:{},I=g?{onMouseDown:g,role:"button"}:{};return(0,_o.jsxs)("div",{className:C(_s,m&&Gs,r,p&&Us),style:n,tabIndex:-1,...u,...I,...x,children:[e&&(0,_o.jsx)(zs,{overridden:c,title:e,disableTitleTooltip:i,titleTooltip:a,className:o,displayPlusIcon:f,educationTooltip:h,onMouseDown:g,primaryMenuIsOpen:P}),t,m&&!s&&(0,_o.jsx)(v,{})]})};var Ur=d(b(),1);function We({onContextMenu:e,children:o,onAdd:t,onDelete:r,onResetToDefault:n,onCopy:i,onPaste:a,onSetAsDefault:l,deleteTitle:s,copyTitle:p,pasteTitle:f,addEnabled:c=!0,deleteEnabled:P=!0,pasteEnabled:g,copyEnabled:y,resetToDefaultEnabled:v,setAsDefaultVisible:h=!1,withReorderControl:x=!1,traitTypes:m,traitTypeKeys:u,variableType:I,variableCreationType:S,variableReferenceType:R,variableFilter:T=void 0,dynamicValue:G,onCreateVariable:M,onSelectVariable:O,onRemoveDynamicValue:A,supportsVariables:F=!1,collectionReferenceDataIdentifier:V,vectorSetIdentifier:ae,controlSourceIdentifier:te,controlKey:Q,allowedFileTypes:Z,supportsComputedValues:de=!1,onSelectComputedValue:ue,displayTransformOptions:j,computedValuePopoutId:se,supportsFetchDataValues:Pe,onSelectFetchDataValue:re,educationTooltipId:ee,className:ce,panelRowApiRef:bo,...U}){let ne=N(),le=L(),He=Sa(u,m),[Zo,Jo]=we.default.useState(!1),Ap=_c(),$o=Vs({variableType:I,variableCreationType:S,variableReferenceType:R,dynamicValue:G,onCreateVariable:M,onSelectVariable:O,onRemoveDynamicValue:A,supportsVariables:F,collectionReferenceDataIdentifier:V,vectorSetIdentifier:ae,controlSourceIdentifier:te,controlKey:Q,allowedFileTypes:Z,supportsComputedValues:Ap&&de,onSelectComputedValue:ue,displayTransformOptions:j,computedValuePopoutId:se,variableFilter:T}),Xo=xs({supportsFetchDataValues:Pe??!1,onSelectFetchDataValue:re}),fn=!!$o||!!Xo,or=!!(t&&c&&!le),tr=!!(r&&P&&!le),gn=!!n,Dp=(0,we.useCallback)(async Ke=>{let{clientX:nr,clientY:ir}=Ke;(or||tr||i||a||gn||l&&h)&&(Ke.preventDefault(),ne.stores.contextMenuStore.show([{label:p||"Copy",click:i,visible:!!i,enabled:cr(y)?y():y},{label:f?await f():"Paste",click:a,visible:!!a,enabled:!le&&(cr(g)?await g():g)},{type:"separator"},{label:"Add",click:t,visible:or},{label:s||"Remove",click:r,visible:tr},{label:"Reset to Default",click:n,enabled:!le&&v,visible:!!n},{label:"Set as Default",click:l,enabled:!le&&!!l,visible:!!l&&h}],{location:{x:nr,y:ir}}))},[or,tr,i,a,gn,l,h,p,y,f,le,g,t,s,r,n,v]),rr=(0,we.useCallback)(async(Ke,nr=!1)=>{let{target:ir,currentTarget:bn}=Ke,yn=Ne(ne)&&gs(ne),zp=yn&&!!(m||u);if(!nr&&(!ma.isLeftMouseClick(Ke)||ir!==bn))return;let ar=$o?.();if(!$o&&!He&&!Xo)return;let Oo=[];ar&&Oo.push(...ar);let hn=Xo?.();hn&&(ar&&Oo.push({type:"separator"}),Oo.push(...hn)),Oo.push({type:"separator"},{label:"Reset Override",click(){Ne(ne)&&ys(ne,m,u)},enabled:!le&&yn&&bs(ne,m,u),visible:Ne(ne)&&zp});let xn=Ke.currentTarget.getBoundingClientRect(),_p={x:xn.left,y:xn.bottom};Jo(!0),ne.stores.contextMenuStore.show(Oo,{location:_p,onDone:()=>Jo(!1),submenuPlacement:"left-start"})},[m,u,$o,He,Xo,le]);return(0,we.useImperativeHandle)(bo,()=>({displayPrimaryMenu:Ke=>rr(Ke,!0)}),[rr]),(0,Ur.jsx)(To,{withButtonCursor:He||fn,displayPlusIcon:fn,onMouseDown:rr,isOverridden:He,primaryMenuIsOpen:Zo,onContextMenu:e??Dp,ReorderControl:x?fs:void 0,educationTooltip:ee?(0,Ur.jsx)(us,{tooltipId:ee}):void 0,className:ce,...U,children:o})}var qr=(0,we.createContext)(!1);qr.displayName="ComputedValuesSupportedContext";var Wg=qr.Provider;function _c(){return(0,we.useContext)(qr)}var qs=d(q(),1);function Ls(e){let o=N(),{isDarkMode:t}=co(),r=vo("ColorStyleTokens",()=>{if(pt(e)){let a=Pa(o.tree,e.stops,t);return{name:void 0,value:e.updated({stops:a}).toCSS()}}else{let a=Ye(e)?je(e):null;if(!a)return null;let l=o.tree.get(a);return tt(l)?{name:l.name,value:l.colorForMode(t)}:null}},[e,t]),n=r?.name,i=r?.value;return(0,qs.useMemo)(()=>i?{name:n,value:i}:null,[n,i])}function Jg(){let{isDarkMode:e}=co(),o=N();return wo(()=>{let t=bi.get(o.tree);if(!t)return;let r={};for(let n of t.children)r[jn(n)]=n.colorForMode(e);return r},[e],["ColorStyleTokens"],{deepEqual:!0})}var Hs="c1avmyds",Ks="lzm78je",Zs="caoupms",Js="i3vlae9",$s="iyiuvk1";var Go=d(b(),1);function Uc(e,o,t,r=D.swatchBorderPlaceholder,n="white"){let i={boxShadow:`inset 0 0 0 1px ${r}`,backgroundColor:n};return e.includes("gradient")||e.includes("url")?(i.backgroundImage=e,i.backgroundRepeat="no-repeat",i.backgroundSize="cover",i.backgroundPositionX=o??"center",i.backgroundPositionY=t??"center"):i.backgroundColor=e,i}function Xs({large:e,background:o,borderColor:t,backgroundPositionX:r,backgroundPositionY:n,defaultBackgroundColor:i}){let l=Ls(o)?.value??o;return(0,Go.jsxs)("div",{className:C(Hs,e&&Ks),children:[(0,Go.jsx)("div",{className:C(Zs)}),(0,Go.jsx)("div",{className:C(Js,e&&$s),style:Uc(l,r,n,t,i)})]})}var js="wkxdsnf",Ys="l2ga4t0";var Qs=d(b(),1);function W({large:e,borderColor:o,background:t=D.tint,color:r="#fff",children:n,className:i}){let a=o?`inset 0 0 0 1px ${o}`:void 0;return(0,Qs.jsx)(Qe,{className:C(js,e&&Ys,i),style:{background:t,color:r,boxShadow:a},children:n})}var Ft="i1ab0gin",el="l19ygcxe",ol="i1mqt5la",Bt="t1bkmsxp",tl="t1vpcft3",rl="suf63yr",nl="c1hu2nje",il="leca1mf",Lr="d1ir7ssq",al="sojarwo";var sl="b11f2aom",ll="r1ihmrto",pl="t8942cu",cl="a11ph0ck";var w=d(b(),1);function H(e){switch(e){case"action":case"aiStyleUpsell":case"border":case"collectionFilter":case"collectionOrder":case"customCursor":case"effect":case"eventSuggestion":case"font":case"formDestination":case"formSelectOption":case"grid-guides":case"line":case"link":case"linkOptions":case"linkRelValues":case"noItems":case"object":case"pageEffectExit":case"pagination":case"preset":case"scrollSection":case"sizeConstraint":case"spring":case"textSelection":case"transition":case"trigger":case"tween":return D.swatchBackgroundPlaceholderForBorder;case"fill":return D.swatchBackgroundPlaceholderForFill;case"color":case"icon":case"shadow":case"stroke":return"transparent";case"mask":return`linear-gradient(180deg, ${D.maskEmptyGradientStop1} 0%, ${D.maskEmptyGradientStop2} 100%)`;default:De(e)}}function Kc(e){if(e==="mask")return"transparent"}function Zc(e){return e==="action"?"Reset\u2026":e==="aiStyleUpsell"?"Upgrade\u2026":e==="pageEffectExit"?"Add Exit\u2026":"Add\u2026"}function Jc(e,o){return o||(e==="action"?"Reset Override":e==="eventSuggestion"?"Add Interaction":`Add ${Yo(e)}`)}function Rb({type:e,className:o,icon:t,tooltipTitle:r,...n}){let i=L();return(0,w.jsx)("div",{...n,className:C(pe,o,i&&ll),children:(0,w.jsxs)("div",{className:sl,title:Jc(e,r),children:[(0,w.jsx)("div",{className:C(Ft,i&&ol,(e==="action"||e==="eventSuggestion")&&cl),children:t??(0,w.jsx)($c,{type:e})}),(0,w.jsx)("div",{className:C(eo,Bt,pl),children:Zc(e)})]})})}function $c({type:e}){switch(e){case"action":case"eventSuggestion":return(0,w.jsx)(ft,{});case"aiStyleUpsell":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(zi,{})});case"effect":case"pageEffectExit":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(ki,{})});case"line":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Oi,{})});case"link":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Ai,{})});case"linkOptions":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(wr,{})});case"linkRelValues":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(gt,{background:"transparent"})});case"grid-guides":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Ii,{})});case"sizeConstraint":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Di,{})});case"pagination":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Ni,{})});case"noItems":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Ei,{})});case"collectionFilter":return(0,w.jsx)(W,{background:H(e),color:"transparent",children:(0,w.jsx)(ct,{})});case"collectionOrder":return(0,w.jsx)(W,{background:H(e),color:"transparent",children:(0,w.jsx)(Mi,{})});case"spring":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(_i,{})});case"tween":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Tr,{})});case"object":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(vi,{})});case"font":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Ui,{})});case"scrollSection":return(0,w.jsx)(W,{color:H(e),children:(0,w.jsx)(bt,{})});case"customCursor":return(0,w.jsx)(W,{color:H(e),children:(0,w.jsx)(dt,{})});case"formDestination":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(wr,{})});case"formSelectOption":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Wi,{})});case"transition":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Tr,{})});case"textSelection":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Gi,{})});case"trigger":return(0,w.jsx)(W,{background:H(e),children:(0,w.jsx)(Si,{})});default:return(0,w.jsx)(Xs,{background:H(e),borderColor:D.swatchBorderPlaceholder,defaultBackgroundColor:Kc(e)})}}var ul=d(q(),1);var Te=d(b(),1),Wt=({enabled:e,large:o,title:t,titleColor:r,shortcutKey:n,preview:i,deleteIconColor:a,swatchBackgroundColor:l,suggestion:s,onDelete:p,deleteTitle:f="Remove"})=>{let c=(0,ul.useCallback)(g=>{g.stopPropagation(),p?.(g)},[p]),P=Ci(c);return(0,Te.jsxs)(Te.Fragment,{children:[(0,Te.jsx)("div",{className:C(Ft,o&&el,e===!1&&Lr),style:{backgroundColor:l},children:i}),(0,Te.jsxs)("div",{className:C(Bt,e===!1&&Lr,s&&al,!p&&tl),style:{color:r},children:[typeof t=="string"?(0,Te.jsx)("span",{className:eo,children:t}):t,n&&(0,Te.jsxs)("span",{className:rl,children:["\xA0(",n,")"]})]}),p&&(0,Te.jsx)("div",{className:C(nl,o&&il),...P,style:{color:a},title:f,children:(0,Te.jsx)(ut,{})})]})};var At="bwfcdld",dl="b4uva9g",ml="d1xdslsy",fl="dpa1954";var Hr=d(b(),1);function Ub({id:e,testId:o,popout:t,navigationTitle:r,navigationClassName:n,enabled:i,displayDivider:a,displayInPopover:l,popoverAttachmentEdge:s,popoverOffset:p,showArrow:f,fallbackToModalAppearance:c,title:P,shortcutKey:g,preview:y,suggestion:v,onDelete:h,onBeforePresent:x,onPresent:m,onDismiss:u,className:I,doubleColumn:S=!0,sortable:R=!1,large:T=!1,titleColor:G,deleteTitle:M,deleteIconColor:O,swatchBackgroundColor:A,educationTooltipId:F,educationText:V,onClickEducation:ae,onContextMenu:te,autoFocusInside:Q}){let Z=L(),de=ue=>{ue.key==="Delete"&&h?.(ue)};return(0,Hr.jsx)(Na,{id:e,large:T,enabled:i,popout:t,navigationTitle:r,navigationClassName:n,displayDivider:a,displayInPopover:l,autoFocusInside:Q,popoverAttachmentEdge:s,popoverOffset:p,showArrow:f,fallbackToModalAppearance:c,onBeforePresent:x,className:C(At,T&&dl,S&&pe,R&&Vt,i===!1&&fl,I),onContextMenu:te,onKeyDown:de,onPresent:m,onDismiss:u,educationTooltipId:F,educationText:V,onClickEducation:ae,"data-testid":o,children:(0,Hr.jsx)(Wt,{title:P,titleColor:G,deleteIconColor:O,swatchBackgroundColor:A,preview:y,suggestion:v,enabled:i,large:T,shortcutKey:g,deleteTitle:M,onDelete:Z?void 0:h})})}var uo=d(q(),1);var Uo=[];function hl(e){(0,uo.useEffect)(()=>(Uo=[e,...Uo],()=>{Uo=Uo.filter(o=>o!==e)}),[e])}function Jb({globalKeyBindings:e}){let o=(0,uo.useCallback)(n=>{let i=e.get(n);i&&(Ee("keyboard_shortcut",{shortcut:Tt(n)}),i.action(n))},[e]),t=(0,uo.useCallback)(async n=>{gi(n)||n.clipboardData&&Or(n.type,{event:n})},[]),r=(0,uo.useCallback)(async n=>{if(!n.defaultPrevented){for(let i of Uo)if(await i(n),n.defaultPrevented)return;Or(n.type,{event:n})}},[]);(0,uo.useEffect)(()=>(window.addEventListener("keydown",o),window.addEventListener("copy",t,!0),window.addEventListener("cut",t,!0),window.addEventListener("paste",r,!0),window.addEventListener("wheel",yl,{passive:!1}),window.addEventListener("touchmove",bl,{passive:!1}),()=>{window.removeEventListener("keydown",o),window.removeEventListener("copy",t,!0),window.removeEventListener("cut",t,!0),window.removeEventListener("paste",r,!0),window.removeEventListener("wheel",yl),window.removeEventListener("touchmove",bl)}),[o,r,t])}function bl(e){e.touches.length>1&&(e.preventDefault(),e.stopPropagation())}function yl(e){!e.defaultPrevented&&e.ctrlKey&&e.preventDefault()}var Xc=/^0(?=\.)/u;function Dt(e){return(Math.trunc(e*100)/100).toString().replace(Xc,"")}function xl(e=1){if(e===0)return"0";if(e===1)return"1.0";let o=e*100;return o%10===0?`.${o}`:Dt(e)}function Cl(e){let o=Dt(e.r),t=Dt(e.g),r=Dt(e.b);return`${o}, ${t}, ${r}`}var Ae=e=>Vn(0,100,Math.round(e*100)),ge=()=>{Pt({type:"add",variant:"info",icon:"color-wheel",text:"Increase color opacity to see changes",key:"color-change-null-opacity",duration:300})};function cy(e,o,t){if(nt(e)||J(e))return{title:t||"Add\u2026"};if(mi(e))return{title:"Linear"};if(fi(e))return{title:"Radial"};if(di(e))return{title:"Conic"};if(!B(e)||e==="")return{title:"Mixed"};if(Ye(e)){let n=je(e),i=n?Po(n,o.tree):null;if(i)return{title:i.name};{let a=it(e);if(!a)return{title:"Unknown"};e=a}}if(Y.isP3String(e)){let n=me.fromString(e);return n?{title:Cl(n),alpha:xl(n.a)}:{title:"Unknown"}}let r=typeof e=="string"?Y(e):null;return r?{title:Y.toHex(r).toUpperCase(),alpha:r.a??1}:{title:"Unknown"}}function Pl(){let e=N();return vo(["AssetMap"],()=>e.stores.assetStore.assetMap.hash)}function zt(e){let o=ka();if(!o)return e;let t=o(e,{preferredSize:"small"});return t||e}function jc(e,o){return Pl(),e?zt(e):o}function Cy(e,o){let t=jc(e);return t?`url("${t}")`:o}var wl=d(q(),1),Ue=null,Yc=Cn("globalPreviewHandlers");function Kr(e){Yc.warn("Missing handler",e)}var Qc={reload:()=>{Ue?.reload?Ue.reload():Kr("reload")},toggleConsole:()=>{Ue?.toggleConsole?Ue.toggleConsole():Kr("toggleConsole")},openFullScreen:()=>{Ue?.openFullScreen?Ue.openFullScreen():Kr("openFullScreen")}};function vl(e){if(e===null){Ue=e;return}Ue??={},Object.assign(Ue,e)}function wy(){return Qc}function Ty({reload:e,toggleConsole:o,openFullScreen:t}){wl.default.useEffect(()=>(vl({reload:e,toggleConsole:o,openFullScreen:t}),()=>vl(null)),[e,o,t])}function Tl(e){return nt(e)?void 0:e}var ko=d(q(),1);var ke=d(q(),1);var Zr=d(b(),1),_t=e=>{let o=N(),t=L(),{doubleColumn:r,sortable:n,tooltip:i,tabIndex:a=0,onDuplicate:l,onDelete:s,onPresent:p,onCopy:f,className:c,shortcutKey:P,...g}=e;function y(x){o.stores.contextMenuStore.show([{label:"Duplicate",click:l,enabled:!t,visible:!!l},{label:"Copy",click:f,visible:!!f},{label:"Remove",click:()=>s?.(void 0),enabled:!t,visible:!!s}],{location:{x:x.clientX,y:x.clientY}})}let v=x=>{x.key==="Delete"&&s?.(x)},h=yt(a);return(0,Zr.jsx)("div",{role:"button",title:i,onContextMenu:y,onClick:p,onKeyDown:v,tabIndex:e.enabled===!1?-1:h,className:C(At,e.enabled===!1&&ml,r&&pe,n&&Vt,Oa,c),children:(0,Zr.jsx)(Wt,{...g,onDelete:t?void 0:s})})};var kl="i1oxwf0f",Il="ivz66j7",Jr="fjd4qd2",Rl="f1gixrvj";var Vl="p1oi602g",Sl="s1rsxqtn",Ol="c17esauc";var $=d(b(),1),ou=["auto","lossless","small","medium","large","full"],tu={auto:"Auto",lossless:"Auto (Lossless)",small:"Small",medium:"Medium",large:"Large",full:"Full"};function Gt({multiple:e=!1,imageReferences:o,onChangeImages:t,onRemoveImage:r,onChangeAssetSize:n,extraControls:i,altText:a=Xe,altTextPlaceholder:l,onChangeAltText:s,positionX:p,positionY:f,enableFooter:c=!0,maxExtraImages:P,onEditFocalPoint:g,clearFocalPoint:y,onCropClick:v,onImageBatchUpload:h}){let x=N(),m=Wa(),u=L(),I=Ze(P)?P+1:void 0,[S,R]=ke.default.useState(!1),T=ke.default.useRef(null),G=ke.default.useCallback(()=>{u||t(Sr.pickAndUploadImage({multiple:e,maxUploads:I}).then(Nl("upload")))},[t,u,e,I]),M=ke.default.useCallback(U=>{(U.key==="Backspace"||U.key==="Delete")&&!u&&r?.()},[r,u]),O=ke.default.useCallback(U=>{u||U.dataTransfer&&h&&t(h(U.dataTransfer.files,I).then(Nl("drop")))},[t,u,I,h]),A=ke.default.useCallback(U=>{U.preventDefault(),r&&x.stores.contextMenuStore.show([{label:"Delete",enabled:!u,click:r}],{location:{x:U.clientX,y:U.clientY}})},[u,r]),F=ke.default.useCallback(async U=>{if(u)return;let ne=T.current;if(!ne||document.activeElement!==ne)return;U.preventDefault();let le=U.clipboardData;le&&t(Sr.addImages(le.files))},[t,u]);hl(F);let V=ke.default.useCallback(()=>{R(!0)},[]),ae=ke.default.useCallback(()=>{R(!1)},[]),te=o[0],{fileExtensions:Q,preferredSizes:Z}=nu(o),de=o.length>0,ue=xe(o),j=B(ue)&&ue.length>0,se=!J(p)&&!J(f),Pe=Q.has("svg"),re=de&&Z.size>0&&!Pe,ee=ke.default.useCallback(()=>{te&&v?.(te,t)},[te,t,v]),ce=()=>{k(B(ue)&&ue.length>0),g?.(ue,Oe(p)?p:void 0,Oe(f)?f:void 0)},bo=te&&zt(te);return(0,$.jsxs)(Fe,{direction:"column",children:[(0,$.jsxs)(da,{className:C(Vl,te&&Sl),onDrop:O,onDragEnter:V,onDragLeave:ae,onKeyDown:M,onDoubleClick:G,onContextMenu:A,children:[(0,$.jsx)("div",{ref:T,tabIndex:0,className:ru(S),children:(0,$.jsx)("img",{src:bo,alt:"",decoding:"async"})}),!u&&(0,$.jsx)(oo,{variant:"clean",title:e?"Choose Images\u2026":"Choose Image\u2026",onClick:G,onDoubleClick:Ba,className:Ol})]},te),(0,$.jsxs)(Fe,{direction:"column",gap:0,children:[!J(n)&&(0,$.jsx)(To,{title:"Resolution",children:(0,$.jsxs)(ro,{enabled:re,wrapperClassName:pe,children:[(0,$.jsx)(Ce,{title:Q.size>1?"Mixed":"Auto",selected:!0,onSelect:ya,enabled:!1,visible:Pe}),!Pe&&!J(n)&&ou.map(U=>(0,$.jsx)(Ce,{title:tu[U],identifier:U,selected:Z.has(U),onSelect:n},U))]})}),i,Mo(a)&&!J(s)&&(0,$.jsx)(To,{title:"Alt Text",children:(0,$.jsx)(xt,{value:B(a)?a:"",onChange:s,className:pe,placeholder:l??(ho(ue)?"Mixed":"Describe Image\u2026"),enabled:de})}),!J(g)&&!J(y)&&(0,$.jsx)(To,{title:"Focal Point",children:(0,$.jsx)(_t,{doubleColumn:!0,onPresent:ce,enabled:j&&!u,onDelete:se?y:void 0,title:se?"Custom":"Add\u2026",titleColor:se?void 0:D.inputLabel,tooltip:se?"Edit Focal Point":"Add Focal Point",preview:(0,$.jsx)(W,{color:D.popupButtonPreviewIconPrimary,background:D.popupButtonPreviewIconBackground,children:(0,$.jsx)(Wo,{})})})}),c&&(0,$.jsxs)(Fe,{direction:"row",className:Rl,children:[(0,$.jsx)("div",{className:Jr,children:(0,$.jsx)(oo,{title:"Crop",enabled:!u&&!!te,onClick:ee,className:Jr})}),m&&(0,$.jsx)(m,{commonImageReference:ue,onChangeImages:t,altText:a,onChangeAltText:s})]})]})]})}function ru(e){let o=C(kl),t=C(o,Il);return C(e?t:o,"wantsNativeTextAction")}function Nl(e){return o=>{let t=o[0]?oi(o[0].filename)[1].toLowerCase():"";return Ee("insert_image",{imageExtension:t,source:`picker_${e}`}),o}}function nu(e){let o=new Set,t=new Set;return e.forEach(r=>{let n=at(r);n&&(o.add(n.preferredSize||"auto"),t.add(n.fileExtension))}),{preferredSizes:o,fileExtensions:t}}var $r=d(b(),1);function Ml({multiple:e=!1,imageReference:o,onChange:t,onChangeAssetSize:r,altText:n=Xe,altTextPlaceholder:i,onChangeAltText:a,onRemoveImage:l,positionX:s,positionY:p,onChangeFocalPosition:f,maxExtraImages:c,enableFooter:P=!0}){let g=N(),y=(0,ko.useCallback)((m,u)=>wt(g,m,u),[]),v=(0,ko.useCallback)(m=>{g.stores.modalStore.push({type:"ImageCrop",initialImage:m,onChange:t,source:"image_picker"})},[t]),h=(0,ko.useMemo)(()=>{if(f)return(m,u,I)=>{g.stores.modalStore.push({type:"ImageFocalPoint",image:m,positionX:u,positionY:I,onChange:f,source:"properties"})}},[f]),x=(0,ko.useMemo)(()=>{if(f)return()=>{f(void 0,void 0)}},[f]);return(0,$r.jsx)(Fe,{padding:`0 ${Me.css.panelPadding} ${Me.css.panelPadding}`,children:(0,$r.jsx)(Gt,{multiple:e,maxExtraImages:c,imageReferences:o?[o]:[],onChangeImages:t,onChangeAssetSize:r,altText:n,altTextPlaceholder:i,onChangeAltText:a,onRemoveImage:l,positionX:s,positionY:p,onImageBatchUpload:y,onCropClick:v,onEditFocalPoint:h,clearFocalPoint:x,enableFooter:P})})}var Bl=d(q(),1);function Fl(e,o){let t={type:"image",value:void 0};e&&B(e.value)&&(t.value=e.value),Ln(e)&&(t.valueLocalized=e.valueLocalized),Kn(e)&&(t.alt=e.alt),Zn(e)&&(t.altLocalized=e.altLocalized);let r=Jn(e);return B(r.positionX)&&(t.positionX=r.positionX),B(r.positionY)&&(t.positionY=r.positionY),Object.assign(t,o),t}var Wl=d(b(),1);function Oh({controlProp:e,onChange:o,onRemove:t,multiple:r=!1,maxExtraImages:n}){let i=B(e.value)?e.value:void 0,a,l,s,p=e.type==="responsiveimage";p&&(a=e.alt,l=B(e.positionX)?e.positionX:void 0,s=B(e.positionY)?e.positionY:void 0);let f=(0,Bl.useMemo)(()=>{if(i)return at(i)},[i]);function c(h,x){o(m=>Fl(m,h),x)}async function P(h){try{let x=await h;if(x.length===0)return;let m=x.filter(T=>T.filename!==""),[u,...I]=m;if(!u)return;let S;r&&I.length>0&&(S=I.map(T=>({type:"image",value:Rr(T)})));let R=iu(u,f);c(R,S)}catch(x){yo(x)}}function g(h){if(!i)return;let x=ti(i,h);c({value:x})}function y(h){c({alt:h})}function v(h,x){c({positionX:h,positionY:x})}return(0,Wl.jsx)(Ml,{multiple:r,maxExtraImages:n,imageReference:i,onChange:P,onChangeAssetSize:g,onChangeAltText:y,onRemoveImage:t,positionX:l,positionY:s,altText:a??Xe,onChangeFocalPosition:p?v:void 0})}function iu(e,o){return{type:"image",value:Rr(e,e.preferredSize??o?.preferredSize),positionX:void 0,positionY:void 0}}function Ah(e,o=qn){let t=N();return vo(["Tree","ActiveBundle"],()=>ri(t.tree,t.componentLoader,e,o),[e,o])}var jr=d(q(),1);var Al="p4b05eq",Dl="prqiyvj",zl="p1c81r2w",_l="p1ln12j8";var Io=d(b(),1),su=({preset:e,onSelect:o,selected:t})=>{let{isDarkMode:r}=co();return(0,Io.jsx)("button",{onClick:()=>o(e),className:C(zl,t&&_l),children:(0,Io.jsx)("img",{alt:e.name,className:C(Dl),src:r?e.previewImageDark:e.previewImageLight,decoding:"async"})})},Gl=({selectedPreset:e,onSelectPreset:o})=>(0,Io.jsx)(We,{title:"Preset",children:(0,Io.jsx)("div",{className:C(Al),children:xa.map(t=>(0,Io.jsx)(su,{preset:t,onSelect:o,selected:e&&e.name===t.name||!1},t.name))})});var Xr="dl1ddfs";var X=d(b(),1),Ul=["Focal Point","Top Left","Top Center","Top Right","Left","Center","Right","Bottom Left","Bottom Center","Bottom Right"];function pu(e,o,t){return k(Mo(e)),k(Mo(o)),ho(e)||ho(o)?Pn:Oe(e)||Oe(o)?t?"Center":"Focal Point":t&&J(e)&&J(o)?"Focal Point":o==="top"?e==="left"?"Top Left":e==="right"?"Top Right":"Top Center":o==="bottom"?e==="left"?"Bottom Left":e==="right"?"Bottom Right":"Bottom Center":e==="left"?"Left":e==="right"?"Right":"Center"}function cu(e){return e.includes("Left")?"left":e.includes("Right")?"right":"center"}function uu(e){return e.includes("Top")?"top":e.includes("Bottom")?"bottom":"center"}function du(e){return e.size>1?!0:!e.has("stretch")}function ql({title:e="",enabled:o=!0,hasImageVariable:t=!1,imageReferences:r,onChangeImagePosition:n,fillImagePositionX:i,fillImagePositionY:a,fillImageResize:l}){let s=N();if(!du(l))return null;let p=xe(l),f=p==="fill";f||((J(i)||Oe(i))&&(i=p==="tile"?"left":"center"),(J(a)||Oe(a))&&(a=p==="tile"?"top":"center"));let c=pu(i,a,t),P=c==="Focal Point",g=r?xe(r):Xe;function y(){k(B(g)),s.stores.modalStore.push({type:"ImageFocalPoint",image:g,positionX:Oe(i)?i:void 0,positionY:Oe(a)?a:void 0,onChange:n,source:"properties"})}let v=m=>{if(m==="Focal Point"){t?n(void 0,void 0):y();return}let u=cu(m),I=uu(m);n(u,I)},h=B(g),x=[];return ho(c)&&(x.push((0,X.jsx)(Ce,{selected:!0,title:"Mixed"},"mixed")),x.push((0,X.jsx)(Ce,{type:"divider"},"mixed-divider"))),Ul.forEach((m,u)=>{m==="Focal Point"&&(!f||!t&&!h&&!P)||(x.push((0,X.jsx)(Ce,{title:m,onSelect:v,identifier:m,selected:c===m},u)),u%3===0&&x.push((0,X.jsx)(Ce,{type:"divider"},u+"divider")))}),(0,X.jsx)(We,{title:e,children:!t&&P&&h?(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(_t,{doubleColumn:!0,enabled:o,title:"Focal Point",tooltip:"Edit Focal Point",onPresent:y,onDelete:()=>v("Center"),preview:(0,X.jsx)(W,{className:C(!o&&Xr),color:D.popupButtonPreviewIconPrimary,background:D.popupButtonPreviewIconBackground,children:(0,X.jsx)(Wo,{})})})}):(0,X.jsx)(ro,{enabled:o,wrapperClassName:pe,preview:(0,X.jsx)(W,{className:C(!o&&Xr),color:c==="Focal Point"?D.popupButtonPreviewIconPrimary:void 0,background:D.popupButtonPreviewIconBackground,children:c==="Focal Point"?(0,X.jsx)(Wo,{}):(0,X.jsx)(mu,{selectedOption:c,optionItems:Ul,firstPositionKey:"Top Left"})}),children:x})})}function mu({selectedOption:e,optionItems:o,firstPositionKey:t}){let r=o.indexOf(t);k(r!==-1);let n=B(e)?o.indexOf(e)-r:-1;return(0,X.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",children:Array(3).fill(null).map((i,a)=>(0,X.jsxs)("g",{transform:`translate(3 ${3+6.5*a})`,children:[(0,X.jsx)("path",{d:"M 1.5 0 C 2.328 0 3 0.672 3 1.5 C 3 2.328 2.328 3 1.5 3 C 0.672 3 0 2.328 0 1.5 C 0 0.672 0.672 0 1.5 0 Z",fill:n===a*3?D.popupButtonPreviewIconPrimary:D.popupButtonPreviewIconSecondary}),(0,X.jsx)("path",{d:"M 8 0 C 8.828 0 9.5 0.672 9.5 1.5 C 9.5 2.328 8.828 3 8 3 C 7.172 3 6.5 2.328 6.5 1.5 C 6.5 0.672 7.172 0 8 0 Z",fill:n===1+a*3?D.popupButtonPreviewIconPrimary:D.popupButtonPreviewIconSecondary}),(0,X.jsx)("path",{d:"M 14.5 0 C 15.328 0 16 0.672 16 1.5 C 16 2.328 15.328 3 14.5 3 C 13.672 3 13 2.328 13 1.5 C 13 0.672 13.672 0 14.5 0 Z",fill:n===2+a*3?D.popupButtonPreviewIconPrimary:D.popupButtonPreviewIconSecondary})]},a))})}var Ut=d(b(),1),fu=["fill","fit","stretch","tile"];function Ll({title:e="",enabled:o=!0,fillImageResize:t,onChangeImageResize:r}){return(0,Ut.jsx)(We,{title:e,children:(0,Ut.jsx)(ro,{enabled:o,wrapperClassName:pe,children:fu.map(n=>(0,Ut.jsx)(Ce,{identifier:n,title:Mn,selected:t.has(n),onSelect:r},n))})})}var Hl=d(q(),1);var qo=d(b(),1),gu=e=>{let o=Tl(e);return Ze(o)?Math.round(o*100):o};function Kl({onChange:e,value:o,enabled:t,title:r}){let n=gu(o),i=(0,Hl.useCallback)(a=>{e(Rn(a/100,2))},[e]);return(0,qo.jsxs)(We,{title:r,children:[(0,qo.jsx)(oe,{enabled:t,precision:0,value:n,unit:"%",onChange:i,min:1,step:1}),(0,qo.jsx)(fa,{enabled:t,value:n,min:1,max:200,step:1,onChange:i})]})}var Ie=d(b(),1);function Ax({imageReferences:e,fillImageResize:o,onChangeImages:t,onRemoveImage:r,onChangeImageResize:n,onChangeAssetSize:i,altText:a,onChangeAltText:l,fillImagePositionX:s,fillImagePositionY:p,onChangeImagePosition:f,fillImageTileSize:c,onChangeFillImageSize:P,onSelectTilePatternPreset:g}){let y=N(),v=xe(e),h=o&&xe(o)==="tile"&&Un(v)?Ca(v):void 0,x=(0,jr.useCallback)((u,I)=>wt(y,u,I),[]),m=(0,jr.useCallback)(u=>{y.stores.modalStore.push({type:"ImageCrop",initialImage:u,onChange:t,source:"image_picker"})},[t]);return(0,Ie.jsx)(Fe,{direction:"column",padding:`0 ${Me.css.panelPadding} ${Me.css.panelPadding}`,children:(0,Ie.jsx)(Gt,{imageReferences:Array.from(e),onChangeImages:t,onRemoveImage:e.size>0?r:void 0,onChangeAssetSize:i,altText:a,onChangeAltText:l,onImageBatchUpload:x,onCropClick:m,extraControls:o&&(0,Ie.jsxs)(Ie.Fragment,{children:[!J(n)&&(0,Ie.jsx)(Ll,{title:"Type",enabled:!0,fillImageResize:o,onChangeImageResize:n}),!J(g)&&xe(o)==="tile"&&(0,Ie.jsx)(Gl,{selectedPreset:h,onSelectPreset:g}),!J(P)&&xe(o)==="tile"&&(0,Ie.jsx)(Kl,{title:"Scale",value:c,onChange:P,enabled:e.size>0}),!J(f)&&(0,Ie.jsx)(ql,{title:"Position",imageReferences:e,enabled:e.size>0,fillImageResize:o,fillImagePositionX:s,fillImagePositionY:p,onChangeImagePosition:f})]})})})}var cn=d(q(),1);var Yr="https://app.framerstatic.com/checkerboard-8-776AE4U3.svg";var Qr=125,en=230,Zl="s1e2z0bv",on="rb8k8h9",Jl="iihdl0y",io="swsq73a",$l="t1ecuz16",Ro="f10aiog9",ie="i19bkgmo",Xl="hqo5o69",Vo="l7n5mtt",qe="c1424kp4",So="r1k5sn29",jl="s1hh4y0v";var qt=d(b(),1);function Lt({colorModel:e,onChangeColorModel:o}){let t=L();return(0,qt.jsx)(ht.Provider,{value:!1,children:(0,qt.jsx)(ro,{children:Ta.map(r=>(0,qt.jsx)(Ce,{title:r,identifier:r,selected:r===e,onSelect:o,enabled:e==="P3"||r==="P3"?!t:!0},r))})})}var Le=d(q(),1);var Yl="s1547mmt",Ql="siommo3",Ht="ixdcado",ep="csdqxt6",op="h10f07ai",tn="i1y4xa9u",tp="cawslk",rp="o104dadf",rn="r1u3lu2p",np="hz6ma7m",ip="p1bt5whn",ap="iehmvlc";var sp="s1klz3oz";var lp="s10ppfb8";var nn=d(b(),1);function Kt({enabled:e,className:o,onChange:t}){let r=N(),n=r.scheduler.wrapHandler(()=>{vt(r).then(i=>{i&&t(i)}).catch(yo)});return(0,nn.jsx)(oo,{className:C(lp,o),enabled:e,onClick:n,title:"Sample Color",children:(0,nn.jsx)(Fi,{})})}var z=d(b(),1);function xu(e){return Math.max(0,Math.min(e,1))}function Cu(e){return Le.default.useMemo(()=>{let o=me.fromString(e);return k(o,"Invalid color "+e),{hsv:o.hsv(),p3:o}},[e])}var pp=Le.default.memo(function({className:o,style:t,colorString:r,onChange:n,onChangeColorModel:i}){let a=N(),l=L(),{hsv:s,p3:p}=Cu(r),{h:f,s:c,v:P,a:g}=s,y=Le.default.useRef(!1),v=Le.default.useRef(void 0),h=Le.default.useRef(f),x=Va(),m=po(()=>{a.beginUndoGroup()},[]),u=po(()=>{a.endUndoGroup()},[]),I=po(Q=>{let Z=me.fromString(r)?.toString("p3",{a:xu(Q.progress.x??1)});k(Z,"Invalid color "+r),n(Z,!1)},[r,n]),S=po(Q=>{let Z=Q.progress.x*360,de=me.fromHSV({h:Z,s:c,v:P,a:g}).toString();n(de,!1),h.current=Z,g===0&&ge(),c===0&&x()},[c,P,g,n,x]),R=po(Q=>{let{progress:Z}=Q;y.current=!0,v.current=Z;let de=me.fromHSV({h:h.current,s:Z.x,v:1-Z.y,a:g}).toString();n(de,!0),g===0&&ge(),(Z.x===0||1-Z.y===0)&&x()},[g,n,x]),T=po(()=>{y.current=!1,v.current=void 0,u()},[]),G=Le.default.useCallback(Q=>{n(Q,!0)},[n]);c!==0&&P!==0&&!(f===0&&h.current===360)&&!y.current&&(h.current=f);let M=me.fromHSV({h:h.current,s:1,v:1,a:1}),O=M.toString(),A=M.toString("srgb"),F={"--hue":A,"--hue-p3":O},V={"--slider-alpha-0":M.toString("srgb",{a:0}),"--slider-alpha-1":A,"--slider-p3-alpha-0":M.toString("p3",{a:0}),"--slider-p3-alpha-1":O},ae=v.current?.x??c,te=v.current?.y??1-P;return y.current||(v.current=void 0),(0,z.jsxs)("div",{className:o,style:t,children:[(0,z.jsx)("div",{className:C(Ql,l&&rn),style:F,children:(0,z.jsxs)(to,{onDragStart:m,onDrag:R,onDragEnd:T,className:Yl,enabled:!l,children:[(0,z.jsx)("div",{className:Ht,style:an(ae,te,l)}),(0,z.jsx)(Ru,{hue:h.current})]})}),(0,z.jsx)("div",{className:ep,children:(0,z.jsxs)("div",{className:C(l&&rn,op),children:[(0,z.jsx)(to,{onDragStart:m,onDrag:S,onDragEnd:u,enabled:!l,className:np,children:(0,z.jsx)("div",{className:tn,children:(0,z.jsx)("div",{className:Ht,style:an(h.current/360,.5,l)})})}),(0,z.jsxs)(to,{onDragStart:m,onDrag:I,onDragEnd:u,enabled:!l,style:V,className:rp,children:[(0,z.jsx)("div",{className:tp}),(0,z.jsx)("div",{className:tn,children:(0,z.jsx)("div",{className:Ht,style:an(g,.5,l)})})]})]})}),(0,z.jsx)(Vu,{value:p,onChange:G,enabled:!l}),(0,z.jsxs)("div",{className:ap,children:[(0,z.jsx)(Lt,{colorModel:"P3",onChangeColorModel:i}),jo()||"EyeDropper"in window?(0,z.jsx)(Kt,{onChange:G,enabled:!l,className:sp}):null]})]})});function an(e,o,t){return{left:`${e*100}%`,top:`${o*100}%`,pointerEvents:t?"none":void 0}}function cp(e,o,t){let r=Math.max(Math.ceil((o-e)/(t||1)),0),n=[];for(let i=0;i<r;i++)n[i]=e,e+=t;return n}var Pu=cp(0,1,.01),vu=cp(1,0,-.01);function wu(e){return Pu.map(o=>{let{s:t,v:r}=me.fromHSV({h:e,s:o,v:1,a:1},"srgb").hsv();return[t,r]})}function Tu(e){return vu.map(o=>{let{s:t,v:r}=me.fromHSV({h:e,s:1,v:o,a:1},"srgb").hsv();return[t,r]})}var ku=pr([0,1],[0,en]),Iu=pr([0,1],[0,Qr]);function Ru({hue:e}){let o=Le.default.useMemo(()=>{let t="";for(let r of wu(e).concat(Tu(e)))t+=`${ku(r[0])}, ${Iu(1-r[1])} `;return t},[e]);return(0,z.jsx)("svg",{viewBox:`0 0 ${en} ${Qr}`,role:"presentation",className:ip,children:(0,z.jsx)("polyline",{points:o})})}function sn(e){return Math.trunc(Math.min(Math.max(e,0),1)*1e3)/1e3}function Zt(e,o,t){return Le.default.useCallback(r=>{let n=e==="a"?r/100:r,i=o[e];if(n===i)return;let a=new me({r:o.r,g:o.g,b:o.b,a:o.a??1}).toString("p3",{[e]:n});t(a),e==="a"&&n===0&&ge()},[e,o,t])}function Vu({value:e,onChange:o,enabled:t}){let r=Zt("r",e,o),n=Zt("g",e,o),i=Zt("b",e,o),a=Zt("a",e,o);return(0,z.jsxs)("div",{className:C(io,Ro),children:[(0,z.jsx)(oe,{value:sn(e.r),onChange:r,min:0,max:1,step:.01,enabled:t,className:ie,wrapperClassName:Vo,title:"Red","data-testid":"p3-red-color-input"}),(0,z.jsx)(oe,{value:sn(e.g),onChange:n,min:0,step:.01,max:1,enabled:t,className:ie,wrapperClassName:qe,title:"Green","data-testid":"p3-green-color-input"}),(0,z.jsx)(oe,{value:sn(e.b),onChange:i,min:0,max:1,step:.01,enabled:t,className:ie,wrapperClassName:qe,title:"Blue","data-testid":"p3-blue-color-input"}),(0,z.jsx)(oe,{value:Ae(e?.a??1),onChange:a,unit:"%",min:0,step:1,max:100,enabled:t,className:ie,wrapperClassName:So,title:"Alpha","data-testid":"p3-alpha-color-input"})]})}var Ho=d(b(),1);function up({value:e,onChange:o,sampleColor:t,setColorModel:r,enabled:n}){let i=(s,p,f)=>{if(s.match(/^#?[a-f\d]{1,2}$/iu)){let g=s.startsWith("#")?s.slice(1):s;g.length===1?g=g.repeat(6):g.length===2&&(g=g.repeat(3)),s="#"+g}if(!_.isValid(s))return;(s.startsWith("hsl(")||s.startsWith("hsla("))&&r("HSL"),(s.startsWith("rgb(")||s.startsWith("rgba("))&&r("RGB"),s.match(/^[a-f\d]+$/iu)&&(s="#"+s),s.startsWith("hsv")&&(s=Y.toHslString(Y(s))),/^[a-z]+$/i.test(s.trim())&&(s=Y.toHslString(Y(s)));let c=_.toRgb(s);if(s.startsWith("rgba(")||s.startsWith("hsla(")||s.startsWith("#")&&s.length===9?_.getAlpha(s)===0&&ge():c.a=e.a,Y.equal(Y(c),Y(e)))return f();o(_.rgbaToString(c))},a=s=>{let p={...e,a:s/100},f=_.rgbaToString(p);f&&o(f),p.a===0&&ge()},l=s=>{Ia("sampleColor")===Tt(s)&&t()};return(0,Ho.jsxs)("div",{className:C(io,$l),children:[(0,Ho.jsx)(xt,{value:_.rgbToHexValue(e).toLocaleUpperCase(),onChange:i,onKeyDown:l,className:C(ie,Xl),"data-testid":"hex-color-input"}),(0,Ho.jsx)(oe,{value:Ae(e.a),onChange:a,unit:"%",min:0,step:1,max:100,enabled:n,className:ie,title:"Alpha","data-testid":"hex-alpha-color-input"})]})}var dp=d(q(),1);var mo=d(b(),1);function Jt(e,o,t){return dp.default.useCallback(r=>{let n=e!=="h"?r/100:r;if(n===o[e])return;let i={...o,[e]:n};t(_.hslToString(i)),e==="a"&&n===0&&ge()},[e,o,t])}function mp({value:e,onChange:o,enabled:t}){let r=Jt("h",e,o),n=Jt("s",e,o),i=Jt("l",e,o),a=Jt("a",e,o);return(0,mo.jsxs)("div",{className:rt(io,Ro),children:[(0,mo.jsx)(oe,{value:e.h,onChange:r,min:0,max:360,enabled:t,className:ie,wrapperClassName:Vo,title:"Hue","data-testid":"hsl-hue-color-input"}),(0,mo.jsx)(oe,{value:Ae(e.s),onChange:n,min:0,max:100,enabled:t,className:ie,wrapperClassName:qe,title:"Saturation","data-testid":"hsl-saturation-color-input"}),(0,mo.jsx)(oe,{value:Ae(e.l),onChange:i,min:0,max:100,enabled:t,className:ie,wrapperClassName:qe,title:"Lightness","data-testid":"hsl-lightness-color-input"}),(0,mo.jsx)(oe,{value:Ae(e.a),onChange:a,unit:"%",min:0,max:100,enabled:t,className:ie,wrapperClassName:So,title:"Alpha","data-testid":"hsl-alpha-color-input"})]})}var fp=d(q(),1);var fo=d(b(),1);function $t(e,o,t){return fp.default.useCallback(r=>{let n=e==="a"?r/100:r;if(n===o[e])return;let i={...o,[e]:n};t(_.rgbaToString(i)),e==="a"&&n===0&&ge()},[e,o,t])}function gp({value:e,onChange:o,enabled:t}){let r=$t("r",e,o),n=$t("g",e,o),i=$t("b",e,o),a=$t("a",e,o);return(0,fo.jsxs)("div",{className:rt(io,Ro),children:[(0,fo.jsx)(oe,{value:e.r,onChange:r,min:0,max:255,enabled:t,className:ie,wrapperClassName:Vo,title:"Red","data-testid":"rgb-red-color-input"}),(0,fo.jsx)(oe,{value:e.g,onChange:n,min:0,max:255,enabled:t,className:ie,wrapperClassName:qe,title:"Green","data-testid":"rgb-green-color-input"}),(0,fo.jsx)(oe,{value:e.b,onChange:i,min:0,max:255,enabled:t,className:ie,wrapperClassName:qe,title:"Blue","data-testid":"rgb-blue-color-input"}),(0,fo.jsx)(oe,{value:Ae(e.a),onChange:a,unit:"%",min:0,max:100,enabled:t,className:ie,wrapperClassName:So,title:"Alpha","data-testid":"rgb-alpha-color-input"})]})}var K=d(b(),1);function ln(e,o){switch(o){case"hsl":return _.hsvToHSLString(e);default:return _.hsvToRgbString(e)}}var Xt=class extends cn.default.Component{constructor(){super(...arguments);be(this,"state",{dragging:!1});be(this,"inputRef",cn.default.createRef());be(this,"currentHue",null);be(this,"dragPosition",null);be(this,"onSaturationBrightnessDrag",t=>{let{progress:r}=t,n=_.getAlpha(this.props.color),i={h:this.currentHue||0,s:r.x,v:1-r.y,a:n},a=Y(this.props.color).format,l=ln(i,a);this.dragPosition=r,l&&this.onChange(l,!1),n===0&&ge()});be(this,"setColorModel",this.props.engine.scheduler.wrapHandler(t=>{switch(t){case"P3":{if(Y.isP3String(this.props.color))break;let r=me.fromRGBString(this.props.color)?.toString();k(r,"Invalid color "+this.props.color),this.onChange(r,!0);break}default:{if(!Y.isP3String(this.props.color))break;let r=me.fromString(this.props.color)?.toString("srgb");k(r,"Invalid color "+this.props.color),this.onChange(r,!0);break}}this.props.engine.stores.persistedUserDefaults.colorModel=t}));be(this,"onSaturationBrightnessDragEnd",this.props.engine.scheduler.wrapHandler(()=>{this.onDragEnd()}));be(this,"onHueDrag",this.props.engine.scheduler.wrapHandler(t=>{let r=Y(this.props.color),n=_.toHSV(this.props.color);this.currentHue=t.progress.x*360,n.h=this.currentHue,n.s===0&&this.forceUpdate();let i=ln(n,r.format);i&&this.onChange(i,!1),n.a===0&&ge()}));be(this,"onOpacityDrag",this.props.engine.scheduler.wrapHandler(t=>{let r=_.toHSV(this.props.color);r.a=t.progress.x;let n=ln(r,Y(this.props.color).format);n&&this.onChange(n,!1)}));be(this,"onChange",(t,r)=>{this.props.onChange(t,r??!this.state.dragging)});be(this,"onDragStart",this.props.engine.scheduler.wrapHandler(()=>{this.setState({dragging:!0}),this.props.engine.beginUndoGroup()}));be(this,"onDragEnd",this.props.engine.scheduler.wrapHandler(()=>{this.props.engine.endUndoGroup(),this.setState({dragging:!1}),this.props.onChange(this.props.color,!0)}))}render(){if(Y.isP3String(this.props.color))return(0,K.jsx)(pp,{colorString:this.props.color,className:this.props.className,style:bp,onChange:this.props.onChange,onChangeColorModel:this.setColorModel});let{color:t,className:r}=this.props,n=_.toHSV(t);this.currentHue?n.s!==0&&n.v!==0&&!(n.h===0&&this.currentHue===360)&&!this.state.dragging&&(this.currentHue=Math.round(n.h)):this.currentHue=Math.round(n.h);let i=this.currentHue,a=1-n.v,l=n.s;return this.dragPosition!==null&&(a=this.dragPosition.y,l=this.dragPosition.x),!this.state.dragging&&this.dragPosition!==null&&(this.dragPosition=null),(0,K.jsx)(ht.Consumer,{children:s=>(0,K.jsxs)("div",{className:r,style:bp,children:[(0,K.jsx)("div",{className:C(Zl,s&&on),style:Ou(i),children:(0,K.jsx)(to,{onDragStart:this.onDragStart,onDrag:this.onSaturationBrightnessDrag,onDragEnd:this.onSaturationBrightnessDragEnd,style:Nu,enabled:!s,children:(0,K.jsx)("div",{style:pn(l,a,s)})})}),(0,K.jsx)("div",{style:{width:"100%",display:"flex",margin:`${Me.css.inputSpacing} 0`},children:(0,K.jsxs)("div",{className:C(s&&on),style:{display:"flex",flexDirection:"column",flexGrow:1,justifyContent:"center"},children:[(0,K.jsx)(to,{onDragStart:this.onDragStart,onDrag:this.onHueDrag,onDragEnd:this.onDragEnd,enabled:!s,style:Eu,children:(0,K.jsx)("div",{style:yp,children:(0,K.jsx)("div",{style:pn(i/360,void 0,s)})})}),(0,K.jsxs)(to,{onDragStart:this.onDragStart,onDrag:this.onOpacityDrag,onDragEnd:this.onDragEnd,enabled:!s,style:Mu(t),children:[(0,K.jsx)("div",{style:Bu}),(0,K.jsx)("div",{style:yp,children:(0,K.jsx)("div",{style:pn(n.a,void 0,s)})})]})]})}),(0,K.jsx)(Su,{colorModel:this.props.colorModel,colorString:this.props.color,onChange:this.onChange,sampleColor:this.props.sampleColor,setColorModel:this.setColorModel}),(0,K.jsxs)("div",{className:Jl,children:[(0,K.jsx)(Lt,{colorModel:this.props.colorModel==="P3"?"RGB":this.props.colorModel,onChangeColorModel:this.setColorModel}),jo()||"EyeDropper"in window?(0,K.jsx)(Kt,{onChange:this.onChange,enabled:!s,className:jl}):null]})]})})}};function Su({colorModel:e,colorString:o,onChange:t,sampleColor:r,setColorModel:n}){let i=L();switch(e){case"HSL":return(0,K.jsx)(mp,{value:_.toHSL(o),onChange:t,enabled:!i});case"HEX":return(0,K.jsx)(up,{value:_.toRgb(o),onChange:t,sampleColor:r,setColorModel:n,enabled:!i});default:return(0,K.jsx)(gp,{value:_.toRgb(o),onChange:t,enabled:!i})}}function Ou(e){return{backgroundColor:`${_.toColorPickerSquare(e)}`}}var Nu={position:"absolute",top:1,right:1,bottom:1,left:1},bp={position:"relative"},hp={position:"relative",width:"100%",height:8,overflow:"visible",borderRadius:6},Eu={...hp,marginBottom:8,backgroundImage:"linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"};function Mu(e){return{...hp,backgroundImage:`linear-gradient(to right, ${_.setAlpha(e,0)}, ${_.setAlpha(e,1)})`,backgroundRepeat:"no-repeat"}}var yp={position:"absolute",height:"100%",top:0,left:4,right:4},Fu={position:"absolute",width:14,height:14,top:"50%",transform:"translateX(-50%) translateY(-50%)",borderRadius:"50%",boxShadow:"inset 0 0 0 3px white, inset 0 0 0 4px rgba(0,0,0,.1), 0 0 0 1px rgba(0,0,0,.1)",cursor:Pi.button};function pn(e,o=.5,t){return{...Fu,left:`${e*100}%`,top:`${o*100}%`,pointerEvents:t?"none":void 0}}var Bu={position:"absolute",width:"100%",height:"100%",backgroundImage:`url(${Yr})`,backgroundRepeat:"repeat",borderRadius:10,zIndex:-1};var xp="c2orl3y",oP="c1svq14t",tP="c1j2rli7",Cp="s1cbpxcr",Pp="sxhu8tk",vp="c1yp40qr",wp="czr60e9",Tp="c1azw9i";var ye=d(q(),1);var go=d(b(),1);function kp({value:e,colorModel:o,isDarkMode:t,onChangeColor:r}){let n=N(),[i,a]=(0,ye.useState)(null),l=(0,ye.useRef)(null),[s,p]=(0,ye.useState)({}),[f,c]=(0,ye.useState)(null),[P,g]=(0,ye.useState)(!1),y=Au({token:null,isDarkMode:t,imageFill:!1,value:e,colorStopSelection:void 0,pendingExternalColor:f,colorForExternalColor:s,setPendingExternalColor:c}),v=(0,ye.useCallback)(m=>{let I=m.target.scrollTop>0;I!==P&&g(I)},[P]),{handleChangeColor:h,handleSampleColor:x}=Du({isDarkMode:t,onChangeColor:r,setColorForExternalColor:p,setPendingExternalColor:c});return e!==i&&a(e),(0,go.jsx)(En.Provider,{value:"color-picker",children:(0,go.jsx)("div",{className:C(xp),children:(0,go.jsx)(ca,{onScroll:v,ref:l,className:Cp,children:(0,go.jsx)("div",{className:Pp,children:(0,go.jsx)("div",{className:C(vp,wp),children:(0,go.jsx)(Xt,{onChange:h,color:y,colorModel:o,className:Tp,sampleColor:x,engine:n})})})})})})}function Au({isDarkMode:e,token:o,imageFill:t,value:r,colorStopSelection:n,pendingExternalColor:i,colorForExternalColor:a,setPendingExternalColor:l}){let s;return o?s=o.colorForMode(e):t?s="white":In(r)?s=r:s=r?.stops.find(p=>p.id===n)?.value||r?.stops[0]?.value||"transparent",i===s&&l(null),a[i??s]??s}function Du({isDarkMode:e,onChangeColor:o,selection:t,colorStopSelection:r,setColorForExternalColor:n,setPendingExternalColor:i}){let a=N(),l=(0,ye.useCallback)((c,P,g)=>{if(pt(c))return;let y=c,v=Ye(y);if(v){let x=je(y),m=x?Po(x,a.tree):null;m&&(y=m.colorForMode(e))}let h=Y.isP3String(y)?y:_.toRgbString(y);n({[h]:y}),i(h),queueMicrotask(()=>{o(v?c:h,P,g)})},[e,o,n,i]),s=(0,ye.useCallback)((c,P=!0)=>{p(t),l(c,r,P)},[t,r,l]),p=(0,ye.useCallback)(c=>{if(!c)return;a.tree.getNodes(c).some(y=>Sn(y)&&y.resolveValue("opacity")===0)&&Pt({type:"add",variant:"info",icon:"color-wheel",text:"Increase layer opacity to see changes",key:"color-change-null-opacity",duration:3e3})},[]),f=(0,ye.useCallback)(()=>{vt(a).then(a.scheduler.wrapHandler(c=>{c&&s(c)})).catch(yo)},[s]);return{handleChangeColor:s,handleSampleColor:f}}var zu="framerComponentPresetProps",Ip;async function _u(e){if(wn.isTest)return[];let o=[st.codeblock,st.youtube,st.vimeo],{modules:t}=await e.stores.modulesStore.lookUpModules(o.map(ni));return o.map((r,n)=>{let i=t[n];k(i,"Can't find module"),k(r,"Component is undefined"),k(i.files.module,"Module file is not set");let a=vn(i.id,i.saveId,i.files.module,"exportSpecifier"in r&&Gn(r.exportSpecifier)?r.exportSpecifier:"default");return{name:r.title,moduleId:i.id,componentIdentifier:a.value}})}function Gu(e){return Ip??=_u(e),Ip}function Uu(e){let o=[],t=e.tree.getExternalModulesListNode();for(let r of t?.children??[])r.annotations&&zu in r.annotations&&o.push({name:r.title,moduleId:r.id,componentIdentifier:r.codeComponentIdentifier});return o}function qu(e,o){let t=new Set;for(let r of o)t.add(r.moduleId);return e.filter(r=>!t.has(r.moduleId)).concat(o).sort((r,n)=>r.name.localeCompare(n.name))}async function kP(e){let o=await Gu(e),t=Uu(e);return qu(o,t)}var jt=d(q(),1);var Rp=d(b(),1),WP=(0,jt.memo)(function(o){let t=Ku(),{value:r}=Hu(o.value,t);return lr(B(r),"value must be a string"),(0,Rp.jsx)(kp,{...o,colorModel:t.colorModel,isDarkMode:t.isDarkMode,value:r,onChangeColor:o.onChange})});function Lu(e){return"selection"in e&&"selectedGradientStopId"in e}function Hu(e,o){let t=N(),r,n=null;if(B(e)?r=e:Lu(o)?r=e.stops.find(({id:i})=>i===o.selectedGradientStopId)?.value??"transparent":r="transparent",Ye(r)){let i=je(r),a=i?Po(i,t.tree):null;tt(a)&&(n=a),n||(e=it(r)||"transparent")}return{value:e,token:n}}function Ku(){let e=N();lr(xi(e),"engine must be an on page engine");let o=wo(()=>e.stores.persistedUserDefaults.colorModel,[],e.stores.persistedUserDefaults);return(0,jt.useMemo)(()=>({colorModel:o,isDarkMode:!0}),[o])}var Mp=d(q(),1);var Vp="ia3rrjn";var Op=d(b(),1);function Sp({className:e,children:o,...t}){return(0,Op.jsx)("div",{className:C(Vp,e),...t,children:o})}var Qt=d(b(),1),un=/\[([^\]]+)\]\((https?:\/\/[\w./?=#%&-]+)\)/gu,dn=/\*([^*]+)\*/gu,Yt=/(\n)/gu;function Ko(e,o,t=0,r=[un,dn,Yt]){let[n,i]=r.map(s=>(s.lastIndex=t,s.exec(e))).reduce((s,p,f)=>{let[c]=s;if(c&&p){if(c.index<p.index)return s}else if(c)return s;return[p,r[f]]},[null,void 0]);if(!n||!i)return t===e.length?[]:[e.substring(t)];let a=[];n.index-t>0&&a.push(e.substring(t,n.index));let l=i.lastIndex;if(i===un){let[s,p,f]=n,c=Ko(p,o,0,[dn,Yt]);a.push((0,Qt.jsx)("a",{href:f,target:"_blank",...o,children:c},n.index))}if(i===dn){let[s,p]=n,f=Ko(p,o,0,[un,Yt]);a.push((0,Qt.jsx)("em",{children:f},n.index))}return i===Yt&&a.push((0,Qt.jsx)("br",{},n.index)),a.push(...Ko(e,o,l)),a}var Np="d1ykgdi6",Ep="w1wgf3m";var mn=d(b(),1),QP=Mp.default.memo(function({fullWidth:o=!1,withMargin:t=!0,description:r}){let n=yt(void 0),i=Ko(r,{tabIndex:n});return(0,mn.jsx)(We,{title:o?void 0:" ",children:(0,mn.jsx)(Sp,{className:C(Np,t?Ep:void 0,o?Ua:pe),children:i})})});var Fp="p5inzda",Bp="ptswoqr",Wp="p14s1oge";var er=d(b(),1);function iv({header:e,children:o,testId:t,className:r,...n}){return(0,er.jsxs)("div",{className:C(Bp,!!e&&Wp,r),"data-testid":t,...n,children:[e,(0,er.jsx)("div",{className:Fp,children:o})]})}export{ed as a,_a as b,Rt as c,Ga as d,pe as e,Ua as f,Fr as g,Xa as h,$d as i,dm as j,mm as k,fm as l,gm as m,bm as n,ym as o,hm as p,xm as q,tc as r,Cm as s,Pm as t,vm as u,wm as v,Tm as w,km as x,Im as y,Rm as z,Vm as A,Sm as B,us as C,gs as D,bs as E,ys as F,Ps as G,If as H,mc as I,Rf as J,Ge as K,Vf as L,bc as M,vs as N,ws as O,oc as P,Ya as Q,Wr as R,Ar as S,Sc as T,Oc as U,Fs as V,Bs as W,To as X,We as Y,Wg as Z,Ls as _,Jg as $,Xs as aa,W as ba,Rb as ca,Wt as da,Ub as ea,_t as fa,ql as ga,mu as ha,Ll as ia,Tl as ja,zt as ka,hl as la,Jb as ma,Xu as na,Gt as oa,nu as pa,Ax as qa,Yr as ra,Ae as sa,cy as ta,Xt as ua,xp as va,oP as wa,tP as xa,Cp as ya,Pp as za,vp as Aa,Tp as Ba,Au as Ca,Du as Da,Gu as Ea,Uu as Fa,qu as Ga,kP as Ha,WP as Ia,Hu as Ja,Sp as Ka,QP as La,Da as Ma,Yu as Na,jc as Oa,Cy as Pa,Ml as Qa,Fl as Ra,Oh as Sa,iv as Ta,Ah as Ua,wy as Va,Ty as Wa};
//# sourceMappingURL=https://app.framerstatic.com/chunk-BYQA6MHE.mjs.map
