import{$ as Ea,V as wo,Y as po,_ as Na,aa as Ma,h as Ra,j as Va,r as Sa,w as Oa}from"https://app.framerstatic.com/chunk-DMEJ4CJ4.mjs";import{K as ka}from"https://app.framerstatic.com/chunk-KQ3INNGU.mjs";import{Da as xa,M as vt,Na as Pa,Ua as va,la as wt,ma as Vr,na as Ap,oa as Sr}from"https://app.framerstatic.com/chunk-YTUKC2MA.mjs";import{O as vo,s as Ca}from"https://app.framerstatic.com/chunk-DKN6BIJG.mjs";import{G as Po,a as kn,b as En,ma as hi,xa as fa}from"https://app.framerstatic.com/chunk-4AXEU7ER.mjs";import{d as Rr,j as ya,k as ha}from"https://app.framerstatic.com/chunk-OVKVZN2M.mjs";import{a as Tt}from"https://app.framerstatic.com/chunk-HLZ5YMM5.mjs";import{d as Or,j as Ta}from"https://app.framerstatic.com/chunk-SFMR7AGO.mjs";import{a as co}from"https://app.framerstatic.com/chunk-XXDQOWLB.mjs";import{b as Pt}from"https://app.framerstatic.com/chunk-U2NF2DFM.mjs";import{L as ma}from"https://app.framerstatic.com/chunk-5HXGPRCU.mjs";import{b as ba}from"https://app.framerstatic.com/chunk-26ZI4URE.mjs";import{e as wa}from"https://app.framerstatic.com/chunk-CFNPSKOS.mjs";import{Ac as yi,sc as bi}from"https://app.framerstatic.com/chunk-COMKKZLF.mjs";import{f as Ne}from"https://app.framerstatic.com/chunk-L7VKNP5U.mjs";import{a as Ia}from"https://app.framerstatic.com/chunk-RDUOSMUC.mjs";import{$d as dt,Ab as Ri,Ad as Wi,Bd as Ai,Cc as Si,Cd as Di,Fg as Ce,Gg as to,Ie as lo,Je as Me,Kd as zi,Ld as _i,Le as Qe,Oe as yt,Pe as eo,Rc as Oi,Re as aa,Se as ht,Sg as da,Ta as Pi,Tc as Ni,Td as Tr,Te as L,Ua as vi,Vd as Gi,Ve as sa,Wd as Ui,Xa as wi,Xd as qi,Ya as Ti,Yc as Ei,Yd as Li,Zd as Hi,Zf as Ct,_c as wr,_d as Ki,ad as Mi,ae as Zi,be as mt,ca as Pr,ce as ft,cg as pa,da as vr,dd as Fi,de as kr,ed as Bi,f as xi,fb as Wo,fe as Ji,ge as $i,he as Xi,ia as ct,ie as ji,je as gt,jg as ca,ke as Yi,le as bt,me as Qi,ne as ea,oe as oa,pe as Ir,qe as ta,qg as ua,re as ra,rf as xt,rg as oo,sb as ki,se as na,te as ia,uf as la,vc as Vi,wb as Ii,xb as ut,yg as oe}from"https://app.framerstatic.com/chunk-E3BFIQ3T.mjs";import{a as x}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import{Ae as si,F as Oe,I as ri,bf as Cr,cf as li,ea as st,fa as ni,he as ai,jf as pi,nc as ii,pg as di,rf as lt,rg as mi,sf as ci,tg as fi,vf as ui,vg as pt,we as Fo,ye as Bo}from"https://app.framerstatic.com/chunk-XTLBFCBM.mjs";import{b as O}from"https://app.framerstatic.com/chunk-6YI2XN42.mjs";import{a as ga}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import{k as gi}from"https://app.framerstatic.com/chunk-X73OH5FJ.mjs";import{l as W,m as Ci,n as Ee}from"https://app.framerstatic.com/chunk-YEZP3BBL.mjs";import{$ as D,$b as $e,$e as rt,A as Rn,Db as Qo,Eb as Fn,Gb as No,Hb as Bn,Ib as io,Jb as Wn,Kb as Ve,Kd as tt,Lb as ao,Ln as ei,Mn as xr,Nb as mr,Nh as Xe,Ob as De,Oh as nt,Pb as Eo,Ph as Mo,Qb as fr,Qh as Un,Qk as xe,Qp as so,Rb as gr,Rp as Co,Tj as qn,Wc as zn,X as me,Y,_b as Je,ac as et,an as jn,bc as An,da as Sn,dc as xo,dl as Hn,gd as _n,hc as Dn,hd as yr,hl as Kn,ic as br,il as Zn,in as je,jn as it,kd as ot,kl as Jn,kn as Ye,lk as Ln,nn as Yn,on as Qn,sb as Yo,tb as Re,tg as Se,tm as hr,ub as ur,um as $n,vm as Xn,yb as dr}from"https://app.framerstatic.com/chunk-NBRM3IAP.mjs";import{V as Mn,aa as oi,d as In,ga as at,ka as ti}from"https://app.framerstatic.com/chunk-3CHH3HAB.mjs";import{a as lr}from"https://app.framerstatic.com/chunk-BUC334RG.mjs";import{p as Nn}from"https://app.framerstatic.com/chunk-7QB5YDW7.mjs";import{b as Tn}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{a as On,b as F,e as Ze,g as he,h as Ie,j as J,l as cr}from"https://app.framerstatic.com/chunk-CMAEAGWD.mjs";import{$f as Gn,Ja as pr,a as q,b as y,i as Vn}from"https://app.framerstatic.com/chunk-M6MHZBU3.mjs";import{g as wn}from"https://app.framerstatic.com/chunk-JLNGOKO7.mjs";import{T as yo,aa as Cn,ea as Pn,fa as ho,l as jo,ma as vn,ra as sr}from"https://app.framerstatic.com/chunk-5V7XAOIL.mjs";import{a as k,b as Ae}from"https://app.framerstatic.com/chunk-YOOGIIWU.mjs";import{e as d,j as be}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var kt=d(q(),1),Ba=d(y(),1),Nr=(0,kt.createContext)(void 0);Nr.displayName="ImagePluginPickerButtonContext";function Zu({component:e,children:o}){return(0,Ba.jsx)(Nr.Provider,{value:e,children:o})}function Fa(){return(0,kt.useContext)(Nr)}var It=d(q(),1),Dp={},Wa=(0,It.createContext)(Dp);Wa.displayName="ControlPropRowContext";function $u(){let e=(0,It.useContext)(Wa);if(!e)throw new Error("useControlPropRows must be used within a ControlPropRowContext.Provider");return e}var Er=d(q(),1),Aa=Er.default.createContext(!1),ju=Aa.Provider;function Da(){return Er.default.useContext(Aa)}function Rt(e=!0){let o=O(),t=Da();return wo(()=>!Oe(o)||t||!e?null:o.stores.treeStore.variableProviderInfo,[t,e],"VariableProviderInfo")}function za(e,o){let{id:t,providerId:r=o?.fallbackProvider}=e;return!o||!r?{variable:void 0,providerId:r}:{variable:o.combined.get(r)?.find(n=>n.id===t),providerId:r}}var pe="dt2vdl5",Vt="dc4gvpv",_a="s1dpgfha";var zp={track:!0};function Ao(e){let o={...e,event:"variable_reference_delete"};Tn(o,zp)}var Br=d(q(),1);function _p(e,o){if(yr(o))return o.resolveValue("name")||"Component";if(Dn(o)&&o.dataIdentifier){let t=e.dataForIdentifier(o.dataIdentifier);if(t)return Yo(t.name)}return o.resolveValue("name")||yi(e,o)}function Gp(e){return _n(e)?"List":ot(e)?"Page":yr(e)?"Component":""}function St(e,o,t,r="long"){if(t===ai)return"Localization";let n=e.get(t);if(!n)return"Unknown";let i=_p(o,n),a=Gp(n);return r==="type"?a:i===a?i:`${i} ${a}`}var Ga="by3f1yf",Ua="b1locfei",qa="ck79ln6",La="ikobvuw",Ha="tz41s9a",Ka="c11k2f3d";var E=d(y(),1);function Fr(e,o){switch(e){case"string":return(0,E.jsx)(ta,{foreground:o});case"richtext":return(0,E.jsx)(ea,{foreground:o});case"number":case"scrollsectionref":return(0,E.jsx)(bt,{foreground:o});case"boolean":return(0,E.jsx)(Ui,{foreground:o});case"color":return(0,E.jsx)(Ki,{foreground:o});case"image":return(0,E.jsx)(Xi,{foreground:o});case"eventhandler":return(0,E.jsx)(ft,{foreground:o});case"controlReference":case"nodePropertyControlReference":return(0,E.jsx)(mt,{foreground:o});case"link":return(0,E.jsx)(ji,{foreground:o});case"linkrelvalues":return(0,E.jsx)(gt,{foreground:o});case"date":return(0,E.jsx)(Zi,{foreground:o});case"enum":return(0,E.jsx)(mt,{foreground:o});case"file":return(0,E.jsx)(kr,{foreground:o});case"customcursor":case"cursor":return(0,E.jsx)(dt,{foreground:o});case"slug":return(0,E.jsx)(Ir,{foreground:o});case"transition":return(0,E.jsx)(na,{foreground:o});case"border":return(0,E.jsx)(qi,{foreground:o});case"boxshadow":return(0,E.jsx)(oa,{foreground:o});case"gap":return(0,E.jsx)($i,{foreground:o});case"padding":return(0,E.jsx)(Qi,{foreground:o});case"borderradius":return(0,E.jsx)(Li,{foreground:o});case"collectionreference":return(0,E.jsx)(Hi,{foreground:o});case"multicollectionreference":return(0,E.jsx)(Yi,{foreground:o});case"array":return(0,E.jsx)(Gi,{foreground:o});case"trackingid":return(0,E.jsx)(ra,{foreground:o});case"vectorsetitem":return(0,E.jsx)(ia,{foreground:o});default:return Ae(e,"Missing icon for variable type")}}function Za(e,o){if(e.id===Fo)return(0,E.jsx)(vr,{isVariable:!0,foreground:o});if(e.id===Bo)return(0,E.jsx)(Pr,{isVariable:!0,foreground:o});if(ei(e))return(0,E.jsx)(Ji,{foreground:o});if(lt(e)){let t=ci(e);return t?.id===Fo?(0,E.jsx)(vr,{isVariable:!0,foreground:o}):t?.id===Bo?(0,E.jsx)(Pr,{isVariable:!0,foreground:o}):(0,E.jsx)(Ir,{foreground:o})}if(e.type==="controlReference"||e.type==="nodePropertyControlReference"){let{expectedType:t}=e;switch(t){case"enum":case"segmentedenum":return(0,E.jsx)(mt,{foreground:o});case"file":return(0,E.jsx)(kr,{foreground:o});default:Ae(t,`iconForVariable(), unsupported file reference type: ${t}`)}}return Fr(e.type,o)}var _e=d(y(),1);function qp(e){return he(e)?xe(e)==="boolean":e==="boolean"}function Lp(e,o,t){if(t.combined.size<=1)return!1;let r=t.combined.keys();for(let n of r){if(n===o.id)continue;let i=e.getNode(n);if(br(i)&&i.dataIdentifier===o.dataIdentifier)return!0}return!1}function Hp(e,o,t,r){if(!t||!r||r.combined.size<=1)return;let n=e.get(t);if(!(!br(n)||!Lp(e,n,r)||r.combined.keys().next().value===t))return" ("+St(e,o,t,"type")+")"}function Kp(e){let o=ui(e);return o||e.name||"Unknown"}function Zp(e,o,t,r,n,i,a,l){if(n)return qp(r)?"Condition":"Transform";if(!t)return"Missing";let s=i?"Not ":"",p=Kp(t),m=Hp(e,o,a,l)??"";return s+p+m}function Jp(e,o,t){if(t)return(0,_e.jsx)(ct,{});if(e)return Za(e);let r=Array.isArray(o)?o[0]:o;return k(r),Fr(r)}function $p(e){return e?.id!==bi}var Kd=Br.default.memo(Br.default.forwardRef(function(o,t){let r=O(),{expectedType:n,reference:i,onRemove:a,className:l,onClick:s,hasError:p,isComputedValue:m=!1,isNegated:c=!1,buttonTitle:P,preview:g,...h}=o,v=L(),C=Rt(),{variable:b,providerId:f}=za(i,C),u=$p(b);function I(N){a&&r.stores.contextMenuStore.show([{label:"Remove",enabled:!v,click:()=>{a(i),Ao({variableId:b?.id,variableType:b?.type})}}],{location:{x:N.clientX,y:N.clientY}})}let S=r.scheduler.wrapHandler(()=>{Oe(r)&&b&&f&&u&&Pa(r,b.id,f)}),R=N=>{!a||v||(N.stopPropagation(),a(i),Ao({variableId:b?.id,variableType:b?.type}))},T=Zp(r.tree,r.componentLoader,b,n,m,c,f,C),G=g??Jp(b,n,m);return(0,_e.jsxs)(Me,{ref:t,role:"button",direction:"row",alignItems:"center",className:x(Ga,pe,s||u?qa:void 0,p&&Ua,l),tabIndex:0,onContextMenu:I,paddingLeft:4,gap:0,onClick:b?s??S:void 0,title:P??T,...h,children:[(0,_e.jsx)(lo,{className:La,children:G}),(0,_e.jsx)(Ct,{size:6}),(0,_e.jsx)("div",{className:x(Qe,Ha),children:T}),a&&!v&&(0,_e.jsx)(lo,{className:Ka,onClick:R,onMouseDown:Xp,title:"Remove",children:(0,_e.jsx)(ut,{})})]})}));function Xp(e){e.stopPropagation()}var Ot=d(Ap(),1);function jp(e,o){return o.some(t=>{t==="*"&&(t="*/*");let r=Ot.default.parse(t);if(!r){let n=Vr(t);r=n?Ot.default.parse(n):null}return r?(r.type==="*"||r.type===e.type)&&(r.subtype==="*"||r.subtype===e.subtype):!1})}function Yp(e,o){if(o.length===0)return!0;let t=Vr(e)??e,r=Ot.default.parse(t);return r&&jp(r,o)?!0:o.some(n=>n==="*"||n==="*/*"||e===n||e===`.${n}`)}function Ja(e,o){return e.type!=="file"?!1:(k(o,"allowedFileTypes should always be defined for ControlType.File"),e.allowedFileTypes.every(({extension:t})=>Yp(t,o)))}function Wr(e,o){return!e||!o||Re(e)||et(e)?!1:($e(e)||Ae(e),k(e.startValue.id===o.id),o.type==="boolean"&&e.transforms[0]?.name==="negate")}function Ar(e,o){return Wr(e,o)&&e.transforms.length===1}var is=d(q(),1);var $a="tl8565r",pm="bvc2uw9",cm="b1k2nl76",um="b1i3g548",dm="c77pepd",mm="wnwbz2t",fm="w16ew1wl",gm="r16cr7hr",bm="b1lo74ig",Qp="b1119pfk",ym="b13iwexl",hm="p1c7z6za",xm=x($a,"b1eca53j");var Cm="cs3azl6",Pm="a1qeto7i",Xa=x($a,Qp,"b8y1dyl"),vm="wg2hdtb",wm="s1ha7gxb",Tm="pcukmgx",km="p1sb4uyz",Im="ecrz0ka";var ja="i7d4cn1",Ya=x(Xa,"e1otabne"),Qa="bhul7u3";var es="https://app.framerstatic.com/a11y-O773ZVIY.png";var os="https://app.framerstatic.com/rem-typography-BHML23FR.jpg";var ts="https://app.framerstatic.com/scroll-targets-2PADIE7F.jpg";var rs="https://app.framerstatic.com/template-page-image-dark-K2Y4MA57.png";var ns="https://app.framerstatic.com/template-page-image-light-2NW7Z5XL.png";var fe=d(y(),1);var as=e=>{Ne("ui_interaction",{page:"education-tooltip",id:e})},ac=e=>{switch(e){case"templatePage":return{title:"Template Page",actionText:"Watch Video",text:"Layout changes made to this page apply to all pages of the selected CMS collection.",image:{dark:rs,light:ns},href:"https://www.framer.com/academy/lessons/cms-pages-dynamic-content",type:"button"};case"remTypography":return{title:"REM Typography",actionText:"Watch Video",text:"This is the base value per Breakpoint when using REM sizing in your typography.",image:os,href:"https://youtu.be/DGPCFIKUDb8",type:"icon"};case"accessibility":return{title:"Accessibility Tips",actionText:"Learn More",image:es,text:"Learn about the tools Framer gives you to add meaning to the elements of your website.",href:"https://www.framer.com/learn/accessibility/",type:"icon"};case"scrollTargets":return{title:"Scroll Sections",actionText:"Watch Video",href:"https://www.youtube.com/watch?v=AG1ZEij8Vcw",image:ts,text:"Learn how to create links that smoothly scroll to a specific section within your page.",type:"icon"};default:Ae(e)}};function sc({href:e,actionText:o,tooltipId:t,content:r,image:n}){return(0,fe.jsx)(Na,{icon:(0,fe.jsx)(lo,{className:ja,title:"",children:(0,fe.jsx)(wi,{})}),direction:"right",actions:e?(0,fe.jsx)(aa,{as:"a",href:e,target:"_blank",onClick:()=>as(t),children:o}):void 0,...r,image:n})}function lc({href:e,actionText:o,tooltipId:t,content:r,image:n}){let i=(0,is.useRef)(null),{triggerProps:a,tooltipProps:l}=pa({className:Qa,direction:"top",interactive:!0,offset:5,triggerRef:i,delay:"short",initialVisibility:!1,tint:W.panelBackground,alignSelf:"right"});return(0,fe.jsxs)(fe.Fragment,{children:[(0,fe.jsxs)(eo,{ref:i,variant:"default",enabled:!0,className:Ya,"aria-expanded":l.visible,onClick:a.onPointerEnter,...a,children:[(0,fe.jsx)(Ii,{}),"Template Page"]}),(0,fe.jsx)(Ea,{title:r.title,text:r.text,actions:(0,fe.jsx)(eo,{variant:"default",onClick:()=>{as(t),ma(e)},"aria-expanded":l.visible,children:o}),image:n,...l})]})}function ss({tooltipId:e}){let{isDarkMode:o}=co(),{actionText:t,href:r,type:n,...i}=ac(e),a;return F(i.image)?a=i.image:i.image&&"dark"in i.image&&"light"in i.image&&(a=o?i.image.dark:i.image.light),(0,fe.jsx)(n==="icon"?sc:lc,{href:r,actionText:t,tooltipId:e,content:i,image:a})}var ve=d(q(),1);var ls="ib75oye",ps="dnxepni";var Dr=d(y(),1);function cs(){let e=L();return(0,Dr.jsx)("div",{title:"Drag to reorder or remove",className:x(ls,e&&ps),children:(0,Dr.jsx)(vi,{})})}function us(e){return e.tree.getNodes(e.stores.selectionStore.ids).every(zn)}function ds(e,o,t=void 0){if(!o&&!t)return!1;let r=e.tree.getNodes(e.stores.selectionStore.ids),n=ii.overrideKeys(e.tree,r,!0);return ka(n,o,t)}function ms(e,o,t=void 0){Ca(e.tree,e.tree.getNodes(e.stores.selectionStore.ids),o,t)}var fs=d(q(),1);function gs(e){let o=O(),{supportsFetchDataValues:t,onSelectFetchDataValue:r}=e,n=L(),i=(0,fs.useCallback)(()=>{if(t)return[{label:"Add Fetch",click:()=>{k(r);let a=r();Ne("fetch_computed_value_create",{outputType:a.outputType})},enabled:!n&&!(Oe(o)&&ba(o.tree,o.stores.selectionStore.ids)),submenu:void 0}]},[r,n,t]);if(!(!t||!r))return i}var ws=d(q(),1);function ys(e){return e?.type==="transform"}function wf(e){return e?.type==="unknownTransform"}function cc(e){return e?.type==="typeError"}function Tf(e){return cc(e)&&"key"in e}function Ge(e,o){return he(o)?o.includes(e):e===o}function uc(e){let o=-1,t=-1;for(let i=0,a=e.length;i<a;i++){let l=e[i];l&&(l.name==="greaterThan"&&l.isNegated?o=i:l.name==="lessThan"&&!l.isNegated&&(t=i))}if(o===-1||t===-1)return;let r=e[o];k(r);let n=e[t];k(n),e[o]=n,e[t]=r}function Et(e,o){e.sort((t,r)=>t.outputType===r.outputType?0:t.outputType===o?-1:1),uc(e)}function kf(e,o,t){let r=e.at(-1);if(!r)return;let n=ao(r);if(n===t)return;let i=No(n);if(i)for(let a of i){let l=Ve(a);if(l&&l.includes(t)){e.push(Co({name:a,input:n,output:o??t}));return}}}var zr=2;function dc(e,o,t){let r=[{transformName:e,depth:1}],i=t==="boolean"&&o===t?1:zr,a=new Set;for(;r.length>0;){let{transformName:l,depth:s}=r.shift();if(a.has(l))continue;a.add(l);let p=Ve(l);if(p){if(p.includes(t))return!0;if(i!==s&&!gr(l))for(let m of p){let c=No(m);if(c)for(let P of c)r.push({transformName:P,depth:s+1})}}}return!1}var _r=(()=>{let e=new Map;return(o,t,r)=>{let n=o+t+r,i=e.get(n);if(On(i))return i;let a=dc(o,t,r);return e.set(n,a),a}})();function Nt({input:e,output:o,currentTransform:t,currentTransformOutput:r,transformBefore:n,variableConsumesNegated:i,supportedTransformNames:a}){let l=[];return a.forEach(s=>{let p=io(s);if((!p||!p.includes(e))&&s!==t)return;let m=Ve(s),c;if(m.includes(o))c=o;else if(r&&m.includes(r))c=r;else{if(!_r(s,e,o))return;let h=Ve(s);c=h.includes(o)?o:h[0]}if(n===s&&t!==s&&!fr(s))return;let P=!!(n&&De(n));P&&s==="negate"||P&&s==="isSet"||!n&&i&&s==="negate"||(l.push({name:s,isNegated:!1,outputType:c}),De(s)&&l.push({name:s,isNegated:!0,outputType:c}))}),Et(l,o),l.length>0?l:null}function bs(e,o,t){if(k(o>=0),o===0||o===1&&t)return null;let r,n=t?1:0;for(let i=o-1;i>=n;i--){let a=e[i];if(k(a),a.name==="negate"){r=a;continue}return r&&!De(a.name)?r:a}return k(r),r}function mc(e){if(!Ie(e))return e;for(let o of e)if(Je(o))return o;throw Error("Expected type must be a computed value type")}function hs({mainInputType:e,inputControl:o,variableIsNegated:t,transforms:r,expectedType:n,propName:i,supportedTransformNames:a=Qo()}){let l=mc(n),s=e==="boolean",p={sections:[],errorBefore:null,errorAfter:null,transformAdditionOptions:[],variableIsNegated:t},m=Ge(e,n),c=e;if(r){let f=t?1:0;for(let u=f,I=r.length;u<I;u++){let S=bs(r,u,t),R=r[u];if(k(R),!Fn(R.name)){p.sections.push({type:"unknownTransform",transform:R});continue}let T=io(R.name);if(k(T),!Ge(c,T)){let N=Eo(R.name,!1);u===0?p.errorBefore={type:"typeError",title:N,expected:T,received:c,replaceOptions:Nt({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:null,variableConsumesNegated:s,supportedTransformNames:a})}:(k(S),p.sections.push({type:"typeError",key:`${R.id}-error`,title:N,expected:T,received:c,replaceOptions:Nt({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:S.name,variableConsumesNegated:s,supportedTransformNames:a}),transformBefore:S,transformAfter:R}))}let G=p.sections[p.sections.length-1];if(R.name==="negate"&&G?.type==="transform"&&G.consumesNegated)G.isNegated=!G.isNegated;else{let N=ao(R),M=m&&e!=="enum",z=p.sections.some(V=>{if(V.type!=="transform")return!0;let te=ao(V.transform);return Ge(te,n)}),U=M||z||!!S;p.sections.push({type:"transform",transform:R,inputType:c,inputControl:f===u?o:void 0,consumesNegated:De(R.name),isNegated:!1,canBeDeleted:U,replaceOptions:Nt({input:c,output:l,currentTransformOutput:N,currentTransform:R.name,transformBefore:S?.name??null,variableConsumesNegated:s,supportedTransformNames:a})}),c=N}}}let P=r?bs(r,r.length,t):null,g=P?P.name:null,h=g==="negate",v=g?De(g):!1,C=!Ge(c,n);return C&&(p.errorAfter={type:"typeError",title:i,expected:n,received:c,replaceOptions:Nt({input:c,output:l,currentTransformOutput:null,currentTransform:null,transformBefore:g,variableConsumesNegated:s,supportedTransformNames:a})}),fc(p,P,n,C)&&(a.forEach(f=>{if(g===f&&!fr(f)||f==="negate"&&(!P||h||v))return;let u=io(f);if(!u||!u.includes(c))return;let I=Ve(f),S=I.find(R=>Ge(R,n))??I[0];Ge(c,n)&&!Ge(S,n)||gr(f)&&!Ge(S,n)||(p.transformAdditionOptions.push({name:f,isNegated:!1,outputType:S}),De(f)&&p.transformAdditionOptions.push({name:f,isNegated:!0,outputType:S}))}),Et(p.transformAdditionOptions,l)),p}function fc(e,o,t,r){return r?!0:t==="boolean"?Nn.isOn("dynamicFilters")?o?.name!=="equals":e.sections.every(n=>n.type!=="transform"):Ge("enum",t)?!o||!o.name?!0:!Ve(o.name).includes("enum"):!0}function xs(e,o,t){switch(t.name){case"equals":switch(o.name){case"equals":case"startsWith":case"endsWith":case"contains":case"lessThan":case"greaterThan":case"isAfter":case"isBefore":switch(e){case"string":case"boolean":case"number":case"enum":case"date":case"collectionreference":Hn(e,o.value)&&(t.value=o.value);break}}return;case"isAfter":case"isBefore":switch(o.name){case"isBefore":case"isAfter":case"equals":F(o.value)&&(t.value=o.value);break}break;case"lessThan":case"greaterThan":switch(o.name){case"lessThan":case"greaterThan":t.value=o.value;break;case"equals":Ze(o.value)&&(t.value=o.value);break}break;case"startsWith":case"endsWith":case"contains":switch(o.name){case"startsWith":case"endsWith":case"contains":case"equals":F(o.value)&&(t.value=o.value)}break;case"prefix":case"suffix":switch(o.name){case"prefix":case"suffix":t.value=o.value,t.valueLocalized=o.valueLocalized}break;case"isIncludedIn":switch(o.name){case"isIncludedIn":he(o.value)&&o.value.every(F)&&(t.value=o.value)}break;case"containsAny":case"containsAll":switch(o.name){case"containsAny":case"containsAll":(Re(o.value)||he(o.value)&&o.value.every(F))&&(t.value=o.value)}break}}function Do(e,o,t,r){return o!=="controlReference"?e.canCreateVariable({type:o}):!t||!r?!1:(Ie(t)?t:[t]).some(i=>Yn(i)&&e.canCreateVariable({type:"controlReference",expectedType:i,entityIdentifier:r}))}function gc(e,o,t,r,n){return n&&Do(e,n,t,r)?[n]:Ie(o)?o.filter(i=>Do(e,i,t,r)&&i!=="enum"):Do(e,o,t,r)?[o]:[]}function bc({engine:e,dynamicValue:o,canCreateVariable:t,variableType:r,variableCreationType:n,variableInfo:i,onCreateVariable:a,variableReferenceType:l,supportsComputedValues:s,collectionReferenceDataIdentifier:p,controlSourceIdentifier:m,vectorSetIdentifier:c,isReadOnly:P,controlKey:g,allowedFileTypes:h,displayTransformOptions:v,onSelectVariable:C,onSelectComputedValue:b,onRemoveDynamicValue:f,computedValuePopoutId:u,variableFilter:I}){let S=[],R=P||fa(e,"canDesign");if(t){k(i,"variableInfo should be defined");let M=e.tree.getNodeWithTrait(i.idOfMutableVariableProvider,xr);k(M,"variableProviderNode should exist when creating variables");let z=gc(M,r,l,m,n);if(z.length===1){let U=z[0];k(dr(U),"onlyVariableType should be defined"),S.push({label:"Create Variable",enabled:!R,click:()=>{k(i.idOfMutableVariableProvider,"idOfMutableVariableProvider should exist when creating variables"),k(a,"onCreateVariable should be defined"),a(M.id,U)}})}else z.length>1&&S.push({label:"Create Variable",submenu:z.map(U=>({label:Qn(U),enabled:!R,click:()=>{k(i.idOfMutableVariableProvider,"idOfMutableVariableProvider should exist when creating variables"),k(a,"onCreateVariable should be defined"),a(M.id,U)}}))})}let T=Rc(e,i,r,l,s,p,c,m,g,h,v,I),G=Sc({engine:e,variableInfo:i,compatibleVariablesByProvider:T,variableType:r,dynamicValue:o,variableReferenceType:l,collectionReferenceDataIdentifier:p,vectorSetIdentifier:c,controlSourceIdentifier:m,controlKey:g,allowedFileTypes:h,supportsComputedValues:s,onSelectVariable:C,onSelectComputedValue:b,onRemoveDynamicValue:f,readonly:R,variableFilter:I});G.length>0&&S.push({label:"Set Variable",submenu:G});let N=Ec({engine:e,variableInfo:i,dynamicValue:o,variableType:r,supportsComputedValues:s,onSelectComputedValue:b,computedValuePopoutId:u,displayTransformOptions:v,controlSourceIdentifier:m,controlKey:g,readonly:R});return N&&S.push(N),S}function Ts(e){let o=O(),{variableType:t,variableCreationType:r,variableReferenceType:n,dynamicValue:i,onCreateVariable:a,onSelectVariable:l,onRemoveDynamicValue:s,collectionReferenceDataIdentifier:p,controlSourceIdentifier:m,vectorSetIdentifier:c,controlKey:P,allowedFileTypes:g,supportsComputedValues:h,onSelectComputedValue:v,displayTransformOptions:C=!0,computedValuePopoutId:b,variableFilter:f}=e,u=Rt(),{canCreateVariable:I,canAssignVariable:S}=yc(o,u,e),R=L(),T=(0,ws.useCallback)(()=>{if(u&&t)return bc({engine:o,variableInfo:u,variableType:t,variableCreationType:r,variableReferenceType:n,supportsComputedValues:h,collectionReferenceDataIdentifier:p,controlSourceIdentifier:m,vectorSetIdentifier:c,controlKey:P,allowedFileTypes:g,displayTransformOptions:C,dynamicValue:i,onSelectComputedValue:v,onSelectVariable:l,isReadOnly:R,onRemoveDynamicValue:s,onCreateVariable:a,canCreateVariable:I,computedValuePopoutId:b,variableFilter:f})},[g,I,p,b,P,m,C,i,R,a,s,v,l,h,r,u,n,t,c,f]);return S?T:void 0}function yc(e,o,t){let n=!!t.supportsVariables&&kc(o,t.variableType,t.variableReferenceType,t.supportsComputedValues,t.collectionReferenceDataIdentifier,t.vectorSetIdentifier,t.controlSourceIdentifier,t.controlKey,t.allowedFileTypes,t.variableFilter),i=e.tree.getNodeWithTrait(o?.idOfMutableVariableProvider,xr),l=hc(i,t)&&!!t.onCreateVariable,s=n&&!!t.onSelectVariable;return{canCreateVariable:l,canAssignVariable:l||s}}function hc(e,o){if(!e||!o.supportsVariables||!o.variableType)return!1;if(!Ie(o.variableType))return Do(e,o.variableType,o.variableReferenceType,o.controlSourceIdentifier);for(let t of o.variableType)if(Do(e,t,o.variableReferenceType,o.controlSourceIdentifier))return!0;return!1}function xc(e){return Re(e)?e:An(e)?e.startValue:null}function Cc(e,o,t,r){if(e.type!=="controlReference"&&e.type!=="nodePropertyControlReference")return!1;let{entityIdentifier:n,controlKey:i,expectedType:a}=e;return n===hr?i===r:!t||!Fc(n,t)||i!==r?!1:he(o)?o.includes(a):o===a}function Pc(e,o){return e.type!=="vectorsetitem"||!o?!1:e.setModuleId===o}function Cs(e,o){let t=[{type:e,depth:1}];for(;t.length>0;){let{type:r,depth:n}=t.shift(),i=n===zr,a=Wn(r);if(a)for(let l of a){let s=io(l);if(s)for(let p of s)o.has(p)||(o.add(p),dr(p)&&(i||t.push({type:p,depth:n+1})))}}}function vc(e){return Ie(e)?Array.from(e).sort().join():e}var ks=(()=>{let e=new Map;return o=>{let t=vc(o),r=e.get(t);if(r)return r;let n=new Set;if(Ie(o))for(let i of o)Cs(i,n);else Cs(o,n);return e.set(t,n),n}})();function Is(e,o,t){if(!o||!t)return;if(t===hr)return k($n(o)),Xn(o);let r=e.reactComponentForIdentifier(t);if(r)return r.properties[o]}function zo(e,o,t,r,n){let i=F(o)?o:o.type;for(let a of Qo()){let l=io(a);if(!l||!l.includes(i))continue;let s=Ve(a),p=Ie(t)?t.find(c=>s.includes(c)):s.find(c=>c===t);if(!Je(p))continue;let m=Is(e,r,n);return{outputType:p,valueTransform:Co({name:a,input:o,output:m?.type===p?m:p})}}return null}function wc(e,o,t,r,n,i){let a=zo(e,o,t,r,n);if(a)return xo(a.outputType,i,[a.valueTransform]);let l=zo(e,o,"boolean",r,n),s=zo(e,"boolean",t,void 0,void 0);if(l&&s)return xo(s.outputType,i,[l.valueTransform,s.valueTransform]);let p=F(o)?o:o.type;throw new Error(`Could not generate computed value with input: ${p}, and output: ${he(t)?t.join(", "):t}`)}function Tc(e,o){for(let t of e)if(o.has(t))return!0;return!1}function Ps(e,o,t,r,n,i,a,l,s){if(e==="enum")return!i||!a?!1:o.enums.some(({variable:p,sourceIdentifier:m})=>Rs(p,m,i,a));if(s){for(let[p,m]of o.combined)if(o.variableSourceIdentifiers[p]&&m.some(s))return!0;return!1}return o.flatList.some(p=>Mt(p,void 0,e,t,r,n,i,a,l,s))}function kc(e,o,t,r,n,i,a,l,s,p){if(!o||!e)return!1;if(Ie(o)){if(o.some(c=>Ps(c,e,t,n,i,a,l,s,p)))return!0}else if(Ps(o,e,t,n,i,a,l,s,p))return!0;if(r){let m=e.types,c=ks(o);if(c&&Tc(c,m))return!0}return!1}function Mt(e,o,t,r,n,i,a,l,s,p){return p&&!p(e)?!1:he(t)?t.some(m=>Mt(e,o,m,r,n,i,a,l,s,p)):t==="collectionreference"?e.type==="collectionreference"&&e.dataIdentifier===n:t==="multicollectionreference"?e.type==="multicollectionreference"&&e.dataIdentifier===n:t==="vectorsetitem"?Pc(e,i):t==="file"?Ja(e,s):t==="controlReference"||e.type==="nodePropertyControlReference"?Cc(e,r,a,l):e.type==="enum"?Rs(e,o,a,l):e.type===t}function Rs(e,o,t,r){return o===t&&e.id===r}function Vs(e,o,t){return!t||!o?!1:ks(o)?.has(e.type)??!1}function Ic(e){let o={children:{}};for(let t of e){let r=t.id.split("."),n=o;for(let i of r)n.children??={},n=n.children[i]??={};n.variable=t}return o}function Rc(e,o,t,r,n,i,a,l,s,p,m,c){let P=[];function g(h,v,C,b,f){let u=[];if(b.includes(v)&&b.length>1)return u;for(let S in h){let R=h[S];if(!R)continue;let{variable:T,children:G}=R;if(J(T)||si(T.id)&&!ot(f)||Cr(T.id,Fo)||Cr(T.id,Bo))continue;if(Mt(T,v,t,r,i,a,l,s,p,c)){u.push({variable:T,isNegated:!1,transforms:null}),n&&T.type==="boolean"&&u.push({variable:T,isNegated:!0,transforms:null});continue}let N;if(G&&T.type==="collectionreference"){let M=T.dataIdentifier;N=g(G,M,[...C,T.id],[...b,v],f)}if(!pi(T.id)){if(Vs(T,t,n)){let M=Ss(T,t);if(!m){if(u.push({variable:T,isNegated:!1,transforms:null}),M){let z=M.valueTransformOptions.filter(U=>!mr.has(U.name));n&&T.type==="boolean"&&z.length>0&&u.push({variable:T,isNegated:!0,transforms:null})}continue}if(M&&M.valueTransformOptions.length>0){u.push({variable:T,isNegated:!1,transforms:M.valueTransformOptions,compatibleNestedVariables:N});let z=M.valueTransformOptions.filter(U=>!mr.has(U.name));n&&T.type==="boolean"&&z.length>0&&u.push({variable:T,isNegated:!0,transforms:z})}continue}N&&u.push({variable:T,isNegated:!1,transforms:null,compatibleNestedVariables:N})}}if(u.length!==0)return u}for(let[h,v]of o.combined){let{children:C}=Ic(v);k(C,"Variable tree should have children");let b=o.variableSourceIdentifiers[h];if(!b)continue;let f=e.tree.get(h),u=g(C,b,[],[],f);u&&P.push({providerId:h,providerTitle:St(e.tree,e.componentLoader,h),compatibleVariables:u})}return P}function Vc(e,o,t,r,n){if(!$e(e)||!t||!o)return null;let a=hs({mainInputType:t.type,inputControl:n,variableIsNegated:r,transforms:$e(e)?e.transforms:null,expectedType:o,propName:void 0}).sections.find(ys);return a?{name:a.transform.name,isNegated:a.isNegated}:null}function vs(e){return e.transforms.find(o=>o.name!=="negate")}function Gr(e,o,t){if(!o||!t)return;let r=o.providerId??e.fallbackProvider;if(!r)return;let n=e.combinedControls.get(r)?.get(o.id);if(n)return n.type===t.type?n:void 0}function Sc({engine:e,variableInfo:o,compatibleVariablesByProvider:t,variableType:r,dynamicValue:n,variableReferenceType:i,collectionReferenceDataIdentifier:a,vectorSetIdentifier:l,controlSourceIdentifier:s,controlKey:p,allowedFileTypes:m,supportsComputedValues:c,onSelectVariable:P,onSelectComputedValue:g,onRemoveDynamicValue:h,readonly:v,variableFilter:C}){let b=[],f=o.fallbackProvider,u=xc(n),I=o.flatList.find(N=>u&&N.id===u.id),S=Wr(n,I),R=Vc(n,r,I,S,Gr(o,u,I));function T(N,M,z){return N.map(U=>{let{variable:V,isNegated:ae,transforms:te,compatibleNestedVariables:Q}=U,Z=Mc(U,M,u,S,f),de=te?.map(j=>({label:Eo(j.name,j.isNegated),enabled:!v,checked:Z&&R?.name===j.name&&R.isNegated===j.isNegated,click:()=>ue(j)}));if(Q){k(V.type==="collectionreference"||V.type==="array","Invalid variable type");let j=V.type==="collectionreference"?V.dataIdentifier:z,se=T(Q,M,j),Pe=Re(u)&&(u.providerId??f)===M&&li(u.id,V.id);if(Q.length===1&&se.length===1){let re=Q[0],ee=se[0];if(re&&lt(re.variable)&&ee)return{label:V.name,checked:Pe,click:ee.click}}return de&&se.unshift(...de,{type:"separator"}),{label:V.name,checked:Pe,submenu:se}}function ue(j=void 0){if(Z&&!j){n&&h?.(n),Ao({variableId:V.id,variableType:V.type});return}let se=ur(V.id,M);if($e(n)&&n.transforms.length>0&&I?.type===V.type&&!Ar(n,I)&&!j){let ee={...n,startValue:se};if(ae!==S){k(V.type==="boolean");let ce=Array.from(ee.transforms);ee.transforms=ce,ae?ce.unshift(so()):(k(ce[0]?.name==="negate"),ce.shift())}g?.(ee);return}if(Mt(V,z,r,i,a,l,s,p,m,C)&&!j){if(ae){k(V.type==="boolean"),g?.(xo("boolean",se,[so()]));return}P?.(ur(V.id,M),V.type),kn({variableId:V.id,variableType:V.type});return}k(Vs(V,r,c),"Selected variable should be assignable using a computed value"),k(r,"Variable type should be defined");let Pe=Gr(o,se,V)??V.type,re;if(j){let ee=Is(e.componentLoader,p,s),ce=j.outputType,_=[Co({name:j.name,input:Pe,output:ee?.type===ce?ee:ce})];j.isNegated&&_.push(so());let ne=he(r)?r.find(Je):r;if(k(Je(ne)),j.outputType!==ne){let le=zo(e.componentLoader,j.outputType,ne,p,s);le&&_.push(le.valueTransform)}re=xo(ne,se,_)}else re=wc(e.componentLoader,Pe,r,p,s,se);if($e(n)){let ee=vs(n),ce=vs(re);if(ee&&ce){I?.type===V.type&&xs(V.type,ee,ce);let bo=ao(ee),_=ao(ce);if(bo===_){let ne=n.transforms.findIndex(He=>He===ee),le=n.transforms.slice(ne+1);if(le.length>0){let He=re.transforms.findIndex(Jo=>Jo===ce),Zo=re.transforms.slice(0,He+1);Zo.push(...le),re.transforms=Zo}}}}ae&&(k(V.type==="boolean"),re.transforms=[so(),...re.transforms]),g?.(re),Ne("computed_value_create",{initialTransformName:re.transforms[0]?.name,inputType:V.type,outputType:re.outputType,source:"property_panel_row"})}return{label:(ae?"Not ":"")+(V.name||"Unknown"),checked:Z,enabled:!v,click:()=>ue(),submenu:de}})}let G=t.entries();for(let[N,{providerId:M,providerTitle:z,compatibleVariables:U}]of G){let V=o.variableSourceIdentifiers[M];if(!V)continue;let ae=T(U,M,V);N===0?b.push(...ae):(N===1&&b.push({type:"separator"}),b.push({label:z,submenu:ae,checked:Re(u)&&(u.providerId??f)===M}))}return b}function Oc(e,o){let t=new Map,r=No(e);if(!r)return t;for(let n of r){if(!_r(n,e,o))continue;let a=Ve(n),l=a.includes(o)?o:a[0];t.set(n,l)}return t}var Nc=(()=>{let e=new Map;return(o,t)=>{let r=o+t;if(e.has(r))return e.get(r);let n=Oc(o,t),i=[];for(let[l,s]of n)l==="negate"&&o==="boolean"||(i.push({name:l,isNegated:!1,outputType:s}),De(l)&&i.push({name:l,isNegated:!0,outputType:s}));if(i.length===0){e.set(r,void 0);return}Et(i,t);let a={valueTransformOptions:i,outputType:t};return e.set(r,a),a}})();function Ss(e,o){if(!Bn(e.type))return;let t=Array.isArray(o)?o.find(Je):o;if(Je(t))return Nc(e.type,t)}function Ec({engine:e,variableInfo:o,dynamicValue:t,variableType:r,supportsComputedValues:n,onSelectComputedValue:i,computedValuePopoutId:a,displayTransformOptions:l,controlSourceIdentifier:s,controlKey:p,readonly:m}){if(!n||!i||!r||!t||et(t)||!l)return;let c=Re(t)?t:t.startValue,P=o.flatList.find(f=>f.id===c.id);if(!P)return;let g=Ar(t,P),h=r==="boolean";if($e(t)&&!g)return{label:`Edit ${h?"Condition":"Transform"}`,click:()=>{k(a),Oa.navigation.presentPopout(a)}};if(!Re(t)&&!g)return;let v=Ss(P,r);if(!v)return;let{valueTransformOptions:C,outputType:b}=v;return{label:`Add ${h?"Condition":"Transform"}`,submenu:C.map(f=>({label:Eo(f.name,f.isNegated),enabled:!m,click:()=>{let u=[];g&&u.push(so());let I=Gr(o,c,P),S=Co({name:f.name,input:I??P.type,output:f.outputType});if(u.push(S),f.isNegated&&u.push(so()),F(r)&&f.outputType!==r){let T=zo(e.componentLoader,f.outputType,r,p,s);T&&u.push(T.valueTransform)}let R=xo(b,c,u);i(R)}}))}}function Mc(e,o,t,r,n){return!t||t.id!==e.variable.id||e.isNegated!==r?!1:(t.providerId||n)===o}function Fc(e,o){if(e===o)return!0;let t=sr(e);if(t?.kind!=="externalModuleExport")return e===o;let r=sr(o);return r?.kind!=="externalModuleExport"?e===o:t.moduleId===r.moduleId&&t.exportSpecifier===r.exportSpecifier}var Os="t3p7r61",Ns="t1ih3ztb",Es="wkaasce",Ms="w1vx93q9",Fs="wof63pb";var Fe=d(y(),1);function Bs({title:e,className:o,displayPlusIcon:t,primaryMenuIsOpen:r,educationTooltip:n,disableTitleTooltip:i=!1,titleTooltip:a,overridden:l,...s}){return(0,Fe.jsxs)("div",{className:x(Os,t&&x(Es,(r||l)&&Ms),o),title:e===" "||i?void 0:a??e,...s,children:[t&&(0,Fe.jsx)(Mi,{}),(0,Fe.jsx)("div",{className:x(Qe,Ns,l&&Fs),children:(0,Fe.jsx)(sa,{children:e})}),n&&(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)(Ct,{size:Ee.css.inputSpacing}),n]})]})}var Ws="p1oxlfbn",As="w1xpzgm5",Ds="w1chribc";var _o=d(y(),1),To=({title:e,titleClassName:o,children:t,className:r,style:n,disableTitleTooltip:i=!1,titleTooltip:a,reorderColumnCount:l,reorderControlHidden:s,withButtonCursor:p=!1,displayPlusIcon:m=!1,isOverridden:c=!1,primaryMenuIsOpen:P=!1,onMouseDown:g,onContextMenu:h,ReorderControl:v,educationTooltip:C,...b})=>{let f=v!==void 0;f&&Ze(l)&&(n={...n,"--reorder-column-count":l});let u=h?{onContextMenu:h,role:"button"}:{},I=g?{onMouseDown:g,role:"button"}:{};return(0,_o.jsxs)("div",{className:x(Ws,f&&As,r,p&&Ds),style:n,tabIndex:-1,...u,...I,...b,children:[e&&(0,_o.jsx)(Bs,{overridden:c,title:e,disableTitleTooltip:i,titleTooltip:a,className:o,displayPlusIcon:m,educationTooltip:C,onMouseDown:g,primaryMenuIsOpen:P}),t,f&&!s&&(0,_o.jsx)(v,{})]})};var Ur=d(y(),1);function Be({onContextMenu:e,children:o,onAdd:t,onDelete:r,onResetToDefault:n,onCopy:i,onPaste:a,onSetAsDefault:l,deleteTitle:s,copyTitle:p,pasteTitle:m,addEnabled:c=!0,deleteEnabled:P=!0,pasteEnabled:g,copyEnabled:h,resetToDefaultEnabled:v,setAsDefaultVisible:C=!1,withReorderControl:b=!1,traitTypes:f,traitTypeKeys:u,variableType:I,variableCreationType:S,variableReferenceType:R,variableFilter:T=void 0,dynamicValue:G,onCreateVariable:N,onSelectVariable:M,onRemoveDynamicValue:z,supportsVariables:U=!1,collectionReferenceDataIdentifier:V,vectorSetIdentifier:ae,controlSourceIdentifier:te,controlKey:Q,allowedFileTypes:Z,supportsComputedValues:de=!1,onSelectComputedValue:ue,displayTransformOptions:j,computedValuePopoutId:se,supportsFetchDataValues:Pe,onSelectFetchDataValue:re,educationTooltipId:ee,className:ce,panelRowApiRef:bo,..._}){let ne=O(),le=L(),He=Ra(u,f),[Zo,Jo]=ve.default.useState(!1),Mp=Ac(),$o=Ts({variableType:I,variableCreationType:S,variableReferenceType:R,dynamicValue:G,onCreateVariable:N,onSelectVariable:M,onRemoveDynamicValue:z,supportsVariables:U,collectionReferenceDataIdentifier:V,vectorSetIdentifier:ae,controlSourceIdentifier:te,controlKey:Q,allowedFileTypes:Z,supportsComputedValues:Mp&&de,onSelectComputedValue:ue,displayTransformOptions:j,computedValuePopoutId:se,variableFilter:T}),Xo=gs({supportsFetchDataValues:Pe??!1,onSelectFetchDataValue:re}),fn=!!$o||!!Xo,or=!!(t&&c&&!le),tr=!!(r&&P&&!le),gn=!!n,Fp=(0,ve.useCallback)(async Ke=>{let{clientX:nr,clientY:ir}=Ke;(or||tr||i||a||gn||l&&C)&&(Ke.preventDefault(),ne.stores.contextMenuStore.show([{label:p||"Copy",click:i,visible:!!i,enabled:cr(h)?h():h},{label:m?await m():"Paste",click:a,visible:!!a,enabled:!le&&(cr(g)?await g():g)},{type:"separator"},{label:"Add",click:t,visible:or},{label:s||"Remove",click:r,visible:tr},{label:"Reset to Default",click:n,enabled:!le&&v,visible:!!n},{label:"Set as Default",click:l,enabled:!le&&!!l,visible:!!l&&C}],{location:{x:nr,y:ir}}))},[or,tr,i,a,gn,l,C,p,h,m,le,g,t,s,r,n,v]),rr=(0,ve.useCallback)(async(Ke,nr=!1)=>{let{target:ir,currentTarget:bn}=Ke,yn=Oe(ne)&&us(ne),Bp=yn&&!!(f||u);if(!nr&&(!ua.isLeftMouseClick(Ke)||ir!==bn))return;let ar=$o?.();if(!$o&&!He&&!Xo)return;let Oo=[];ar&&Oo.push(...ar);let hn=Xo?.();hn&&(ar&&Oo.push({type:"separator"}),Oo.push(...hn)),Oo.push({type:"separator"},{label:"Reset Override",click(){Oe(ne)&&ms(ne,f,u)},enabled:!le&&yn&&ds(ne,f,u),visible:Oe(ne)&&Bp});let xn=Ke.currentTarget.getBoundingClientRect(),Wp={x:xn.left,y:xn.bottom};Jo(!0),ne.stores.contextMenuStore.show(Oo,{location:Wp,onDone:()=>Jo(!1),submenuPlacement:"left-start"})},[f,u,$o,He,Xo,le]);return(0,ve.useImperativeHandle)(bo,()=>({displayPrimaryMenu:Ke=>rr(Ke,!0)}),[rr]),(0,Ur.jsx)(To,{withButtonCursor:He||fn,displayPlusIcon:fn,onMouseDown:rr,isOverridden:He,primaryMenuIsOpen:Zo,onContextMenu:e??Fp,ReorderControl:b?cs:void 0,educationTooltip:ee?(0,Ur.jsx)(ss,{tooltipId:ee}):void 0,className:ce,..._,children:o})}var qr=(0,ve.createContext)(!1);qr.displayName="ComputedValuesSupportedContext";var Mg=qr.Provider;function Ac(){return(0,ve.useContext)(qr)}var zs=d(q(),1);function _s(e){let o=O(),{isDarkMode:t}=co(),r=vo("ColorStyleTokens",()=>{if(pt(e)){let a=xa(o.tree,e.stops,t);return{name:void 0,value:e.updated({stops:a}).toCSS()}}else{let a=Ye(e)?je(e):null;if(!a)return null;let l=o.tree.get(a);return tt(l)?{name:l.name,value:l.colorForMode(t)}:null}},[e,t]),n=r?.name,i=r?.value;return(0,zs.useMemo)(()=>i?{name:n,value:i}:null,[n,i])}function Lg(){let{isDarkMode:e}=co(),o=O();return wo(()=>{let t=o.tree.getColorStyleTokenListNode();if(!t)return;let r={};for(let n of t.children)r[jn(n)]=n.colorForMode(e);return r},[e],["ColorStyleTokens"],{deepEqual:!0})}var Gs="c1avmyds",Us="lzm78je",qs="caoupms",Ls="i3vlae9",Hs="iyiuvk1";var Go=d(y(),1);function zc(e,o,t,r=W.swatchBorderPlaceholder,n="white"){let i={boxShadow:`inset 0 0 0 1px ${r}`,backgroundColor:n};return e.includes("gradient")||e.includes("url")?(i.backgroundImage=e,i.backgroundRepeat="no-repeat",i.backgroundSize="cover",i.backgroundPositionX=o??"center",i.backgroundPositionY=t??"center"):i.backgroundColor=e,i}function Ks({large:e,background:o,borderColor:t,backgroundPositionX:r,backgroundPositionY:n,defaultBackgroundColor:i}){let l=_s(o)?.value??o;return(0,Go.jsxs)("div",{className:x(Gs,e&&Us),children:[(0,Go.jsx)("div",{className:x(qs)}),(0,Go.jsx)("div",{className:x(Ls,e&&Hs),style:zc(l,r,n,t,i)})]})}var Zs="wkxdsnf",Js="l2ga4t0";var $s=d(y(),1);function B({large:e,borderColor:o,background:t=W.tint,color:r="#fff",children:n,className:i}){let a=o?`inset 0 0 0 1px ${o}`:void 0;return(0,$s.jsx)(lo,{className:x(Zs,e&&Js,i),style:{background:t,color:r,boxShadow:a},children:n})}var Ft="i1ab0gin",Xs="l19ygcxe",js="i1mqt5la",Bt="t1bkmsxp",Ys="t1vpcft3",Qs="suf63yr",el="c1hu2nje",ol="leca1mf",Lr="d1ir7ssq",tl="sojarwo";var rl="b11f2aom",nl="r1ihmrto",il="t8942cu",al="a11ph0ck";var w=d(y(),1);function H(e){switch(e){case"action":case"aiStyleUpsell":case"border":case"collectionFilter":case"collectionOrder":case"customCursor":case"effect":case"eventSuggestion":case"font":case"formDestination":case"formSelectOption":case"grid-guides":case"line":case"link":case"linkOptions":case"linkRelValues":case"noItems":case"object":case"pageEffectExit":case"pagination":case"preset":case"scrollSection":case"sizeConstraint":case"spring":case"textSelection":case"transition":case"trigger":case"tween":return W.swatchBackgroundPlaceholderForBorder;case"fill":return W.swatchBackgroundPlaceholderForFill;case"color":case"icon":case"shadow":case"stroke":return"transparent";case"mask":return`linear-gradient(180deg, ${W.maskEmptyGradientStop1} 0%, ${W.maskEmptyGradientStop2} 100%)`;default:Ae(e)}}function qc(e){if(e==="mask")return"transparent"}function Lc(e){return e==="action"?"Reset\u2026":e==="aiStyleUpsell"?"Upgrade\u2026":e==="pageEffectExit"?"Add Exit\u2026":"Add\u2026"}function Hc(e,o){return o||(e==="action"?"Reset Override":e==="eventSuggestion"?"Add Interaction":`Add ${Yo(e)}`)}function wb({type:e,className:o,icon:t,tooltipTitle:r,...n}){let i=L();return(0,w.jsx)("div",{...n,className:x(pe,o,i&&nl),children:(0,w.jsxs)("div",{className:rl,title:Hc(e,r),children:[(0,w.jsx)("div",{className:x(Ft,i&&js,(e==="action"||e==="eventSuggestion")&&al),children:t??(0,w.jsx)(Kc,{type:e})}),(0,w.jsx)("div",{className:x(Qe,Bt,il),children:Lc(e)})]})})}function Kc({type:e}){switch(e){case"action":case"eventSuggestion":return(0,w.jsx)(ft,{});case"aiStyleUpsell":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Ai,{})});case"effect":case"pageEffectExit":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Ti,{})});case"line":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Vi,{})});case"link":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Bi,{})});case"linkOptions":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(wr,{})});case"linkRelValues":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(gt,{background:"transparent"})});case"grid-guides":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(ki,{})});case"sizeConstraint":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Wi,{})});case"pagination":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Si,{})});case"noItems":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Oi,{})});case"collectionFilter":return(0,w.jsx)(B,{background:H(e),color:"transparent",children:(0,w.jsx)(ct,{})});case"collectionOrder":return(0,w.jsx)(B,{background:H(e),color:"transparent",children:(0,w.jsx)(Ni,{})});case"spring":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Di,{})});case"tween":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Tr,{})});case"object":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Pi,{})});case"font":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(_i,{})});case"scrollSection":return(0,w.jsx)(B,{color:H(e),children:(0,w.jsx)(bt,{})});case"customCursor":return(0,w.jsx)(B,{color:H(e),children:(0,w.jsx)(dt,{})});case"formDestination":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(wr,{})});case"formSelectOption":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Fi,{})});case"transition":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Tr,{})});case"textSelection":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(zi,{})});case"trigger":return(0,w.jsx)(B,{background:H(e),children:(0,w.jsx)(Ri,{})});default:return(0,w.jsx)(Ks,{background:H(e),borderColor:W.swatchBorderPlaceholder,defaultBackgroundColor:qc(e)})}}var sl=d(q(),1);var we=d(y(),1),Wt=({enabled:e,large:o,title:t,titleColor:r,shortcutKey:n,preview:i,deleteIconColor:a,swatchBackgroundColor:l,suggestion:s,onDelete:p,deleteTitle:m="Remove"})=>{let c=(0,sl.useCallback)(g=>{g.stopPropagation(),p?.(g)},[p]),P=xi(c);return(0,we.jsxs)(we.Fragment,{children:[(0,we.jsx)("div",{className:x(Ft,o&&Xs,e===!1&&Lr),style:{backgroundColor:l},children:i}),(0,we.jsxs)("div",{className:x(Bt,e===!1&&Lr,s&&tl,!p&&Ys),style:{color:r},children:[typeof t=="string"?(0,we.jsx)("span",{className:Qe,children:t}):t,n&&(0,we.jsxs)("span",{className:Qs,children:["\xA0(",n,")"]})]}),p&&(0,we.jsx)("div",{className:x(el,o&&ol),...P,style:{color:a},title:m,children:(0,we.jsx)(ut,{})})]})};var At="bwfcdld",ll="b4uva9g",pl="d1xdslsy",cl="dpa1954";var Hr=d(y(),1);function Db({id:e,testId:o,popout:t,navigationTitle:r,navigationClassName:n,enabled:i,displayDivider:a,displayInPopover:l,popoverAttachmentEdge:s,popoverOffset:p,showArrow:m,fallbackToModalAppearance:c,title:P,shortcutKey:g,preview:h,suggestion:v,onDelete:C,onBeforePresent:b,onPresent:f,onDismiss:u,className:I,doubleColumn:S=!0,sortable:R=!1,large:T=!1,titleColor:G,deleteTitle:N,deleteIconColor:M,swatchBackgroundColor:z,educationTooltipId:U,educationText:V,onClickEducation:ae,onContextMenu:te,autoFocusInside:Q}){let Z=L(),de=ue=>{ue.key==="Delete"&&C?.(ue)};return(0,Hr.jsx)(Sa,{id:e,large:T,enabled:i,popout:t,navigationTitle:r,navigationClassName:n,displayDivider:a,displayInPopover:l,autoFocusInside:Q,popoverAttachmentEdge:s,popoverOffset:p,showArrow:m,fallbackToModalAppearance:c,onBeforePresent:b,className:x(At,T&&ll,S&&pe,R&&Vt,i===!1&&cl,I),onContextMenu:te,onKeyDown:de,onPresent:f,onDismiss:u,educationTooltipId:U,educationText:V,onClickEducation:ae,"data-testid":o,children:(0,Hr.jsx)(Wt,{title:P,titleColor:G,deleteIconColor:M,swatchBackgroundColor:z,preview:h,suggestion:v,enabled:i,large:T,shortcutKey:g,deleteTitle:N,onDelete:Z?void 0:C})})}var uo=d(q(),1);var Uo=[];function fl(e){(0,uo.useEffect)(()=>(Uo=[e,...Uo],()=>{Uo=Uo.filter(o=>o!==e)}),[e])}function Lb({globalKeyBindings:e}){let o=(0,uo.useCallback)(n=>{let i=e.get(n);i&&(Ne("keyboard_shortcut",{shortcut:Tt(n)}),i.action(n))},[e]),t=(0,uo.useCallback)(async n=>{gi(n)||n.clipboardData&&Or(n.type,{event:n})},[]),r=(0,uo.useCallback)(async n=>{if(!n.defaultPrevented){for(let i of Uo)if(await i(n),n.defaultPrevented)return;Or(n.type,{event:n})}},[]);(0,uo.useEffect)(()=>(window.addEventListener("keydown",o),window.addEventListener("copy",t,!0),window.addEventListener("cut",t,!0),window.addEventListener("paste",r,!0),window.addEventListener("wheel",ml,{passive:!1}),window.addEventListener("touchmove",dl,{passive:!1}),()=>{window.removeEventListener("keydown",o),window.removeEventListener("copy",t,!0),window.removeEventListener("cut",t,!0),window.removeEventListener("paste",r,!0),window.removeEventListener("wheel",ml),window.removeEventListener("touchmove",dl)}),[o,r,t])}function dl(e){e.touches.length>1&&(e.preventDefault(),e.stopPropagation())}function ml(e){!e.defaultPrevented&&e.ctrlKey&&e.preventDefault()}var Zc=/^0(?=\.)/u;function Dt(e){return(Math.trunc(e*100)/100).toString().replace(Zc,"")}function gl(e=1){if(e===0)return"0";if(e===1)return"1.0";let o=e*100;return o%10===0?`.${o}`:Dt(e)}function bl(e){let o=Dt(e.r),t=Dt(e.g),r=Dt(e.b);return`${o}, ${t}, ${r}`}var We=e=>Vn(0,100,Math.round(e*100)),ge=()=>{Pt({type:"add",variant:"info",icon:"color-wheel",text:"Increase color opacity to see changes",key:"color-change-null-opacity",duration:300})};function ay(e,o,t){if(nt(e)||J(e))return{title:t||"Add\u2026"};if(mi(e))return{title:"Linear"};if(fi(e))return{title:"Radial"};if(di(e))return{title:"Conic"};if(!F(e)||e==="")return{title:"Mixed"};if(Ye(e)){let n=je(e),i=n?Po(n,o.tree):null;if(i)return{title:i.name};{let a=it(e);if(!a)return{title:"Unknown"};e=a}}if(Y.isP3String(e)){let n=me.fromString(e);return n?{title:bl(n),alpha:gl(n.a)}:{title:"Unknown"}}let r=typeof e=="string"?Y(e):null;return r?{title:Y.toHex(r).toUpperCase(),alpha:r.a??1}:{title:"Unknown"}}function yl(){let e=O();return vo(["AssetMap"],()=>e.stores.assetStore.assetMap.hash)}function zt(e){let o=wa();if(!o)return e;let t=o(e,{preferredSize:"small"});return t||e}function Jc(e,o){return yl(),e?zt(e):o}function by(e,o){let t=Jc(e);return t?`url("${t}")`:o}var xl=d(q(),1),Ue=null,$c=Cn("globalPreviewHandlers");function Kr(e){$c.warn("Missing handler",e)}var Xc={reload:()=>{Ue?.reload?Ue.reload():Kr("reload")},toggleConsole:()=>{Ue?.toggleConsole?Ue.toggleConsole():Kr("toggleConsole")},openFullScreen:()=>{Ue?.openFullScreen?Ue.openFullScreen():Kr("openFullScreen")}};function hl(e){if(e===null){Ue=e;return}Ue??={},Object.assign(Ue,e)}function xy(){return Xc}function Cy({reload:e,toggleConsole:o,openFullScreen:t}){xl.default.useEffect(()=>(hl({reload:e,toggleConsole:o,openFullScreen:t}),()=>hl(null)),[e,o,t])}function Cl(e){return nt(e)?void 0:e}var ko=d(q(),1);var Te=d(q(),1);var Zr=d(y(),1),_t=e=>{let o=O(),t=L(),{doubleColumn:r,sortable:n,tooltip:i,tabIndex:a=0,onDuplicate:l,onDelete:s,onPresent:p,onCopy:m,className:c,shortcutKey:P,...g}=e;function h(b){o.stores.contextMenuStore.show([{label:"Duplicate",click:l,enabled:!t,visible:!!l},{label:"Copy",click:m,visible:!!m},{label:"Remove",click:()=>s?.(void 0),enabled:!t,visible:!!s}],{location:{x:b.clientX,y:b.clientY}})}let v=b=>{b.key==="Delete"&&s?.(b)},C=yt(a);return(0,Zr.jsx)("div",{role:"button",title:i,onContextMenu:h,onClick:p,onKeyDown:v,tabIndex:e.enabled===!1?-1:C,className:x(At,e.enabled===!1&&pl,r&&pe,n&&Vt,Va,c),children:(0,Zr.jsx)(Wt,{...g,onDelete:t?void 0:s})})};var Pl="i1oxwf0f",vl="ivz66j7",Jr="fjd4qd2",wl="f1gixrvj";var Tl="p1oi602g",kl="s1rsxqtn",Il="c17esauc";var $=d(y(),1),Yc=["auto","lossless","small","medium","large","full"],Qc={auto:"Auto",lossless:"Auto (Lossless)",small:"Small",medium:"Medium",large:"Large",full:"Full"};function Gt({multiple:e=!1,imageReferences:o,onChangeImages:t,onRemoveImage:r,onChangeAssetSize:n,extraControls:i,altText:a=Xe,altTextPlaceholder:l,onChangeAltText:s,positionX:p,positionY:m,enableFooter:c=!0,maxExtraImages:P,onEditFocalPoint:g,clearFocalPoint:h,onCropClick:v,onImageBatchUpload:C}){let b=O(),f=Fa(),u=L(),I=Ze(P)?P+1:void 0,[S,R]=Te.default.useState(!1),T=Te.default.useRef(null),G=Te.default.useCallback(()=>{u||t(Sr.pickAndUploadImage({multiple:e,maxUploads:I}).then(Rl("upload")))},[t,u,e,I]),N=Te.default.useCallback(_=>{(_.key==="Backspace"||_.key==="Delete")&&!u&&r?.()},[r,u]),M=Te.default.useCallback(_=>{u||_.dataTransfer&&C&&t(C(_.dataTransfer.files,I).then(Rl("drop")))},[t,u,I,C]),z=Te.default.useCallback(_=>{_.preventDefault(),r&&b.stores.contextMenuStore.show([{label:"Delete",enabled:!u,click:r}],{location:{x:_.clientX,y:_.clientY}})},[u,r]),U=Te.default.useCallback(async _=>{if(u)return;let ne=T.current;if(!ne||document.activeElement!==ne)return;_.preventDefault();let le=_.clipboardData;le&&t(Sr.addImages(le.files))},[t,u]);fl(U);let V=Te.default.useCallback(()=>{R(!0)},[]),ae=Te.default.useCallback(()=>{R(!1)},[]),te=o[0],{fileExtensions:Q,preferredSizes:Z}=ou(o),de=o.length>0,ue=xe(o),j=F(ue)&&ue.length>0,se=!J(p)&&!J(m),Pe=Q.has("svg"),re=de&&Z.size>0&&!Pe,ee=Te.default.useCallback(()=>{te&&v?.(te,t)},[te,t,v]),ce=()=>{k(F(ue)&&ue.length>0),g?.(ue,Se(p)?p:void 0,Se(m)?m:void 0)},bo=te&&zt(te);return(0,$.jsxs)(Me,{direction:"column",children:[(0,$.jsxs)(ca,{className:x(Tl,te&&kl),onDrop:M,onDragEnter:V,onDragLeave:ae,onKeyDown:N,onDoubleClick:G,onContextMenu:z,children:[(0,$.jsx)("div",{ref:T,tabIndex:0,className:eu(S),children:(0,$.jsx)("img",{src:bo,alt:"",decoding:"async"})}),!u&&(0,$.jsx)(eo,{variant:"clean",title:e?"Choose Images\u2026":"Choose Image\u2026",onClick:G,onDoubleClick:Ma,className:Il})]},te),(0,$.jsxs)(Me,{direction:"column",gap:0,children:[!J(n)&&(0,$.jsx)(To,{title:"Resolution",children:(0,$.jsxs)(to,{enabled:re,wrapperClassName:pe,children:[(0,$.jsx)(Ce,{title:Q.size>1?"Mixed":"Auto",selected:!0,onSelect:ga,enabled:!1,visible:Pe}),!Pe&&!J(n)&&Yc.map(_=>(0,$.jsx)(Ce,{title:Qc[_],identifier:_,selected:Z.has(_),onSelect:n},_))]})}),i,Mo(a)&&!J(s)&&(0,$.jsx)(To,{title:"Alt Text",children:(0,$.jsx)(xt,{value:F(a)?a:"",onChange:s,className:pe,placeholder:l??(ho(ue)?"Mixed":"Describe Image\u2026"),enabled:de})}),!J(g)&&!J(h)&&(0,$.jsx)(To,{title:"Focal Point",children:(0,$.jsx)(_t,{doubleColumn:!0,onPresent:ce,enabled:j&&!u,onDelete:se?h:void 0,title:se?"Custom":"Add\u2026",titleColor:se?void 0:W.inputLabel,tooltip:se?"Edit Focal Point":"Add Focal Point",preview:(0,$.jsx)(B,{color:W.popupButtonPreviewIconPrimary,background:W.popupButtonPreviewIconBackground,children:(0,$.jsx)(Wo,{})})})}),c&&(0,$.jsxs)(Me,{direction:"row",className:wl,children:[(0,$.jsx)("div",{className:Jr,children:(0,$.jsx)(eo,{title:"Crop",enabled:!u&&!!te,onClick:ee,className:Jr})}),f&&(0,$.jsx)(f,{commonImageReference:ue,onChangeImages:t,altText:a,onChangeAltText:s})]})]})]})}function eu(e){let o=x(Pl),t=x(o,vl);return x(e?t:o,"wantsNativeTextAction")}function Rl(e){return o=>{let t=o[0]?oi(o[0].filename)[1].toLowerCase():"";return Ne("insert_image",{imageExtension:t,source:`picker_${e}`}),o}}function ou(e){let o=new Set,t=new Set;return e.forEach(r=>{let n=at(r);n&&(o.add(n.preferredSize||"auto"),t.add(n.fileExtension))}),{preferredSizes:o,fileExtensions:t}}var $r=d(y(),1);function Sl({multiple:e=!1,imageReference:o,onChange:t,onChangeAssetSize:r,altText:n=Xe,altTextPlaceholder:i,onChangeAltText:a,onRemoveImage:l,positionX:s,positionY:p,onChangeFocalPosition:m,maxExtraImages:c,enableFooter:P=!0}){let g=O(),h=(0,ko.useCallback)((f,u)=>wt(g,f,u),[]),v=(0,ko.useCallback)(f=>{g.stores.modalStore.push({type:"ImageCrop",initialImage:f,onChange:t,source:"image_picker"})},[t]),C=(0,ko.useMemo)(()=>{if(m)return(f,u,I)=>{g.stores.modalStore.push({type:"ImageFocalPoint",image:f,positionX:u,positionY:I,onChange:m,source:"properties"})}},[m]),b=(0,ko.useMemo)(()=>{if(m)return()=>{m(void 0,void 0)}},[m]);return(0,$r.jsx)(Me,{padding:`0 ${Ee.css.panelPadding} ${Ee.css.panelPadding}`,children:(0,$r.jsx)(Gt,{multiple:e,maxExtraImages:c,imageReferences:o?[o]:[],onChangeImages:t,onChangeAssetSize:r,altText:n,altTextPlaceholder:i,onChangeAltText:a,onRemoveImage:l,positionX:s,positionY:p,onImageBatchUpload:h,onCropClick:v,onEditFocalPoint:C,clearFocalPoint:b,enableFooter:P})})}var Nl=d(q(),1);function Ol(e,o){let t={type:"image",value:void 0};e&&F(e.value)&&(t.value=e.value),Ln(e)&&(t.valueLocalized=e.valueLocalized),Kn(e)&&(t.alt=e.alt),Zn(e)&&(t.altLocalized=e.altLocalized);let r=Jn(e);return F(r.positionX)&&(t.positionX=r.positionX),F(r.positionY)&&(t.positionY=r.positionY),Object.assign(t,o),t}var El=d(y(),1);function Ih({controlProp:e,onChange:o,onRemove:t,multiple:r=!1,maxExtraImages:n}){let i=F(e.value)?e.value:void 0,a,l,s,p=e.type==="responsiveimage";p&&(a=e.alt,l=F(e.positionX)?e.positionX:void 0,s=F(e.positionY)?e.positionY:void 0);let m=(0,Nl.useMemo)(()=>{if(i)return at(i)},[i]);function c(C,b){o(f=>Ol(f,C),b)}async function P(C){try{let b=await C;if(b.length===0)return;let f=b.filter(T=>T.filename!==""),[u,...I]=f;if(!u)return;let S;r&&I.length>0&&(S=I.map(T=>({type:"image",value:Rr(T)})));let R=tu(u,m);c(R,S)}catch(b){yo(b)}}function g(C){if(!i)return;let b=ti(i,C);c({value:b})}function h(C){c({alt:C})}function v(C,b){c({positionX:C,positionY:b})}return(0,El.jsx)(Sl,{multiple:r,maxExtraImages:n,imageReference:i,onChange:P,onChangeAssetSize:g,onChangeAltText:h,onRemoveImage:t,positionX:l,positionY:s,altText:a??Xe,onChangeFocalPosition:p?v:void 0})}function tu(e,o){return{type:"image",value:Rr(e,e.preferredSize??o?.preferredSize),positionX:void 0,positionY:void 0}}function Mh(e,o=qn){let t=O();return vo(["Tree","ActiveBundle"],()=>ri(t.tree,t.componentLoader,e,o),[e,o])}var jr=d(q(),1);var Ml="p4b05eq",Fl="prqiyvj",Bl="p1c81r2w",Wl="p1ln12j8";var Io=d(y(),1),nu=({preset:e,onSelect:o,selected:t})=>{let{isDarkMode:r}=co();return(0,Io.jsx)("button",{onClick:()=>o(e),className:x(Bl,t&&Wl),children:(0,Io.jsx)("img",{alt:e.name,className:x(Fl),src:r?e.previewImageDark:e.previewImageLight,decoding:"async"})})},Al=({selectedPreset:e,onSelectPreset:o})=>(0,Io.jsx)(Be,{title:"Preset",children:(0,Io.jsx)("div",{className:x(Ml),children:ya.map(t=>(0,Io.jsx)(nu,{preset:t,onSelect:o,selected:e&&e.name===t.name||!1},t.name))})});var Xr="dl1ddfs";var X=d(y(),1),Dl=["Focal Point","Top Left","Top Center","Top Right","Left","Center","Right","Bottom Left","Bottom Center","Bottom Right"];function au(e,o,t){return k(Mo(e)),k(Mo(o)),ho(e)||ho(o)?Pn:Se(e)||Se(o)?t?"Center":"Focal Point":t&&J(e)&&J(o)?"Focal Point":o==="top"?e==="left"?"Top Left":e==="right"?"Top Right":"Top Center":o==="bottom"?e==="left"?"Bottom Left":e==="right"?"Bottom Right":"Bottom Center":e==="left"?"Left":e==="right"?"Right":"Center"}function su(e){return e.includes("Left")?"left":e.includes("Right")?"right":"center"}function lu(e){return e.includes("Top")?"top":e.includes("Bottom")?"bottom":"center"}function pu(e){return e.size>1?!0:!e.has("stretch")}function zl({title:e="",enabled:o=!0,hasImageVariable:t=!1,imageReferences:r,onChangeImagePosition:n,fillImagePositionX:i,fillImagePositionY:a,fillImageResize:l}){let s=O();if(!pu(l))return null;let p=xe(l),m=p==="fill";m||((J(i)||Se(i))&&(i=p==="tile"?"left":"center"),(J(a)||Se(a))&&(a=p==="tile"?"top":"center"));let c=au(i,a,t),P=c==="Focal Point",g=r?xe(r):Xe;function h(){k(F(g)),s.stores.modalStore.push({type:"ImageFocalPoint",image:g,positionX:Se(i)?i:void 0,positionY:Se(a)?a:void 0,onChange:n,source:"properties"})}let v=f=>{if(f==="Focal Point"){t?n(void 0,void 0):h();return}let u=su(f),I=lu(f);n(u,I)},C=F(g),b=[];return ho(c)&&(b.push((0,X.jsx)(Ce,{selected:!0,title:"Mixed"},"mixed")),b.push((0,X.jsx)(Ce,{type:"divider"},"mixed-divider"))),Dl.forEach((f,u)=>{f==="Focal Point"&&(!m||!t&&!C&&!P)||(b.push((0,X.jsx)(Ce,{title:f,onSelect:v,identifier:f,selected:c===f},u)),u%3===0&&b.push((0,X.jsx)(Ce,{type:"divider"},u+"divider")))}),(0,X.jsx)(Be,{title:e,children:!t&&P&&C?(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(_t,{doubleColumn:!0,enabled:o,title:"Focal Point",tooltip:"Edit Focal Point",onPresent:h,onDelete:()=>v("Center"),preview:(0,X.jsx)(B,{className:x(!o&&Xr),color:W.popupButtonPreviewIconPrimary,background:W.popupButtonPreviewIconBackground,children:(0,X.jsx)(Wo,{})})})}):(0,X.jsx)(to,{enabled:o,wrapperClassName:pe,preview:(0,X.jsx)(B,{className:x(!o&&Xr),color:c==="Focal Point"?W.popupButtonPreviewIconPrimary:void 0,background:W.popupButtonPreviewIconBackground,children:c==="Focal Point"?(0,X.jsx)(Wo,{}):(0,X.jsx)(cu,{selectedOption:c,optionItems:Dl,firstPositionKey:"Top Left"})}),children:b})})}function cu({selectedOption:e,optionItems:o,firstPositionKey:t}){let r=o.indexOf(t);k(r!==-1);let n=F(e)?o.indexOf(e)-r:-1;return(0,X.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",children:Array(3).fill(null).map((i,a)=>(0,X.jsxs)("g",{transform:`translate(3 ${3+6.5*a})`,children:[(0,X.jsx)("path",{d:"M 1.5 0 C 2.328 0 3 0.672 3 1.5 C 3 2.328 2.328 3 1.5 3 C 0.672 3 0 2.328 0 1.5 C 0 0.672 0.672 0 1.5 0 Z",fill:n===a*3?W.popupButtonPreviewIconPrimary:W.popupButtonPreviewIconSecondary}),(0,X.jsx)("path",{d:"M 8 0 C 8.828 0 9.5 0.672 9.5 1.5 C 9.5 2.328 8.828 3 8 3 C 7.172 3 6.5 2.328 6.5 1.5 C 6.5 0.672 7.172 0 8 0 Z",fill:n===1+a*3?W.popupButtonPreviewIconPrimary:W.popupButtonPreviewIconSecondary}),(0,X.jsx)("path",{d:"M 14.5 0 C 15.328 0 16 0.672 16 1.5 C 16 2.328 15.328 3 14.5 3 C 13.672 3 13 2.328 13 1.5 C 13 0.672 13.672 0 14.5 0 Z",fill:n===2+a*3?W.popupButtonPreviewIconPrimary:W.popupButtonPreviewIconSecondary})]},a))})}var Ut=d(y(),1),uu=["fill","fit","stretch","tile"];function _l({title:e="",enabled:o=!0,fillImageResize:t,onChangeImageResize:r}){return(0,Ut.jsx)(Be,{title:e,children:(0,Ut.jsx)(to,{enabled:o,wrapperClassName:pe,children:uu.map(n=>(0,Ut.jsx)(Ce,{identifier:n,title:Mn,selected:t.has(n),onSelect:r},n))})})}var Gl=d(q(),1);var qo=d(y(),1),du=e=>{let o=Cl(e);return Ze(o)?Math.round(o*100):o};function Ul({onChange:e,value:o,enabled:t,title:r}){let n=du(o),i=(0,Gl.useCallback)(a=>{e(Rn(a/100,2))},[e]);return(0,qo.jsxs)(Be,{title:r,children:[(0,qo.jsx)(oe,{enabled:t,precision:0,value:n,unit:"%",onChange:i,min:1,step:1}),(0,qo.jsx)(da,{enabled:t,value:n,min:1,max:200,step:1,onChange:i})]})}var ke=d(y(),1);function Mx({imageReferences:e,fillImageResize:o,onChangeImages:t,onRemoveImage:r,onChangeImageResize:n,onChangeAssetSize:i,altText:a,onChangeAltText:l,fillImagePositionX:s,fillImagePositionY:p,onChangeImagePosition:m,fillImageTileSize:c,onChangeFillImageSize:P,onSelectTilePatternPreset:g}){let h=O(),v=xe(e),C=o&&xe(o)==="tile"&&Un(v)?ha(v):void 0,b=(0,jr.useCallback)((u,I)=>wt(h,u,I),[]),f=(0,jr.useCallback)(u=>{h.stores.modalStore.push({type:"ImageCrop",initialImage:u,onChange:t,source:"image_picker"})},[t]);return(0,ke.jsx)(Me,{direction:"column",padding:`0 ${Ee.css.panelPadding} ${Ee.css.panelPadding}`,children:(0,ke.jsx)(Gt,{imageReferences:Array.from(e),onChangeImages:t,onRemoveImage:e.size>0?r:void 0,onChangeAssetSize:i,altText:a,onChangeAltText:l,onImageBatchUpload:b,onCropClick:f,extraControls:o&&(0,ke.jsxs)(ke.Fragment,{children:[!J(n)&&(0,ke.jsx)(_l,{title:"Type",enabled:!0,fillImageResize:o,onChangeImageResize:n}),!J(g)&&xe(o)==="tile"&&(0,ke.jsx)(Al,{selectedPreset:C,onSelectPreset:g}),!J(P)&&xe(o)==="tile"&&(0,ke.jsx)(Ul,{title:"Scale",value:c,onChange:P,enabled:e.size>0}),!J(m)&&(0,ke.jsx)(zl,{title:"Position",imageReferences:e,enabled:e.size>0,fillImageResize:o,fillImagePositionX:s,fillImagePositionY:p,onChangeImagePosition:m})]})})})}var cn=d(q(),1);var Yr="https://app.framerstatic.com/checkerboard-8-776AE4U3.svg";var Qr=125,en=230,ql="s1e2z0bv",on="rb8k8h9",Ll="iihdl0y",no="swsq73a",Hl="t1ecuz16",Ro="f10aiog9",ie="i19bkgmo",Kl="hqo5o69",Vo="l7n5mtt",qe="c1424kp4",So="r1k5sn29",Zl="s1hh4y0v";var qt=d(y(),1);function Lt({colorModel:e,onChangeColorModel:o}){let t=L();return(0,qt.jsx)(ht.Provider,{value:!1,children:(0,qt.jsx)(to,{children:va.map(r=>(0,qt.jsx)(Ce,{title:r,identifier:r,selected:r===e,onSelect:o,enabled:e==="P3"||r==="P3"?!t:!0},r))})})}var Le=d(q(),1);var Jl="s1547mmt",$l="siommo3",Ht="ixdcado",Xl="csdqxt6",jl="h10f07ai",tn="i1y4xa9u",Yl="cawslk",Ql="o104dadf",rn="r1u3lu2p",ep="hz6ma7m",op="p1bt5whn",tp="iehmvlc";var rp="s1klz3oz";var np="s10ppfb8";var nn=d(y(),1);function Kt({enabled:e,className:o,onChange:t}){let r=O(),n=r.scheduler.wrapHandler(()=>{vt(r).then(i=>{i&&t(i)}).catch(yo)});return(0,nn.jsx)(eo,{className:x(np,o),enabled:e,onClick:n,title:"Sample Color",children:(0,nn.jsx)(Ei,{})})}var A=d(y(),1);function bu(e){return Math.max(0,Math.min(e,1))}function yu(e){return Le.default.useMemo(()=>{let o=me.fromString(e);return k(o,"Invalid color "+e),{hsv:o.hsv(),p3:o}},[e])}var ip=Le.default.memo(function({className:o,style:t,colorString:r,onChange:n,onChangeColorModel:i}){let a=O(),l=L(),{hsv:s,p3:p}=yu(r),{h:m,s:c,v:P,a:g}=s,h=Le.default.useRef(!1),v=Le.default.useRef(void 0),C=Le.default.useRef(m),b=Ia(),f=po(()=>{a.beginUndoGroup()},[]),u=po(()=>{a.endUndoGroup()},[]),I=po(Q=>{let Z=me.fromString(r)?.toString("p3",{a:bu(Q.progress.x??1)});k(Z,"Invalid color "+r),n(Z,!1)},[r,n]),S=po(Q=>{let Z=Q.progress.x*360,de=me.fromHSV({h:Z,s:c,v:P,a:g}).toString();n(de,!1),C.current=Z,g===0&&ge(),c===0&&b()},[c,P,g,n,b]),R=po(Q=>{let{progress:Z}=Q;h.current=!0,v.current=Z;let de=me.fromHSV({h:C.current,s:Z.x,v:1-Z.y,a:g}).toString();n(de,!0),g===0&&ge(),(Z.x===0||1-Z.y===0)&&b()},[g,n,b]),T=po(()=>{h.current=!1,v.current=void 0,u()},[]),G=Le.default.useCallback(Q=>{n(Q,!0)},[n]);c!==0&&P!==0&&!(m===0&&C.current===360)&&!h.current&&(C.current=m);let N=me.fromHSV({h:C.current,s:1,v:1,a:1}),M=N.toString(),z=N.toString("srgb"),U={"--hue":z,"--hue-p3":M},V={"--slider-alpha-0":N.toString("srgb",{a:0}),"--slider-alpha-1":z,"--slider-p3-alpha-0":N.toString("p3",{a:0}),"--slider-p3-alpha-1":M},ae=v.current?.x??c,te=v.current?.y??1-P;return h.current||(v.current=void 0),(0,A.jsxs)("div",{className:o,style:t,children:[(0,A.jsx)("div",{className:x($l,l&&rn),style:U,children:(0,A.jsxs)(oo,{onDragStart:f,onDrag:R,onDragEnd:T,className:Jl,enabled:!l,children:[(0,A.jsx)("div",{className:Ht,style:an(ae,te,l)}),(0,A.jsx)(Tu,{hue:C.current})]})}),(0,A.jsx)("div",{className:Xl,children:(0,A.jsxs)("div",{className:x(l&&rn,jl),children:[(0,A.jsx)(oo,{onDragStart:f,onDrag:S,onDragEnd:u,enabled:!l,className:ep,children:(0,A.jsx)("div",{className:tn,children:(0,A.jsx)("div",{className:Ht,style:an(C.current/360,.5,l)})})}),(0,A.jsxs)(oo,{onDragStart:f,onDrag:I,onDragEnd:u,enabled:!l,style:V,className:Ql,children:[(0,A.jsx)("div",{className:Yl}),(0,A.jsx)("div",{className:tn,children:(0,A.jsx)("div",{className:Ht,style:an(g,.5,l)})})]})]})}),(0,A.jsx)(ku,{value:p,onChange:G,enabled:!l}),(0,A.jsxs)("div",{className:tp,children:[(0,A.jsx)(Lt,{colorModel:"P3",onChangeColorModel:i}),jo()||"EyeDropper"in window?(0,A.jsx)(Kt,{onChange:G,enabled:!l,className:rp}):null]})]})});function an(e,o,t){return{left:`${e*100}%`,top:`${o*100}%`,pointerEvents:t?"none":void 0}}function ap(e,o,t){let r=Math.max(Math.ceil((o-e)/(t||1)),0),n=[];for(let i=0;i<r;i++)n[i]=e,e+=t;return n}var hu=ap(0,1,.01),xu=ap(1,0,-.01);function Cu(e){return hu.map(o=>{let{s:t,v:r}=me.fromHSV({h:e,s:o,v:1,a:1},"srgb").hsv();return[t,r]})}function Pu(e){return xu.map(o=>{let{s:t,v:r}=me.fromHSV({h:e,s:1,v:o,a:1},"srgb").hsv();return[t,r]})}var vu=pr([0,1],[0,en]),wu=pr([0,1],[0,Qr]);function Tu({hue:e}){let o=Le.default.useMemo(()=>{let t="";for(let r of Cu(e).concat(Pu(e)))t+=`${vu(r[0])}, ${wu(1-r[1])} `;return t},[e]);return(0,A.jsx)("svg",{viewBox:`0 0 ${en} ${Qr}`,role:"presentation",className:op,children:(0,A.jsx)("polyline",{points:o})})}function sn(e){return Math.trunc(Math.min(Math.max(e,0),1)*1e3)/1e3}function Zt(e,o,t){return Le.default.useCallback(r=>{let n=e==="a"?r/100:r,i=o[e];if(n===i)return;let a=new me({r:o.r,g:o.g,b:o.b,a:o.a??1}).toString("p3",{[e]:n});t(a),e==="a"&&n===0&&ge()},[e,o,t])}function ku({value:e,onChange:o,enabled:t}){let r=Zt("r",e,o),n=Zt("g",e,o),i=Zt("b",e,o),a=Zt("a",e,o);return(0,A.jsxs)("div",{className:x(no,Ro),children:[(0,A.jsx)(oe,{value:sn(e.r),onChange:r,min:0,max:1,step:.01,enabled:t,className:ie,wrapperClassName:Vo,title:"Red","data-testid":"p3-red-color-input"}),(0,A.jsx)(oe,{value:sn(e.g),onChange:n,min:0,step:.01,max:1,enabled:t,className:ie,wrapperClassName:qe,title:"Green","data-testid":"p3-green-color-input"}),(0,A.jsx)(oe,{value:sn(e.b),onChange:i,min:0,max:1,step:.01,enabled:t,className:ie,wrapperClassName:qe,title:"Blue","data-testid":"p3-blue-color-input"}),(0,A.jsx)(oe,{value:We(e?.a??1),onChange:a,unit:"%",min:0,step:1,max:100,enabled:t,className:ie,wrapperClassName:So,title:"Alpha","data-testid":"p3-alpha-color-input"})]})}var Ho=d(y(),1);function sp({value:e,onChange:o,sampleColor:t,setColorModel:r,enabled:n}){let i=(s,p,m)=>{if(s.match(/^#?[a-f\d]{1,2}$/iu)){let g=s.startsWith("#")?s.slice(1):s;g.length===1?g=g.repeat(6):g.length===2&&(g=g.repeat(3)),s="#"+g}if(!D.isValid(s))return;(s.startsWith("hsl(")||s.startsWith("hsla("))&&r("HSL"),(s.startsWith("rgb(")||s.startsWith("rgba("))&&r("RGB"),s.match(/^[a-f\d]+$/iu)&&(s="#"+s),s.startsWith("hsv")&&(s=Y.toHslString(Y(s))),/^[a-z]+$/i.test(s.trim())&&(s=Y.toHslString(Y(s)));let c=D.toRgb(s);if(s.startsWith("rgba(")||s.startsWith("hsla(")||s.startsWith("#")&&s.length===9?D.getAlpha(s)===0&&ge():c.a=e.a,Y.equal(Y(c),Y(e)))return m();o(D.rgbaToString(c))},a=s=>{let p={...e,a:s/100},m=D.rgbaToString(p);m&&o(m),p.a===0&&ge()},l=s=>{Ta("sampleColor")===Tt(s)&&t()};return(0,Ho.jsxs)("div",{className:x(no,Hl),children:[(0,Ho.jsx)(xt,{value:D.rgbToHexValue(e).toLocaleUpperCase(),onChange:i,onKeyDown:l,className:x(ie,Kl),"data-testid":"hex-color-input"}),(0,Ho.jsx)(oe,{value:We(e.a),onChange:a,unit:"%",min:0,step:1,max:100,enabled:n,className:ie,title:"Alpha","data-testid":"hex-alpha-color-input"})]})}var lp=d(q(),1);var mo=d(y(),1);function Jt(e,o,t){return lp.default.useCallback(r=>{let n=e!=="h"?r/100:r;if(n===o[e])return;let i={...o,[e]:n};t(D.hslToString(i)),e==="a"&&n===0&&ge()},[e,o,t])}function pp({value:e,onChange:o,enabled:t}){let r=Jt("h",e,o),n=Jt("s",e,o),i=Jt("l",e,o),a=Jt("a",e,o);return(0,mo.jsxs)("div",{className:rt(no,Ro),children:[(0,mo.jsx)(oe,{value:e.h,onChange:r,min:0,max:360,enabled:t,className:ie,wrapperClassName:Vo,title:"Hue","data-testid":"hsl-hue-color-input"}),(0,mo.jsx)(oe,{value:We(e.s),onChange:n,min:0,max:100,enabled:t,className:ie,wrapperClassName:qe,title:"Saturation","data-testid":"hsl-saturation-color-input"}),(0,mo.jsx)(oe,{value:We(e.l),onChange:i,min:0,max:100,enabled:t,className:ie,wrapperClassName:qe,title:"Lightness","data-testid":"hsl-lightness-color-input"}),(0,mo.jsx)(oe,{value:We(e.a),onChange:a,unit:"%",min:0,max:100,enabled:t,className:ie,wrapperClassName:So,title:"Alpha","data-testid":"hsl-alpha-color-input"})]})}var cp=d(q(),1);var fo=d(y(),1);function $t(e,o,t){return cp.default.useCallback(r=>{let n=e==="a"?r/100:r;if(n===o[e])return;let i={...o,[e]:n};t(D.rgbaToString(i)),e==="a"&&n===0&&ge()},[e,o,t])}function up({value:e,onChange:o,enabled:t}){let r=$t("r",e,o),n=$t("g",e,o),i=$t("b",e,o),a=$t("a",e,o);return(0,fo.jsxs)("div",{className:rt(no,Ro),children:[(0,fo.jsx)(oe,{value:e.r,onChange:r,min:0,max:255,enabled:t,className:ie,wrapperClassName:Vo,title:"Red","data-testid":"rgb-red-color-input"}),(0,fo.jsx)(oe,{value:e.g,onChange:n,min:0,max:255,enabled:t,className:ie,wrapperClassName:qe,title:"Green","data-testid":"rgb-green-color-input"}),(0,fo.jsx)(oe,{value:e.b,onChange:i,min:0,max:255,enabled:t,className:ie,wrapperClassName:qe,title:"Blue","data-testid":"rgb-blue-color-input"}),(0,fo.jsx)(oe,{value:We(e.a),onChange:a,unit:"%",min:0,max:100,enabled:t,className:ie,wrapperClassName:So,title:"Alpha","data-testid":"rgb-alpha-color-input"})]})}var K=d(y(),1);function ln(e,o){switch(o){case"hsl":return D.hsvToHSLString(e);default:return D.hsvToRgbString(e)}}var Xt=class extends cn.default.Component{constructor(){super(...arguments);be(this,"state",{dragging:!1});be(this,"inputRef",cn.default.createRef());be(this,"currentHue",null);be(this,"dragPosition",null);be(this,"onSaturationBrightnessDrag",t=>{let{progress:r}=t,n=D.getAlpha(this.props.color),i={h:this.currentHue||0,s:r.x,v:1-r.y,a:n},a=Y(this.props.color).format,l=ln(i,a);this.dragPosition=r,l&&this.onChange(l,!1),n===0&&ge()});be(this,"setColorModel",this.props.engine.scheduler.wrapHandler(t=>{switch(t){case"P3":{if(Y.isP3String(this.props.color))break;let r=me.fromRGBString(this.props.color)?.toString();k(r,"Invalid color "+this.props.color),this.onChange(r,!0);break}default:{if(!Y.isP3String(this.props.color))break;let r=me.fromString(this.props.color)?.toString("srgb");k(r,"Invalid color "+this.props.color),this.onChange(r,!0);break}}this.props.engine.stores.persistedUserDefaults.colorModel=t}));be(this,"onSaturationBrightnessDragEnd",this.props.engine.scheduler.wrapHandler(()=>{this.onDragEnd()}));be(this,"onHueDrag",this.props.engine.scheduler.wrapHandler(t=>{let r=Y(this.props.color),n=D.toHSV(this.props.color);this.currentHue=t.progress.x*360,n.h=this.currentHue,n.s===0&&this.forceUpdate();let i=ln(n,r.format);i&&this.onChange(i,!1),n.a===0&&ge()}));be(this,"onOpacityDrag",this.props.engine.scheduler.wrapHandler(t=>{let r=D.toHSV(this.props.color);r.a=t.progress.x;let n=ln(r,Y(this.props.color).format);n&&this.onChange(n,!1)}));be(this,"onChange",(t,r)=>{this.props.onChange(t,r??!this.state.dragging)});be(this,"onDragStart",this.props.engine.scheduler.wrapHandler(()=>{this.setState({dragging:!0}),this.props.engine.beginUndoGroup()}));be(this,"onDragEnd",this.props.engine.scheduler.wrapHandler(()=>{this.props.engine.endUndoGroup(),this.setState({dragging:!1}),this.props.onChange(this.props.color,!0)}))}render(){if(Y.isP3String(this.props.color))return(0,K.jsx)(ip,{colorString:this.props.color,className:this.props.className,style:dp,onChange:this.props.onChange,onChangeColorModel:this.setColorModel});let{color:t,className:r}=this.props,n=D.toHSV(t);this.currentHue?n.s!==0&&n.v!==0&&!(n.h===0&&this.currentHue===360)&&!this.state.dragging&&(this.currentHue=Math.round(n.h)):this.currentHue=Math.round(n.h);let i=this.currentHue,a=1-n.v,l=n.s;return this.dragPosition!==null&&(a=this.dragPosition.y,l=this.dragPosition.x),!this.state.dragging&&this.dragPosition!==null&&(this.dragPosition=null),(0,K.jsx)(ht.Consumer,{children:s=>(0,K.jsxs)("div",{className:r,style:dp,children:[(0,K.jsx)("div",{className:x(ql,s&&on),style:Ru(i),children:(0,K.jsx)(oo,{onDragStart:this.onDragStart,onDrag:this.onSaturationBrightnessDrag,onDragEnd:this.onSaturationBrightnessDragEnd,style:Vu,enabled:!s,children:(0,K.jsx)("div",{style:pn(l,a,s)})})}),(0,K.jsx)("div",{style:{width:"100%",display:"flex",margin:`${Ee.css.inputSpacing} 0`},children:(0,K.jsxs)("div",{className:x(s&&on),style:{display:"flex",flexDirection:"column",flexGrow:1,justifyContent:"center"},children:[(0,K.jsx)(oo,{onDragStart:this.onDragStart,onDrag:this.onHueDrag,onDragEnd:this.onDragEnd,enabled:!s,style:Su,children:(0,K.jsx)("div",{style:mp,children:(0,K.jsx)("div",{style:pn(i/360,void 0,s)})})}),(0,K.jsxs)(oo,{onDragStart:this.onDragStart,onDrag:this.onOpacityDrag,onDragEnd:this.onDragEnd,enabled:!s,style:Ou(t),children:[(0,K.jsx)("div",{style:Eu}),(0,K.jsx)("div",{style:mp,children:(0,K.jsx)("div",{style:pn(n.a,void 0,s)})})]})]})}),(0,K.jsx)(Iu,{colorModel:this.props.colorModel,colorString:this.props.color,onChange:this.onChange,sampleColor:this.props.sampleColor,setColorModel:this.setColorModel}),(0,K.jsxs)("div",{className:Ll,children:[(0,K.jsx)(Lt,{colorModel:this.props.colorModel==="P3"?"RGB":this.props.colorModel,onChangeColorModel:this.setColorModel}),jo()||"EyeDropper"in window?(0,K.jsx)(Kt,{onChange:this.onChange,enabled:!s,className:Zl}):null]})]})})}};function Iu({colorModel:e,colorString:o,onChange:t,sampleColor:r,setColorModel:n}){let i=L();switch(e){case"HSL":return(0,K.jsx)(pp,{value:D.toHSL(o),onChange:t,enabled:!i});case"HEX":return(0,K.jsx)(sp,{value:D.toRgb(o),onChange:t,sampleColor:r,setColorModel:n,enabled:!i});default:return(0,K.jsx)(up,{value:D.toRgb(o),onChange:t,enabled:!i})}}function Ru(e){return{backgroundColor:`${D.toColorPickerSquare(e)}`}}var Vu={position:"absolute",top:1,right:1,bottom:1,left:1},dp={position:"relative"},fp={position:"relative",width:"100%",height:8,overflow:"visible",borderRadius:6},Su={...fp,marginBottom:8,backgroundImage:"linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"};function Ou(e){return{...fp,backgroundImage:`linear-gradient(to right, ${D.setAlpha(e,0)}, ${D.setAlpha(e,1)})`,backgroundRepeat:"no-repeat"}}var mp={position:"absolute",height:"100%",top:0,left:4,right:4},Nu={position:"absolute",width:14,height:14,top:"50%",transform:"translateX(-50%) translateY(-50%)",borderRadius:"50%",boxShadow:"inset 0 0 0 3px white, inset 0 0 0 4px rgba(0,0,0,.1), 0 0 0 1px rgba(0,0,0,.1)",cursor:Ci.button};function pn(e,o=.5,t){return{...Nu,left:`${e*100}%`,top:`${o*100}%`,pointerEvents:t?"none":void 0}}var Eu={position:"absolute",width:"100%",height:"100%",backgroundImage:`url(${Yr})`,backgroundRepeat:"repeat",borderRadius:10,zIndex:-1};var gp="c2orl3y",jC="c1svq14t",YC="c1j2rli7",bp="s1cbpxcr",yp="sxhu8tk",hp="c1yp40qr",xp="czr60e9",Cp="c1azw9i";var ye=d(q(),1);var go=d(y(),1);function Pp({value:e,colorModel:o,isDarkMode:t,onChangeColor:r}){let n=O(),[i,a]=(0,ye.useState)(null),l=(0,ye.useRef)(null),[s,p]=(0,ye.useState)({}),[m,c]=(0,ye.useState)(null),[P,g]=(0,ye.useState)(!1),h=Fu({token:null,isDarkMode:t,imageFill:!1,value:e,colorStopSelection:void 0,pendingExternalColor:m,colorForExternalColor:s,setPendingExternalColor:c}),v=(0,ye.useCallback)(f=>{let I=f.target.scrollTop>0;I!==P&&g(I)},[P]),{handleChangeColor:C,handleSampleColor:b}=Bu({isDarkMode:t,onChangeColor:r,setColorForExternalColor:p,setPendingExternalColor:c});return e!==i&&a(e),(0,go.jsx)(En.Provider,{value:"color-picker",children:(0,go.jsx)("div",{className:x(gp),children:(0,go.jsx)(la,{onScroll:v,ref:l,className:bp,children:(0,go.jsx)("div",{className:yp,children:(0,go.jsx)("div",{className:x(hp,xp),children:(0,go.jsx)(Xt,{onChange:C,color:h,colorModel:o,className:Cp,sampleColor:b,engine:n})})})})})})}function Fu({isDarkMode:e,token:o,imageFill:t,value:r,colorStopSelection:n,pendingExternalColor:i,colorForExternalColor:a,setPendingExternalColor:l}){let s;return o?s=o.colorForMode(e):t?s="white":In(r)?s=r:s=r?.stops.find(p=>p.id===n)?.value||r?.stops[0]?.value||"transparent",i===s&&l(null),a[i??s]??s}function Bu({isDarkMode:e,onChangeColor:o,selection:t,colorStopSelection:r,setColorForExternalColor:n,setPendingExternalColor:i}){let a=O(),l=(0,ye.useCallback)((c,P,g)=>{if(pt(c))return;let h=c,v=Ye(h);if(v){let b=je(h),f=b?Po(b,a.tree):null;f&&(h=f.colorForMode(e))}let C=Y.isP3String(h)?h:D.toRgbString(h);n({[C]:h}),i(C),queueMicrotask(()=>{o(v?c:C,P,g)})},[e,o,n,i]),s=(0,ye.useCallback)((c,P=!0)=>{p(t),l(c,r,P)},[t,r,l]),p=(0,ye.useCallback)(c=>{if(!c)return;a.tree.getNodes(c).some(h=>Sn(h)&&h.resolveValue("opacity")===0)&&Pt({type:"add",variant:"info",icon:"color-wheel",text:"Increase layer opacity to see changes",key:"color-change-null-opacity",duration:3e3})},[]),m=(0,ye.useCallback)(()=>{vt(a).then(a.scheduler.wrapHandler(c=>{c&&s(c)})).catch(yo)},[s]);return{handleChangeColor:s,handleSampleColor:m}}var Wu="framerComponentPresetProps",vp;async function Au(e){if(wn.isTest)return[];let o=[st.codeblock,st.youtube,st.vimeo],{modules:t}=await e.stores.modulesStore.lookUpModules(o.map(ni));return o.map((r,n)=>{let i=t[n];k(i,"Can't find module"),k(r,"Component is undefined"),k(i.files.module,"Module file is not set");let a=vn(i.id,i.saveId,i.files.module,"exportSpecifier"in r&&Gn(r.exportSpecifier)?r.exportSpecifier:"default");return{name:r.title,moduleId:i.id,componentIdentifier:a.value}})}function Du(e){return vp??=Au(e),vp}function zu(e){let o=[],t=e.tree.getExternalModulesListNode();for(let r of t?.children??[])r.annotations&&Wu in r.annotations&&o.push({name:r.title,moduleId:r.id,componentIdentifier:r.codeComponentIdentifier});return o}function _u(e,o){let t=new Set;for(let r of o)t.add(r.moduleId);return e.filter(r=>!t.has(r.moduleId)).concat(o).sort((r,n)=>r.name.localeCompare(n.name))}async function PP(e){let o=await Du(e),t=zu(e);return _u(o,t)}var jt=d(q(),1);var wp=d(y(),1),EP=(0,jt.memo)(function(o){let t=qu(),{value:r}=Uu(o.value,t);return lr(F(r),"value must be a string"),(0,wp.jsx)(Pp,{...o,colorModel:t.colorModel,isDarkMode:t.isDarkMode,value:r,onChangeColor:o.onChange})});function Gu(e){return"selection"in e&&"selectedGradientStopId"in e}function Uu(e,o){let t=O(),r,n=null;if(F(e)?r=e:Gu(o)?r=e.stops.find(({id:i})=>i===o.selectedGradientStopId)?.value??"transparent":r="transparent",Ye(r)){let i=je(r),a=i?Po(i,t.tree):null;tt(a)&&(n=a),n||(e=it(r)||"transparent")}return{value:e,token:n}}function qu(){let e=O();lr(hi(e),"engine must be an on page engine");let o=wo(()=>e.stores.persistedUserDefaults.colorModel,[],e.stores.persistedUserDefaults);return(0,jt.useMemo)(()=>({colorModel:o,isDarkMode:!0}),[o])}var Sp=d(q(),1);var Tp="ia3rrjn";var Ip=d(y(),1);function kp({className:e,children:o,...t}){return(0,Ip.jsx)("div",{className:x(Tp,e),...t,children:o})}var Qt=d(y(),1),un=/\[([^\]]+)\]\((https?:\/\/[\w./?=#%&-]+)\)/gu,dn=/\*([^*]+)\*/gu,Yt=/(\n)/gu;function Ko(e,o,t=0,r=[un,dn,Yt]){let[n,i]=r.map(s=>(s.lastIndex=t,s.exec(e))).reduce((s,p,m)=>{let[c]=s;if(c&&p){if(c.index<p.index)return s}else if(c)return s;return[p,r[m]]},[null,void 0]);if(!n||!i)return t===e.length?[]:[e.substring(t)];let a=[];n.index-t>0&&a.push(e.substring(t,n.index));let l=i.lastIndex;if(i===un){let[s,p,m]=n,c=Ko(p,o,0,[dn,Yt]);a.push((0,Qt.jsx)("a",{href:m,target:"_blank",...o,children:c},n.index))}if(i===dn){let[s,p]=n,m=Ko(p,o,0,[un,Yt]);a.push((0,Qt.jsx)("em",{children:m},n.index))}return i===Yt&&a.push((0,Qt.jsx)("br",{},n.index)),a.push(...Ko(e,o,l)),a}var Rp="d1ykgdi6",Vp="w1wgf3m";var mn=d(y(),1),$P=Sp.default.memo(function({fullWidth:o=!1,withMargin:t=!0,description:r}){let n=yt(void 0),i=Ko(r,{tabIndex:n});return(0,mn.jsx)(Be,{title:o?void 0:" ",children:(0,mn.jsx)(kp,{className:x(Rp,t?Vp:void 0,o?_a:pe),children:i})})});var Op="p5inzda",Np="ptswoqr",Ep="p14s1oge";var er=d(y(),1);function ov({header:e,children:o,testId:t,className:r,...n}){return(0,er.jsxs)("div",{className:x(Np,!!e&&Ep,r),"data-testid":t,...n,children:[e,(0,er.jsx)("div",{className:Op,children:o})]})}export{ju as a,Da as b,Rt as c,za as d,pe as e,_a as f,Fr as g,Za as h,Kd as i,pm as j,cm as k,um as l,dm as m,mm as n,fm as o,gm as p,bm as q,Qp as r,ym as s,hm as t,xm as u,Cm as v,Pm as w,vm as x,wm as y,Tm as z,km as A,Im as B,ss as C,us as D,ds as E,ms as F,ys as G,wf as H,cc as I,Tf as J,Ge as K,kf as L,mc as M,hs as N,xs as O,Yp as P,Ja as Q,Wr as R,Ar as S,Ic as T,Rc as U,Os as V,Ns as W,To as X,Be as Y,Mg as Z,_s as _,Lg as $,Ks as aa,B as ba,wb as ca,Wt as da,Db as ea,_t as fa,zl as ga,cu as ha,_l as ia,Cl as ja,zt as ka,fl as la,Lb as ma,Zu as na,Gt as oa,ou as pa,Mx as qa,Yr as ra,We as sa,ay as ta,Xt as ua,gp as va,jC as wa,YC as xa,bp as ya,yp as za,hp as Aa,Cp as Ba,Fu as Ca,Bu as Da,Du as Ea,zu as Fa,_u as Ga,PP as Ha,EP as Ia,Uu as Ja,kp as Ka,$P as La,Wa as Ma,$u as Na,Jc as Oa,by as Pa,Sl as Qa,Ol as Ra,Ih as Sa,ov as Ta,Mh as Ua,xy as Va,Cy as Wa};
//# sourceMappingURL=https://app.framerstatic.com/chunk-GDYBBJ2K.mjs.map
