import{De as Ji,Ee as Hi,Ge as Qi,Jb as _i,Oe as Ui,Pf as Yi,Qc as Re,Qf as Lr,Rf as zj,Sf as mt,Td as Pi,Tf as gj,Uf as Zi,Wc as xi,Xf as Aa,Yf as ja,ab as Ri,bb as Ii,cg as ea,i as Qo,ke as Ni,nc as yi,oc as Mi,pd as vi,rb as hi,sb as gi,tb as bi,ve as Li,xa as Fi,xc as Ci,xe as Ki,yc as Di,zc as Oi}from"https://app.framerstatic.com/chunk-44NXH25V.mjs";import{h as he,r as Wi}from"https://app.framerstatic.com/chunk-M5QYI4KS.mjs";import{d as Et}from"https://app.framerstatic.com/chunk-XOSLSLUU.mjs";import{Nc as ra}from"https://app.framerstatic.com/chunk-HSGPT2DJ.mjs";import{a as zi}from"https://app.framerstatic.com/chunk-67PXYNDJ.mjs";import{a as ta}from"https://app.framerstatic.com/chunk-V3C5CSFI.mjs";import{b as EA}from"https://app.framerstatic.com/chunk-4OLTEPHX.mjs";import{u as Gi}from"https://app.framerstatic.com/chunk-VQLYEPJG.mjs";import{u as Bt}from"https://app.framerstatic.com/chunk-SWGLHV6B.mjs";import{Bb as di,Bg as fi,Cb as $i,Db as Ei,M as Be,fe as Bi,qb as ci,ua as Uo,vb as ui,xf as pi,yf as mi}from"https://app.framerstatic.com/chunk-5POO65PD.mjs";import{f as DA}from"https://app.framerstatic.com/chunk-2AYHTJDO.mjs";import{a as Xi}from"https://app.framerstatic.com/chunk-NKDWNR6M.mjs";import{Ve as Nr}from"https://app.framerstatic.com/chunk-4AWVAEWD.mjs";import{An as wr,Cn as qr,F as Qj,Hb as Po,J as vo,Jd as xr,Jh as Vj,Kh as pe,Ld as Ho,Lh as Vo,Of as Uj,Wd as kt,Wf as vr,Zj as Xo,b as Or,go as ki,jc as To,l as Mo,m as Co,n as Do,o as Oo,p as at,q as st,r as xo,uc as wo,yn as hj,zn as li}from"https://app.framerstatic.com/chunk-RD5RW7AD.mjs";import{f as So}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import{a as Si}from"https://app.framerstatic.com/chunk-7W7O47BZ.mjs";import{b as qo}from"https://app.framerstatic.com/chunk-GZI43NW3.mjs";import{a as Kr,c as SA}from"https://app.framerstatic.com/chunk-OIGMOVXH.mjs";import{b as Ti,c as wi,e as qi,f as kA,g as pt}from"https://app.framerstatic.com/chunk-LZDNIQ2U.mjs";import{a as Ie,b as dt,c as $t,d as Vi}from"https://app.framerstatic.com/chunk-ZWH2IB45.mjs";import{$r as lj,Am as ho,As as Xj,Bs as si,Dj as Ro,Fj as Hj,K as lA,Lm as go,Mn as bo,Qc as Eo,Sc as Bo,Tr as zo,Vr as Wo,Xc as wA,Zr as Yo,_r as UA,as as me,bd as de,bs as Zo,c as Mr,cd as HA,cp as _o,cs as Ai,dd as $e,ds as ji,ed as Ee,ek as Io,es as fe,fa as oo,fs as Pr,gs as ei,hd as po,hs as Rj,id as Kj,ip as yo,is as Ge,jd as mo,je as fo,js as Fe,kb as Cr,ke as QA,ks as ti,ld as yA,ls as ri,ms as ct,ns as ni,ob as co,ps as oi,rs as ii,sd as fA,sr as No,ss as ai,tj as Go,tr as lt,uj as Fo,ur as Lo,vr as Ko,vs as Ij,wc as $o,wd as Jj,wr as Jo,ws as Tr,xd as Fj,xe as Dr,xs as X,ys as ut,zc as ot}from"https://app.framerstatic.com/chunk-HLNLVHBF.mjs";import{W as uo,aa as it}from"https://app.framerstatic.com/chunk-3CHH3HAB.mjs";import{p as CA}from"https://app.framerstatic.com/chunk-4XEPQHVZ.mjs";import{b as ro}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{b as GA,e as sj,g as io,h as ao,j as nt,k as so,m as lo,r as ko}from"https://app.framerstatic.com/chunk-CMAEAGWD.mjs";import{b as no}from"https://app.framerstatic.com/chunk-M6MHZBU3.mjs";import{g as to}from"https://app.framerstatic.com/chunk-JLNGOKO7.mjs";import{c as yr,k as Sr}from"https://app.framerstatic.com/chunk-5YIBQAFN.mjs";import{Aa as Ao,Ba as jj,Ca as jo,Da as eo,Oa as ue,T as $A,V as Xn,a as Vn,aa as KA,ha as zn,ia as Aj,ja as _A,ka as JA,ma as aj,na as tt,oa as gr,pa as rt,qa as Wn,ra as AA,ta as Yn,wa as Lj,xa as br,ya as Zn,za as _r}from"https://app.framerstatic.com/chunk-5V7XAOIL.mjs";import{a as I,b as Gj}from"https://app.framerstatic.com/chunk-YOOGIIWU.mjs";import{a as hr}from"https://app.framerstatic.com/chunk-HMF7T2NG.mjs";import{c as Ek,d as Un,e as Rr,j as P,k as nA,l as LA,m as et,o as Ir}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var rk=Ek((RM,tk)=>{"use strict";var mr=Object.prototype.hasOwnProperty,ek=Object.prototype.toString,zl=Object.defineProperty,Wl=Object.getOwnPropertyDescriptor,Yl=function(e){return typeof Array.isArray=="function"?Array.isArray(e):ek.call(e)==="[object Array]"},Zl=function(e){if(!e||ek.call(e)!=="[object Object]")return!1;var j=mr.call(e,"constructor"),t=e.constructor&&e.constructor.prototype&&mr.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!j&&!t)return!1;var r;for(r in e);return typeof r>"u"||mr.call(e,r)},Ak=function(e,j){zl&&j.name==="__proto__"?zl(e,j.name,{enumerable:!0,configurable:!0,value:j.newValue,writable:!0}):e[j.name]=j.newValue},jk=function(e,j){if(j==="__proto__")if(mr.call(e,j)){if(Wl)return Wl(e,j).value}else return;return e[j]};tk.exports=function A(){var e,j,t,r,n,o,i=arguments[0],a=1,s=arguments.length,l=!1;for(typeof i=="boolean"&&(l=i,i=arguments[1]||{},a=2),(i==null||typeof i!="object"&&typeof i!="function")&&(i={});a<s;++a)if(e=arguments[a],e!=null)for(j in e)t=jk(i,j),r=jk(e,j),i!==r&&(l&&r&&(Zl(r)||(n=Yl(r)))?(n?(n=!1,o=t&&Yl(t)?t:[]):o=t&&Zl(t)?t:{},Ak(i,{name:j,newValue:A(l,o,r)})):typeof r<"u"&&Ak(i,{name:j,newValue:r}));return i}});var ej=Rr(no(),1),na="dismissedInstantNPMToast",oa="showedInstantNPMToast",ia="instant-npm-toast",mB=()=>window.localStorage.getItem(oa)==="true",aa=()=>window.localStorage.getItem(na)==="true";function Bk(){return(0,ej.jsxs)(ej.Fragment,{children:[(0,ej.jsx)(Nr,{children:"You installed an external NPM library."}),(0,ej.jsxs)("a",{href:"https://www.framer.com/developers/#faq",target:"_blank",children:[" ",(0,ej.jsx)(Nr,{children:"Learn More"})]})]})}function sa(){window.localStorage.setItem(oa,"true"),EA({type:"add",variant:"info",text:(0,ej.jsx)(Bk,{}),key:ia,duration:1/0,action:{title:"Dismiss",onClick:()=>window.localStorage.setItem(na,"true")}})}function fB(){EA({type:"remove",key:ia})}var la="https://app.framerstatic.com/framer_compiler_bg-UGK2KYHD.wasm";var mk={track:!0};function ka(A){let e={...A,event:"external_component_insert"};ro(e,mk)}var tj=KA("compiler");async function PB(){await _e()}function ca(A){return{code:`const err = new Error(${JSON.stringify(String(A))}); err.name = "CompilationError"; throw err;`,sourceMap:void 0,annotations:{},exportedNames:[],reExportedModules:[],imports:{absolute:[],relative:[],bare:[]}}}function ua(A,e,j){let t={...e.exports};j&&(t.__FramerMetadata__={type:"variable"},A=A.concat(`
export const __FramerMetadata__ = `,JSON.stringify({exports:t})));let r=Object.entries(t).filter(([,o])=>o.type!=="tsType").map(([o])=>o),n={};for(let[o,i]of Object.entries(e.exports))i.annotations&&(n[o]=i.annotations);return{moduleCode:A,annotations:n,exportedNames:r}}async function da({localId:A,name:e,source:j,includeSourceMap:t=!0}){let r=await _e();try{let{code:n,metadata:o,map:i}=await r.transformSync(j,{fileName:SA(e).source,framerContractVersion:1,mediaType:"tsx",minify:!1,compress:!1,mangle:!1,sourceMap:t,useReactRefresh:!0}),a=`
if (!window.$RefreshReg$) throw new Error("React refresh preamble was not loaded. Something is wrong.");
const prevRefreshReg = window.$RefreshReg$;
const prevRefreshSig = window.$RefreshSig$;
window.$RefreshReg$ = window.reactRefreshRuntime.getRefreshReg("${A}");
window.$RefreshSig$ = window.reactRefreshRuntime.createSignatureFunctionForTransform;

${n}

window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;`,{moduleCode:s,annotations:l,exportedNames:k}=ua(a,o,!0);return{code:s,sourceMap:i??void 0,imports:o.requestedModules,annotations:l,exportedNames:k,reExportedModules:o.reExportedModules}}catch(n){let o=`Failed to compile development module ${e}: ${n}`;return tj.debug(o,"(enable trace logging to see full source)"),tj.trace(j),A.startsWith("codeFile/")||(tj.reportCriticalError(new Error(o,{cause:n}),{moduleName:e,moduleSource:j}),DA("application_error",{message:o,area:"compiler"})),ca(n)}}async function TB(A,e){await(await _e()).transformSync(e,{fileName:SA(A).source,framerContractVersion:1,mediaType:"tsx",minify:!0,compress:!1,mangle:!1,sourceMap:!1,useReactRefresh:!1})}async function $a({name:A,source:e,type:j,includeSourceMap:t=!0,addFramerMetadata:r=!0,telemetrySession:n}){let o=Re(10),i=`compile-${A}-${o}`,a=`\u{1F4DD} Compile ${A}`;tj.debug("Compiling module",A,"; with source map:",t),Ie(i);let s=await _e(),l=n?.start("transform"),k=j==="collection";try{let{code:c,map:u,metadata:d}=await s.transformSync(e,{fileName:SA(A).source,framerContractVersion:1,mediaType:"tsx",minify:!0,compress:k,mangle:k,sourceMap:t,useReactRefresh:!1}),{moduleCode:E,annotations:m,exportedNames:$}=ua(c,d,r);return{code:E,sourceMap:u??void 0,imports:d.requestedModules,annotations:m,exportedNames:$,reExportedModules:d.reExportedModules}}catch(c){let u=`Failed to compile module ${A}: ${c}`;return tj.debug(u,"(enable trace logging to see full source)"),tj.trace(e),A.startsWith("codeFile/")||(tj.reportCriticalError(new Error(u,{cause:c}),{moduleName:A,moduleSource:e}),DA("application_error",{message:u,area:"compiler"})),ca(c)}finally{l?.end(),Ba(a,i)}}async function Ea(A){let j=`analyze-imports-${Re(10)}`,t="\u{1F575}\u{1F3FB} Analyze Imports";Ie(j);try{return{ok:!0,value:await(await _e()).analyzeImports(A)}}catch(r){return tj.warn("Failed to analyze imports:",r),r instanceof Error?{ok:!1,error:r}:{ok:!1,error:new Error(`${r}`,{cause:r})}}finally{Ba(t,j)}}var ft;async function _e(){if(!ft){let A=new Worker(Yo("./modulesCompilerWorker.js")),e=zo(A);ft=e.initWithPathToWasm(la).then(()=>({transformSync:e.transformSync,analyzeImports:e.analyzeImports})),ft.catch(()=>{if(Si()||!Xn.isProduction)throw new Error(`\u274C Your dev setup is struggling to run the compiler\u2019s WASM binary.
To fix it, run "make clean" followed by "make dev".`)})}return ft}function Ba(A,e){dt(A,e),performance.getEntriesByName(A,"measure").forEach(({name:j,duration:t})=>{tj.debug(j,"took",t.toFixed(2),"ms"),Vi(j)}),$t(e)}function pa(A,e,j){if(!fA(e))return;let t=e.getSupportedLayout(A),r=e.getCurrentVariantSize(A);Mr(t.width)&&r?.widthType!==0&&(j.widthType=2,j.left!==null&&j.right!==null&&(j.right=null)),Mr(t.height)&&r?.heightType!==0&&(j.heightType=2,j.top!==null&&j.bottom!==null&&(j.bottom=null))}var rj=class{constructor(e,j,t){this.normal=j,this.property=e,t&&(this.space=t)}};rj.prototype.normal={};rj.prototype.property={};rj.prototype.space=void 0;function Jr(A,e){let j={},t={};for(let r of A)Object.assign(j,r.property),Object.assign(t,r.normal);return new rj(j,t,e)}function ye(A){return A.toLowerCase()}var BA=class{constructor(e,j){this.attribute=j,this.property=e}};BA.prototype.attribute="";BA.prototype.booleanish=!1;BA.prototype.boolean=!1;BA.prototype.commaOrSpaceSeparated=!1;BA.prototype.commaSeparated=!1;BA.prototype.defined=!1;BA.prototype.mustUseProperty=!1;BA.prototype.number=!1;BA.prototype.overloadedBoolean=!1;BA.prototype.property="";BA.prototype.spaceSeparated=!1;BA.prototype.space=void 0;var Se={};Un(Se,{boolean:()=>J,booleanish:()=>oA,commaOrSpaceSeparated:()=>hA,commaSeparated:()=>kj,number:()=>g,overloadedBoolean:()=>Gt,spaceSeparated:()=>z});var Gk=0,J=bj(),oA=bj(),Gt=bj(),g=bj(),z=bj(),kj=bj(),hA=bj();function bj(){return 2**++Gk}var Hr=Object.keys(Se),_j=class extends BA{constructor(e,j,t,r){let n=-1;if(super(e,j),ma(this,"space",r),typeof t=="number")for(;++n<Hr.length;){let o=Hr[n];ma(this,Hr[n],(t&Se[o])===Se[o])}}};_j.prototype.defined=!0;function ma(A,e,j){j&&(A[e]=j)}function OA(A){let e={},j={};for(let[t,r]of Object.entries(A.properties)){let n=new _j(t,A.transform(A.attributes||{},t),r,A.space);A.mustUseProperty&&A.mustUseProperty.includes(t)&&(n.mustUseProperty=!0),e[t]=n,j[ye(t)]=t,j[ye(n.attribute)]=t}return new rj(e,j,A.space)}var Qr=OA({properties:{ariaActiveDescendant:null,ariaAtomic:oA,ariaAutoComplete:null,ariaBusy:oA,ariaChecked:oA,ariaColCount:g,ariaColIndex:g,ariaColSpan:g,ariaControls:z,ariaCurrent:null,ariaDescribedBy:z,ariaDetails:null,ariaDisabled:oA,ariaDropEffect:z,ariaErrorMessage:null,ariaExpanded:oA,ariaFlowTo:z,ariaGrabbed:oA,ariaHasPopup:null,ariaHidden:oA,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:z,ariaLevel:g,ariaLive:null,ariaModal:oA,ariaMultiLine:oA,ariaMultiSelectable:oA,ariaOrientation:null,ariaOwns:z,ariaPlaceholder:null,ariaPosInSet:g,ariaPressed:oA,ariaReadOnly:oA,ariaRelevant:null,ariaRequired:oA,ariaRoleDescription:z,ariaRowCount:g,ariaRowIndex:g,ariaRowSpan:g,ariaSelected:oA,ariaSetSize:g,ariaSort:null,ariaValueMax:g,ariaValueMin:g,ariaValueNow:g,ariaValueText:null,role:null},transform(A,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Ft(A,e){return e in A?A[e]:e}function Rt(A,e){return Ft(A,e.toLowerCase())}var fa=OA({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:kj,acceptCharset:z,accessKey:z,action:null,allow:null,allowFullScreen:J,allowPaymentRequest:J,allowUserMedia:J,alt:null,as:null,async:J,autoCapitalize:null,autoComplete:z,autoFocus:J,autoPlay:J,blocking:z,capture:null,charSet:null,checked:J,cite:null,className:z,cols:g,colSpan:null,content:null,contentEditable:oA,controls:J,controlsList:z,coords:g|kj,crossOrigin:null,data:null,dateTime:null,decoding:null,default:J,defer:J,dir:null,dirName:null,disabled:J,download:Gt,draggable:oA,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:J,formTarget:null,headers:z,height:g,hidden:Gt,high:g,href:null,hrefLang:null,htmlFor:z,httpEquiv:z,id:null,imageSizes:null,imageSrcSet:null,inert:J,inputMode:null,integrity:null,is:null,isMap:J,itemId:null,itemProp:z,itemRef:z,itemScope:J,itemType:z,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:J,low:g,manifest:null,max:null,maxLength:g,media:null,method:null,min:null,minLength:g,multiple:J,muted:J,name:null,nonce:null,noModule:J,noValidate:J,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:J,optimum:g,pattern:null,ping:z,placeholder:null,playsInline:J,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:J,referrerPolicy:null,rel:z,required:J,reversed:J,rows:g,rowSpan:g,sandbox:z,scope:null,scoped:J,seamless:J,selected:J,shadowRootClonable:J,shadowRootDelegatesFocus:J,shadowRootMode:null,shape:null,size:g,sizes:null,slot:null,span:g,spellCheck:oA,src:null,srcDoc:null,srcLang:null,srcSet:null,start:g,step:null,style:null,tabIndex:g,target:null,title:null,translate:null,type:null,typeMustMatch:J,useMap:null,value:oA,width:g,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:z,axis:null,background:null,bgColor:null,border:g,borderColor:null,bottomMargin:g,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:J,declare:J,event:null,face:null,frame:null,frameBorder:null,hSpace:g,leftMargin:g,link:null,longDesc:null,lowSrc:null,marginHeight:g,marginWidth:g,noResize:J,noHref:J,noShade:J,noWrap:J,object:null,profile:null,prompt:null,rev:null,rightMargin:g,rules:null,scheme:null,scrolling:oA,standby:null,summary:null,text:null,topMargin:g,valueType:null,version:null,vAlign:null,vLink:null,vSpace:g,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:J,disableRemotePlayback:J,prefix:null,property:null,results:g,security:null,unselectable:null},space:"html",transform:Rt});var Ga=OA({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:hA,accentHeight:g,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:g,amplitude:g,arabicForm:null,ascent:g,attributeName:null,attributeType:null,azimuth:g,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:g,by:null,calcMode:null,capHeight:g,className:z,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:g,diffuseConstant:g,direction:null,display:null,dur:null,divisor:g,dominantBaseline:null,download:J,dx:null,dy:null,edgeMode:null,editable:null,elevation:g,enableBackground:null,end:null,event:null,exponent:g,externalResourcesRequired:null,fill:null,fillOpacity:g,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:kj,g2:kj,glyphName:kj,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:g,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:g,horizOriginX:g,horizOriginY:g,id:null,ideographic:g,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:g,k:g,k1:g,k2:g,k3:g,k4:g,kernelMatrix:hA,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:g,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:g,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:g,overlineThickness:g,paintOrder:null,panose1:null,path:null,pathLength:g,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:z,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:g,pointsAtY:g,pointsAtZ:g,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:hA,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:hA,rev:hA,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:hA,requiredFeatures:hA,requiredFonts:hA,requiredFormats:hA,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:g,specularExponent:g,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:g,strikethroughThickness:g,string:null,stroke:null,strokeDashArray:hA,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:g,strokeOpacity:g,strokeWidth:null,style:null,surfaceScale:g,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:hA,tabIndex:g,tableValues:null,target:null,targetX:g,targetY:g,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:hA,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:g,underlineThickness:g,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:g,values:null,vAlphabetic:g,vMathematical:g,vectorEffect:null,vHanging:g,vIdeographic:g,version:null,vertAdvY:g,vertOriginX:g,vertOriginY:g,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:g,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ft});var Ur=OA({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(A,e){return"xlink:"+e.slice(5).toLowerCase()}});var Vr=OA({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Rt});var Xr=OA({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(A,e){return"xml:"+e.slice(3).toLowerCase()}});var Fk=/[A-Z]/g,Fa=/-[a-z]/g,Rk=/^data[-\w.:]+$/i;function zr(A,e){let j=ye(e),t=e,r=BA;if(j in A.normal)return A.property[A.normal[j]];if(j.length>4&&j.slice(0,4)==="data"&&Rk.test(e)){if(e.charAt(4)==="-"){let n=e.slice(5).replace(Fa,hk);t="data"+n.charAt(0).toUpperCase()+n.slice(1)}else{let n=e.slice(4);if(!Fa.test(n)){let o=n.replace(Fk,Ik);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=_j}return new r(t,e)}function Ik(A){return"-"+A.toLowerCase()}function hk(A){return A.charAt(1).toUpperCase()}var Ra=Jr([Qr,fa,Ur,Vr,Xr],"html"),It=Jr([Qr,Ga,Ur,Vr,Xr],"svg");function Ia(A,e){let j=e||{};return(A[A.length-1]===""?[...A,""]:A).join((j.padRight?" ":"")+","+(j.padLeft===!1?"":" ")).trim()}function ha(A){return A.join(" ").trim()}function cj(A){return!A||typeof A!="object"?"":"position"in A||"type"in A?ga(A.position):"start"in A||"end"in A?ga(A):"line"in A||"column"in A?Wr(A):""}function Wr(A){return ba(A&&A.line)+":"+ba(A&&A.column)}function ga(A){return Wr(A&&A.start)+"-"+Wr(A&&A.end)}function ba(A){return A&&typeof A=="number"?A:1}var pA=class extends Error{constructor(e,j,t){super(),typeof j=="string"&&(t=j,j=void 0);let r="",n={},o=!1;if(j&&("line"in j&&"column"in j?n={place:j}:"start"in j&&"end"in j?n={place:j}:"type"in j?n={ancestors:[j],place:j.position}:n={...j}),typeof e=="string"?r=e:!n.cause&&e&&(o=!0,r=e.message,n.cause=e),!n.ruleId&&!n.source&&typeof t=="string"){let a=t.indexOf(":");a===-1?n.ruleId=t:(n.source=t.slice(0,a),n.ruleId=t.slice(a+1))}if(!n.place&&n.ancestors&&n.ancestors){let a=n.ancestors[n.ancestors.length-1];a&&(n.place=a.position)}let i=n.place&&"start"in n.place?n.place.start:n.place;this.ancestors=n.ancestors||void 0,this.cause=n.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=i?i.line:void 0,this.name=cj(n.place)||"1:1",this.place=n.place||void 0,this.reason=this.message,this.ruleId=n.ruleId||void 0,this.source=n.source||void 0,this.stack=o&&n.cause&&typeof n.cause.stack=="string"?n.cause.stack:"",this.actual,this.expected,this.note,this.url}};pA.prototype.file="";pA.prototype.name="";pA.prototype.reason="";pA.prototype.message="";pA.prototype.stack="";pA.prototype.column=void 0;pA.prototype.line=void 0;pA.prototype.ancestors=void 0;pA.prototype.cause=void 0;pA.prototype.fatal=void 0;pA.prototype.place=void 0;pA.prototype.ruleId=void 0;pA.prototype.source=void 0;var qA={basename:gk,dirname:bk,extname:_k,join:yk,sep:"/"};function gk(A,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Me(A);let j=0,t=-1,r=A.length,n;if(e===void 0||e.length===0||e.length>A.length){for(;r--;)if(A.codePointAt(r)===47){if(n){j=r+1;break}}else t<0&&(n=!0,t=r+1);return t<0?"":A.slice(j,t)}if(e===A)return"";let o=-1,i=e.length-1;for(;r--;)if(A.codePointAt(r)===47){if(n){j=r+1;break}}else o<0&&(n=!0,o=r+1),i>-1&&(A.codePointAt(r)===e.codePointAt(i--)?i<0&&(t=r):(i=-1,t=o));return j===t?t=o:t<0&&(t=A.length),A.slice(j,t)}function bk(A){if(Me(A),A.length===0)return".";let e=-1,j=A.length,t;for(;--j;)if(A.codePointAt(j)===47){if(t){e=j;break}}else t||(t=!0);return e<0?A.codePointAt(0)===47?"/":".":e===1&&A.codePointAt(0)===47?"//":A.slice(0,e)}function _k(A){Me(A);let e=A.length,j=-1,t=0,r=-1,n=0,o;for(;e--;){let i=A.codePointAt(e);if(i===47){if(o){t=e+1;break}continue}j<0&&(o=!0,j=e+1),i===46?r<0?r=e:n!==1&&(n=1):r>-1&&(n=-1)}return r<0||j<0||n===0||n===1&&r===j-1&&r===t+1?"":A.slice(r,j)}function yk(...A){let e=-1,j;for(;++e<A.length;)Me(A[e]),A[e]&&(j=j===void 0?A[e]:j+"/"+A[e]);return j===void 0?".":Sk(j)}function Sk(A){Me(A);let e=A.codePointAt(0)===47,j=Mk(A,!e);return j.length===0&&!e&&(j="."),j.length>0&&A.codePointAt(A.length-1)===47&&(j+="/"),e?"/"+j:j}function Mk(A,e){let j="",t=0,r=-1,n=0,o=-1,i,a;for(;++o<=A.length;){if(o<A.length)i=A.codePointAt(o);else{if(i===47)break;i=47}if(i===47){if(!(r===o-1||n===1))if(r!==o-1&&n===2){if(j.length<2||t!==2||j.codePointAt(j.length-1)!==46||j.codePointAt(j.length-2)!==46){if(j.length>2){if(a=j.lastIndexOf("/"),a!==j.length-1){a<0?(j="",t=0):(j=j.slice(0,a),t=j.length-1-j.lastIndexOf("/")),r=o,n=0;continue}}else if(j.length>0){j="",t=0,r=o,n=0;continue}}e&&(j=j.length>0?j+"/..":"..",t=2)}else j.length>0?j+="/"+A.slice(r+1,o):j=A.slice(r+1,o),t=o-r-1;r=o,n=0}else i===46&&n>-1?n++:n=-1}return j}function Me(A){if(typeof A!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(A))}var _a={cwd:Ck};function Ck(){return"/"}function Wj(A){return!!(A!==null&&typeof A=="object"&&"href"in A&&A.href&&"protocol"in A&&A.protocol&&A.auth===void 0)}function ya(A){if(typeof A=="string")A=new URL(A);else if(!Wj(A)){let e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+A+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(A.protocol!=="file:"){let e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Dk(A)}function Dk(A){if(A.hostname!==""){let t=new TypeError('File URL host must be "localhost" or empty on darwin');throw t.code="ERR_INVALID_FILE_URL_HOST",t}let e=A.pathname,j=-1;for(;++j<e.length;)if(e.codePointAt(j)===37&&e.codePointAt(j+1)===50){let t=e.codePointAt(j+2);if(t===70||t===102){let r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}var Yr=["history","path","basename","stem","extname","dirname"],Ce=class{constructor(e){let j;e?Wj(e)?j={path:e}:typeof e=="string"||Ok(e)?j={value:e}:j=e:j={},this.cwd="cwd"in j?"":_a.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let t=-1;for(;++t<Yr.length;){let n=Yr[t];n in j&&j[n]!==void 0&&j[n]!==null&&(this[n]=n==="history"?[...j[n]]:j[n])}let r;for(r in j)Yr.includes(r)||(this[r]=j[r])}get basename(){return typeof this.path=="string"?qA.basename(this.path):void 0}set basename(e){A6(e,"basename"),Zr(e,"basename"),this.path=qA.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?qA.dirname(this.path):void 0}set dirname(e){Sa(this.basename,"dirname"),this.path=qA.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?qA.extname(this.path):void 0}set extname(e){if(Zr(e,"extname"),Sa(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qA.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Wj(e)&&(e=ya(e)),A6(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?qA.basename(this.path,this.extname):void 0}set stem(e){A6(e,"stem"),Zr(e,"stem"),this.path=qA.join(this.dirname||"",e+(this.extname||""))}fail(e,j,t){let r=this.message(e,j,t);throw r.fatal=!0,r}info(e,j,t){let r=this.message(e,j,t);return r.fatal=void 0,r}message(e,j,t){let r=new pA(e,j,t);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function Zr(A,e){if(A&&A.includes(qA.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+qA.sep+"`")}function A6(A,e){if(!A)throw new Error("`"+e+"` cannot be empty")}function Sa(A,e){if(!A)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Ok(A){return!!(A&&typeof A=="object"&&"byteLength"in A&&"byteOffset"in A)}function Ma(A,e,j,t){let r=Ci(A,e,j,"duplicate",{enterIsolation:!1,preferredName:t,insertionIndex:A.tree.root.children.findIndex(n=>n.id===e.id)+1});A.stores.persistedUserDefaults.newContentAsDraft&&r.set({isDraft:!0,duplicatedFrom:To(r.duplicatedFrom,e.id)}),A.stores.scopeStore.select(r.id,{keepHistory:!1})}async function c0(A,e){let j=new Map,t=new Set(A.stores.scopeStore.getDesignPageNodes().map(a=>a.resolveValue("name")).filter(GA)),r=Bi(e.resolveValue("name")??"Design",t),n=e.isLoaded()?e:await e.load();if(!n)return;let o=n.clone({name:r,children:[]});j.set(n.id,o.id);let i=[];for(let a of n.children){let s=Mi(a,new Map,new Map,j,!1);i.push(s),j.set(a.id,s.id),o.addChild(s)}A.tree.insertNode(o,void 0,A.tree.root.children.findIndex(a=>a.id===e.id)+1);for(let a of i)yi(A.tree,A.componentLoader,a,j,!1);return DA("design_page_create",{pageId:o.id,source:"duplicate"}),o}function Ca(A,e){let[j,...t]=e.stores.selectionStore.ids;if(!j||t.length)return null;let r=e.tree,n=r.getNode(j),o=!1;for(;!o&&n&&(o=Be(r,n,A,e.stores.scopeStore.active.id,e.componentLoader),!o);)n=r.getParent(n.id);return n}var E0=".ts",uj=".tsx";var xk=["arguments","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","implements","import","in","instanceof","interface","let","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","Infinity","NaN","document","undefined","window"],vk=["toolbar"],Pk=/^[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10140}-\u{10174}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{1031F}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{103A0}-\u{103C3}\u{103C8}-\u{103CF}\u{103D1}-\u{103D5}\u{10400}-\u{1049D}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10860}-\u{10876}\u{10880}-\u{1089E}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{10900}-\u{10915}\u{10920}-\u{10939}\u{10980}-\u{109B7}\u{109BE}\u{109BF}\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A60}-\u{10A7C}\u{10A80}-\u{10A9C}\u{10AC0}-\u{10AC7}\u{10AC9}-\u{10AE4}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B60}-\u{10B72}\u{10B80}-\u{10B91}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10D00}-\u{10D23}\u{10F00}-\u{10F1C}\u{10F27}\u{10F30}-\u{10F45}\u{10FE0}-\u{10FF6}\u{11003}-\u{11037}\u{11083}-\u{110AF}\u{110D0}-\u{110E8}\u{11103}-\u{11126}\u{11144}\u{11150}-\u{11172}\u{11176}\u{11183}-\u{111B2}\u{111C1}-\u{111C4}\u{111DA}\u{111DC}\u{11200}-\u{11211}\u{11213}-\u{1122B}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A8}\u{112B0}-\u{112DE}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}\u{11350}\u{1135D}-\u{11361}\u{11400}-\u{11434}\u{11447}-\u{1144A}\u{1145F}\u{11480}-\u{114AF}\u{114C4}\u{114C5}\u{114C7}\u{11580}-\u{115AE}\u{115D8}-\u{115DB}\u{11600}-\u{1162F}\u{11644}\u{11680}-\u{116AA}\u{116B8}\u{11700}-\u{1171A}\u{11800}-\u{1182B}\u{118A0}-\u{118DF}\u{118FF}\u{119A0}-\u{119A7}\u{119AA}-\u{119D0}\u{119E1}\u{119E3}\u{11A00}\u{11A0B}-\u{11A32}\u{11A3A}\u{11A50}\u{11A5C}-\u{11A89}\u{11A9D}\u{11AC0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2E}\u{11C40}\u{11C72}-\u{11C8F}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D89}\u{11D98}\u{11EE0}-\u{11EF2}\u{12000}-\u{12399}\u{12400}-\u{1246E}\u{12480}-\u{12543}\u{13000}-\u{1342E}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16AD0}-\u{16AED}\u{16B00}-\u{16B2F}\u{16B40}-\u{16B43}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E7F}\u{16F00}-\u{16F4A}\u{16F50}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{17000}-\u{187F7}\u{18800}-\u{18AF2}\u{1B000}-\u{1B11E}\u{1B150}-\u{1B152}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E14E}\u{1E2C0}-\u{1E2EB}\u{1E800}-\u{1E8C4}\u{1E900}-\u{1E943}\u{1E94B}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{20000}-\u{2A6D6}\u{2A700}-\u{2B734}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}]+/u,Tk=/[\0-#%-/:-@[-^`{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0488\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08BE-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D04\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1ABE-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u200C\u200E-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20DD-\u20E0\u20E2-\u20E4\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u220B\u220D-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31BB-\u31EF\u3200-\u33FF\u4DB6-\u4DFF\u9FF0-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA670-\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7C7-\uA7F6\uA828-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB68-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF\u{1000C}\u{10027}\u{1003B}\u{1003E}\u{1004E}\u{1004F}\u{1005E}-\u{1007F}\u{100FB}-\u{1013F}\u{10175}-\u{101FC}\u{101FE}-\u{1027F}\u{1029D}-\u{1029F}\u{102D1}-\u{102DF}\u{102E1}-\u{102FF}\u{10320}-\u{1032C}\u{1034B}-\u{1034F}\u{1037B}-\u{1037F}\u{1039E}\u{1039F}\u{103C4}-\u{103C7}\u{103D0}\u{103D6}-\u{103FF}\u{1049E}\u{1049F}\u{104AA}-\u{104AF}\u{104D4}-\u{104D7}\u{104FC}-\u{104FF}\u{10528}-\u{1052F}\u{10564}-\u{105FF}\u{10737}-\u{1073F}\u{10756}-\u{1075F}\u{10768}-\u{107FF}\u{10806}\u{10807}\u{10809}\u{10836}\u{10839}-\u{1083B}\u{1083D}\u{1083E}\u{10856}-\u{1085F}\u{10877}-\u{1087F}\u{1089F}-\u{108DF}\u{108F3}\u{108F6}-\u{108FF}\u{10916}-\u{1091F}\u{1093A}-\u{1097F}\u{109B8}-\u{109BD}\u{109C0}-\u{109FF}\u{10A04}\u{10A07}-\u{10A0B}\u{10A14}\u{10A18}\u{10A36}\u{10A37}\u{10A3B}-\u{10A3E}\u{10A40}-\u{10A5F}\u{10A7D}-\u{10A7F}\u{10A9D}-\u{10ABF}\u{10AC8}\u{10AE7}-\u{10AFF}\u{10B36}-\u{10B3F}\u{10B56}-\u{10B5F}\u{10B73}-\u{10B7F}\u{10B92}-\u{10BFF}\u{10C49}-\u{10C7F}\u{10CB3}-\u{10CBF}\u{10CF3}-\u{10CFF}\u{10D28}-\u{10D2F}\u{10D3A}-\u{10EFF}\u{10F1D}-\u{10F26}\u{10F28}-\u{10F2F}\u{10F51}-\u{10FDF}\u{10FF7}-\u{10FFF}\u{11047}-\u{11065}\u{11070}-\u{1107E}\u{110BB}-\u{110CF}\u{110E9}-\u{110EF}\u{110FA}-\u{110FF}\u{11135}\u{11140}-\u{11143}\u{11147}-\u{1114F}\u{11174}\u{11175}\u{11177}-\u{1117F}\u{111C5}-\u{111C8}\u{111CD}-\u{111CF}\u{111DB}\u{111DD}-\u{111FF}\u{11212}\u{11238}-\u{1123D}\u{1123F}-\u{1127F}\u{11287}\u{11289}\u{1128E}\u{1129E}\u{112A9}-\u{112AF}\u{112EB}-\u{112EF}\u{112FA}-\u{112FF}\u{11304}\u{1130D}\u{1130E}\u{11311}\u{11312}\u{11329}\u{11331}\u{11334}\u{1133A}\u{11345}\u{11346}\u{11349}\u{1134A}\u{1134E}\u{1134F}\u{11351}-\u{11356}\u{11358}-\u{1135C}\u{11364}\u{11365}\u{1136D}-\u{1136F}\u{11375}-\u{113FF}\u{1144B}-\u{1144F}\u{1145A}-\u{1145D}\u{11460}-\u{1147F}\u{114C6}\u{114C8}-\u{114CF}\u{114DA}-\u{1157F}\u{115B6}\u{115B7}\u{115C1}-\u{115D7}\u{115DE}-\u{115FF}\u{11641}-\u{11643}\u{11645}-\u{1164F}\u{1165A}-\u{1167F}\u{116B9}-\u{116BF}\u{116CA}-\u{116FF}\u{1171B}\u{1171C}\u{1172C}-\u{1172F}\u{1173A}-\u{117FF}\u{1183B}-\u{1189F}\u{118EA}-\u{118FE}\u{11900}-\u{1199F}\u{119A8}\u{119A9}\u{119D8}\u{119D9}\u{119E2}\u{119E5}-\u{119FF}\u{11A3F}-\u{11A46}\u{11A48}-\u{11A4F}\u{11A9A}-\u{11A9C}\u{11A9E}-\u{11ABF}\u{11AF9}-\u{11BFF}\u{11C09}\u{11C37}\u{11C41}-\u{11C4F}\u{11C5A}-\u{11C71}\u{11C90}\u{11C91}\u{11CA8}\u{11CB7}-\u{11CFF}\u{11D07}\u{11D0A}\u{11D37}-\u{11D39}\u{11D3B}\u{11D3E}\u{11D48}-\u{11D4F}\u{11D5A}-\u{11D5F}\u{11D66}\u{11D69}\u{11D8F}\u{11D92}\u{11D99}-\u{11D9F}\u{11DAA}-\u{11EDF}\u{11EF7}-\u{11FFF}\u{1239A}-\u{123FF}\u{1246F}-\u{1247F}\u{12544}-\u{12FFF}\u{1342F}-\u{143FF}\u{14647}-\u{167FF}\u{16A39}-\u{16A3F}\u{16A5F}\u{16A6A}-\u{16ACF}\u{16AEE}\u{16AEF}\u{16AF5}-\u{16AFF}\u{16B37}-\u{16B3F}\u{16B44}-\u{16B4F}\u{16B5A}-\u{16B62}\u{16B78}-\u{16B7C}\u{16B90}-\u{16E3F}\u{16E80}-\u{16EFF}\u{16F4B}-\u{16F4E}\u{16F88}-\u{16F8E}\u{16FA0}-\u{16FDF}\u{16FE2}\u{16FE4}-\u{16FFF}\u{187F8}-\u{187FF}\u{18AF3}-\u{1AFFF}\u{1B11F}-\u{1B14F}\u{1B153}-\u{1B163}\u{1B168}-\u{1B16F}\u{1B2FC}-\u{1BBFF}\u{1BC6B}-\u{1BC6F}\u{1BC7D}-\u{1BC7F}\u{1BC89}-\u{1BC8F}\u{1BC9A}-\u{1BC9C}\u{1BC9F}-\u{1D164}\u{1D16A}-\u{1D16C}\u{1D173}-\u{1D17A}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D241}\u{1D245}-\u{1D3FF}\u{1D455}\u{1D49D}\u{1D4A0}\u{1D4A1}\u{1D4A3}\u{1D4A4}\u{1D4A7}\u{1D4A8}\u{1D4AD}\u{1D4BA}\u{1D4BC}\u{1D4C4}\u{1D506}\u{1D50B}\u{1D50C}\u{1D515}\u{1D51D}\u{1D53A}\u{1D53F}\u{1D545}\u{1D547}-\u{1D549}\u{1D551}\u{1D6A6}\u{1D6A7}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CC}\u{1D7CD}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA9A}\u{1DAA0}\u{1DAB0}-\u{1DFFF}\u{1E007}\u{1E019}\u{1E01A}\u{1E022}\u{1E025}\u{1E02B}-\u{1E0FF}\u{1E12D}-\u{1E12F}\u{1E13E}\u{1E13F}\u{1E14A}-\u{1E14D}\u{1E14F}-\u{1E2BF}\u{1E2FA}-\u{1E7FF}\u{1E8C5}-\u{1E8CF}\u{1E8D7}-\u{1E8FF}\u{1E94C}-\u{1E94F}\u{1E95A}-\u{1EDFF}\u{1EE04}\u{1EE20}\u{1EE23}\u{1EE25}\u{1EE26}\u{1EE28}\u{1EE33}\u{1EE38}\u{1EE3A}\u{1EE3C}-\u{1EE41}\u{1EE43}-\u{1EE46}\u{1EE48}\u{1EE4A}\u{1EE4C}\u{1EE50}\u{1EE53}\u{1EE55}\u{1EE56}\u{1EE58}\u{1EE5A}\u{1EE5C}\u{1EE5E}\u{1EE60}\u{1EE63}\u{1EE65}\u{1EE66}\u{1EE6B}\u{1EE73}\u{1EE78}\u{1EE7D}\u{1EE7F}\u{1EE8A}\u{1EE9C}-\u{1EEA0}\u{1EEA4}\u{1EEAA}\u{1EEBC}-\u{1FFFF}\u{2A6D7}-\u{2A6FF}\u{2B735}-\u{2B73F}\u{2B81E}\u{2B81F}\u{2CEA2}-\u{2CEAF}\u{2EBE1}-\u{2F7FF}\u{2FA1E}-\u{E00FF}\u{E01F0}-\u{10FFFF}]+/gu,wk=/^\.+$/u,p0=(A,e)=>{if(A===null||A.trim().length===0)return null;let j=1,t=A.replace(/_\d+$/u,""),r=A;for(;e.includes(r)||qk(r);)r=`${t}_${j}`,j++;return r},qk=A=>xk.includes(A)||window.hasOwnProperty(A)&&!vk.includes(A);function j6(A,e){if(!e)return null;let j=e.trim();if(j.length===0)return null;let t=A==="selector"?"_":"$";if(A==="directory"){if(wk.test(j))return null}else Pk.test(j)||(j=t+j);return j=j.replace(Tk,"_"),j=j.replace(/_+/gu,"_"),j=j.replace(/^\$_/u,t),j}function Yj(A){return j6("variable",A)}function m0(A){let e=j6("selector",A);return e&&(e=e.replace(/^\$/gu,"_")),e}function Da(A){return j6("directory",A)}function Oa(A){let j=Yj(A)||"MyComponent",t=j+uj,r=Nk(j);return{name:t,content:r}}function Nk(A){return`// Get Started: https://www.framer.com/developers

import { addPropertyControls, ControlType } from "framer"
import { motion } from "framer-motion"

/**
 * @framerSupportedLayoutWidth auto
 * @framerSupportedLayoutHeight auto
 */
export default function ${A}(props) {
    const { tint } = props

    return (
        <motion.div
            style={{
                margin: 50,
                width: 100,
                height: 100,
                borderRadius: 25,
                backgroundColor: tint,
            }}
            animate={{ scale: 1.5 }}
            whileHover={{ rotate: 90 }}
        />
    )
}

addPropertyControls(${A}, {
    tint: {
        title: "Tint",
        type: ControlType.Color,
        defaultValue: "#09F",
    },
})
`}function Lk(A){return`import { forwardRef, type ComponentType } from "react"
import { createStore } from "https://framer.com/m/framer/store.js@^1.0.0"
import { randomColor } from "https://framer.com/m/framer/utils.js@^0.9.0"

// Learn more: https://www.framer.com/developers/overrides/

const useStore = createStore({
    background: "#0099FF",
})

export function withRotate(Component): ComponentType {
    return forwardRef((props, ref) => {
        return (
            <Component
                ref={ref}
                {...props}
                animate={{ rotate: 90 }}
                transition={{ duration: 2 }}
            />
        )
    })
}

export function withHover(Component): ComponentType {
    return forwardRef((props, ref) => {
        return <Component ref={ref} {...props} whileHover={{ scale: 1.05 }} />
    })
}

export function withRandomColor(Component): ComponentType {
    return forwardRef((props, ref) => {
        const [store, setStore] = useStore()

        return (
            <Component
                ref={ref}
                {...props}
                animate={{
                    background: store.background,
                }}
                onClick={() => {
                    setStore({ background: randomColor() })
                }}
            />
        )
    })
}
`}function xa(A){let j=Yj(A)||"MyOverrides",t=j+uj,r=Lk(j);return{name:t,content:r}}function De(A){return A.endsWith(".json")?!0:/\.[tj]sx?$/u.test(A)}var Kk=/^(?:[\w-]+\/)*[\w-]+(?:\.[\w-]+)*$/u;function D0(A){let{path:e}=va(A);return Kk.test(e)}function Jk(A,e){if(De(A))return A;let[j,t]=it(e);return t&&(t=`.${t}`),(!t||!De(t))&&(t=uj),A+t}function O0(A){return De(A)||(A+=".tsx"),A}function Hk(A){let e=A.lastIndexOf("/");return e<0?"":A.slice(0,e)}function Qk(A){let e=A.lastIndexOf("/")+1;return A.slice(e)}function e6(...A){let e="";return A.forEach(j=>{for(;j.startsWith("/");)j=j.slice(1);for(;j.endsWith("/");)j=j.slice(0,-1);j!==""&&(e!==""&&(e+="/"),e+=j)}),e}function va(A,e=!0){A=A.trim();let[j,t]=it(Qk(A));t&&(t=`.${t}`);let r=Hk(A).split("/").map(i=>Da(i)).filter(i=>!!i).join("/"),n=Yj(j)||"MyComponent";return(!De(t)||t===uj)&&e&&(n=uo(n)),{path:e6(r,n+t),dirName:r,name:n,extension:t}}function x0(A,e="component",j=!0){A=A.trim();let{dirName:t,name:r,extension:n}=va(A,j);if(De(n)&&n!==uj){let a=r+n;return{path:e6(t,a),content:""}}let o=e==="component"?Oa(r):xa(r),i=Jk(r+n,o.name);return{path:e6(t,i),content:o.content}}function Pa(A,e){if(!A.has(e))return e;let j=1,t,[r,n]=it(e);n&&(n=`.${n}`);do t=r+"_"+String(j++)+n;while(A.has(t));return t}function v0(A){return A==="typescript"||A==="javascript"}var Zj,Oe,Ae=class{constructor(e){this.limit=e;LA(this,Zj,0);LA(this,Oe,[])}async run(e,j){if(nA(this,Zj)===this.limit){let t=new Promise(r=>{nA(this,Oe).push(r)});j&&(t=Promise.race([t,Uk(j)])),await t}wa(j),Ir(this,Zj)._++;try{return await e()}finally{Ir(this,Zj)._--,nA(this,Oe).shift()?.()}}};Zj=new WeakMap,Oe=new WeakMap;var Ta=new WeakMap;function Uk(A){let e=Ta.get(A);return e||(wa(A),e=new Promise((j,t)=>{A.addEventListener("abort",()=>{t(A.reason)},{once:!0})}),Ta.set(A,e)),e}function wa(A){if(A?.aborted)throw A.reason}function xe(A){let e=new Set;if(!A)return e;if(yA(A)&&yo(A)){let j=qa(A.layoutTemplateIdentifier);j&&e.add(j)}for(let{node:j,skipChildren:t}of A.walkWithSkipChildren()){if(!fA(j))continue;if(wA(j)){t();continue}let r=qa(j.codeComponentIdentifier);r&&e.add(r)}return e}function qa(A){let e=AA(A);if(!(!e||!_A(e)))return X({type:e.type,name:e.localIdName})}var Na;(function(A){A[A.Static=1]="Static",A[A.Dynamic=2]="Dynamic",A[A.ImportMeta=3]="ImportMeta",A[A.StaticSourcePhase=4]="StaticSourcePhase",A[A.DynamicSourcePhase=5]="DynamicSourcePhase"})(Na||(Na={}));var Vk=new Uint8Array(new Uint16Array([1]).buffer)[0]===1;function r6(A,e="@"){if(!W)return n6.then(()=>r6(A));let j=A.length+1,t=(W.__heap_base.value||W.__heap_base)+4*j-W.memory.buffer.byteLength;t>0&&W.memory.grow(Math.ceil(t/65536));let r=W.sa(j-1);if((Vk?zk:Xk)(A,new Uint16Array(W.memory.buffer,r,j)),!W.parse())throw Object.assign(new Error(`Parse error ${e}:${A.slice(0,W.e()).split(`
`).length}:${W.e()-A.lastIndexOf(`
`,W.e()-1)}`),{idx:W.e()});let n=[],o=[];for(;W.ri();){let a=W.is(),s=W.ie(),l=W.it(),k=W.ai(),c=W.id(),u=W.ss(),d=W.se(),E;W.ip()&&(E=i(A.slice(c===-1?a-1:a,c===-1?s+1:s))),n.push({n:E,t:l,s:a,e:s,ss:u,se:d,d:c,a:k})}for(;W.re();){let a=W.es(),s=W.ee(),l=W.els(),k=W.ele(),c=A.slice(a,s),u=c[0],d=l<0?void 0:A.slice(l,k),E=d?d[0]:"";o.push({s:a,e:s,ls:l,le:k,n:u==='"'||u==="'"?i(c):c,ln:E==='"'||E==="'"?i(d):d})}function i(a){try{return(0,eval)(a)}catch{}}return[n,o,!!W.f(),!!W.ms()]}function Xk(A,e){let j=A.length,t=0;for(;t<j;){let r=A.charCodeAt(t);e[t++]=(255&r)<<8|r>>>8}}function zk(A,e){let j=A.length,t=0;for(;t<j;)e[t]=A.charCodeAt(t++)}var W,n6=WebAssembly.compile((t6="AGFzbQEAAAABKwhgAX8Bf2AEf39/fwBgAAF/YAAAYAF/AGADf39/AX9gAn9/AX9gA39/fwADMTAAAQECAgICAgICAgICAgICAgICAgIAAwMDBAQAAAUAAAAAAAMDAwAGAAAABwAGAgUEBQFwAQEBBQMBAAEGDwJ/AUHA8gALfwBBwPIACwd6FQZtZW1vcnkCAAJzYQAAAWUAAwJpcwAEAmllAAUCc3MABgJzZQAHAml0AAgCYWkACQJpZAAKAmlwAAsCZXMADAJlZQANA2VscwAOA2VsZQAPAnJpABACcmUAEQFmABICbXMAEwVwYXJzZQAUC19faGVhcF9iYXNlAwEKm0EwaAEBf0EAIAA2AoAKQQAoAtwJIgEgAEEBdGoiAEEAOwEAQQAgAEECaiIANgKECkEAIAA2AogKQQBBADYC4AlBAEEANgLwCUEAQQA2AugJQQBBADYC5AlBAEEANgL4CUEAQQA2AuwJIAEL0wEBA39BACgC8AkhBEEAQQAoAogKIgU2AvAJQQAgBDYC9AlBACAFQSRqNgKICiAEQSBqQeAJIAQbIAU2AgBBACgC1AkhBEEAKALQCSEGIAUgATYCACAFIAA2AgggBSACIAJBAmpBACAGIANGIgAbIAQgA0YiBBs2AgwgBSADNgIUIAVBADYCECAFIAI2AgQgBUEANgIgIAVBA0EBQQIgABsgBBs2AhwgBUEAKALQCSADRiICOgAYAkACQCACDQBBACgC1AkgA0cNAQtBAEEBOgCMCgsLXgEBf0EAKAL4CSIEQRBqQeQJIAQbQQAoAogKIgQ2AgBBACAENgL4CUEAIARBFGo2AogKQQBBAToAjAogBEEANgIQIAQgAzYCDCAEIAI2AgggBCABNgIEIAQgADYCAAsIAEEAKAKQCgsVAEEAKALoCSgCAEEAKALcCWtBAXULHgEBf0EAKALoCSgCBCIAQQAoAtwJa0EBdUF/IAAbCxUAQQAoAugJKAIIQQAoAtwJa0EBdQseAQF/QQAoAugJKAIMIgBBACgC3AlrQQF1QX8gABsLCwBBACgC6AkoAhwLHgEBf0EAKALoCSgCECIAQQAoAtwJa0EBdUF/IAAbCzsBAX8CQEEAKALoCSgCFCIAQQAoAtAJRw0AQX8PCwJAIABBACgC1AlHDQBBfg8LIABBACgC3AlrQQF1CwsAQQAoAugJLQAYCxUAQQAoAuwJKAIAQQAoAtwJa0EBdQsVAEEAKALsCSgCBEEAKALcCWtBAXULHgEBf0EAKALsCSgCCCIAQQAoAtwJa0EBdUF/IAAbCx4BAX9BACgC7AkoAgwiAEEAKALcCWtBAXVBfyAAGwslAQF/QQBBACgC6AkiAEEgakHgCSAAGygCACIANgLoCSAAQQBHCyUBAX9BAEEAKALsCSIAQRBqQeQJIAAbKAIAIgA2AuwJIABBAEcLCABBAC0AlAoLCABBAC0AjAoL3Q0BBX8jAEGA0ABrIgAkAEEAQQE6AJQKQQBBACgC2Ak2ApwKQQBBACgC3AlBfmoiATYCsApBACABQQAoAoAKQQF0aiICNgK0CkEAQQA6AIwKQQBBADsBlgpBAEEAOwGYCkEAQQA6AKAKQQBBADYCkApBAEEAOgD8CUEAIABBgBBqNgKkCkEAIAA2AqgKQQBBADoArAoCQAJAAkACQANAQQAgAUECaiIDNgKwCiABIAJPDQECQCADLwEAIgJBd2pBBUkNAAJAAkACQAJAAkAgAkGbf2oOBQEICAgCAAsgAkEgRg0EIAJBL0YNAyACQTtGDQIMBwtBAC8BmAoNASADEBVFDQEgAUEEakGCCEEKEC8NARAWQQAtAJQKDQFBAEEAKAKwCiIBNgKcCgwHCyADEBVFDQAgAUEEakGMCEEKEC8NABAXC0EAQQAoArAKNgKcCgwBCwJAIAEvAQQiA0EqRg0AIANBL0cNBBAYDAELQQEQGQtBACgCtAohAkEAKAKwCiEBDAALC0EAIQIgAyEBQQAtAPwJDQIMAQtBACABNgKwCkEAQQA6AJQKCwNAQQAgAUECaiIDNgKwCgJAAkACQAJAAkACQAJAIAFBACgCtApPDQAgAy8BACICQXdqQQVJDQYCQAJAAkACQAJAAkACQAJAAkACQCACQWBqDgoQDwYPDw8PBQECAAsCQAJAAkACQCACQaB/ag4KCxISAxIBEhISAgALIAJBhX9qDgMFEQYJC0EALwGYCg0QIAMQFUUNECABQQRqQYIIQQoQLw0QEBYMEAsgAxAVRQ0PIAFBBGpBjAhBChAvDQ8QFwwPCyADEBVFDQ4gASkABELsgISDsI7AOVINDiABLwEMIgNBd2oiAUEXSw0MQQEgAXRBn4CABHFFDQwMDQtBAEEALwGYCiIBQQFqOwGYCkEAKAKkCiABQQN0aiIBQQE2AgAgAUEAKAKcCjYCBAwNC0EALwGYCiIDRQ0JQQAgA0F/aiIDOwGYCkEALwGWCiICRQ0MQQAoAqQKIANB//8DcUEDdGooAgBBBUcNDAJAIAJBAnRBACgCqApqQXxqKAIAIgMoAgQNACADQQAoApwKQQJqNgIEC0EAIAJBf2o7AZYKIAMgAUEEajYCDAwMCwJAQQAoApwKIgEvAQBBKUcNAEEAKALwCSIDRQ0AIAMoAgQgAUcNAEEAQQAoAvQJIgM2AvAJAkAgA0UNACADQQA2AiAMAQtBAEEANgLgCQtBAEEALwGYCiIDQQFqOwGYCkEAKAKkCiADQQN0aiIDQQZBAkEALQCsChs2AgAgAyABNgIEQQBBADoArAoMCwtBAC8BmAoiAUUNB0EAIAFBf2oiATsBmApBACgCpAogAUH//wNxQQN0aigCAEEERg0EDAoLQScQGgwJC0EiEBoMCAsgAkEvRw0HAkACQCABLwEEIgFBKkYNACABQS9HDQEQGAwKC0EBEBkMCQsCQAJAAkACQEEAKAKcCiIBLwEAIgMQG0UNAAJAAkAgA0FVag4EAAkBAwkLIAFBfmovAQBBK0YNAwwICyABQX5qLwEAQS1GDQIMBwsgA0EpRw0BQQAoAqQKQQAvAZgKIgJBA3RqKAIEEBxFDQIMBgsgAUF+ai8BAEFQakH//wNxQQpPDQULQQAvAZgKIQILAkACQCACQf//A3EiAkUNACADQeYARw0AQQAoAqQKIAJBf2pBA3RqIgQoAgBBAUcNACABQX5qLwEAQe8ARw0BIAQoAgRBlghBAxAdRQ0BDAULIANB/QBHDQBBACgCpAogAkEDdGoiAigCBBAeDQQgAigCAEEGRg0ECyABEB8NAyADRQ0DIANBL0ZBAC0AoApBAEdxDQMCQEEAKAL4CSICRQ0AIAEgAigCAEkNACABIAIoAgRNDQQLIAFBfmohAUEAKALcCSECAkADQCABQQJqIgQgAk0NAUEAIAE2ApwKIAEvAQAhAyABQX5qIgQhASADECBFDQALIARBAmohBAsCQCADQf//A3EQIUUNACAEQX5qIQECQANAIAFBAmoiAyACTQ0BQQAgATYCnAogAS8BACEDIAFBfmoiBCEBIAMQIQ0ACyAEQQJqIQMLIAMQIg0EC0EAQQE6AKAKDAcLQQAoAqQKQQAvAZgKIgFBA3QiA2pBACgCnAo2AgRBACABQQFqOwGYCkEAKAKkCiADakEDNgIACxAjDAULQQAtAPwJQQAvAZYKQQAvAZgKcnJFIQIMBwsQJEEAQQA6AKAKDAMLECVBACECDAULIANBoAFHDQELQQBBAToArAoLQQBBACgCsAo2ApwKC0EAKAKwCiEBDAALCyAAQYDQAGokACACCxoAAkBBACgC3AkgAEcNAEEBDwsgAEF+ahAmC/4KAQZ/QQBBACgCsAoiAEEMaiIBNgKwCkEAKAL4CSECQQEQKSEDAkACQAJAAkACQAJAAkACQAJAQQAoArAKIgQgAUcNACADEChFDQELAkACQAJAAkACQAJAAkAgA0EqRg0AIANB+wBHDQFBACAEQQJqNgKwCkEBECkhA0EAKAKwCiEEA0ACQAJAIANB//8DcSIDQSJGDQAgA0EnRg0AIAMQLBpBACgCsAohAwwBCyADEBpBAEEAKAKwCkECaiIDNgKwCgtBARApGgJAIAQgAxAtIgNBLEcNAEEAQQAoArAKQQJqNgKwCkEBECkhAwsgA0H9AEYNA0EAKAKwCiIFIARGDQ8gBSEEIAVBACgCtApNDQAMDwsLQQAgBEECajYCsApBARApGkEAKAKwCiIDIAMQLRoMAgtBAEEAOgCUCgJAAkACQAJAAkACQCADQZ9/ag4MAgsEAQsDCwsLCwsFAAsgA0H2AEYNBAwKC0EAIARBDmoiAzYCsAoCQAJAAkBBARApQZ9/ag4GABICEhIBEgtBACgCsAoiBSkAAkLzgOSD4I3AMVINESAFLwEKECFFDRFBACAFQQpqNgKwCkEAECkaC0EAKAKwCiIFQQJqQbIIQQ4QLw0QIAUvARAiAkF3aiIBQRdLDQ1BASABdEGfgIAEcUUNDQwOC0EAKAKwCiIFKQACQuyAhIOwjsA5Ug0PIAUvAQoiAkF3aiIBQRdNDQYMCgtBACAEQQpqNgKwCkEAECkaQQAoArAKIQQLQQAgBEEQajYCsAoCQEEBECkiBEEqRw0AQQBBACgCsApBAmo2ArAKQQEQKSEEC0EAKAKwCiEDIAQQLBogA0EAKAKwCiIEIAMgBBACQQBBACgCsApBfmo2ArAKDwsCQCAEKQACQuyAhIOwjsA5Ug0AIAQvAQoQIEUNAEEAIARBCmo2ArAKQQEQKSEEQQAoArAKIQMgBBAsGiADQQAoArAKIgQgAyAEEAJBAEEAKAKwCkF+ajYCsAoPC0EAIARBBGoiBDYCsAoLQQAgBEEGajYCsApBAEEAOgCUCkEBECkhBEEAKAKwCiEDIAQQLCEEQQAoArAKIQIgBEHf/wNxIgFB2wBHDQNBACACQQJqNgKwCkEBECkhBUEAKAKwCiEDQQAhBAwEC0EAQQE6AIwKQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0AQQAgA0EIajYCsAogAEEBEClBABArIAJBEGpB5AkgAhshAwNAIAMoAgAiA0UNBSADQgA3AgggA0EQaiEDDAALC0EAIANBfmo2ArAKDAMLQQEgAXRBn4CABHFFDQMMBAtBASEECwNAAkACQCAEDgIAAQELIAVB//8DcRAsGkEBIQQMAQsCQAJAQQAoArAKIgQgA0YNACADIAQgAyAEEAJBARApIQQCQCABQdsARw0AIARBIHJB/QBGDQQLQQAoArAKIQMCQCAEQSxHDQBBACADQQJqNgKwCkEBECkhBUEAKAKwCiEDIAVBIHJB+wBHDQILQQAgA0F+ajYCsAoLIAFB2wBHDQJBACACQX5qNgKwCg8LQQAhBAwACwsPCyACQaABRg0AIAJB+wBHDQQLQQAgBUEKajYCsApBARApIgVB+wBGDQMMAgsCQCACQVhqDgMBAwEACyACQaABRw0CC0EAIAVBEGo2ArAKAkBBARApIgVBKkcNAEEAQQAoArAKQQJqNgKwCkEBECkhBQsgBUEoRg0BC0EAKAKwCiEBIAUQLBpBACgCsAoiBSABTQ0AIAQgAyABIAUQAkEAQQAoArAKQX5qNgKwCg8LIAQgA0EAQQAQAkEAIARBDGo2ArAKDwsQJQvcCAEGf0EAIQBBAEEAKAKwCiIBQQxqIgI2ArAKQQEQKSEDQQAoArAKIQQCQAJAAkACQAJAAkACQAJAIANBLkcNAEEAIARBAmo2ArAKAkBBARApIgNB8wBGDQAgA0HtAEcNB0EAKAKwCiIDQQJqQZwIQQYQLw0HAkBBACgCnAoiBBAqDQAgBC8BAEEuRg0ICyABIAEgA0EIakEAKALUCRABDwtBACgCsAoiA0ECakGiCEEKEC8NBgJAQQAoApwKIgQQKg0AIAQvAQBBLkYNBwsgA0EMaiEDDAELIANB8wBHDQEgBCACTQ0BQQYhAEEAIQIgBEECakGiCEEKEC8NAiAEQQxqIQMCQCAELwEMIgVBd2oiBEEXSw0AQQEgBHRBn4CABHENAQsgBUGgAUcNAgtBACADNgKwCkEBIQBBARApIQMLAkACQAJAAkAgA0H7AEYNACADQShHDQFBACgCpApBAC8BmAoiA0EDdGoiBEEAKAKwCjYCBEEAIANBAWo7AZgKIARBBTYCAEEAKAKcCi8BAEEuRg0HQQBBACgCsAoiBEECajYCsApBARApIQMgAUEAKAKwCkEAIAQQAQJAAkAgAA0AQQAoAvAJIQQMAQtBACgC8AkiBEEFNgIcC0EAQQAvAZYKIgBBAWo7AZYKQQAoAqgKIABBAnRqIAQ2AgACQCADQSJGDQAgA0EnRg0AQQBBACgCsApBfmo2ArAKDwsgAxAaQQBBACgCsApBAmoiAzYCsAoCQAJAAkBBARApQVdqDgQBAgIAAgtBAEEAKAKwCkECajYCsApBARApGkEAKALwCSIEIAM2AgQgBEEBOgAYIARBACgCsAoiAzYCEEEAIANBfmo2ArAKDwtBACgC8AkiBCADNgIEIARBAToAGEEAQQAvAZgKQX9qOwGYCiAEQQAoArAKQQJqNgIMQQBBAC8BlgpBf2o7AZYKDwtBAEEAKAKwCkF+ajYCsAoPCyAADQJBACgCsAohA0EALwGYCg0BA0ACQAJAAkAgA0EAKAK0Ck8NAEEBECkiA0EiRg0BIANBJ0YNASADQf0ARw0CQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0JC0EAIANBCGo2ArAKAkBBARApIgNBIkYNACADQSdHDQkLIAEgA0EAECsPCyADEBoLQQBBACgCsApBAmoiAzYCsAoMAAsLIAANAUEGIQBBACECAkAgA0FZag4EBAMDBAALIANBIkYNAwwCC0EAIANBfmo2ArAKDwtBDCEAQQEhAgtBACgCsAoiAyABIABBAXRqRw0AQQAgA0F+ajYCsAoPC0EALwGYCg0CQQAoArAKIQNBACgCtAohAANAIAMgAE8NAQJAAkAgAy8BACIEQSdGDQAgBEEiRw0BCyABIAQgAhArDwtBACADQQJqIgM2ArAKDAALCxAlCw8LQQBBACgCsApBfmo2ArAKC0cBA39BACgCsApBAmohAEEAKAK0CiEBAkADQCAAIgJBfmogAU8NASACQQJqIQAgAi8BAEF2ag4EAQAAAQALC0EAIAI2ArAKC5gBAQN/QQBBACgCsAoiAUECajYCsAogAUEGaiEBQQAoArQKIQIDQAJAAkACQCABQXxqIAJPDQAgAUF+ai8BACEDAkACQCAADQAgA0EqRg0BIANBdmoOBAIEBAIECyADQSpHDQMLIAEvAQBBL0cNAkEAIAFBfmo2ArAKDAELIAFBfmohAQtBACABNgKwCg8LIAFBAmohAQwACwuIAQEEf0EAKAKwCiEBQQAoArQKIQICQAJAA0AgASIDQQJqIQEgAyACTw0BIAEvAQAiBCAARg0CAkAgBEHcAEYNACAEQXZqDgQCAQECAQsgA0EEaiEBIAMvAQRBDUcNACADQQZqIAEgAy8BBkEKRhshAQwACwtBACABNgKwChAlDwtBACABNgKwCgtsAQF/AkACQCAAQV9qIgFBBUsNAEEBIAF0QTFxDQELIABBRmpB//8DcUEGSQ0AIABBKUcgAEFYakH//wNxQQdJcQ0AAkAgAEGlf2oOBAEAAAEACyAAQf0ARyAAQYV/akH//wNxQQRJcQ8LQQELLgEBf0EBIQECQCAAQaYJQQUQHQ0AIABBlghBAxAdDQAgAEGwCUECEB0hAQsgAQtGAQN/QQAhAwJAIAAgAkEBdCICayIEQQJqIgBBACgC3AkiBUkNACAAIAEgAhAvDQACQCAAIAVHDQBBAQ8LIAQQJiEDCyADC4MBAQJ/QQEhAQJAAkACQAJAAkACQCAALwEAIgJBRWoOBAUEBAEACwJAIAJBm39qDgQDBAQCAAsgAkEpRg0EIAJB+QBHDQMgAEF+akG8CUEGEB0PCyAAQX5qLwEAQT1GDwsgAEF+akG0CUEEEB0PCyAAQX5qQcgJQQMQHQ8LQQAhAQsgAQu0AwECf0EAIQECQAJAAkACQAJAAkACQAJAAkACQCAALwEAQZx/ag4UAAECCQkJCQMJCQQFCQkGCQcJCQgJCwJAAkAgAEF+ai8BAEGXf2oOBAAKCgEKCyAAQXxqQcoIQQIQHQ8LIABBfGpBzghBAxAdDwsCQAJAAkAgAEF+ai8BAEGNf2oOAwABAgoLAkAgAEF8ai8BACICQeEARg0AIAJB7ABHDQogAEF6akHlABAnDwsgAEF6akHjABAnDwsgAEF8akHUCEEEEB0PCyAAQXxqQdwIQQYQHQ8LIABBfmovAQBB7wBHDQYgAEF8ai8BAEHlAEcNBgJAIABBemovAQAiAkHwAEYNACACQeMARw0HIABBeGpB6AhBBhAdDwsgAEF4akH0CEECEB0PCyAAQX5qQfgIQQQQHQ8LQQEhASAAQX5qIgBB6QAQJw0EIABBgAlBBRAdDwsgAEF+akHkABAnDwsgAEF+akGKCUEHEB0PCyAAQX5qQZgJQQQQHQ8LAkAgAEF+ai8BACICQe8ARg0AIAJB5QBHDQEgAEF8akHuABAnDwsgAEF8akGgCUEDEB0hAQsgAQs0AQF/QQEhAQJAIABBd2pB//8DcUEFSQ0AIABBgAFyQaABRg0AIABBLkcgABAocSEBCyABCzABAX8CQAJAIABBd2oiAUEXSw0AQQEgAXRBjYCABHENAQsgAEGgAUYNAEEADwtBAQtOAQJ/QQAhAQJAAkAgAC8BACICQeUARg0AIAJB6wBHDQEgAEF+akH4CEEEEB0PCyAAQX5qLwEAQfUARw0AIABBfGpB3AhBBhAdIQELIAEL3gEBBH9BACgCsAohAEEAKAK0CiEBAkACQAJAA0AgACICQQJqIQAgAiABTw0BAkACQAJAIAAvAQAiA0Gkf2oOBQIDAwMBAAsgA0EkRw0CIAIvAQRB+wBHDQJBACACQQRqIgA2ArAKQQBBAC8BmAoiAkEBajsBmApBACgCpAogAkEDdGoiAkEENgIAIAIgADYCBA8LQQAgADYCsApBAEEALwGYCkF/aiIAOwGYCkEAKAKkCiAAQf//A3FBA3RqKAIAQQNHDQMMBAsgAkEEaiEADAALC0EAIAA2ArAKCxAlCwtwAQJ/AkACQANAQQBBACgCsAoiAEECaiIBNgKwCiAAQQAoArQKTw0BAkACQAJAIAEvAQAiAUGlf2oOAgECAAsCQCABQXZqDgQEAwMEAAsgAUEvRw0CDAQLEC4aDAELQQAgAEEEajYCsAoMAAsLECULCzUBAX9BAEEBOgD8CUEAKAKwCiEAQQBBACgCtApBAmo2ArAKQQAgAEEAKALcCWtBAXU2ApAKC0MBAn9BASEBAkAgAC8BACICQXdqQf//A3FBBUkNACACQYABckGgAUYNAEEAIQEgAhAoRQ0AIAJBLkcgABAqcg8LIAELPQECf0EAIQICQEEAKALcCSIDIABLDQAgAC8BACABRw0AAkAgAyAARw0AQQEPCyAAQX5qLwEAECAhAgsgAgtoAQJ/QQEhAQJAAkAgAEFfaiICQQVLDQBBASACdEExcQ0BCyAAQfj/A3FBKEYNACAAQUZqQf//A3FBBkkNAAJAIABBpX9qIgJBA0sNACACQQFHDQELIABBhX9qQf//A3FBBEkhAQsgAQucAQEDf0EAKAKwCiEBAkADQAJAAkAgAS8BACICQS9HDQACQCABLwECIgFBKkYNACABQS9HDQQQGAwCCyAAEBkMAQsCQAJAIABFDQAgAkF3aiIBQRdLDQFBASABdEGfgIAEcUUNAQwCCyACECFFDQMMAQsgAkGgAUcNAgtBAEEAKAKwCiIDQQJqIgE2ArAKIANBACgCtApJDQALCyACCzEBAX9BACEBAkAgAC8BAEEuRw0AIABBfmovAQBBLkcNACAAQXxqLwEAQS5GIQELIAELnAQBAX8CQCABQSJGDQAgAUEnRg0AECUPC0EAKAKwCiEDIAEQGiAAIANBAmpBACgCsApBACgC0AkQAQJAIAJFDQBBACgC8AlBBDYCHAtBAEEAKAKwCkECajYCsAoCQAJAAkACQEEAECkiAUHhAEYNACABQfcARg0BQQAoArAKIQEMAgtBACgCsAoiAUECakHACEEKEC8NAUEGIQAMAgtBACgCsAoiAS8BAkHpAEcNACABLwEEQfQARw0AQQQhACABLwEGQegARg0BC0EAIAFBfmo2ArAKDwtBACABIABBAXRqNgKwCgJAQQEQKUH7AEYNAEEAIAE2ArAKDwtBACgCsAoiAiEAA0BBACAAQQJqNgKwCgJAAkACQEEBECkiAEEiRg0AIABBJ0cNAUEnEBpBAEEAKAKwCkECajYCsApBARApIQAMAgtBIhAaQQBBACgCsApBAmo2ArAKQQEQKSEADAELIAAQLCEACwJAIABBOkYNAEEAIAE2ArAKDwtBAEEAKAKwCkECajYCsAoCQEEBECkiAEEiRg0AIABBJ0YNAEEAIAE2ArAKDwsgABAaQQBBACgCsApBAmo2ArAKAkACQEEBECkiAEEsRg0AIABB/QBGDQFBACABNgKwCg8LQQBBACgCsApBAmo2ArAKQQEQKUH9AEYNAEEAKAKwCiEADAELC0EAKALwCSIBIAI2AhAgAUEAKAKwCkECajYCDAttAQJ/AkACQANAAkAgAEH//wNxIgFBd2oiAkEXSw0AQQEgAnRBn4CABHENAgsgAUGgAUYNASAAIQIgARAoDQJBACECQQBBACgCsAoiAEECajYCsAogAC8BAiIADQAMAgsLIAAhAgsgAkH//wNxC6sBAQR/AkACQEEAKAKwCiICLwEAIgNB4QBGDQAgASEEIAAhBQwBC0EAIAJBBGo2ArAKQQEQKSECQQAoArAKIQUCQAJAIAJBIkYNACACQSdGDQAgAhAsGkEAKAKwCiEEDAELIAIQGkEAQQAoArAKQQJqIgQ2ArAKC0EBECkhA0EAKAKwCiECCwJAIAIgBUYNACAFIARBACAAIAAgAUYiAhtBACABIAIbEAILIAMLcgEEf0EAKAKwCiEAQQAoArQKIQECQAJAA0AgAEECaiECIAAgAU8NAQJAAkAgAi8BACIDQaR/ag4CAQQACyACIQAgA0F2ag4EAgEBAgELIABBBGohAAwACwtBACACNgKwChAlQQAPC0EAIAI2ArAKQd0AC0kBA39BACEDAkAgAkUNAAJAA0AgAC0AACIEIAEtAAAiBUcNASABQQFqIQEgAEEBaiEAIAJBf2oiAg0ADAILCyAEIAVrIQMLIAMLC+wBAgBBgAgLzgEAAHgAcABvAHIAdABtAHAAbwByAHQAZgBvAHIAZQB0AGEAbwB1AHIAYwBlAHIAbwBtAHUAbgBjAHQAaQBvAG4AcwBzAGUAcgB0AHYAbwB5AGkAZQBkAGUAbABlAGMAbwBuAHQAaQBuAGkAbgBzAHQAYQBuAHQAeQBiAHIAZQBhAHIAZQB0AHUAcgBkAGUAYgB1AGcAZwBlAGEAdwBhAGkAdABoAHIAdwBoAGkAbABlAGkAZgBjAGEAdABjAGYAaQBuAGEAbABsAGUAbABzAABB0AkLEAEAAAACAAAAAAQAAEA5AAA=",typeof Buffer<"u"?Buffer.from(t6,"base64"):Uint8Array.from(atob(t6),A=>A.charCodeAt(0)))).then(WebAssembly.instantiate).then(({exports:A})=>{W=A}),t6;function o6(A){return A!==void 0?{ok:!0,value:A}:{ok:!0}}function i6(A){return{ok:!1,error:A}}function La(A){return A.then(e=>o6(e),e=>i6(e))}var Wk=/^\s*(['"](\..*)['"])\s*$/mu,ve=class extends Error{constructor(j){super();this.persistedMissingRelativeImports=j;this.name="RewriteRelativeImportsError"}};function ht(A){return A instanceof ve}async function gt(A,e){await n6;let[j]=r6(A),t=A,r=new Set,n=[...j].reverse();for(let{s:o,e:i,d:a}of n){if(a===-2)continue;if(a===-1){let m=A.substring(o,i);if(!m.startsWith("."))continue;let $=e[m];$===void 0&&(r.add(m),$=Ja(m)),t=Ka(t,$,o,i);continue}let s=A.substring(o,i),k=s.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1").trim().match(Wk);if(!k)continue;let c=k[1],u=k[2];if(c===void 0||u===void 0)continue;let d=e[u];d===void 0&&(r.add(u),d=Ja(u));let E=s.replace(new RegExp(a6(c),"g"),JSON.stringify(d));t=Ka(t,E,o,i)}return r.size>0?i6({partiallyProcessedCode:t,unresolvedRelativeImports:r,parsedImports:j}):o6(t)}function Ka(A,e,j,t){return A.slice(0,j)+e+A.slice(t)}function a6(A){return A.replace(/[.*+\-?^${}()|[\]\\]/gu,"\\$&")}function Ja(A){return`!missing/${A}`}var x=KA("modules-storage"),Yk="kit",Qa=Object.freeze({}),Ua=Object.freeze({});function Pm(A){return A&&(A.type==="codeFile"||A.type==="shader")?(I(GA(A.sourceContent),`${A.type} module entry is missing source content`),!0):!1}function s6(A){return A.name===_r&&A.type===Ao}function Zk(A){return A.id===jj}function Va(A,e){return!!A&&A.saveId===e.saveId&&A.id===e.moduleId}var bt=class extends Error{constructor(){super("A circular dependency was detected."),this.name="CircularDependencyError"}},Pe="update-modules-storage",Ac=0;async function jA(A){let e=performance.now(),j=`acquire-modules-storage-lock-${Ac++}`;return Ie(j),Kr.request(Pe,()=>{let t=performance.now()-e;return dt(`\u{1F513} Acquire ${Pe} lock`,j),$t(j),x.debug("\u{1F513} Acquired the",Pe,"lock in",t.toFixed(2),"ms"),t>1e3&&x.warn("\u2757 Long wait: it took",t.toFixed(0),"ms to acquire the",Pe,"lock."),A()})}var _t=class{constructor(e,j,t,r){this.storage=e;this.localId=j;this.type=t;this.debugModuleStoreAndComponentLoaderRevisionsMatch=r}get id(){let e=this.storage.getPersistedModuleByLocalId(this.localId);if(e)return e.id;let j=this.storage.getModuleTreeData(this.localId);return I(j,"Module must exist"),j.moduleId}get saveId(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.saveId;let j=this.storage.getPersistedModuleByLocalId(this.localId);return I(j,"Module must exist"),j.saveId}get transientSVGIcon(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.svgIcon}get lastPublish(){return this.storage.getPersistedModuleByLocalId(this.localId)?.lastPublish??null}externalModuleIdentifier(e="default"){let j=this.storage.getTransientSaveByLocalId(this.localId);if(j){let r=SA(j.name);return aj(this.id,j.saveId,r.module,e)}let t=this.storage.getPersistedModuleByLocalId(this.localId);return I(t?.files.module,"ModulesStorage: Expected module typed file in persisted module."),aj(this.id,t.saveId,t.files.module,e)}delete(){return this.storage.delete(this.localId)}publish(e,j,t){return this.storage.publish(this.localId,{namespace:e,name:j,version:t})}sourceRevision(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.sourceRevision;let j=this.storage.getPersistedModuleByLocalId(this.localId);if(j)return E6(j)}annotations(e,j){let t=this.storage.getTransientSaveByLocalId(this.localId),r=t?.annotations?Xj(t.annotations):this.storage.getModuleTreeData(this.localId)?.annotations;return e&&this.debugModuleStoreAndComponentLoaderRevisionsMatch()&&jc(r,e),j?r?.[j]:r}},k6=class extends _t{constructor(j,t,r,n,o){super(j,t,r,n);this.name=o}currentSourceEquals(j,t){let r=this.storage.getPersistedModuleByLocalId(this.localId);return!r||r.submodules.length||t.submodules?.size?!1:r.sourceContent===j}updateSource(j,t={}){return this.storage.updateSources([{localId:this.localId,source:j,options:{...t,stableName:!0}}])}persist(j){return this.storage.upsert(this.localId,{...j,type:this.type,name:this.name})}getKitSectionsStructure(){let j=this.storage.getTransientSaveByLocalId(this.localId);return j?j.kitSectionsStructure:this.storage.getKitSectionsStructure(this.name)}};function jc(A,e){if(!A)return;let j=AA(e.identifier);I(_A(j)&&JA(j),"Entity must have an identifier."),e.annotations&&j.exportSpecifier in A&&!oo(A[j.exportSpecifier],Xj({default:e.annotations}).default,!0)&&x.reportError("Static annotations are not synchronized with runtime annotations.",{identifier:e.identifier})}function E6(A){let e=A?.metadata.sourceRevision;return sj(e)?e:void 0}var c6=class extends _t{updateSource(e,j){return this.storage.updateSources([{localId:this.localId,source:e,options:j??{}}])}persist(e){return this.storage.update(this.localId,e)}rename(e){return this.storage.rename(this.localId,e)}},yt=class{constructor(e,j,t=()=>!0){this.storage=e;this.type=j;this.moduleStoreAndComponentLoaderRevisionsMatch=t}async create(e){return this.storage.create({...e,type:this.type})}getByStableName(e){return new k6(this.storage,gr(this.type,e),this.type,this.moduleStoreAndComponentLoaderRevisionsMatch,e)}getByLocalId(e){return new c6(this.storage,e,this.type,this.moduleStoreAndComponentLoaderRevisionsMatch)}getUniqueName(e){return this.storage.getUniqueNameForType(this.type,e)}},St=class{constructor(e,j,t,r,n,o,i,a){this.getModulesService=e;this.compile=j;this.process=t;this.processWhenReady=r;this.runWhenIdle=n;this.treeStore=o;this.getActiveScope=i;this.makeDocumentReadOnly=a;P(this,"useTreeAsLocalModuleList",!1);P(this,"writeLocalModulesToTree",!1);P(this,"detached",!1);P(this,"dependenciesModule");P(this,"persistedModules",new Map);P(this,"persistedLocalIdsByTypeSlashNameCache",new WeakMap);P(this,"transientSaves",new Map);P(this,"lastSnapshot",{dependenciesModule:void 0,modules:new Map,depsGraph:{},initialized:!1});P(this,"modulesService");P(this,"lazyServerModulesForTransientSaves",new Map);P(this,"backgroundJob",null);P(this,"backgroundAbortController",null);P(this,"initialized",!1);P(this,"initializationStarted",!1);P(this,"readOnlyTree",!1);P(this,"resolveInitialization",()=>{throw new Error("initializationPromise has not executed yet")});P(this,"rejectInitialization",()=>{throw new Error("initializationPromise has not executed yet")});P(this,"initializationPromise",new Promise((e,j)=>{this.resolveInitialization=e,this.rejectInitialization=j}));P(this,"didSetupModuleEventStream",!1);P(this,"transientInfo",null);P(this,"previousLocalModuleNodes",[]);P(this,"treeNodesToUpdate",new Map);P(this,"treeNodesToDelete",[]);P(this,"goingToStartUsingLocalModulesInTree",!1);P(this,"listeners",new Set);P(this,"transientSaveRetries",new Map);P(this,"transientSaveRelativeImportRetries",new Set);P(this,"downloadQueue",new Ae(1200))}hasPendingServerModules(){return this.lazyServerModulesForTransientSaves.size>0}processOnePendingServerModule(){return this.lazyServerModulesForTransientSaves.size===0?Promise.resolve(!1):jA(async()=>{for(let[,e]of this.lazyServerModulesForTransientSaves)for(let j of e){let t=this.persistedModules.get(j)?.localId;if(!t)continue;let r=this.persistedModules.get(t);if(r?.kind!=="server")continue;x.debug("\u{1F343} Process one server \u2192 local module",j);let n=await this.createLocalModuleFromModule(r),o=kA(this.persistedModules,i=>{i.set(r.localId,n)});return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:o,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!1,transientSaves:this.transientSaves}),!0}return!1})}async changeScope(e){if(!this.hasPendingServerModules())return;let j=xe(e);!j||j.size===0||(await jA(async()=>{let t=new Set,r=this.lastSnapshot.depsGraph;for(let[a,s]of this.lazyServerModulesForTransientSaves)gj(r,a,s,j,t);let n=[];for(let a of t){let s=this.getModuleWithTypeSlashName(a);s?.kind==="server"&&n.push(this.createLocalModuleFromModule(s))}if(x.debug("\u{1F343} Prioritizing making visible modules local after changing scope:",e.id,"/ Visible:",j,"/ Visible Dependencies:",t,"/ Server modules:",n.length),n.length===0)return;let o=await Promise.all(n),i=kA(this.persistedModules,a=>{for(let s of o)a.set(s.localId,s)});this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:i,depsGraph:r,didRemoteChange:!1,transientSaves:this.transientSaves})}),this.makeLazyServerModulesLocalWhenIdle().catch($A))}async makeVisibleDependentServerModulesLocal(e){if(!CA.isOn("prioritizedModuleEvaluation"))return;let j=this.getActiveScope(),t=new Set,r=xe(j),n=new Set;for(let a of e){let s=this.typeAndNameFromLocalId(a.localId,a.options.stableName),l=X(s),k=this.lastSnapshot.depsGraph;gj(k,l,n,r,t),this.lazyServerModulesForTransientSaves.set(l,n),t.delete(l)}let o=[];for(let a of t){let s=this.getModuleWithTypeSlashName(a);s?.kind==="server"&&o.push(this.createLocalModuleFromModule(s))}x.debug("\u{1F343} Prioritizing dependent server modules after updating:",e.map(a=>a.localId),"/ Visible:",t,"/ Lazy:",n,"/ Server modules:",o.length);let i=this.persistedModules;if(o.length>0){let a=await Promise.all(o);i=kA(i,s=>{for(let l of a)s.set(l.localId,l)})}this.persistedModules=i}async makeLazyServerModulesLocalWhenIdle(){this.cancelBackgroundJob(),this.backgroundAbortController=new AbortController;let{signal:e}=this.backgroundAbortController;return this.backgroundJob=(async()=>{try{for(;this.hasPendingServerModules()&&!e.aborted;){let j=new ue;if(this.runWhenIdle(()=>{if(e.aborted){j.resolve(!1);return}this.processOnePendingServerModule().then(j.resolve,j.reject)}),!await j)break}}finally{this.backgroundJob=null,this.backgroundAbortController=null}})(),this.backgroundJob}cancelBackgroundJob(){this.backgroundAbortController&&this.backgroundAbortController.abort()}getTransientSave(e){return this.transientSaves.get(e)}resetModuleStateAndPermissions(e){this.readOnlyTree=e==="readonly",this.useTreeAsLocalModuleList=e==="readonly"||e==="readwrite-detached",this.detached=e==="readwrite-detached",!this.useTreeAsLocalModuleList&&this.modulesService&&this.setupModuleEventStreamIfNeeded(),this.treeNodesToUpdate.clear(),this.treeNodesToDelete=[],this.transientSaves.size>0&&(x.reportErrorOncePerMinute(new Error("Discarding transient saves"),{count:this.transientSaves.size}),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:this.persistedModules,transientSaves:new Map,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}))}async waitForModulesToSave(){let e=Array.from(this.transientSaves.keys());for(let t of e)this.transientSaves.has(t)&&await this.update(t,{});let j=this.transientSaves.size;j>0&&x.warn("waitForModulesToSave: transientSaves seems to be growing, ignoring rest:",j)}async initialize(){return this.initializationStarted?this.initializationPromise:(this.initializationStarted=!0,this.initializeInternal().then(this.resolveInitialization,e=>{x.reportError(e,{context:"Failed to initialize ModulesStorage: "}),this.rejectInitialization(e)}),this.initializationPromise)}setupModuleEventStreamIfNeeded(){this.didSetupModuleEventStream||(this.didSetupModuleEventStream=!0,I(this.modulesService,"ModulesStorage.useModuleEventStream: expected modules service to be initialized"),this.modulesService.moduleEventsStream().read(async({events:e})=>{let j=e.filter(rc);this.handleRemoteModuleSaveEvents(j).catch(x.reportError);let t=e.filter(nc);this.handleRemoteModuleDeleteEvents(t).catch(x.reportError)}).catch(e=>{x.reportError(e,{context:"Failed to read ModulesAPI event stream: "})}))}async initializeInternal(){if(this.modulesService=await this.getModulesService(),!this.modulesService)return;let e=this.treeStore.tree.getLocalModuleNodes();this.writeLocalModulesToTree=!!e,this.useTreeAsLocalModuleList||this.setupModuleEventStreamIfNeeded();let j,t=performance.now();if(Et("modulesStorageStart"),this.useTreeAsLocalModuleList&&e){x.info("init from tree data"),this.previousLocalModuleNodes=e;let s=e.map(l=>({moduleId:l.save.moduleId,saveId:l.save.saveId}));j=await this.modulesService.lookUpModules({queries:s})}else x.info("init from module list"),j=await this.modulesService.list({});Et("modulesStorageInit"),x.debug("listing modules took:",performance.now()-t,"millis");let r=j.data.find(s6);r&&await this.updateDependenciesModule(r);let n=new Map,o=0,i=new Set;await Promise.all(j.data.map(async s=>{if(X(s)===jj)return;let l=await this.createServerModuleFromData(s);x.trace("init - create module",l.localId,l.id,l.saveId,l.savedAt),n.set(l.localId,l),ic(e,s)&&(o+=1),i.add(l.localId)}));let a=this.createDependencyGraph(n);this.initialized=!0,this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:n,transientSaves:this.transientSaves,depsGraph:a,didRemoteChange:!0}),Et("modulesStorageFirstPublish"),this.processTreeUpdates(),o>0&&x.reportError("Data loss detected based on modules saves and modules in tree.",{dataLossCount:o})}createDependencyGraph(e){let j=[];for(let t of e.values()){let r=X(t),n=t.imports.relative;j.push([r,n])}return Lr(j)}hasPendingTreeData(){return this.treeNodesToUpdate.size>0||this.treeNodesToDelete.length>0}processTreeUpdates(){if(this.initialized){if(this.readOnlyTree)if(this.useTreeAsLocalModuleList){if(!this.treeStore.tree.has(hj)){x.info("detected removal of local modules list node, stopping to use tree as local module list"),this.useTreeAsLocalModuleList=!1,this.setupModuleEventStreamIfNeeded();return}}else{if(!this.treeStore.tree.has(hj))return;x.info("detected insertion of a local modules list node, starting to use tree as local module list"),this.useTreeAsLocalModuleList=!0}this.syncLocalModules(),this.tryWriteTreeData()}}async syncLocalModules(){if(!this.useTreeAsLocalModuleList)return;let e=this.treeStore.tree.getLocalModulesListNode()?.children;if(!e||this.previousLocalModuleNodes===e)return;let j=[],t=Vn(this.previousLocalModuleNodes,r=>[r.id,r]);this.previousLocalModuleNodes=e;for(let r of e){let n=t.get(r.id);if(t.delete(r.id),n===r)continue;let o=r.save,i=this.persistedModules.get(r.id);Va(i,o)||Zk(r)&&Va(this.dependenciesModule,o)||(j.push({moduleId:o.moduleId,saveId:o.saveId}),x.debug("syncLocalModules to update:",r.id))}if(t.size>0&&(x.debug("syncLocalModules removing:",t.keys()),this.handleRemoteModuleDeletes(Array.from(t.values()).map(r=>r.save.moduleId))),j.length>0){x.debug("syncLocalModules updating:",j),I(this.modulesService,"ModulesStorage.refresh: expected modules service to be initialized");let r=performance.now(),n=await this.modulesService.lookUpModules({queries:j});x.debug("lookupModules took:",performance.now()-r,"millis"),await this.handleRemoteModuleSaves(n.data)}}canWriteTree(){return!this.treeStore.tree.isViewOnly}tryWriteTreeData(){this.canWriteTree()&&this.hasPendingTreeData()&&this.processWhenReady(()=>{this.writeTreeData()},"nonUserEvent")}writeTreeData(){if(!this.hasPendingTreeData())return;if(!this.canWriteTree())throw new Error("Cannot write tree data");let e=this.treeStore.tree;e.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(e);for(let j of this.treeNodesToDelete)this.persistedModules.get(j)||(x.debug("tryWriteTreeData, remove:",j),e.remove(j));this.treeNodesToDelete=[];for(let[j,{treeVersion:t,errors:r,persistedModule:n}]of this.treeNodesToUpdate.entries())this.persistedModules.get(j)?.saveId===n.saveId&&(x.debug("tryWriteTreeData, write:",j,t,n.id,n.saveId,r),this.updateNode(e,j,t,n,r));this.treeNodesToUpdate.clear()}updateTreeNodeWithOwnTreeVersion(e,j){!this.writeLocalModulesToTree&&!this.maybeUpgradeDocument()||this.process(()=>{this.treeStore.tree.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(this.treeStore.tree);let r=this.treeStore.tree.get(e)?.save.treeVersion??this.treeStore.remoteTreeVersion;x.debug("updateTreeNodeWithCurrentTreeVersion:",e,r,j.id,j.saveId),this.updateNode(this.treeStore.tree,e,r,j)},"nonUserEvent")}updateTreeNode(e,j,t,r,n){return!this.writeLocalModulesToTree&&!this.maybeUpgradeDocument()?!0:this.canWriteTree()?(this.process(()=>{this.treeStore.tree.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(this.treeStore.tree),x.debug("updateTreeNode:",e,j,t.id,t.saveId),this.updateNode(this.treeStore.tree,e,j,t,r,n)},"nonUserEvent"),!0):(x.debug("updateTreeNode - readonly, buffering change"),this.treeNodesToUpdate.set(e,{treeVersion:j,persistedModule:t,errors:r,kitSectionsStructure:n}),!0)}removeTreeNode(e){this.writeLocalModulesToTree&&(this.canWriteTree()?this.process(()=>{x.debug("removeTreeNode:",e),this.treeStore.tree.remove(e)}):this.treeNodesToDelete.push(e))}updateNode(e,j,t,r,n,o){I(this.writeLocalModulesToTree,"not using tree for local modules");let i=e.get(j)?.asDraft()??new wr({id:j});I(i instanceof wr);let a=r.metadata.pluginId,s=r.annotations?Xj(r.annotations):i.save.annotations,l=Ni(s?.default?.framerTrackingIds);l&&(s.default.framerTrackingIds=l);let k={treeVersion:t,moduleId:r.id,saveId:r.saveId,imports:r.imports?.relative,title:r.title,name:r.name,type:r.type,sourceRevision:r.sourceRevision,annotations:s,pluginId:GA(a)?a:i.save.pluginId};i.set({save:k}),i.tree()||e.insertNode(i,hj);let c=ea(r);if(!e.has(c))return;if(io(o)){let E=e.get(c);yA(E)&&E.set({kitSectionsStructure:o})}if(!n)return;let u=e.get(ci);if(x.debug("Writing serialization errors from artifacts to tree for",c),u?.children?.forEach(E=>{let m=E.sourceNodeId??E.scopeId,$=nt(E.sourceNodeModuleType)||r.type===E.sourceNodeModuleType;!m||m!==c||!$||!ui(E.type)||e.remove(E.id)}),n.length===0)return;let d=e.ensureErrorListNode();n.forEach(E=>e.insertNode(E,d.id))}getModuleTreeData(e){return this.treeStore.tree.getNodeWithTrait(e,qr)?.save}getKitSectionsStructure(e){return this.treeStore.tree.getNodeWithTrait(e,yA)?.kitSectionsStructure}createLocalModulesListNodeIfNeeded(e){if(I(this.writeLocalModulesToTree,"not using tree for local modules"),e.has(hj)||!this.canWriteTree())return;x.debug("ensureAllModulesExistInTree:",this.persistedModules.size),e.insertNode(new li);let j=this.treeStore.remoteTreeVersion;this.persistedModules.forEach(t=>{this.updateNode(e,t.localId,j,t)}),this.dependenciesModule&&this.updateNode(e,jj,j,this.dependenciesModule)}usingLocalModulesInTree(){return this.treeStore.tree.has(hj)||this.goingToStartUsingLocalModulesInTree}async startUsingLocalModulesInTree(){if(!this.canWriteTree())throw Error("Project is read only.");this.goingToStartUsingLocalModulesInTree=!0,this.process(()=>{if(this.startUsingLocalModulesInTree){if(!this.canWriteTree())throw Error("Project is read only.");this.treeStore.tree.lineage.setEditReason("startUsingLocalModulesInTree"),this.goingToStartUsingLocalModulesInTree=!1,this.writeLocalModulesToTree=!0,this.createLocalModulesListNodeIfNeeded(this.treeStore.tree)}})}stopUsingLocalModulesInTree(){this.goingToStartUsingLocalModulesInTree=!1,this.process(()=>{if(!this.canWriteTree())throw Error("Project is read only.");this.treeStore.tree.lineage.setEditReason("stopUsingLocalModulesInTree"),this.treeStore.tree.remove(hj),this.writeLocalModulesToTree=!1,this.setupModuleEventStreamIfNeeded()})}maybeUpgradeDocument(){return this.process(()=>{if(!this.canWriteTree()){x.warn("cannot upgrade document if we cannot write, but should not be saving modules either");return}x.info("upgrading document to use local modules list node"),this.treeStore.tree.lineage.setEditReason("maybeUpgradeDocument"),this.writeLocalModulesToTree=!0,this.createLocalModulesListNodeIfNeeded(this.treeStore.tree)},"nonUserEvent"),this.writeLocalModulesToTree}getModuleWithTypeSlashName(e){let j=this.findPersistedModuleLocalIdByTypeSlashName(this.persistedModules,e);if(j)return this.persistedModules.get(j)}async updateDependenciesModule(e){I(s6(e),"updateDependenciesModule called with non dependencies module data");let j=await this.getDependenciesFiles(e),t=j?.dependenciesMapContent;if(!t){let r=JSON.parse(j.importMapContent),n=Fe(r);t=JSON.stringify(n),this.readOnlyTree?x.reportError(new Error("modules storage is read only"),{context:"modules storage is read only while calling updateDependenciesModule"}):(await this.updateDependenciesLocked(r,n),x.info("The missing dependencies file has now been created."))}this.dependenciesModule={kind:"dependencies",...e,id:e.id,localId:e.localId,type:"config",name:e.name,importMapContent:j.importMapContent,dependenciesMapContent:t}}async createServerModuleFromData(e){let j={kind:"server",...e,id:e.id,localId:e.localId,moduleURL:e.baseURL+(e.type==="kit"?e.files.source:e.files.module),update:performance.now()};if((j.type==="codeFile"||j.type==="shader"||j.type==="webPageMetadata")&&(j.sourceContent=await this.fetchSourceContentFromData(e)),ja(j)&&Aa(j)===0){j.sourceContent=await this.fetchSourceContentFromData(e);let t=j.sourceContent.includes("useQueryData")?1:0;j.metadata={...j.metadata,compatibleCmsVersion:t}}return j}async fetchSourceContentFromData(e){return this.downloadQueue.run(async()=>{let j=e.baseURL+e.files.source;return(await fetch(j)).text()})}async refresh(){if(this.initialized&&!this.useTreeAsLocalModuleList)return x.debug("refresh: acquiring lock"),jA(()=>this.refreshLocked())}async refreshLocked(){x.debug("refresh: start"),I(this.modulesService,"ModulesStorage.refresh: expected modules service to be initialized");let{data:e}=await this.modulesService.list({});x.debug("refresh: there's",e.length,"modules to process");let j=new Map,t=new Set;await Promise.all(e.map(async n=>{let o=n.localId;if(s6(n)){this.dependenciesModule?.saveId!==n.saveId&&await this.updateDependenciesModule(n);return}let i=this.persistedModules.get(o);if(i?.saveId===n.saveId)j.set(o,i);else{let a=await this.createServerModuleFromData(n);x.debug("refresh - updating module",a.localId,a.id,a.saveId,a.savedAt),j.set(o,a)}t.add(o)}));let r=this.createDependencyGraph(j);this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:j,transientSaves:this.transientSaves,depsGraph:r,didRemoteChange:!0}),x.debug("refresh: finish")}whenInitialized(){return this.initializationPromise}async whenIdle(){await Promise.all([this.whenInitialized(),jA(()=>{})])}isProcessing(){return!!(!this.initialized||this.transientSaves.size>0||Kr.isLocked(Pe))}hasLocalChanges(){return this.transientSaves.size>0}hasLocalCodeFileChanges(){if(this.transientSaves.size===0)return!1;for(let e of this.transientSaves.values())if(e.type==="codeFile"||e.type==="shader"||e.type==="config")return!0;return!1}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(e){this.listeners.forEach(j=>{try{j(e)}catch(t){x.reportError(t)}})}subscribe(e){return this.addListener(e),e(Xa(this.dependenciesModule,void 0,this.persistedModules,this.transientSaves,this.lastSnapshot.depsGraph,new Map,this.initialized,!1,!1)),()=>this.removeListener(e)}getDependentsOfModule(e){return this.lastSnapshot.depsGraph[e]?.dependents}getUniqueNameForType(e,j){let t=new Set;for(let r of this.persistedModules.values())r.type===e&&t.add(r.name);return Pa(t,j)}async updateSources(e){return jA(async()=>{let j=!1;for(let{localId:t,source:r,options:n}of e){let o=Date.now();try{await this.updateSourceLocked(t,{...n,source:r}),j=!0}catch(i){i instanceof bt&&EA({type:"add",variant:"error",text:"Instances of your component won't update if they are nested within themselves.",key:"component-circular-dependency",icon:"error",duration:Number.POSITIVE_INFINITY}),x.reportError(i)}finally{let i=Date.now()-o;x.debug("\u23F1 update source",t,"in",i,"ms")}}return await this.makeVisibleDependentServerModulesLocal(e),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:this.persistedModules,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!1}),this.makeLazyServerModulesLocalWhenIdle().catch($A),j})}async updateDependenciesSource(e,j){return jA(async()=>{I(this.dependenciesModule,"Dependency files must already exist to be updated.");let t=e===jo?j:this.dependenciesModule.importMapContent,r=e===eo?j:this.dependenciesModule.dependenciesMapContent;return this.updateDependenciesLocked(JSON.parse(t),JSON.parse(r))})}async compileSubmodules(e,j){let t={};return await Promise.all([...j].map(async([r,n])=>{let o=await this.compile({name:r,source:n,type:e,includeSourceMap:!1,addFramerMetadata:!1});for(let a of o.imports.relative){let s=qi(a);if(!(s&&j.has(s)))throw new Error("Submodules only support relative imports of other submodules")}let i=Ti(r);t[i]=o.code})),t}typeAndNameFromLocalId(e,j=!1){if(j)return rt(e);for(let t of this.lastSnapshot.modules.values())if(t?.localId===e)return t;throw new Error(`Module entry for local id ${e} missing in internal snapshot`)}async updateSourceLocked(e,{source:j,submodules:t,binaryAssets:r=Ua,stableName:n=!1,assets:o,preventCircularImports:i,telemetrySession:a,treeVersion:s,sourceRevision:l,svgIcon:k,kitSectionsStructure:c}){await this.whenInitialized();let u=this.typeAndNameFromLocalId(e,n),d=X(u),E=await this.compile({localId:e,name:d,source:j,type:u.type,includeSourceMap:l6(u.type),telemetrySession:a}),m=Qa;t&&(m=await this.compileSubmodules(u.type,t));let $=zj(this.lastSnapshot.depsGraph,d,E.imports.relative);if(i&&Zi($,d))throw new bt;let f=oc(u.type,E.annotations),R=kA(this.transientSaves,y=>{let b=y.get(e),G,O=f?.framerIntrinsicWidth;O&&(G={...G,intrinsicWidth:Number.parseInt(O,10)});let L=f?.framerIntrinsicHeight;if(L&&(G={...G,intrinsicHeight:Number.parseInt(L,10)}),G={...G,compilerContractVersion:1,treeAnnotations:!0,localModuleImportMapEntries:this.moduleUsesLocalImportMapSpecifiers(d)},b)b.saveId=dj(),b.moduleContent=E.code,b.sourceContent=j,b.sourceMapContent=E.sourceMap,b.submoduleContents=m,b.binaryAssetContents=r,b.imports=E.imports,b.exports=E.exportedNames,b.reExportedModules=E.reExportedModules,b.treeVersion=s??this.treeStore.remoteTreeVersion,b.sourceRevision=l??b.sourceRevision,b.annotations=E.annotations,b.svgIcon=k??b.svgIcon,b.kitSectionsStructure=c??b.kitSectionsStructure,b.update=performance.now(),o&&(b.assets=Array.from(o)),G&&(b.metadata={...b.metadata,...G});else{let v={localId:e,type:u.type,name:u.name,saveId:dj(),moduleContent:E.code,sourceContent:j,sourceMapContent:E.sourceMap,submoduleContents:m,binaryAssetContents:r,imports:E.imports,exports:E.exportedNames,reExportedModules:E.reExportedModules,treeVersion:s,sourceRevision:l,svgIcon:k,kitSectionsStructure:c,annotations:E.annotations,update:performance.now()};o&&(v.assets=Array.from(o)),G&&(v.metadata=G),y.set(e,v)}});this.transientInfo||=new Set,this.transientInfo.add(e),this.transientSaves=R,this.lastSnapshot={...this.lastSnapshot,depsGraph:$}}async create(e){return jA(()=>this.createLocked(e))}async createLocked(e){await this.whenInitialized();let{type:j,name:t,source:r,...n}=e,o=X({type:j,name:t}),i=await this.compile({name:o,source:r,type:j,includeSourceMap:l6(j)}),a={localId:void 0,type:j,name:t,saveId:dj(),moduleContent:i.code,sourceContent:r,sourceMapContent:i.sourceMap,submoduleContents:Qa,binaryAssetContents:Ua,imports:i.imports,exports:i.exportedNames,reExportedModules:i.reExportedModules,treeVersion:e.treeVersion||this.treeStore.remoteTreeVersion,sourceRevision:e.sourceRevision,svgIcon:e.svgIcon,kitSectionsStructure:e.kitSectionsStructure,annotations:i.annotations,update:performance.now()},s=await this.createBatchSaveForUpdatedModule("$new",a,this.persistedModules,new Map,new Map,{type:j,name:t,...n});I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let{data:l}=await this.modulesService.saveBatch({batch:[s]}),{updatedModuleLocalId:k,nextPersistedModules:c}=this.processTransientSaveData({nextPersistedModules:this.persistedModules,transientSave:a,data:l}),u=zj(this.lastSnapshot.depsGraph,o,i.imports.relative);return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:c,transientSaves:this.transientSaves,depsGraph:u,didRemoteChange:!0}),k}async update(e,j){let t=this.persistedModules.get(e);return I(t,"Trying to update an unknown module with localId:",e),jA(async()=>{let r=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked({[e]:{...j,name:t.name,type:t.type}})}finally{let n=Date.now()-r;x.debug("\u23F1 update",e,"in",n,"ms")}})}async rename(e,j){return jA(()=>this.renameLocked(e,j))}async renameLocked(e,j){await this.whenInitialized();let t=this.persistedModules,r=this.lastSnapshot.depsGraph,n=t.get(e);I(n,"Trying to rename an unknown module with localId:",e);let o=this.treeStore.remoteTreeVersion,i=X(n);I(!this.readOnlyTree,"modules storage is read only"),I(!this.detached,"renaming modules is not supported in detached mode"),I(this.modulesService);let a=await this.modulesService.update({moduleId:n.id,name:j});I(a,"invalid update reply");let s=r[i]?.dependents,l=[],k={},c=X(a);if(i!==c&&(r=mt(r,i),r=zj(r,c,n.imports.relative)),s){let u=[],d=[];for(let $ of t.values()){let f=X($);s.has(f)&&($.kind==="local"?u.push($):d.push($))}if(d.length>0){let $=await Promise.all(d.map(f=>this.createLocalModuleFromModule(f)));t=kA(t,f=>{for(let R of $)f.set(R.localId,R),u.push(R)})}let E=[];for(let $ of u){let f=X($),R=Tr(f,`${n.type}/${j}`);I(R,"Failed to create relative path to",n.type,"/",j);let y=Tr(f,i);I(y);let b=$.imports.relative.indexOf(y);if(b===-1){x.warn($.localId,"doesn't import",y);continue}let G=[...$.imports.relative];G[b]=R;let O={absolute:$.imports.absolute,bare:$.imports.bare,relative:G},L=Ya($.sourceContent,y,R),v=Ya($.moduleContent,y,R);k[$.localId]={sourceContent:L,moduleContent:v,imports:O},I($.files.source);let F={type:$.type,moduleId:$.id,name:$.name,saveId:dj(),patchSaveId:$.saveId,files:[{name:$.files.source,type:"source",content:L}],imports:O,detached:this.detached};E.push(F)}I(!this.readOnlyTree,"modules storage is read only");let{data:m}=await this.modulesService.saveBatch({batch:E});l=m}t=kA(t,u=>{if(this.updateTreeNode(e,o,a)){n.kind==="server"?u.set(e,{...a,kind:"server",localId:a.localId,id:a.id,moduleURL:a.baseURL+a.files.module,sourceContent:n.sourceContent,update:performance.now()}):u.set(e,{...a,kind:"local",localId:a.localId,id:a.id,moduleURL:a.baseURL+a.files.module,sourceContent:n.sourceContent,moduleContent:n.moduleContent,sourceMapContent:n.sourceMapContent,submoduleContents:n.submoduleContents,binaryAssetContents:n.binaryAssetContents,update:performance.now()});for(let E of l){let m=E.localId,$=u.get(m);I($?.kind==="local","dependent module must be local:",m);let f=k[m];I(f,"dependent module update must exist:",m),this.updateTreeNode(m,o,E)&&(u.set(m,{...E,kind:"local",localId:m,id:E.id,moduleURL:E.baseURL+E.files.module,moduleContent:f.moduleContent,sourceContent:f.sourceContent,sourceMapContent:$.sourceMapContent,submoduleContents:$.submoduleContents,binaryAssetContents:$.binaryAssetContents,imports:f.imports,exports:E.exports,reExportedModules:E.reExportedModules,submodules:E.submodules,binaryAssets:E.binaryAssets,sourceRevision:$.sourceRevision,update:$.update}),r=zj(r,X(E),f.imports.relative))}}}),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:t,transientSaves:this.transientSaves,depsGraph:r,didRemoteChange:!0})}async upsert(e,j){return jA(async()=>{let t=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked({[e]:j})}finally{let r=Date.now()-t;x.debug("\u23F1 upsert",e,"in",r,"ms")}})}async upsertBatch(e){return jA(async()=>{let j=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked(e)}finally{let t=Date.now()-j;x.debug("\u23F1 upsert batch in",t,"ms")}})}async delete(e){return jA(()=>this.deleteLocked(e))}async deleteLocked(e){let j=Array.isArray(e)?e:[e];if(!j.length)return;await this.whenInitialized();let t=j.map(k=>{let c=this.persistedModules.get(k);return I(c,"Trying to delete an unknown module",k,"It was never persisted."),c}),{modulesService:r}=this;I(r);let n=await Promise.allSettled(t.map(k=>r.delete({moduleId:k.id}))),o=new Set,i=new Set;for(let k of n){if(k.status==="rejected"){x.warn(String(k.reason));continue}o.add(k.value.localId),i.add(k.value.id)}j=j.filter(k=>o.has(k)),t=t.filter(k=>i.has(k.id)),I(j.length>0,"Failed to delete module(s)");let a=this.lastSnapshot.depsGraph;for(let k of t){let c=X(k);a=mt(a,c)}let s=kA(this.persistedModules,k=>{for(let c of j)k.delete(c),this.removeTreeNode(c)}),l=kA(this.transientSaves,k=>{for(let c of j)k.delete(c)});this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:s,transientSaves:l,depsGraph:a,didRemoteChange:!0})}async publish(e,j){return jA(()=>this.publishLocked(e,j))}async publishLocked(e,{namespace:j,name:t,version:r}){await this.whenInitialized();let n=this.persistedModules.get(e);I(n,"Trying to publish an unknown module",e,"It was never persisted."),I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let o=await this.modulesService.publish({moduleId:n.id,saveId:n.saveId,namespace:j,name:t,version:r}),i=kA(this.persistedModules,a=>{let s=a.get(e);s&&a.set(e,{...s,lastPublish:{namespaceId:o.namespaceId,name:o.name,version:o.version,importURL:o.importURL}})});return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:i,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}),o}async addNpmDependencies(e){return jA(async()=>{await this.whenInitialized();let j;this.dependenciesModule?.importMapContent?j=JSON.parse(this.dependenciesModule?.importMapContent):j={imports:{}};let t;this.dependenciesModule?.dependenciesMapContent?t=JSON.parse(this.dependenciesModule?.dependenciesMapContent):t={dependencies:{}};let r=new Set(Object.keys(j.imports).filter(l=>l.endsWith("/"))),n=l=>{let k=l.indexOf("/");for(;k!==-1;){let c=l.slice(0,k+1);if(r.has(c))return!0;k=l.indexOf("/",k+1)}return!1},o=Array.isArray(e)?e:[e];if(o=o.filter(l=>{if(UA.has(l.target)||fe(l.target))return!1;let k=me(l);return!(j.imports?.[k]||n(k))}),o.length===0)return{dependenciesMap:t};o=o.map(l=>{if(t.dependencies[l.target]){let c=j.imports[l.target]??Object.entries(j?.imports).find(([d])=>d.startsWith(l.target))?.[1];if(CA.isOn("importMapPruning")&&!c)return l;I(c,"Import map must contain all dependencies from dependencies map");let u=ni(c)?.version;return u?{...l,target:`${l.target}@${u}`}:l}let k=lj[l.target];return k?{...l,target:`${l.target}@${k}`}:l});let{importMap:i,resolvedDependencies:a}=await Zo(j,o,UA,lj),s=await this.extendCurrentDependenciesMap(a);return a.forEach(({name:l,version:k})=>DA("npm_dependency_add",{name:l,semver:k})),x.debug({newImportMap:i,newDependenciesMap:s}),await this.updateDependenciesLocked(i,s),{dependenciesMap:s}})}async reinstallNpmDependencies(){return jA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies();delete e.scopes;let{importMap:t}=await Ai(e,UA,lj);return await this.updateDependenciesLocked(t,j),t})}async uninstallBlockedNpmDependencies(){return jA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies(),t=Pr(j),r=await ei(e);return await this.updateDependenciesLocked(r,t),r})}async clearNpmDependencies(){return jA(async()=>this.updateDependenciesLocked({imports:{}},{dependencies:{}}))}async removeBlockedNpmDependencies(){return jA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies(),t=Pr(j);return await this.updateDependenciesLocked(e,j),t})}async rebuildImportMapFromDependencies(){return jA(async()=>{let e=this.dependenciesModule?.dependenciesMapContent,j=e?JSON.parse(e):{dependencies:{}},t=await ri(j,UA,lj);return await this.updateDependenciesLocked(t,j),t})}getLocalModuleBareImports(){let e=new Set;for(let j of this.persistedModules.values())for(let t of j.imports.bare)e.add(t);return e}getComposedImportMap(){let e=oi();if(this.dependenciesModule?.importMapContent){let r=JSON.parse(this.dependenciesModule.importMapContent);e=Rj(e,r,"source-wins")}let j=this.getLocalModuleBareImports();e.imports=Object.fromEntries(Object.entries(e.imports).filter(([r])=>j.has(r)));let t=this.createLocalModuleImportMap();return e=Rj(e,t,"source-wins"),e}createLocalModuleImportMap(){let e={};for(let j of this.persistedModules.values()){let t=j;if(GA(t.files.module)){let r=Lj(t.localId,t.files.module);e[r]=t.moduleURL}}return{imports:e}}async rebuildImportMapFromEntryPoints(e,j,t){return jA(async()=>{let r=j??this.getComposedImportMap(),n=await ct(e,UA,lj,r),o=this.dependenciesModule?.dependenciesMapContent,i=o?JSON.parse(o):{dependencies:{}},a=Object.fromEntries(Object.entries(n.imports??{}).filter(([E])=>!UA.has(E)&&!br(E))),s=new Set([...this.persistedModules.values()].map(E=>E.baseURL)),l={},k=[];for(let E in n.scopes){let m=n.scopes[E];if(!m)continue;let $=Object.fromEntries(Object.entries(m).filter(([f])=>!(UA.has(f)||br(f)||Zn(f)||E==="https://ga.jspm.io/"&&(f==="fs"||f==="process"))));Object.keys($).length>0&&(s.has(E)?Object.assign(l,$):k.push([E,$]))}let c={imports:a,...k.length>0?{scopes:Object.fromEntries(k)}:{}};c.imports=Object.assign(c.imports,l);let u=new Set(Object.keys(c.imports??{})),d={dependencies:Object.fromEntries(Object.entries(i.dependencies??{}).filter(([E])=>u.has(E)))};return t?(x.info("Dry run import map",c),x.info("Dry run dependencies map",d)):await this.updateDependenciesLocked(c,d),c})}async unsafeUpgradeDependency(e,j,t){return jA(async()=>{let{currentImportMap:r,currentDependenciesMap:n}=this.getCurrentDependencies(),o=await ti(r,e,j,t),i=Fe(o),a=Ge(i,n);return await this.updateDependenciesLocked(o,a),o})}async extendCurrentImportMap(e,j){return jA(async()=>{let{currentImportMap:t,currentDependenciesMap:r}=this.getCurrentDependencies(),n=Rj(t,e),o=Ge(r,j);return this.updateDependenciesLocked(n,o)})}async extendCurrentDependenciesMap(e){let j={};for(let r of e)j[r.name]=r.version;let t=this.dependenciesModule?.dependenciesMapContent?JSON.parse(this.dependenciesModule?.dependenciesMapContent):{dependencies:{}};return t.dependencies=Object.assign(j,t.dependencies),t}getCurrentDependencies(){let e=this.dependenciesModule?.importMapContent?JSON.parse(this.dependenciesModule?.importMapContent):{imports:{}},j=this.dependenciesModule?.dependenciesMapContent?JSON.parse(this.dependenciesModule?.dependenciesMapContent):{dependencies:{}};return{currentImportMap:e,currentDependenciesMap:j}}async updateDependenciesLocked(e,j){let t=JSON.stringify(e,null,4),r=JSON.stringify(j,null,4);if(t===this.dependenciesModule?.importMapContent&&r===this.dependenciesModule?.dependenciesMapContent)return;let n={moduleId:"$upsertName",name:_r,saveId:dj(),type:"config",files:[{name:"importMap.json",type:"importMap",content:t},{name:"dependencies.json",type:"dependencies",content:r}],imports:{absolute:[],relative:[],bare:[]},detached:this.detached};I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let{data:[o]}=await this.modulesService.saveBatch({batch:[n]});I(o,"Modules API must return an updated import map after savebatch"),this.updateTreeNodeWithOwnTreeVersion(jj,o);let i={kind:"dependencies",importMapContent:t,dependenciesMapContent:r,...o,id:o.id,localId:o.localId,type:o.type,name:o.name};this.setNextInternalState({dependenciesModule:i,persistedModules:this.persistedModules,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0})}getPersistedDependenciesModule(){return this.dependenciesModule}getPersistedModuleByGlobalId(e){for(let j of this.persistedModules.values())if(j.id===e)return j}getPersistedModuleByLocalId(e){return this.persistedModules.get(e)}getTransientSaveByLocalId(e){return this.transientSaves.get(e)}async handleRemoteModuleDeleteEvents(e){if(!this.useTreeAsLocalModuleList)return this.handleRemoteModuleDeletes(e.map(j=>j.id))}async handleRemoteModuleDeletes(e){await jA(async()=>{let j=[],t=[];for(let i of e){let a=this.getPersistedModuleByGlobalId(i);a&&(t.push(X(a)),j.push(a.localId))}let r=kA(this.persistedModules,i=>{for(let a of j)i.delete(a)}),n=kA(this.transientSaves,i=>{for(let a of j)i.delete(a)}),o=this.lastSnapshot.depsGraph;for(let i of t)o=mt(o,i);this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:r,transientSaves:n,depsGraph:o,didRemoteChange:!0})})}async handleRemoteModuleSaveEvents(e){if(!this.useTreeAsLocalModuleList)return this.handleRemoteModuleSaves(e.map(j=>j.module))}async handleRemoteModuleSaves(e){let j=[],t=[];for(let o of e)X(o)===jj?j.push(o):t.push(o);let r,n=j.length>0?j[j.length-1]:void 0;if(n){let{importMapContent:o,dependenciesMapContent:i}=await this.getDependenciesFiles(n);I(i,"No dependencies file exists for the remote update!"),r={kind:"dependencies",...n,id:n.id,localId:n.localId,type:"config",name:n.name,importMapContent:o,dependenciesMapContent:i}}await jA(async()=>{r&&(this.dependenciesModule=r);let o=this.persistedModules,i=this.lastSnapshot.depsGraph,a=await Promise.all(t.map(s=>this.createServerModuleFromData(s)));for(let s of a){let l=X(s),k=s.localId;o=kA(o,c=>{c.set(k,s)}),this.transientSaves.has(k)||(i=zj(this.lastSnapshot.depsGraph,l,s.imports.relative))}this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:o,transientSaves:this.transientSaves,depsGraph:i,didRemoteChange:!0,multiplayerChange:!0})})}getPatchTransientSave(e,j,t){return{saveId:t,type:j.type,name:j.name,localId:e,moduleContent:j.moduleContent,sourceContent:j.sourceContent,sourceMapContent:j.sourceMapContent,submoduleContents:j.submoduleContents,binaryAssetContents:j.binaryAssetContents,imports:j.imports,exports:j.exports,reExportedModules:j.reExportedModules,sourceRevision:j.sourceRevision,update:j.update}}async upsertBatchLocked(e){if(this.readOnlyTree)return;let j=this.persistedModules,t=new Map,r=[],n=new Map;for(let k of j.values()){let c=X(k);n.set(c,k.localId),r.push([c,k.imports.relative])}let o=new Map;for(let k in e){let c=k,u=e[c];I(u,"No persist params found for",c);let d=this.transientSaves.get(c),E=d??j.get(c);I(E,"No module found for",c);let m=X(E);o.set(m,d?.saveId??dj()),t.set(m,SA(u.name)),n.set(m,c),d&&r.push([m,d.imports.relative])}let i=Lr(r),a=new Map,s=kA(this.transientSaves,k=>{for(let c in e)k.delete(c)}),l;try{let{batch:k,nextPersistedModules:c}=await this.createBatch(e,a,j,i,n,o,t);I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let{data:u}=await this.modulesService.saveBatch({batch:k});j=kA(c,d=>{for(let E of u.values()){let m=E.localId,$=a.get(m);if(!$){let O=d.get(m);I(O,m,"is not in persistedModules"),this.updateTreeNodeWithOwnTreeVersion(m,E),O.saveId=E.saveId,O.moduleURL=E.baseURL+E.files.module;continue}let f={kind:"local",...E,id:E.id,localId:E.localId,imports:$.imports,moduleURL:E.baseURL+E.files.module,sourceContent:$.sourceContent,sourceMapContent:$.sourceMapContent,moduleContent:$.moduleContent,submoduleContents:$.submoduleContents,binaryAssetContents:$.binaryAssetContents,sourceRevision:$.sourceRevision,annotations:$.annotations,update:$.update},R=e[m]?.errors,y=$.kitSectionsStructure,b=$.treeVersion??this.treeStore.remoteTreeVersion;if(!this.updateTreeNode(E.localId,b,f,R,y))return;d.set(m,f)}})}catch(k){j=this.persistedModules;let c=Array.from(a.values()).map(m=>m.saveId).join("-"),u=this.transientSaveRetries.get(c)??0,{error:d,dropTransient:E}=this.handlePersistenceError(k,u,()=>{this.transientSaveRetries.set(c,u+1),setTimeout(async()=>{let m=Object.entries(a).every(([$,f])=>{let R=$,y=this.transientSaves.get(R);return y&&y.saveId===f.saveId});ht(d)&&(this.transientSaveRelativeImportRetries.add(c),await this.refresh()),m&&(x.debug("retrying saving batchId with id:",c),this.upsertBatchLocked(e))},1e3+u*1e3)});if(!E)return;l=d}if(this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:j,transientSaves:s,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}),l)throw l}async createBatch(e,j,t,r,n,o,i){let a=[];for(let c in e){let u=c,d=e[u];I(d,"No persist params found for",u);let E=this.transientSaves.get(u);if(!E){let $=t.get(u);I($,`Trying to persist ${u} but it doesn't have neither a corresponding transient save nor an existing persisted module.`),$.kind==="server"&&($=await this.createLocalModuleFromModule($),t=kA(t,R=>{$&&R.set($.localId,$)}));let f=o.get(u);I(f,"No save id found for",u),E=this.getPatchTransientSave(u,$,f)}j.set(u,E);let m=await this.createBatchSaveForUpdatedModule(this.persistedModules.get(u)?.id??"$upsertName",E,t,o,i,d);a.push(m)}let s=new Map;for(let c in e){let u=c,d=e[u];I(d,"No persist params found for",u);let E=X(d),m=new Set;gj(r,E,m),s.set(u,m)}let l=[];for(let c of s.values())for(let u of c){let d=n.get(u);I(d,"Cannot find localId for",u);let E=t.get(d);E?.kind==="server"&&l.push(this.createLocalModuleFromModule(E))}if(l.length>0){let c=await Promise.all(l);t=kA(t,u=>{for(let d of c)u.set(d.localId,d)})}for(let c of s.values())for(let u of c)o.has(u)||o.set(u,dj());let k=new Set;for(let[c,u]of s){let[d]=ut(c);for(let E of u){let m=n.get(E);if(I(m,"Cannot find localId for",E),j.has(m)||k.has(E)||t.get(m)?.metadata.localModuleImportMapEntries===!0&&this.moduleUsesLocalImportMapSpecifiers(E)&&(d!=="codeFile"||!r[E]?.dependencies.has(c)))continue;k.add(E);let R=await this.createBatchSaveForDependentModule(m,t,o,i);a.push(R)}}return{batch:a,nextPersistedModules:t}}handlePersistenceError(e,j,t){let r=e instanceof Error?e.message:"",n=e instanceof yr?e.code:0,o=e instanceof yr?e.status:0,i=n===1002,a=n===-1e3,s=o>=300&&o!==400&&o!==403,l=a||s||ht(e),k=20,c=2;if(ht(e))return!l||j>=c?(x.reportError("Relative imports error, exceeded max retries, making document read only:",{missing:e.persistedMissingRelativeImports}),this.makeDocumentReadOnly(),EA({type:"add",variant:"warning",text:"Framer can\u2019t save your latest changes. Please reload the page to continue working.",key:"client-outdated",duration:Number.POSITIVE_INFINITY,icon:"warning",showCloseButton:"never",action:{title:"Reload",onClick:()=>{x.reportError("ModulesStorage: Reloaded due to relative imports error.",{missing:e.persistedMissingRelativeImports}),window.top.location.reload()}}}),{error:e,dropTransient:!0}):(x.debug("Relative imports error, will retry:",{missing:e.persistedMissingRelativeImports}),t(),{error:e,dropTransient:!1});if(i&&j>0)x.debug("Ignoring duplicated save id.");else{if(i)return x.debug("Duplicate save id error, will drop transient save:",e),{error:e,dropTransient:!0};if(l&&j<k)return x.info("Connection error, will retry:",{message:r,code:n,status:o,retryCount:j}),t(),{dropTransient:!1};if(l)x.error("Error saving: too many retries, will drop transient save:",{message:r,code:n,status:o,retryCount:j});else return x.debug("Error saving, will drop transient save:",e),{error:e,dropTransient:!0}}return{dropTransient:!1}}moduleUsesLocalImportMapSpecifiers(e){let[j,t]=ut(e);if(j==="layoutTemplate")return!0;if(j==="collection")return CA.isOn("collectionLocalModuleImportMapEntries");if(j==="screen"){let r=this.treeStore.tree.get(t);if(lo(r)||yA(r))return!0}return!1}processTransientSaveData({nextPersistedModules:e,transientSave:j,data:t},r,n){let o=j.treeVersion??this.treeStore.remoteTreeVersion,i;return e=kA(e,a=>{let s=t.values(),l=s.next().value;i=l.localId;let k={kind:"local",...l,id:l.id,localId:i,imports:j.imports,moduleURL:l.baseURL+l.files.module,sourceContent:j.sourceContent,sourceMapContent:j.sourceMapContent,moduleContent:j.moduleContent,submoduleContents:j.submoduleContents,binaryAssetContents:j.binaryAssetContents,sourceRevision:j.sourceRevision,annotations:j.annotations,update:j.update};if(this.updateTreeNode(l.localId,o,k,r,n)){a.set(i,k);for(let u of s){let d=a.get(u.localId);I(d,u.localId,"is not in persistedModules"),this.updateTreeNodeWithOwnTreeVersion(u.localId,u),d.saveId=u.saveId,d.moduleURL=u.baseURL+u.files.module}}}),I(i,"Updated module",j,"is not found in the response"),{nextPersistedModules:e,updatedModuleLocalId:i}}setNextInternalState({dependenciesModule:e,persistedModules:j,transientSaves:t,depsGraph:r,didRemoteChange:n,multiplayerChange:o=!1}){this.dependenciesModule=e,this.persistedModules=j,this.transientSaves=t;let i=Xa(e,this.lastSnapshot.dependenciesModule,j,t,r,this.lastSnapshot.modules,this.initialized,n,o),a=this.lastSnapshot.initialized;this.lastSnapshot={dependenciesModule:i.dependenciesModule,modules:i.modules,depsGraph:i.depsGraph,initialized:i.initialized},!(i.metadata.patches.length===0&&i.initialized===a)&&this.notifyListeners(i)}async createLocalModuleFromModule(e){x.debug("compiling server module:",e.localId);let j=e.sourceContent;j||(j=await this.fetchSourceContentFromData(e));let t={},r={},n=this.downloadQueue,o=new Array;for(let s of e.submodules)o.push(n.run(async()=>{let l=await fetch(e.baseURL+s);t[s]=await l.text()}));for(let s of e.binaryAssets)o.push(n.run(async()=>{let k=await(await fetch(e.baseURL+s)).arrayBuffer();r[s]=new Uint8Array(k)}));await Promise.all(o);let i=X(e),a=await this.compile({localId:e.localId,name:i,source:j,type:e.type,includeSourceMap:l6(e.type)});for(let[s,l]of this.lazyServerModulesForTransientSaves)l.delete(i),l.size===0&&this.lazyServerModulesForTransientSaves.delete(s);return{...e,kind:"local",id:e.id,localId:e.localId,sourceContent:j,moduleContent:a.code,sourceMapContent:a.sourceMap,submoduleContents:t,binaryAssetContents:r,imports:a.imports,sourceRevision:E6(e),annotations:a.annotations}}async createBatchSaveForUpdatedModule(e,j,t,r,n,o){let i=X(j),{localId:a,moduleContent:s,sourceContent:l,sourceMapContent:k,submoduleContents:c={},binaryAssetContents:u={},metadata:d,sourceRevision:E,imports:m,type:$,name:f,annotations:R,update:y,...b}=j;switch(e){case"$new":I(a===void 0,`Attempted to create ${i} but it already has localId: ${a}`);break;case"$upsertName":default:I(a!==void 0,`The transient save for the provided moduleId: ${e} doesn't have localId`)}let{type:G,name:O,metadata:L,files:v,...F}=o;I(G===$&&O===f,`Mismatched type/name between save and parameters: ${G}/${O} !== ${$}/${f}`);let N=SA(O),w=s;m.relative.length>0&&(w=await this.replaceRelativeImportsWithAbsolute(i,s,m.relative,t,r,Cr(c),n)),k&&(w+=`
//# sourceMappingURL=./${N.sourceMap}`);let _=(v??[]).concat([{name:N.module,type:"module",content:w},{name:N.source,type:"source",content:l}]);k&&_.push({name:N.sourceMap,type:"sourceMap",content:k});for(let[D,H]of Object.entries(c))_.push({name:D,type:"submodule",content:H});for(let[D,H]of Object.entries(u))_.push({name:D,type:"binaryAsset",bytes:H});let S={};if(d||L)if(a){let D=t.get(a);I(D||e==="$upsertName",`Cannot safely update metadata for ${e} (${a})`),S.metadata={...D?.metadata,...d,...L,sourceRevision:E}}else S.metadata={...d,...L,sourceRevision:E};return{...b,moduleId:e,type:G,name:O,files:_,imports:m,detached:this.detached,...F,...S}}async createBatchSaveForDependentModule(e,j,t,r){let n=j.get(e);I(n,e,"is not found in persistedModules"),I(n.kind==="local","persisted module is not a local module");let o=X(n),i=SA(n.name),a=n.imports,s=n.moduleContent;a.relative.length>0&&(s=await this.replaceRelativeImportsWithAbsolute(o,n.moduleContent,a.relative,j,t,Cr(n.submoduleContents),r));let l=t.get(o);I(l,"newSaveIds don't contain saveId for",o);let k={},c=this.moduleUsesLocalImportMapSpecifiers(o);return n.metadata.localModuleImportMapEntries!==c&&(k.metadata={...n.metadata,localModuleImportMapEntries:c}),{type:n.type,moduleId:n.id,name:n.name,saveId:l,patchSaveId:n.saveId,files:[{name:i.module,type:"module",content:s}],imports:a,detached:this.detached,...k}}findPersistedModuleLocalIdByTypeSlashName(e,j){return this.ensurePersistedLocalIdsByTypeSlashNameCacheFor(e).get(j)}ensurePersistedLocalIdsByTypeSlashNameCacheFor(e){let j=this.persistedLocalIdsByTypeSlashNameCache.get(e);return j||(j=js(e),this.persistedLocalIdsByTypeSlashNameCache.set(e,j)),j}async replaceRelativeImportsWithAbsolute(e,j,t,r,n,o,i){let{modulesCDN:a}=hr(),s={};for(let E of o){let m=wi(E);s[m]=m}let l=this.moduleUsesLocalImportMapSpecifiers(e),k=new Set;for(let E of t){if(E in s)continue;let m=Ij(E,e);if(!m)continue;let $=this.findPersistedModuleLocalIdByTypeSlashName(r,m);if(!$){k.add(m),x.error("Cannot resolve",E,"from",e);continue}let f=r.get($);I(f);let{id:R,files:y}=f,b=n.get(m)??f.saveId,G=i?.get(m)?.module??y.module;I(GA(G),"Must have a module file name to build a local module import map specifier."),s[E]=l?Lj($,G):`${a}/${R}/${b}/${G}`}let c=await gt(j,s);if(c.ok)return c.value;if(e.startsWith("codeFile"))return c.error.partiallyProcessedCode;let u=new Set,d=this.treeStore.tree;for(let E of c.error.unresolvedRelativeImports){let m=Ij(E,e);if(!m)continue;let[$]=ut(m);if(!($==="codeFile"||!d.getNodeWithTrait(m,qr))){u.add(m);break}}if(u.size===0)return x.reportError("Failed to rewrite relative imports due to unpersisted relative dependencies",{relativeImports:t,unresolved:Array.from(c.error.unresolvedRelativeImports)}),c.error.partiallyProcessedCode;throw x.reportError("Failed to rewrite relative imports",{typeSlashName:e,missing:Array.from(u)}),new ve(u)}async getDependenciesFiles({baseURL:e,files:j}){let[t,r]=await Promise.allSettled([this.downloadQueue.run(async()=>{let i=await fetch(e+j.importMap);if(i.ok!==!0)throw new Error("failed to load importMap file");return i.text()}),this.downloadQueue.run(async()=>{let i=await fetch(e+j.dependencies);if(i.ok!==!0)throw new Error("failed to load dependencies file");return i.text()})]);I(t.status==="fulfilled","The importMap has to exist on the module");let n=t.value,o;return r.status==="fulfilled"?o=r.value:x.warn("No dependencies file was found!"),{importMapContent:n,dependenciesMapContent:o}}async upsertKit(e,j,t,r,n){return jA(async()=>{let o=JSON.stringify(e),i=[{name:"kit.json",type:"source",content:o},...t.map(c=>({name:`${c.id}.json`,type:"kitSection",content:JSON.stringify(c.content)})),...r.map(c=>({name:`${c.id}.json`,type:"kitVectorSetNames",content:JSON.stringify(c.content)}))],a=performance.now(),s="kit/kit",l={type:"kit",files:i,assets:n.size>0?Array.from(n):void 0,name:Yk,moduleId:this.persistedModules.get(s)?.id??"$upsertName",saveId:dj(),metadata:{kit:{id:e.id,title:e.title,icon:j}},imports:{absolute:[],relative:[],bare:[]},detached:!1};I(this.modulesService);let{data:k}=await this.modulesService.saveBatch({batch:[l]});this.setNextInternalState({dependenciesModule:this.dependenciesModule,transientSaves:this.transientSaves,persistedModules:kA(this.persistedModules,c=>{for(let u of k.values()){if(u.localId!==s)continue;let d={kind:"local",...u,id:u.id,localId:u.localId,imports:u.imports,moduleURL:u.baseURL+u.files.source,sourceContent:o,sourceMapContent:void 0,moduleContent:o,submoduleContents:{},binaryAssetContents:{},sourceRevision:void 0,annotations:void 0,update:a};c.set(s,d)}}),depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0})})}async enqueueKitScreenshots(e,j,t){let r=this.persistedModules.get(gr("kit","kit"));I(r,"Kit module must have been persisted to enqueue screenshots");let n=t?"draft":r.saveId;I(n,"Kit Save ID must be set"),I(this.modulesService),await this.modulesService.enqueueKitScreenshots({moduleId:r.id,saveId:n,ids:Array.from(j),kitPageContent:e})}takeSnapshot(){return new u6(this.persistedModules)}};function ec(A,e){return`${hr().modulesCDN}/${e.id}/${A.saveId}/${e.files.module}`}function Xa(A,e,j,t,r,n,o,i,a){let s=new Set(n.keys()),l=new Set(t.keys()),k=[],[c,u]=pt(n,m=>{for(let $ of j.values()){let f=$.localId,R=X($),y=t.get(f),b=y?.type??$.type;if(!si(b))continue;let G;if(y)G={kind:"local",localId:f,type:y.type,name:y.name,moduleURL:ec(y,$),moduleContent:y.moduleContent,sourceContent:y.sourceContent,sourceMapContent:y.sourceMapContent,submoduleContents:y.submoduleContents,binaryAssetContents:y.binaryAssetContents,relativeImports:y.imports.relative,files:$.files,sourceRevision:y.sourceRevision,svgIcon:y.svgIcon,update:y.update};else{let O=E6($);G=$.kind==="local"?{kind:"local",localId:f,type:$.type,name:$.name,moduleURL:$.moduleURL,moduleContent:$.moduleContent,sourceContent:$.sourceContent,sourceMapContent:$.sourceMapContent,submoduleContents:$.submoduleContents,binaryAssetContents:$.binaryAssetContents,relativeImports:$.imports.relative,files:$.files,sourceRevision:O,svgIcon:void 0,update:$.update}:{kind:"server",localId:f,type:$.type,name:$.name,moduleURL:$.moduleURL,sourceContent:$.sourceContent,relativeImports:$.imports.relative,files:$.files,sourceRevision:O,update:$.update}}za(m,R,G),l.delete(f),s.delete(R)}for(let $ of l){let f=t.get($);if(I(f),!f.localId)continue;let R=SA(f.name),y={kind:"local",localId:f.localId,type:f.type,name:f.name,moduleURL:`./transient/${f.saveId}/${R.module}`,moduleContent:f.moduleContent,sourceContent:f.sourceContent,sourceMapContent:f.sourceMapContent,submoduleContents:f.submoduleContents,binaryAssetContents:f.binaryAssetContents,relativeImports:f.imports.relative,files:R,sourceRevision:f.sourceRevision,svgIcon:f.svgIcon,update:f.update};za(m,$,y),s.delete(X(y))}for(let $ of s)m.delete($),k.push($)}),d={};for(let m of k){let $=n.get(m);$&&(d[m]=$.localId)}let E=kA(e,m=>{if(A){if(!m)return{kind:"dependencies",localId:jj,type:A.type,name:A.name,importMapContent:A.importMapContent,dependenciesMapContent:A.dependenciesMapContent};m.importMapContent=A.importMapContent,m.dependenciesMapContent=A.dependenciesMapContent}});return E&&E!==e&&u.push({op:e?"replace":"add",path:[X(E)],value:E}),{dependenciesModule:E,modules:c,deletedLocalIdsByTypeSlashNames:d,depsGraph:r,initialized:o,metadata:{patches:u,hasLocalChanges:t.size>0,didRemoteChange:i,multiplayerChange:a}}}function za(A,e,j){let t=A.get(e);if(!t){A.set(e,j);return}if(t.kind!==j.kind){A.set(e,j);return}if(t.kind==="server"){I(j.kind==="server"),Wa(t,j);return}I(j.kind==="local"),tc(t.relativeImports,j.relativeImports)||(t.relativeImports=j.relativeImports),co(t.files,j.files)||(t.files=j.files);let{relativeImports:r,files:n,...o}=j;Wa(t,o)}function Wa(A,e){Object.assign(A,e)}function tc(A,e){if(!A&&!e)return!0;if(A&&e){let j=A.length;if(j!==e.length)return!1;for(let t=0;t<j;t++)if(A[t]!==e[t])return!1;return!0}else return!1}function rc(A){return A.type==="save"}function nc(A){return A.type==="delete"}function dj(){return Re()}function l6(A){return A==="codeFile"||A==="canvasComponent"||A==="shader"}function Ya(A,e,j){return A.replace(new RegExp(`\\b(from\\s*)(["'])${a6(e)}\\2`,"g"),`$1${JSON.stringify(j)}`)}function oc(A,e){switch(A){case"canvasComponent":case"layoutTemplate":case"screen":case"prototype":case"collection":case"draftCollection":case"webPageMetadata":case"siteMetadata":case"snippets":case"vector":case"vectorSet":case"kit":case"shader":return e.default;case"codeFile":case"css":case"componentPresets":case"config":case"localization":case"design":return Object.values(e)[0];default:Gj(A)}}var Za={start:new Date("2025-09-03T10:00:00Z").getTime(),end:new Date("2025-09-07T13:00:00Z").getTime()};function ic(A,e){for(let j of A){if(j.id!==e.localId)continue;if(j.save.saveId===e.saveId)return!1;let t=new Date(e.savedAt).getTime();return Number.isNaN(t)?!1:t>Za.start&&t<Za.end}return!1}function js(A){let e=new Map;for(let[j,t]of A.entries())e.set(X(t),j);return e}var u6=class{constructor(e){this.persistedModules=e;P(this,"persistedLocalIdsByTypeSlashName");this.persistedLocalIdsByTypeSlashName=js(e)}getPersistedModuleByLocalId(e){return this.persistedModules.get(e)}getModuleWithTypeSlashName(e){let j=this.persistedLocalIdsByTypeSlashName.get(e);if(j)return this.persistedModules.get(j)}};function es(A,e){if(!A||A.length===0)return e?.placeholder??"";if(A.length===1)return A[0]&&A[0]!==""?A[0]:e?.placeholder??"";let j=[...A],t="";if(e?.max&&e.max<A.length){let r=A.length-e.max;j=j.slice(0,e.max),t=`${r} ${r>1?"others":"other"}`}else t=j.pop()??"";return j.length>1?`${j.join(", ")}, and ${t}`:`${j.join(", ")} and ${t}`}function Te(A){let e=AA(A);if(!(!e||!JA(e)||!Aj(e)))return`${e.moduleId}:${e.exportSpecifier}`}function rs(A){let e=new Map;for(let j of A){let t=Te(j);t&&e.set(t,j)}return e}function ns(A,e){let j=A.getRawControlProps();for(let t in j){let r=j[t]?.type,n=j[t]?.value;if(r!=="vectorsetitem"||!GA(n)||!JA(n))continue;let o=Te(n);if(!o||!e.has(o))continue;let i=e.get(o);i&&A.setControlProp(t,{type:"vectorsetitem",value:i})}}function os(A,e){for(let j of e){ns(j,A);let t=Te(j.codeComponentIdentifier);if(!t||!A.has(t))continue;let r=A.get(t);r&&j.set({codeComponentIdentifier:r})}}function is(A,e){let j=e.getContentManagementNode();if(j){I(j.isLoaded(),"CMS Should always be loaded.");for(let{node:t,skipChildren:r}of j.walkWithSkipChildren()){if(Jj(t)){if(!t.variables.some(i=>i.type==="vectorsetitem")){r();continue}as(t,A)}if(!Fj(t))continue;let n=t.getControlProps();for(let o in n){let i=n[o]?.value;if(n[o]?.type!=="vectorsetitem"||!GA(i)||!JA(i))continue;let s=Te(i);if(!s||!A.has(s))continue;let l=A.get(s);l&&t.setControlProp(o,{...n[o],value:l})}}}}function as(A,e){let j=!1,t=A.variables.map(r=>{if(r.type!=="vectorsetitem")return r;let{initialValue:n}=r,o=n.identifier;if(!o)return r;let i=Te(o);if(!i||!e.has(i))return r;let a=e.get(i);return a?(j=!0,{...r,initialValue:{...n,identifier:a}}):r});j&&A.set({variables:t})}function ss(A,e){for(let j of e.root.children){if(yA(j)){ns(j,A);continue}(Kj(j)||mo(j))&&as(j,A)}}var mA=KA("modules-store"),ls=new Set(["codeFile","canvasComponent","screen","layoutTemplate","vector"]),sc=500;function Mt(A){let{module:e,exportSpecifier:j}=A,{id:t,saveId:r,files:n}=e;return I(n.module,"module file must exist for a saved module"),aj(t,r,n.module,j)}var je,we,qe,$j,yj,Sj,ks=class extends Wo{constructor(j,t,r,n,o,i,a,s){super();this.componentLoader=j;this.treeStore=t;this.loadedExternalModulesStore=r;this.chromeStore=n;this.modulesAPIServicePromise=o;this.makeDocumentReadOnly=i;this.insertTemporaryImportMap=a;this.loadAllLocalModules=s;P(this,"dependenciesModule");P(this,"localModules",new Map);P(this,"fastRefreshModules",new Map);P(this,"externalModulesDynamicInfo",new Map);P(this,"revision",0);LA(this,je,new Map);P(this,"moduleDepsGraph",{});P(this,"modulesStorage");P(this,"moduleUpdatesEmitter",new Sr);P(this,"fastRefreshModulesEmitter",new Sr);LA(this,we);LA(this,qe,new Map);LA(this,$j,new Map);LA(this,yj,!1);LA(this,Sj,[]);P(this,"debugModuleStoreAndComponentLoaderRevisionsMatch",()=>this.revision===this.componentLoader.modulesRevision);P(this,"checkForExternalModuleUpdates",async()=>{if(this.treeStore.tree.isViewOnly)return;let j=this.treeStore.tree.getExternalModulesListNode();if(!j||!j.children?.length)return;let t=[],r=new Map;j.children.forEach(a=>{let s=AA(a.codeComponentIdentifier);if(I(s?.kind==="externalModuleExport","expected ExternalModuleNode identifier to be of kind externalModuleExport"),a.type==="vector"){let l=a.annotation("framerVector");if(!Vj(l))return;let k=l.set.moduleId,c=r.get(k)??[];c.push(s),r.set(k,c)}else t.push(s)});for(let[a,s]of r){let l=this.treeStore.tree.get(a);if(!QA(l))continue;let k=l.annotation("framerVectorSet");pe(k)&&(Vo(k)||t.push(...s))}let n=t.map(({moduleId:a,saveId:s})=>({moduleId:a,saveId:s}));if(!n.length)return;let o=[],i=[];for(let a=0;a<n.length;a++){let s=n[a];if(I(s,"query is expected to be defined."),o.push(s),o.length<sc&&a<n.length-1)continue;let{modules:l}=await this.lookUpModules(o,{includeStatus:!0});i.push(...l),o=[]}this.treeStore.tree.isViewOnly||this.updateExternalModuleNodes(i.map((a,s)=>{let l=t[s];return I(l,"External module missing a matching identifier"),{module:a,exportSpecifier:l.exportSpecifier}}),{onTreeUpdate(){}}).catch($A)});P(this,"updatesPollId");P(this,"compileFastRefreshModule",async({localId:j,name:t,source:r,includeSourceMap:n=!0})=>{let{type:o,name:i}=rt(j);if(!ls.has(o))return;let a=o==="codeFile"?SA(t).source:i,{code:s,imports:l,sourceMap:k}=await da({localId:j,source:r,name:a,includeSourceMap:n}),c={kind:"fast-refresh",localId:j,type:o,name:a,sourceContent:r,moduleContent:s,relativeImports:l.relative,sourceMapContent:k,binaryAssetContents:void 0,submoduleContents:{},update:0},[u,d]=pt(this.fastRefreshModules,E=>{E.set(t,c)});this.fastRefreshModules=u,this.fastRefreshModulesEmitter.emit({patches:d,dependentModules:[],prioritizedModules:[],revision:++this.revision,initialized:!0})});P(this,"compile",({localId:j,name:t,source:r,includeSourceMap:n=!0,type:o,telemetrySession:i})=>{let a=$a({name:t,source:r,includeSourceMap:n,type:o,telemetrySession:i});return this.fastRefreshEnabled&&j&&this.compileFastRefreshModule({localId:j,name:t,source:r,includeSourceMap:n}).catch($A),a});this.modulesStorage=new St(()=>this.modulesAPIServicePromise.catch(l=>{throw mA.error(l,{context:"Failed to discover ModulesAPI service:"}),l}),this.compile,l=>this.scheduler.process(l),l=>this.scheduler.processWhenReady(l),l=>this.scheduler.runWhenIdle(l),t,()=>this.getActiveScope(),()=>this.makeDocumentReadOnly()),this.fastRefreshModulesEmitter.onNewStream=l=>(mA.debug("onNewStream - fast refresh",l),{latest:this.getAllModulesAsUpdateEvent(!0)}),this.moduleUpdatesEmitter.onNewStream=l=>(mA.debug("onNewStream - module updates",l),{latest:this.getAllModulesAsUpdateEvent(!1)}),Yi(()=>to.isTest||this.treeStore.tree.isViewOnly||!CA.isOn("importMapPruning")?!1:nA(this,yj)||nA(this,Sj).length>0?(mA.debug("Showing Unsaved Changes dialog (import map queue processing)"),!0):!1),this.modulesStorage.subscribe(l=>{let k=l.dependenciesModule?.importMapContent,c=this.dependenciesModule?.importMapContent,u=!1,d=!1,E=!1,m=!1;if(k&&c&&k!==c){let v=JSON.parse(k),F=c?JSON.parse(c):void 0;for(let N in v.imports){let w=v.imports[N];nA(this,je).set(N,"success");let _=F?.imports?.[N];if(!_){u=!0;continue}_!==w&&(d=!0)}E=!d&&!u,m=l.metadata.multiplayerChange||d||E}m&&l.metadata.multiplayerChange,this.dependenciesModule=l.dependenciesModule,this.localModules=l.modules;let $=this.moduleDepsGraph;this.moduleDepsGraph=l.depsGraph;let f=l.metadata.patches,R=new Set,y=[],b=[],G;for(let v of f){let F=v.path[0];if(I(typeof F=="string"),F===jj){G=v;for(let N of l.modules.keys())R.add(N);break}v.op==="remove"&&v.path.length===1?b.push(F):y.push(F)}let O=new Set;if(!G){let v=this.getActiveScope(),F=xe(v);mA.debug("Calculated visible code component module typeSlashNames",F);for(let N of y)gj(l.depsGraph,N,R,F,O);for(let N of b)gj($,N,R,F,O);y.forEach(N=>{R.delete(N)}),b.forEach(N=>{R.delete(N),O.delete(N)})}mA.debug("prioritized evaluation sending to sandbox",{dependentModules:R,visibleDependentModules:O},"highprio size",O.size,"dep size",R.size);let L={patches:f,dependentModules:Array.from(R),prioritizedModules:Array.from(O),revision:++this.revision,initialized:l.initialized};this.moduleUpdatesEmitter.emit(L),this.fastRefreshEnabled&&G&&this.fastRefreshModulesEmitter.emit({patches:[G],dependentModules:[],prioritizedModules:[],revision:L.revision,initialized:l.initialized})})}getActiveScope(){if(this.chromeStore.mainView===5)return;let j=this.treeStore.tree.getNode(nA(this,we));if(j)return I(j?.loaded,"Active scope node should be loaded"),j.loaded}setActiveScope(j){et(this,we,j)}getLatestDependencyGraph(){return this.moduleDepsGraph}initialize(){return this.initialized?this.modulesStorage.refresh():(this.setupPollingExternalModulesUpdates(),this.modulesStorage.initialize())}get initialized(){return this.modulesStorage.initialized}whenInitialized(){return this.modulesStorage.whenInitialized()}whenIdle(){return this.modulesStorage.whenIdle()}refresh(){return this.modulesStorage.refresh()}deleteModules(j){return this.modulesStorage.delete(j)}upsertBatch(j){return this.modulesStorage.upsertBatch(j)}forType(j){return new yt(this.modulesStorage,j,this.debugModuleStoreAndComponentLoaderRevisionsMatch)}getNpmDependencyInstallStatus(j){return nA(this,je).get(me(j))??"unknown"}async addNpmDependencies(j){let r=typeof this.dependenciesModule>"u"&&!aa(),n=await La(this.modulesStorage.addNpmDependencies(j)),o=Array.isArray(j)?j:[j],i=o.filter(({target:l})=>!fe(l));for(let l of i)nA(this,je).set(me(l),n.ok?"success":"failure");if(!n.ok)throw n.error;r&&sa();let a=Object.keys(n.value.dependenciesMap.dependencies),s=o.map(({target:l})=>l).filter(l=>!a.includes(l)&&fe(l));if(s.length>0){let l=es(s,{max:5,placeholder:"package"});EA({type:"add",variant:"warning",text:`${l} ${s.length===1?"is":"are"} incompatible with Framer`,duration:5e3})}return n.value}changeScope(j){this.setActiveScope(j.id),this.modulesStorage.changeScope(j)}async reinstallNpmDependencies(){return{importMap:await this.modulesStorage.reinstallNpmDependencies()}}async uninstallBlockedNpmDependencies(){return{importMap:await this.modulesStorage.uninstallBlockedNpmDependencies()}}async unsafeUpgradeDependency(j,t,r){return{importMap:await this.modulesStorage.unsafeUpgradeDependency(j,t,r)}}async clearNpmDependencies(){return this.modulesStorage.clearNpmDependencies()}async removeBlockedNpmDependencies(){return{dependenciesMap:await this.modulesStorage.removeBlockedNpmDependencies()}}async rebuildImportMapFromDependencies(){return{importMap:await this.modulesStorage.rebuildImportMapFromDependencies()}}async rebuildImportMapFromEntryPoints(j=!1){let t=this.getEntryPointModuleNames();return{importMap:await this.modulesStorage.rebuildImportMapFromEntryPoints(t,void 0,j)}}async extendImportMapFromExternalEntryPoints(j,t){let r=await ct(j,UA,lj,t);return await this.modulesStorage.extendCurrentImportMap(r,{dependencies:{}}),{importMap:r}}getEntryPointModuleNames(){let j=[];for(let t of this.localModules.values()){if(t.kind==="fast-refresh"||t.type!=="codeFile"&&t.type!=="canvasComponent"&&t.type!=="screen")continue;let r=t.files?.module;if(!r)continue;let n=Lj(t.localId,r);j.push(n)}for(let t of this.treeStore.tree.getExternalModuleNodes()){if(t.type!=="codeFile"&&t.type!=="canvasComponent")continue;let r=AA(t.codeComponentIdentifier);Aj(r)&&j.push(r.importSpecifier)}return[...new Set(j)]}async updateSources(j){return this.modulesStorage.updateSources(j)}async updateKit(...j){return await this.modulesStorage.whenInitialized(),this.modulesStorage.upsertKit(...j)}async listKits(){let j=await this.modulesAPIServicePromise;return I(j,"Modules API service not initialized correctly"),await j.kits()}async enqueueKitScreenshots(...j){return this.modulesStorage.enqueueKitScreenshots(...j)}async updateDependenciesSource(j,t){await this.modulesStorage.updateDependenciesSource(j,t)}getDependentsOfModule(j){return this.modulesStorage.getDependentsOfModule(j)}subscribeToModulesStorage(j){return this.modulesStorage.subscribe(j)}async getModuleDependencies(j){let t=await this.modulesAPIServicePromise;return I(t,"Modules API service not initialized correctly"),await t.getModuleDependencies(j)}getModuleEntryByLocalId(j){for(let t of this.localModules.values())if(t.localId===j)return t}getModuleEntryByUniqueName(j){for(let t of this.localModules.values())if(t.name===j)return t}getPersistedDependenciesModule(){return this.modulesStorage.getPersistedDependenciesModule()}getPersistedModuleByGlobalId(j){return this.modulesStorage.getPersistedModuleByGlobalId(j)}getPersistedModuleByLocalId(j){return this.modulesStorage.getPersistedModuleByLocalId(j)}getPersistedModuleByLocalIdentifier(j){let t=AA(j);if(_A(t))return this.getPersistedModuleByLocalId(t.localId)}tryConvertExternalCodeComponentIdentifierToLocal(j){let t=AA(j);if(t?.kind!=="externalModuleExport")return;let r=this.getPersistedModuleByGlobalId(t.moduleId);if(r)return tt(r.localId,t.exportSpecifier).value}async listNamespaces(){let j=await this.modulesAPIServicePromise;return I(j,"Modules API service not initialized correctly"),await j.listNamespaces()}async createNamespace(j,t){let r=await this.modulesAPIServicePromise;return I(r,"Modules API service not initialized correctly"),await r.createNamespace({ownerId:j,ownerType:t})}async lookUpModule(j,t){let{modules:r,dependencies:n}=await this.lookUpModules([j],t),o=r[0];I(o,"Module does not exist, looking up:",j);let i={module:o};return n&&(i.dependencies=n[o.ownerType]?.[o.ownerId]),i}async lookUpModules(j,t){let r=await this.modulesAPIServicePromise;if(!r)return mA.error("Modules API service not initialized correctly"),{modules:[],dependencies:{}};let{data:n,dependencies:o}=await r.lookUpModules({queries:j,...t}),i=new Map(this.externalModulesDynamicInfo);for(let s of n){let l=s.id,{localId:k,title:c,description:u,lastPublish:d,status:E}=s;i.set(l,{localId:k,title:c,description:u,lastPublish:d,status:E??i.get(l)?.status})}this.externalModulesDynamicInfo=i;let a={modules:n};return o&&(a.dependencies=o),a}trackExternalComponentInsert(j,t){let r=qo();for(let n of j)ka({insertId:r,insertType:t,codeComponentId:n})}async installExternalModulesDependencies(j){let t=[],r=[];for(let n of j){let o=nA(this,qe).get(n);o?r.push(o):t.push(n)}if(t.length>0){let n=this.installDependenciesForModuleURLs(t);for(let o of t)nA(this,qe).set(o,n);r.push(n)}return Promise.allSettled(r).then(n=>{for(let o of n)o.status!=="fulfilled"&&mA.error("Failed to install external module",o.reason)})}isProcessingModules(){return this.modulesStorage.isProcessing()}hasLocalCodeFileChanges(){return this.modulesStorage.hasLocalCodeFileChanges()}resetModuleStateAndPermissions(j){this.modulesStorage.resetModuleStateAndPermissions(j)}getTransientSave(j){return this.modulesStorage.getTransientSave(j)}startUsingLocalModulesInTree(){return this.modulesStorage.startUsingLocalModulesInTree()}stopUsingLocalModulesInTree(){return this.modulesStorage.stopUsingLocalModulesInTree()}usingLocalModulesInTree(){return this.modulesStorage.usingLocalModulesInTree()}createFastRefreshModuleFromModule(j){if(ls.has(j.type)){if(j.kind==="server"){let t=this.getPersistedModuleByLocalId(j.localId);I(t?.kind==="server","Only server modules should have no sourceContent"),this.modulesStorage.createLocalModuleFromModule(t).catch($A);return}this.compileFastRefreshModule({name:X(j),localId:j.localId,source:j.sourceContent}).catch($A)}}getModuleWithTypeSlashName(j){return this.modulesStorage.getModuleWithTypeSlashName(j)}waitForModulesToSave(){return this.modulesStorage.waitForModulesToSave()}async installDependenciesForExternalModules(j){let t,r,n=[],o=new Set;for(let{dependencies:i,module:a}of j){if(!i?.importMap)continue;let s=i?.importMap;if(CA.isOn("importMapPruning")){I(a.files.module,"Module must have a module file");let l=`${a.baseURL}${a.files.module}`;if(n.push(l),o.has(a.ownerId))continue;o.add(a.ownerId)}if(!CA.isOn("importMapPruning")){let l=i.dependencies??Fe(i?.importMap);r=Ge(r??{dependencies:{}},l)}t=Rj(t??{imports:{}},s)}!t||ji(t)||(CA.isOn("importMapPruning")&&n.length>0&&(await this.insertTemporaryImportMap(t),this.queueExternalImportMapUpdate(n,t).catch($A)),!CA.isOn("importMapPruning")&&r&&await this.modulesStorage.extendCurrentImportMap(t,r))}installDependenciesForModuleURLs(j){return mA.info(`\u{1F986} Installing external modules:
	`,j.join(`
	`)),this.lookUpModules(j.map(t=>({url:t})),{includeDependencies:!0}).then(async({modules:t,dependencies:r={}})=>{let n=t.map(o=>({module:o,dependencies:r[o.ownerType]?.[o.ownerId]}));await this.installDependenciesForExternalModules(n)})}async addOrUpdateExternalVectors(j){await this.modulesStorage.whenInitialized();let{modules:t}=await this.lookUpModules(j.filter(o=>{let i=this.treeStore.tree.getNodeWithTrait(o.moduleId,QA);return i?AA(i.codeComponentIdentifier).saveId!==o.saveId:!0}),{includeDependencies:!1,includeStatus:!0}),r=new Map,n="default";for(let o of t){let i=Mt({module:o,exportSpecifier:n}),a=this.treeStore.tree.getNodeWithTrait(o.id,QA);JA(a?.codeComponentIdentifier)&&AA(a.codeComponentIdentifier).saveId===o.saveId||r.set(i.value,{module:o,exportSpecifier:n})}await Promise.all(Array.from(r.keys(),o=>{let i=AA(o);return I(i,"Identifier must be a valid module identifier"),this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(i).catch(a=>{mA.error(`Failed to evaluate external module "${o}"`,a)})})),await new Promise((o,i)=>{this.scheduler.runWithFullyLoadedTree(()=>{this.updateExternalModuleNodes(Array.from(r.values()),{onTreeUpdate:()=>{let a=rs(r.keys());os(a,this.treeStore.getLoadedIndexes().codeComponents),is(a,this.treeStore.tree),ss(a,this.treeStore.tree)},updateSave:!0}).then(o).catch(i)},{name:"update_external_module_version",runInBackground:!0})})}async addOrUpdateVectorSetAndVectors(j){await this.addOrUpdateExternalVectors([j]);let r=this.treeStore.tree.getNodeWithTrait(j.moduleId,QA)?.annotation("framerVectorSet");pe(r)&&await this.addOrUpdateExternalVectors(r.items.map(n=>({moduleId:n.moduleId,saveId:n.saveId??""})))}async addExternalModulesToProject(j,t){let r=j.map(o=>typeof o=="string"?AA(o):o),n=await this.preloadExternalModules(r);return this.updateExternalModuleNodes(n,t)}async preloadExternalModules(j){await this.modulesStorage.whenInitialized();let t=new Map;for(let s of j)t.set(s.bareValue,s);let r=[],n=[],o=[];for(let[s,l]of t){let{moduleId:k,saveId:c}=l;if(!!this.modulesStorage.getPersistedModuleByGlobalId(k)){mA.reportError("Attempted to treat local module as external module",{identifier:l});continue}let d=this.treeStore.tree.getNode(k);if(d&&AA(d.codeComponentIdentifier).saveId===c&&!this.loadedExternalModulesStore.hasModuleForIdentifier(l)){n.push(l);continue}let E=nA(this,$j).get(s);if(E){o.push({identifier:l,preloadPromise:E});continue}nA(this,$j).set(s,new ue),r.push(l)}let i=new Map;for(let{identifier:s,preloadPromise:l}of o)try{let k=await l;i.set(s.value,k)}catch{nA(this,$j).set(s.bareValue,new ue),r.push(s)}if(r.length)try{let s=Array.from(r.values(),({moduleId:u,saveId:d})=>({moduleId:u,saveId:d})),{modules:l,dependencies:k}=await this.lookUpModules(s,{includeDependencies:!0,includeStatus:!0}),c=0;for(let u of r){let d=l[c++];I(d,"Module must be defined"),i.set(u.value,{module:d,dependencies:k?.[d.ownerType]?.[d.ownerId],exportSpecifier:u.exportSpecifier}),n.push(u)}}catch(s){mA.reportError(s);for(let l of r)nA(this,$j).get(l.bareValue)?.reject(s);throw Error(`Failed to preload modules: ${s}`)}let a;for(let s of n){let l=i.get(s.value);if(!l)continue;let{dependencies:k}=l;k?.importMap&&(a=Rj(a??{imports:{}},k.importMap))}a&&await this.insertTemporaryImportMap(a),await Promise.all(Array.from(n.values(),s=>this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(s).catch(l=>{mA.error(`Failed to evaluate external module "${s.value}"`,l)})));for(let s of r){let l=i.get(s.value);I(l,"Expected to have module information for:",s.value);let k=nA(this,$j).get(s.bareValue);I(k,"Expected to find a preload promise for:",s.bareValue),k.resolve(l)}return[...i.values()]}queueExternalImportMapUpdate(j,t){return new Promise((r,n)=>{nA(this,Sj).push({entryPoints:j,inputMap:t,resolve:r,reject:n}),this.processExternalImportMapQueue()})}async processExternalImportMapQueue(){if(!nA(this,yj)){for(et(this,yj,!0);nA(this,Sj).length>0;){let j=nA(this,Sj).shift();if(!j)break;let{entryPoints:t,inputMap:r,resolve:n,reject:o}=j;try{let i=await this.extendImportMapFromExternalEntryPoints(t,r);n(i.importMap)}catch(i){o(i)}}et(this,yj,!1)}}async updateExternalModuleNodes(j,{onTreeUpdate:t,updateSave:r=!1}){return await this.installDependenciesForExternalModules(j),await Promise.all(j.map(n=>this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(Mt(n)))),this.scheduler.processWhenReadyAsync(()=>{if(this.treeStore.tree.isViewOnly)throw Error("unable to edit");for(let n of j){let{id:o}=n.module,i=this.treeStore.tree.getNode(o);if(i&&!r){let a=Mt(n),s=this.externalModulesDynamicInfo.get(a.moduleId)?.status??n.module.status;i.set({group:s?.group,updateSaveId:s?.updateSaveId})}else{let{type:a,metadata:s,ownerId:l,ownerType:k}=n.module,c=Mt(n),{title:u,status:d}=this.externalModulesDynamicInfo.get(c.moduleId)??n.module,E=this.treeStore.tree.getExternalModulesListNode();E||(E=new di,this.treeStore.tree.insertNode(E,this.treeStore.tree.root.id)),I(fo(E));let m=s.pluginId,$={codeComponentIdentifier:c.value,type:a,scopeNodeId:ai(n.module),intrinsicWidth:Qj(s.intrinsicWidth,!0)??200,intrinsicHeight:Qj(s.intrinsicHeight,!0)??200,ownerId:l,ownerType:k,group:d?.group,updateSaveId:d?.updateSaveId,namespaceId:n.module.lastPublish?.namespaceId,pluginId:GA(m)?m:void 0},f=this.componentLoader.componentForIdentifier(c.value);I(f,"Component not found in the component loader",c.value);let R=f.annotations??void 0;$.annotations=$i(a)?Xj({default:R}).default:R;let y=f.name??u;if($.title=y,i)i.set($);else{let b=new Ei({id:o,...$});this.treeStore.tree.insertNode(b,E.id)}}}return t()})}setupPollingExternalModulesUpdates(){let j=ta(()=>{this.checkForExternalModuleUpdates().catch(mA.reportError)},1e4),t=()=>{j(),this.updatesPollId===void 0&&(this.updatesPollId=window.setInterval(this.checkForExternalModuleUpdates,6e4))},r=()=>{window.clearInterval(this.updatesPollId),this.updatesPollId=void 0};function n(){return!document.hidden&&navigator.onLine}n()&&t();function o(){setTimeout(()=>{n()?t():r()},500)}document.addEventListener("visibilitychange",o),window.addEventListener("offline",o),window.addEventListener("online",o)}getCodeComponentNodesForExternalModuleExport(j){return this.treeStore.getLoadedIndexes().codeComponents.filter(t=>{if(!fA(t)||wA(t)&&!t.isVectorInstance)return!1;let r=AA(t.codeComponentIdentifier);return r?.kind!=="externalModuleExport"?!1:r.moduleId===j.moduleId&&r.exportSpecifier===j.exportSpecifier})}get fastRefreshEnabled(){return this.chromeStore.codeEditorPreviewVisible}async updateExternalModuleComponentInstances(j){let t=AA(j);I(t?.kind==="externalModuleExport","parsed 'ExternalModuleNodes.id' should be of kind externalModuleExport");let{moduleId:r,exportSpecifier:n}=t,o=this.externalModulesDynamicInfo.get(r)?.status?.updateSaveId;if(!o){mA.warn("Could not update module",r,"latest status missing");return}let{module:i,dependencies:a}=await this.lookUpModule({moduleId:r,saveId:o},{includeDependencies:!0,includeStatus:!0});I(i.files.module,"Module file must be defined");let s=aj(r,o,i.files.module,n);try{await this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(s).catch(mA.reportError),await new Promise((l,k)=>{this.scheduler.runWithFullyLoadedTree(()=>{this.updateExternalModuleNodes([{module:i,dependencies:a,exportSpecifier:n}],{onTreeUpdate:()=>{this.getCodeComponentNodesForExternalModuleExport(t).forEach(u=>u.set({codeComponentIdentifier:s.value})),fi(this.treeStore.tree,t.value,s.value),xi(this.treeStore.tree,t.value,s.value)},updateSave:!0}).then(l).catch(k)},{name:"update_external_module_version",modalTitle:"Updating the module version"})}),this.trackExternalComponentInsert([s.value],"update")}catch(l){mA.reportError(l)}}async replaceRelativeImportsWithImportMapSpecifiers(j,t,r){let n={};for(let i of r){let a=Ij(i,j);if(!a)continue;let s;if(s=this.fastRefreshModules.get(a),s||(s=this.modulesStorage.getModuleWithTypeSlashName(a)),!s){mA.error("Cannot resolve",i,"from",j);continue}let l,{name:k,localId:c}=s;if(s.kind==="fast-refresh")l=SA(k).module;else{let{files:u}=s;I(GA(u.module),"Must have a module file name to build a local module import map specifier."),l=u.module}n[i]=Lj(c,l)}let o=await gt(t,n);return I(o.ok),o.value}getModules(j=!1){let t={};for(let[r,n]of this.localModules)t[r]=n;if(j)for(let[r,n]of this.fastRefreshModules)t[r]=n;return{dependenciesModule:this.dependenciesModule,modules:t,revision:this.revision,initialized:this.modulesStorage.initialized}}getAllModulesAsUpdateEvent(j=!1){let{dependenciesModule:t,modules:r,initialized:n,revision:o}=this.getModules(j),i=[];t&&i.push({op:"add",path:[`${t.type}/${t.name}`],value:t});for(let a of Object.values(r))i.push({op:"add",path:[`${a.type}/${a.name}`],value:a});return{patches:i,dependentModules:[],prioritizedModules:[],initialized:n,revision:o}}getModulesUpdatesService(j=!1){return{moduleUpdatesStream:()=>j?this.fastRefreshModulesEmitter.newStream({replay:"latest"}):this.moduleUpdatesEmitter.newStream({replay:"latest"})}}hasScreenModuleLoaded(j){let t=Wn("screen",j,"default").value;return this.componentLoader.componentForIdentifier(t)!==null}hasPendingTreeData(){return this.modulesStorage.hasPendingTreeData()}writeTreeData(){this.modulesStorage.writeTreeData()}postProcess(){this.modulesStorage.processTreeUpdates()}takeSnapshot(){let j=this.modulesStorage.takeSnapshot();return new B6(this,j)}};je=new WeakMap,we=new WeakMap,qe=new WeakMap,$j=new WeakMap,yj=new WeakMap,Sj=new WeakMap;var B6=class{constructor(e,j){this.modulesStorageSnapshot=j;P(this,"dependenciesModule");P(this,"localModuleKeys");this.dependenciesModule=e.dependenciesModule,this.localModuleKeys=Array.from(e.localModules.keys())}getPersistedModuleByLocalId(e){return this.modulesStorageSnapshot.getPersistedModuleByLocalId(e)}getPersistedModuleByLocalIdentifier(e){let j=AA(e);if(_A(j))return this.getPersistedModuleByLocalId(j.localId)}getModuleWithTypeSlashName(e){return this.modulesStorageSnapshot.getModuleWithTypeSlashName(e)}};var kc={defaultComponent:{insert:"insert-default",drag:"insert-default-drag"},libraryModule:{insert:"insert-library",drag:"insert-library-drag"},externalModuleComponent:{insert:"insert",drag:"insert-drag"}},p6="default_component_",Ct="external_",m6="local_",cs="legacy_design_component",us="legacy_code_component",ds=`${m6}${us}`,cc=`${Ct}${us}`,$s=`${m6}${cs}`,Es=`${Ct}${cs}`;var uc=new Set(["form","frame","image-frame","stack","repeater"]),dc=A=>A.startsWith(p6),Bs=A=>A===$s||A===Es,$c=A=>uc.has(A);function ps({canvasNode:A,source:e,isDrag:j,engine:t}){let r=Ec(A,t);switch(DA("component_instance",{componentType:r.type,source:e}),e){case"insert_menu":{let n=Bc(r);DA("insert_menu_add",{type_added:n});break}}if(r.type==="local_module_canvasComponent_component"&&DA("component_canvas_instance",{componentId:A.id}),Bs(r.type)&&DA("component_design_instance",{}),fA(A)&&Aj(A.codeComponentIdentifier)){let n=r.type.startsWith(p6)?"defaultComponent":e==="team_library"?"libraryModule":"externalModuleComponent",o=kc[n][j?"drag":"insert"];t.stores.modulesStore.trackExternalComponentInsert([A.codeComponentIdentifier],o)}}function Ec(A,e){if(fA(A)){let r=A.codeComponentIdentifier,n=AA(r);if(!n)return{type:A.codeComponentIdentifier.startsWith(".")?ds:cc,codeComponentIdentifier:r};if(_A(n))return{type:`${m6}module_${n.type}_component`,codeComponentIdentifier:r};if(Aj(n)){let o=e.stores.treeStore.tree.getNode(n.moduleId);return Bt(e.stores.treeStore.tree,r)?{type:`${p6}${o?.title}`,codeComponentIdentifier:r}:{type:`${Ct}module_${o?.type??"unknown"}_component`,codeComponentIdentifier:r}}}let t=A.replicaInfo?.master&&e.tree.getNode(A.replicaInfo.master)||A;return Eo(t)?Bo(t)?{type:Es}:{type:$s}:po(A)?{type:"repeater"}:wo(A)?{type:"form"}:HA(A)?{type:"stack"}:de(A)?A.fillType==="image"?{type:"image-frame"}:{type:"frame"}:{type:"unknown"}}function Bc({type:A}){return A.startsWith("local_module_")||A===ds?"code_component":Bs(A)?"design_component":A.startsWith(Ct)?"package":dc(A)||$c(A)?A:"unknown"}function ms(A,e){let j=A.children;return $o(A)?!j||j.length===0?[]:e.getChildrenRects(A.id)??[]:null}function fs(A,e,j){if(A>=e&&A<=j||A<=e&&A>=j)return 0;let t=Math.abs(e-A),r=Math.abs(j-A);return Math.min(t,r)}function pc(A,e,j){let t=A?"y":"x",r=A?"height":"width",n=e[t],o=0,i=1/0;return j.forEach((a,s)=>{if(i===0)return;let l=a[t],k=l+a[r],c=fs(n,l,k);c<i&&(o=s,i=c)}),o}function mc(A,e,j,t){let r=Math.max(A,j),n=Math.min(e,t);return r<n}function fc(A,e,j){let t=A?"y":"x",r=A?"height":"width",n=j[e];I(n,"Out of bound access to childRects:",e,j);let o=n[t],i=o+n[r],a=new Set([e]);return j.forEach((s,l)=>{if(l===e)return;let k=s[t],c=k+s[r];mc(o,i,k,c)&&a.add(l)}),{startIndex:Math.min(...a),endIndex:Math.max(...a)}}function Gc(A,e,j,t,r,n){if(r)return t.startIndex;if(n)return t.endIndex;let o=e?"x":"y",i=e?"width":"height",a=A[o],s=1/0,l=t.startIndex;for(let k=t.startIndex;k<=t.endIndex;k++){let c=j[k];I(c,"Ouf of bound access to childRects:",k,t,j);let u=c[o],d=u+c[i],E=fs(a,u,d);E<s&&(s=E,l=k)}return l}function Fc(A,e){let j=[];for(let t=e.startIndex;t<=e.endIndex;t++){let r=A[t];I(r,"Ouf of bound access to childRects:",t,e,A),j.push(r)}return lA.merge(...j)}function Rc(A,e,j,t){let r=$e(A)||A.resolveValue("stackDirection")==="horizontal",n=lA.merge(...e),o=r?"x":"y",i=r?"y":"x",a=r?"width":"height",s=r?"height":"width",l=j[o],k=j[i],c=n[i],u=c+n[s],d=k<c,E=!d&&k>u,m=pc(r,j,e),$=fc(r,m,e),f=Gc(j,r,e,$,d,E),R=e[f];I(R,"Closest rect is not defined:",f);let y=R[o]+R[a]/2,b=d||E?d:l<y,G=b?f:f+1;d&&(G=0),E&&(G=e.length);let O=R[o],L=O+R[a],v=b?O:L,F=null,N=b?f-1:f+1;if(N>=$.startIndex&&N<=$.endIndex){let Y=e[N];if(Y){let tA=Y[o],p=tA+Y[a];F=b?p:tA}}let w=v;sj(F)&&(w=Math.round((w+F)/2));let _=Fc(e,$),S=Math.round(_[i]+_[s]/2),D={[o]:w,[i]:S},H={...D},V={...D},rA=t[s],eA=Math.round(rA/2);return r?(H.y-=eA,V.y+=eA):(H.x-=eA,V.x+=eA),{index:G,line:{a:H,b:V}}}function Ic(A,e){let j={index:0,line:{a:{...e},b:{...e}}};if(A.length===0)return j;let t=new Map,r=1e3;A.forEach((c,u)=>{let d=Math.round(c.x*r),E=t.get(d);E?(E.indices.push(u),c.width>E.width&&(E.width=c.width)):t.set(d,{x:c.x,width:c.width,indices:[u]})});let n=Array.from(t.values()).sort((c,u)=>c.x-u.x),o=n.find(c=>e.x>=c.x&&e.x<=c.x+c.width);if(o||(o=n.reduce((c,u)=>{if(!c)return u;let d=u.x+u.width/2,E=c.x+c.width/2;return Math.abs(e.x-d)<Math.abs(e.x-E)?u:c},n[0])),!o)return j;let i=[...o.indices].sort((c,u)=>{let d=A[c],E=A[u];return!d||!E?0:d.y-E.y}),a=i.findIndex(c=>{let u=A[c];return u?e.y<u.y+u.height/2:!1});a===-1&&(a=i.length);let s;a<i.length?s=i[a]??0:s=(i[i.length-1]??0)+1;let l;if(a<=0){if(!i[0])return j;l=A[i[0]]?.y??0}else if(a>=i.length){let c=i[i.length-1];if(!c)return j;let u=A[c];if(!u)return j;l=u.y+u.height}else{let c=i[a];if(!c)return j;let u=A[c];if(!u)return j;l=u.y}let k={a:{x:o.x,y:l},b:{x:o.x+o.width,y:l}};return{index:s,line:k}}function Gs(A,e,j,t,r){if(I(e.length,"childInsertion only works correctly if there are more than 0 child rects"),$e(A)||A.stackWrapEnabled)return ot(A)?Ic(e,t):Rc(A,e,t,r);let n=1/0,o=null,i=A.stackDirection==="vertical";e.forEach((k,c)=>{let u=Math.abs(i?t.y-k.y:t.x-k.x);u>n||(n=u,o=c)});let a=0;if(o!==null){let k=e[o];I(k,"Closest child rect is not defined:",o);let c=lA.center(k);(i?t.y>c.y:t.x>c.x)&&o++,a=Math.min(Math.max(0,o),e.length)}let s=gc(A),l=bc(A.resolveValue("stackDirection"),A.resolveValue("stackAlignment"),s,j,e,a,r);return{index:hc(A,a),line:l}}function hc(A,e){I(Uj(A),"A node must support children to consider an insertion index.");let j=e;for(let t=0;t<A.children.length&&t!==e;t++){let r=A.children[t];r&&(vr(r)||j++)}return j}function gc(A){let e=A.resolveValue("stackDirection"),j=A.resolveValue("stackAlignment");if(j==="center")return 0;let t=Uo(A);if(!t.perSide)return t.top;let r=j==="start";return e==="vertical"?r?t.left:t.right:r?t.top:t.bottom}function bc(A,e,j,t,r,n,o){let i=r[n-1],a=r[n],s=A==="vertical",l={x:t.width/2,y:t.height/2};if(!(!i&&!a)){if(r.length===1){let k=i||a;I(k,"Child rect must be defined"),n===0?s?l.y=k.y-10:l.x=k.x-10:s?l.y=k.y+k.height+10:l.x=k.x+k.width+10}else if(i&&a){let k=Math.abs(s?i.y+i.height-a.y:i.x+i.width-a.x);s?l.y=a.y-k/2:l.x=a.x-k/2}else if(i){let k=r[n-2];I(k,"Child rect must be defined");let c=Math.abs(s?k.y+k.height-i.y:k.x+k.width-i.x);s?l.y=i.y+i.height+c/2:l.x=i.x+i.width+c/2}else if(a){let k=r[n+1];I(k,"Child rect must be defined");let c=Math.abs(s?a.y+a.height-k.y:a.x+a.width-k.x);s?l.y=a.y-c/2:l.x=a.x-c/2}}return l.x=Math.min(Math.max(4,l.x),t.width-4),l.y=Math.min(Math.max(4,l.y),t.height-4),_c(A,e,j,l,t,o)}function _c(A,e,j,t,r,n){let o=A==="vertical",i,a,s=j??0;switch(e){case"center":i={x:o?t.x-n.width/2:t.x,y:o?t.y:t.y-n.height/2},a={x:o?t.x+n.width/2:t.x,y:o?t.y:t.y+n.height/2};break;case"start":i={x:o?s:t.x,y:o?t.y:s},a={x:o?n.width+s:t.x,y:o?t.y:n.height+s};break;case"end":default:i={x:o?r.width-n.width-s:t.x,y:o?t.y:r.height-n.height-s},a={x:o?r.width-s:t.x,y:o?t.y:r.height-s};break}return{a:i,b:a}}var Fs=6;function yc(A,e){for(let j of A)if(e.includes(j))return!0;return!1}function Sc(A,e,j,t,r){if(r.length===0||A.stackWrapEnabled||Go(A)||wA(A))return null;let{tree:n}=e,{zoom:o}=e.stores.canvasStore,i=n.getParent(A.id);if(i&&HA(i)&&(i.stackDirection!==A.stackDirection||i.stackWrapEnabled))return null;let a=n.convertPointToNode(A,j),s=n.getRect(A),l=A.stackDirection==="vertical",k=l?"x":"y",c=l?"y":"x",u=l?"width":"height",d=l?"height":"width",E=s[u],m=s[d],$=E*o,f=E*o;if($<40||f<40)return null;let R=a[k],y=10/o,b=lA.merge(...r),G=b[k],O=G+b[u],L=Math.max(y,G/2),v=Math.max(y,(E-O)/2),F=R<=L,N=R>=E-v;if(!F&&!N)return null;let w=F?0:1,_=t[d],S=4/o,D=F?S:E-S,H=m/2,V=_/2,rA=m/3,eA=a[c],B="end";_>m?B="center":eA<rA?B="start":eA<2*rA&&(B="center");let Y,tA;switch(B){case"start":{Y=0,tA=_;break}case"end":{tA=m,Y=tA-_;break}case"center":default:{Y=H-V,tA=H+V;break}}let p={[k]:D,[c]:Y},aA={[k]:D,[c]:tA},gA=n.convertPointToCanvas(A,p),vA=n.convertPointToCanvas(A,aA);return{insertionIndex:w,insertionLine:{a:gA,b:vA},wrap:{wrapAlignment:B}}}function f6(A,e,j,t,{allowWrapping:r=!0}={}){if(!Uj(A))return{insertionIndex:null,insertionLine:null};let n=ms(A,e.stores.layoutCache);if(!n)return{insertionIndex:null,insertionLine:null};if(HA(A)&&r){let c=Sc(A,e,j,t,n);if(c)return c}let o=e.tree,i=o.getRect(A),a=o.convertPointToNode(A,j);if(n.length===0)return{insertionIndex:0,insertionLine:null};let{index:s,line:l}=Gs(A,n,i,a,t),k={a:o.convertPointToCanvas(A,l.a),b:o.convertPointToCanvas(A,l.b)};return{insertionIndex:s,insertionLine:k}}var Mc={width:10,height:10};function Rs(A,e,j,t,r=!1){I(j.length,"getStackOrGridInRange(): expects at least a single selected node");let n=A.stores.scopeStore.active;if(j.some(Lo))return null;let i=A.tree.getNodesAtPoint(n,e).filter(l=>!(Xo(l)&&l.locked||!Uj(l)||Li(l)||Ho(A.tree,A.stores.overlayStore.activeOverlays,l))).reverse();if(t){let l=t.id,k=i.find(c=>c.id===l);if(k)return k}let a=null,s=j.map(l=>l.id);for(let l of i){if(!go(l)||r&&!Hj(l))continue;let k=A.tree.getAncestors(l.id);if(k.push(l.id),yc(k,s)||(a||(a=l),!Ee(l)))continue;let{insertionLine:u}=f6(l,A,e,Mc);if(!u)continue;if(u.a.x===u.b.x){if(Math.abs(e.x-u.a.x)*A.stores.canvasStore.zoom>Fs)continue}else if(u.a.y===u.b.y){if(Math.abs(e.y-u.a.y)*A.stores.canvasStore.zoom>Fs)continue}else continue;if(j.every(E=>Be(A.tree,l,E,n.id,A.componentLoader)))return l}if(Ee(a)){let l=a;if(j.every(c=>Be(A.tree,l,c,n.id,A.componentLoader)))return a}return null}function Is(A,e,{wrapAlignment:j}){let t=Ui.addStack(A,[e]);if(!t)return null;let r=A.tree.getNode(t);return!r||!HA(r)?null:(r.set({stackDirection:e.stackDirection==="horizontal"?"vertical":"horizontal",stackAlignment:j}),r)}function G6(A,e){let{width:j,height:t}=A.tree.getRect(e);return Or(e)&&Dr(e)&&(e.widthType===2&&e.width>0&&(j=e.width),e.heightType===2&&e.height>0&&(t=e.height)),{width:j,height:t}}function Cc(A,e,j){let t=G6(A,e);return{...t,x:j.x-t.width/2,y:j.y-t.height/2}}function Dc(A,e){let j=G6(A,e),t=A.stores.scopeStore.active,r=A.tree.getCommonGroundNode(A.stores.selectionStore.nodes),n,o;if(r){let a=A.tree.convertFrameToCanvas(r);n=lA.center(a).x-j.width/2,o=a.y}else if(yA(t)||Kj(t)){let a=t.getPrimaryVariant(),s=A.tree.convertFrameToCanvas(a);n=lA.center(s).x-j.width/2,o=s.y}else{let a=A.stores.canvasStore.getCanvasCenter();n=a.x-j.width/2,o=a.y-j.height/2}let i={x:n,y:o};for(;;){let a={...j,...i},s=A.tree.getNodesInRect(t,a,!0);if(s.length===0)return a;let l=A.tree.getBoundingFrameForNodes(s);i.x=l.x-j.width-100}}function Oc(A,e,j,t=!1){let{tree:r}=A,n=r.getPotentialParents(A.stores.scopeStore.active,A.stores.overlayStore.activeOverlays,lA.cornerPoints({...j,width:1,height:1}),j,A.componentLoader,e);return t&&(n=n.filter(Hj)),n=r.sortVisually(n).reverse(),n.length>0&&n[0]?n[0]:null}var hs={width:1,widthType:1,heightType:2,left:0,right:null};function gs({engine:A,component:e,canvasPoint:j,source:t,type:r,shouldBecomeFullWidthForVariants:n=new Set,isLayoutSection:o=!1,notDraggedOntoCanvas:i=!1,insertAsGroundNode:a=!1,insertAsOverlayType:s,imageToUpload:l,parentId:k}){ps({canvasNode:e,source:r==="libraryModule"?"team_library":t,isDrag:!0,engine:A});let{selectionStore:c,canvasStore:u,scopeStore:d}=A.stores,E=a?Dc(A,e):Cc(A,e,j);s===1&&lt(e)&&e.set({floatingPositionEnabled:!0,floatingPlacement:Ko,floatingAlignment:Jo,floatingOffsetX:0,floatingOffsetY:10});let m=Ki(A,e),$=Rs(A,j,[m],null,o);if(i&&o&&!$){let _=u.getCanvasVisibleRectTakingOverlaysIntoAccount(),S=c.ids.length===1&&c.ids[0]?A.tree.getNode(c.ids[0]):null,D=S?A.tree.getGroundNodeFor(S):null;Ee(D)&&lA.intersects(A.tree.convertFrameToCanvas(D),_)&&($=D)}let f=k?A.tree.getNode(k):$??Oc(A,e,j,o),R=c.ids.length===0,y=d.active,b=_o(y)?y.getPrimaryVariant():null;if(i&&o&&b&&R&&(f=b),s===1&&f&&lt(m)&&!Hj(f)){I(f,"Parent should exist");let _=f.getPrimaryId(),S=Pi(A.componentLoader,A.stores,"framer/useShowRelativeOverlay",_,m.draftOrCurrent());if(!S)return;A.tree.move(S.id,_);return}else lt(m)&&m.set(No);if(a&&(f=null,$=null,!lA.containsRect(u.getCanvasVisibleRectTakingOverlaysIntoAccount(),E))){let _=lA.center(E),S=u.zoom,D=Math.min(S,1);u.scrollToCenter(_,{animate:!0,zoom:D})}let G=-1,O=null;if(f){hi(A,f,e,E),gi(A,f,e);let _=f.draftOrCurrent();HA(_)&&($=_)}if($){let _=G6(A,e);if(k)G=$.children.length;else{let{insertionIndex:S,wrap:D}=f6($,A,j,_);D&&(O=D),sj(S)&&(G=S)}if(i&&o){if(G=$.children.length,c.ids.length===1){let MA=c.ids[0],PA=MA&&A.tree.getNode(MA);if(PA){let WA=new Set([PA.id]);for(let le of PA.ancestors())WA.add(le.id);let qj=$.children.findIndex(le=>WA.has(le.id));qj>=0&&(G=qj+1)}}let S,D=$.children[G-1];D?(S=A.tree.convertFrameToCanvas(D),S.y+=S.height):S=A.tree.convertFrameToCanvas($),S.height=_.height;let H=A.tree.convertFrameToCanvas($),V=Math.min(S.x,H.x),rA=Math.max(lA.maxX(S),lA.maxX(H));S.x=V,S.width=rA-V;let{zoom:eA}=u,B=u.getCanvasVisibleRectTakingOverlaysIntoAccount(),Y=B.width*eA,tA=B.height*eA,p=40,aA=Math.max(Y-p*2,100),gA=Math.max(tA-p*2,100),vA=aA/(S.width||1),NA=gA/(S.height||1),uA=Math.min(vA,NA,.5),mj=lA.center(S);u.scrollToCenter(mj,{animate:!0,zoom:uA})}bi(A,$,e,E)}let L;if(f){let{width:_,height:S}=E;L={...A.tree.convertCanvasFrameToNode(f,E),width:_,height:S}}else L=E;let v=m.updateForRect({rect:L,parentSizeInfo:null,constraintsLocked:!1,shouldGuessPinToBottom:f?pi(A.tree,m,f):!0,shouldGuessPinToRight:f?mi(A.tree,m,f):!0});f&&HA(f)&&Dr(m)&&Or(m)&&(v=vc(m,v)),pa(A.componentLoader,m,v),m.set(v,A.tree);let F=m.id,N=!1,w=null;if(f){if(w=f,Ro(f)&&(w=A.tree.getNode(f.originalid),N=!0,I(w,"Fail to insert node into variants: the original parent should exist")),O&&!wA(w)&&HA(w)){let H=Is(A,w,O);if(!H)return;w=H}A.moveNode(m.id,w.id,G),N&&(I(wA(f),"Fail to insert node into variants: the new parent should be a replica node"),F=Qo(A,m,f,w));let _=A.tree.getGroundNodeFor(w),S=_.resolveValue("name"),D=!!(S&&n.has(S.toLowerCase()));if(de(m)&&D&&m.set({left:0,width:1,widthType:1},A.tree),fA(m)&&Fo(_)&&Hj(_)){let V={width:m.width,widthType:m.widthType,left:m.left,right:m.right};D&&m.set(hs);let rA=Ri(A.componentLoader,m);if(rA){let eA=A.tree.getScopeNodeFor(_);yA(eA)&&eA.getTopLevelReplicaVariants().forEach(Y=>{let tA=Y.resolveValue("name");if(!tA)return;let p=Ii(tA,rA);if(!p||p===rA.defaultVariant)return;let aA={...Y.replicaInfo.overrides},gA={...Y.replicaInfo,overrides:aA},vA={...aA[m.id]},NA=xc(D,n,tA,V);NA&&Object.assign(vA,NA),vA[ho(rA.key)]={type:"enum",value:p},aA[m.id]=vA,Y.set({replicaInfo:gA})})}}$e(f)&&Po(m)&&(D||m.set({gridItemFillCellWidth:!0}),ot(f)||m.set({gridItemFillCellHeight:!0}))}l&&de(e)&&Wi(l,e,A).catch($A),!k&&c.set(F,{switchToLayers:!!k,switchToProperties:!0})}function xc(A,e,j,t){let r=e.has(j.toLowerCase());if(A!==r)return r?hs:t}function vc(A,e){let j={...e};return(A.widthType===3||A.widthType===1)&&sj(e.width)&&e.widthType!==A.widthType&&(delete j.width,delete j.widthType),(A.heightType===3||A.heightType===1)&&sj(e.height)&&e.heightType!==A.heightType&&(delete j.height,delete j.heightType),j}function Dt({engine:A,module:e,identifier:j,position:t,centerInParent:r,insertAsGroundNode:n,update:o,parentId:i}){let a={width:Qj(e.metadata.intrinsicWidth,!0)??200,height:Qj(e.metadata.intrinsicHeight,!0)??200},s=new ki({codeComponentIdentifier:j,slotsAreChildNodes:CA.isOn("componentSlotsAreChildNodes"),...a});o&&o(s);let l=t;if(r&&!n&&!i){let k=Ca(s,A),c=k?lA.center(A.tree.convertFrameToCanvas(k)):null,u=A.stores.canvasStore.getCanvasVisibleRectTakingOverlaysIntoAccount();c&&lA.containsPoint(u,c)&&(l=c)}return gs({engine:A,component:s,canvasPoint:l,source:"context_menu",insertAsGroundNode:i?!1:n,parentId:i}),s}var Ne=KA("unlinking");function bs(A,e,j=!0){A.scheduler.processWhenReady(()=>{let{overlayStore:t,selectionStore:r,scopeStore:n,canvasStore:o,persistedUserDefaults:i}=A.stores;n.selectByNode(e.id);let a=xr(e)?e:A.tree.getNodeWithTrait(e.cache.overlayAncestorId,xr);if(a?t.showOverlay(r,a,a.parentid):t.hideAll(),r.set(e.id),j){let s=A.tree.getBoundingFrameForNodes([e]);o.zoomToCenter(s,{animated:i.animateOnZoom,maxZoom:1})}})}async function Pc(A,e,j){let{codeEditorStore:t,selectionStore:r,treeStore:n}=A.stores;t.closeEditor();let[o]=r.nodes;if(r.nodes.length===1&&fA(o)&&o.codeComponentIdentifier===e)return!0;let i=await A.runWithFullyLoadedTreeAsync(()=>{for(let a of n.treeIndex.codeComponentNodeIds){let s=A.tree.getNodeWithTrait(a,fA);if(s?.codeComponentIdentifier===e)return s}},{runInBackground:!0,name:`findCodeComponentInstance: ${e}`});return i?(bs(A,i),!0):(EA({type:"add",variant:"info",key:"add-component-instance-to-edit-in-plugin",text:`Add this Component to Canvas to edit in ${j.name}`}),!1)}async function _s(A,e,j){return await Pc(A,e,j)?(A.stores.pluginStore.openPlugin(j,A,{mode:"canvas"}),!0):!1}function ys(A,e){let j=A.componentForIdentifier(e);if(j)return j;let t=AA(e);return!_A(t)||!JA(t)?null:A.componentForIdentifier(zn(t))}var Tc=0;async function Ot(A,e,j=Tc){if(j===0){let r=AA(e),n=vi(A.stores.treeStore,A.stores.modulesStore,A.stores.pluginStore,r);if(n&&await _s(A,e,n))return}let t=ys(A.componentLoader,e);t&&A.stores.codeEditorStore.editFile(t.file)}async function Ss(A,{identifier:e,info:j,instance:t,enterIsolation:r,codeComponentIsolationMode:n}){let o=j.module.baseURL+j.module.files.source,a=await(await fetch(o)).text(),[s,l]=await Promise.all([Ea(a),A.stores.modulesStore.getModuleDependencies(e)]);if(s.ok){let E=new Map;for(let $ of s.value.relative){let f=Ij($.specifier,`${j.module.type}/`);if(!f){Ne.warn("Failed to normalize relative import",$.specifier);continue}let R=E.get(f)??[];R.push($),E.set(f,R)}let m;for(let $ of l.imports){if($.type!=="local")continue;let f=`${$.moduleType}/${$.moduleName}`,R=E.get(f);if(!R){Ne.warn("Unable to get source location of import",f,"when unlinking");continue}for(let y of R){m||(m=a.split(`
`));let b=y.specifierLine;m[b]=m[b].replace(JSON.stringify(y.specifier),JSON.stringify($.importURL))}}m&&(a=m.join(`
`))}let k=A.stores.modulesStore.forType("codeFile"),c=k.getUniqueName(j.module.name),u=await k.create({name:c,source:a,metadata:{pluginId:j.module.metadata.pluginId}}),d=Yn(e,u).value;return t&&A.scheduler.processWhenReady(()=>{let E=A.tree.get(t.getPrimaryId());E&&E.set({codeComponentIdentifier:d})}),r&&(A.stores.chromeStore.contentPanelTab="Assets",Ot(A,d,n)),d}var Ms={canvasComponent:Di,codeFile:Ss};function qc(A){return GA(A)?A in Ms:!1}async function R6(A,{identifier:e,moduleType:j,instance:t,enterIsolation:r=!0,codeComponentIsolationMode:n,renamedIds:o=new Map,isAutoDetach:i=!1}){if(!qc(j))throw Error(`Cannot import external module of type ${j}`);let[a]=await A.stores.modulesStore.preloadExternalModules([e]);I(a,"external module must exist on preload");let s={identifier:e,info:a,instance:t,enterIsolation:r,codeComponentIsolationMode:n,renamedIds:o,isAutoDetach:i},l=Ms[j],k=await l(A,s);if(!nt(k))return!GA(k)&&Kj(k)?{...a,codeComponentIdentifier:k.instanceIdentifier,node:k}:{...a,codeComponentIdentifier:k,node:void 0}}var F6=new Set;async function Nc(A,e){let{instance:j,withUnlinkModal:t,...r}=e,n=Bt(A.stores.treeStore.tree,e.identifier),o=A.stores.insertSidebarStore.getEditBehavior(e.identifier.moduleId);if(t&&o!=="autoUnlink"&&(!n||Xi.isOn("openPrimaryForBuiltInModules"))){A.stores.modalStore.set({type:"UnlinkComponent",source:"edit_action",...r,nodeId:j?.id});return}if(!F6.has(e.identifier)){F6.add(e.identifier),A.scheduler.process(()=>{A.beginUndoGroup()});try{return(await R6(A,{instance:j,enterIsolation:o!=="autoDetach",...r}))?.codeComponentIdentifier}catch(i){Ne.reportError(i),EA({type:"add",variant:"error",text:"Failed to unlink component",key:"external-component-unlink-error",icon:"error"})}finally{A.scheduler.processWhenReady(()=>{A.endUndoGroup()}),F6.delete(e.identifier)}}}async function LF(A,e){let{instance:j,moduleType:t,enterIsolation:r,codeComponentIsolationMode:n}=e;if(!fA(j))return;let o=await Nc(A,{...e,enterIsolation:!1});if(!o)return;await _i(A.componentLoader,[o],A.stores.modulesStore);let i=A.componentLoader.componentForIdentifier(o);if(!i)return;let a=Qi(i);a&&A.scheduler.processWhenReady(()=>{if(A.tree.getNodes(Array.from(A.stores.treeStore.treeIndex.codeComponentNodeIds)).forEach(l=>{if(!a||a.id===l.id||!fA(l)||l.codeComponentIdentifier!==j.codeComponentIdentifier||wA(l)||!Ji(l,{allowLockedNodes:!0}))return;let k=A.cloneNode(a,!1,!1);Hi(A,l,k).catch($A)}),!!r)if(t==="canvasComponent"){let l=kt(o);l&&A.stores.scopeStore.select(l,{keepHistory:!1})}else t==="codeFile"&&Ot(A,o,n)})}function KF(A,e,j){if(Fi(A,"canDesign"))return;let r=A.tree.getNodeWithTrait(e,QA)?.annotation("framerVector");if(!Vj(r))return;let n=r.set.moduleId,i=A.tree.getNodeWithTrait(n,QA)?.annotation("framerVectorSet");pe(i)&&A.stores.modalStore.set({type:"EditVector",source:"edit_action",vectorSetNodeId:n,moduleId:e,itemCount:i.items.length,instanceNodeId:j})}var Lc=KA("clipboard:modules");async function tR(A,e,j){if(!e||!ii(e))return!1;let t="insert-external-component";try{await Jc({engine:A,moduleURL:e,position:j,centerInParent:!0,toastKey:t}),EA({type:"remove",key:t})}catch(r){console.error("Failed to insert external component",r),EA({type:"add",variant:"error",key:t,text:"Failed to insert external component",icon:"error"})}return!0}async function Kc(A,e){let j=new URL(e),t=j.hash.substring(1).split(","),r=t[0]||"default",n=t.some((k,c)=>c>0&&k==="unlink"),{module:o}=await A.stores.modulesStore.lookUpModule({url:j.href}),i=o.id,a=A.stores.modulesStore.getPersistedModuleByGlobalId(i);I(o.files.module,"Module file must be defined");let s=aj(i,o.saveId,o.files.module,r),l=a?tt(a.localId,r):s;return{module:o,moduleIdentifier:l,externalIdentifier:s,insertUnlinked:n}}async function Jc({engine:A,moduleURL:e,position:j,centerInParent:t,insertAsGroundNode:r,toastKey:n,update:o,parentId:i}){let{module:a,moduleIdentifier:s,externalIdentifier:l,insertUnlinked:k}=await Kc(A,e);if(a.type==="screen")if(_A(s)){let c=kt(s.value);if(!c)return;let u=A.tree.getNode(c);if(!yA(u))return;await A.loadScopesThenProcess([u],([d])=>{d&&Ma(A,d,d.getPrimaryVariant())})}else n&&EA({type:"add",variant:"progress",key:n,text:I6(a.type),icon:"reconnecting",duration:1/0,showCloseButton:"never"}),await Oi(A,l);else if(k){n&&EA({type:"add",variant:"progress",key:n,text:I6(a.type),icon:"reconnecting",duration:1/0,showCloseButton:"never"});let c=await R6(A,{identifier:l,moduleType:a.type,enterIsolation:!1});await A.scheduler.processWhenReadyAsync(()=>{c&&Dt({engine:A,module:a,identifier:c.codeComponentIdentifier,position:j,centerInParent:t,insertAsGroundNode:r,update:o,parentId:i})})}else{if(n&&EA({type:"add",variant:"progress",key:n,text:I6(a.type),icon:"reconnecting",duration:1/0,showCloseButton:"never"}),!Aj(s)){await A.scheduler.processWhenReadyAsync(()=>{Dt({engine:A,module:a,identifier:s.value,position:j,centerInParent:t,insertAsGroundNode:r,update:o,parentId:i})});return}await A.stores.modulesStore.addExternalModulesToProject([s],{onTreeUpdate:()=>{if(Dt({engine:A,module:a,identifier:s.value,position:j,centerInParent:t,insertAsGroundNode:r,update:o,parentId:i}),a.type!=="vector")return;let c=A.tree.getNodeWithTrait(a.id,QA)?.annotation("framerVector");Vj(c)&&A.stores.modulesStore.addOrUpdateVectorSetAndVectors({moduleId:c.set.moduleId,saveId:""}).catch($A)}}).catch(Lc.reportError),A.stores.modulesStore.trackExternalComponentInsert([s.value],"paste-url")}return a}function I6(A){switch(A){case"screen":return"Inserting web page";case"vector":return"Inserting vector set";default:return"Inserting external component"}}function Cs(A,e){if(A.stores.projectStore.projectLicenseType===Gi())return A.stores.modalStore.set({type:"UpsellEnterprise",source:"upsell",description:"Sign up for an Enterprise plan to increase your file upload limit to 150MB and unlock other powerful features that help scale your site.",upsell:"file-limit-enterprise-upsell",upsellFeatures:["Advanced Permissions","Custom Limits","Custom Hosting","Custom Proxy Support","Enterprise Security","Dedicated Support"]});let j=A.stores.projectStore.resourceLimits?.fileUploadLimitInMB;I(typeof j=="number","fileUploadLimitInMB is not a number");let t=j.toLocaleString()+"MB",r=(e/ra).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1})+"MB";return A.stores.modalStore.set({source:"upsell",type:"UpsellFeature",upsellFeature:"fileUploadLimitInMB",title:"File Upload Limit",description:`Your current plan limits file uploads to ${t}, and you\u2019re trying to upload a file that\u2019s ${r}. Upgrade your site to increase the limit and upload your file.`})}var Ds=class{constructor(e,{concurrency:j=5,silent:t=!1}={}){this.engine=e;P(this,"uploads",new Map);P(this,"completed",0);P(this,"failed",0);P(this,"generating",!1);P(this,"resolveStatusUpdate");P(this,"limiter");P(this,"silent");this.limiter=new Ae(j),this.silent=t}add(e){return this.createTask(e,j=>j)()}createTask(e,j){let t=this.uploads.get(e);t||(t={task:async()=>{try{return typeof e=="string"?e.startsWith("data:")?await this.uploadFile(await zi(e,"imported")):await he.uploadAssetByURL(e,{silent:this.silent,refreshAssetService:!1}):await this.uploadFile(e)}catch(o){throw this.failed++,o}finally{this.completed++,this.resolveStatusUpdate?.()}}},this.uploads.set(e,t));let r=t;return async()=>{r.resultPromise||(r.resultPromise=this.limiter.run(r.task),this.resolveStatusUpdate?.());let n=await r.resultPromise;return this.engine.stores.assetStore.assetService?.addAssets([n.asset]),j(n)}}async uploadFile(e){let j=this.engine.stores.projectStore.resourceLimits?.fileUploadLimitInMB??void 0,t={silent:this.silent,maxFileSize:j,onExceedsCustomMaxSize:n=>Cs(this.engine,n),refreshAssetService:!1},r;if(e.type.startsWith("image/")?r=await he.uploadImage(e,t):e.type.startsWith("video/")?r=await he.uploadVideo(e,t):r=await he.uploadFile(e,t),!r)throw Error("Failed to upload file");return r}get active(){return[...this.uploads.values()].map(({resultPromise:e})=>e).filter(so)}get status(){let{active:e,completed:j,failed:t}=this;return{started:e.length,completed:j,failed:t}}async*statusUpdates(){if(this.generating)throw Error("`statusUpdates` is in use by another call");for(this.generating=!0,yield this.status;this.completed<this.active.length;)await new Promise(e=>{this.resolveStatusUpdate=()=>{e(),this.resolveStatusUpdate=void 0}}),yield this.status;await this.engine.stores.assetStore.assetService?.refresh().catch($A),this.generating=!1}async results(){let e=await Promise.allSettled(this.active).then(j=>j.filter(ko).map(t=>t.value));return await this.engine.stores.assetStore.assetService?.refresh().catch($A),e}};var Hc={}.hasOwnProperty;function h6(A,e){let j=-1,t;if(e.extensions)for(;++j<e.extensions.length;)h6(A,e.extensions[j]);for(t in e)if(Hc.call(e,t))switch(t){case"extensions":break;case"unsafe":{Os(A[t],e[t]);break}case"join":{Os(A[t],e[t]);break}case"handlers":{Qc(A[t],e[t]);break}default:A.options[t]=e[t]}return A}function Os(A,e){e&&A.push(...e)}function Qc(A,e){e&&Object.assign(A,e)}function xs(A,e,j,t){let r=j.enter("blockquote"),n=j.createTracker(t);n.move("> "),n.shift(2);let o=j.indentLines(j.containerFlow(A,n.current()),Uc);return r(),o}function Uc(A,e,j){return">"+(j?"":" ")+A}function xt(A,e){return vs(A,e.inConstruct,!0)&&!vs(A,e.notInConstruct,!1)}function vs(A,e,j){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return j;let t=-1;for(;++t<e.length;)if(A.includes(e[t]))return!0;return!1}function g6(A,e,j,t){let r=-1;for(;++r<j.unsafe.length;)if(j.unsafe[r].character===`
`&&xt(j.stack,j.unsafe[r]))return/[ \t]/.test(t.before)?"":" ";return`\\
`}function Ps(A,e){let j=String(A),t=j.indexOf(e),r=t,n=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;t!==-1;)t===r?++n>o&&(o=n):n=1,r=t+e.length,t=j.indexOf(e,r);return o}function Le(A,e){return!!(e.options.fences===!1&&A.value&&!A.lang&&/[^ \r\n]/.test(A.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(A.value))}function Ts(A){let e=A.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function ws(A,e,j,t){let r=Ts(j),n=A.value||"",o=r==="`"?"GraveAccent":"Tilde";if(Le(A,j)){let k=j.enter("codeIndented"),c=j.indentLines(n,Vc);return k(),c}let i=j.createTracker(t),a=r.repeat(Math.max(Ps(n,r)+1,3)),s=j.enter("codeFenced"),l=i.move(a);if(A.lang){let k=j.enter(`codeFencedLang${o}`);l+=i.move(j.safe(A.lang,{before:l,after:" ",encode:["`"],...i.current()})),k()}if(A.lang&&A.meta){let k=j.enter(`codeFencedMeta${o}`);l+=i.move(" "),l+=i.move(j.safe(A.meta,{before:l,after:`
`,encode:["`"],...i.current()})),k()}return l+=i.move(`
`),n&&(l+=i.move(n+`
`)),l+=i.move(a),s(),l}function Vc(A,e,j){return(j?"":"    ")+A}function ee(A){let e=A.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function qs(A,e,j,t){let r=ee(j),n=r==='"'?"Quote":"Apostrophe",o=j.enter("definition"),i=j.enter("label"),a=j.createTracker(t),s=a.move("[");return s+=a.move(j.safe(j.associationId(A),{before:s,after:"]",...a.current()})),s+=a.move("]: "),i(),!A.url||/[\0- \u007F]/.test(A.url)?(i=j.enter("destinationLiteral"),s+=a.move("<"),s+=a.move(j.safe(A.url,{before:s,after:">",...a.current()})),s+=a.move(">")):(i=j.enter("destinationRaw"),s+=a.move(j.safe(A.url,{before:s,after:A.title?" ":`
`,...a.current()}))),i(),A.title&&(i=j.enter(`title${n}`),s+=a.move(" "+r),s+=a.move(j.safe(A.title,{before:s,after:r,...a.current()})),s+=a.move(r),i()),o(),s}function Ns(A){let e=A.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}b6.peek=Xc;function b6(A,e,j,t){let r=Ns(j),n=j.enter("emphasis"),o=j.createTracker(t),i=o.move(r);return i+=o.move(j.containerPhrasing(A,{before:i,after:r,...o.current()})),i+=o.move(r),n(),i}function Xc(A,e,j){return j.options.emphasis||"*"}var zc={};function Mj(A,e){let j=e||zc,t=typeof j.includeImageAlt=="boolean"?j.includeImageAlt:!0,r=typeof j.includeHtml=="boolean"?j.includeHtml:!0;return Ks(A,t,r)}function Ks(A,e,j){if(Wc(A)){if("value"in A)return A.type==="html"&&!j?"":A.value;if(e&&"alt"in A&&A.alt)return A.alt;if("children"in A)return Ls(A.children,e,j)}return Array.isArray(A)?Ls(A,e,j):""}function Ls(A,e,j){let t=[],r=-1;for(;++r<A.length;)t[r]=Ks(A[r],e,j);return t.join("")}function Wc(A){return!!(A&&typeof A=="object")}function vt(A,e){let j=!1;return at(A,function(t){if("value"in t&&/\r?\n|\r/.test(t.value)||t.type==="break")return j=!0,Do}),!!((!A.depth||A.depth<3)&&Mj(A)&&(e.options.setext||j))}function Js(A,e,j,t){let r=Math.max(Math.min(6,A.depth||1),1),n=j.createTracker(t);if(vt(A,j)){let l=j.enter("headingSetext"),k=j.enter("phrasing"),c=j.containerPhrasing(A,{...n.current(),before:`
`,after:`
`});return k(),l(),c+`
`+(r===1?"=":"-").repeat(c.length-(Math.max(c.lastIndexOf("\r"),c.lastIndexOf(`
`))+1))}let o="#".repeat(r),i=j.enter("headingAtx"),a=j.enter("phrasing");n.move(o+" ");let s=j.containerPhrasing(A,{before:"# ",after:`
`,...n.current()});return/^[\t ]/.test(s)&&(s="&#x"+s.charCodeAt(0).toString(16).toUpperCase()+";"+s.slice(1)),s=s?o+" "+s:o,j.options.closeAtx&&(s+=" "+o),a(),i(),s}_6.peek=Yc;function _6(A){return A.value||""}function Yc(){return"<"}y6.peek=Zc;function y6(A,e,j,t){let r=ee(j),n=r==='"'?"Quote":"Apostrophe",o=j.enter("image"),i=j.enter("label"),a=j.createTracker(t),s=a.move("![");return s+=a.move(j.safe(A.alt,{before:s,after:"]",...a.current()})),s+=a.move("]("),i(),!A.url&&A.title||/[\0- \u007F]/.test(A.url)?(i=j.enter("destinationLiteral"),s+=a.move("<"),s+=a.move(j.safe(A.url,{before:s,after:">",...a.current()})),s+=a.move(">")):(i=j.enter("destinationRaw"),s+=a.move(j.safe(A.url,{before:s,after:A.title?" ":")",...a.current()}))),i(),A.title&&(i=j.enter(`title${n}`),s+=a.move(" "+r),s+=a.move(j.safe(A.title,{before:s,after:r,...a.current()})),s+=a.move(r),i()),s+=a.move(")"),o(),s}function Zc(){return"!"}S6.peek=Au;function S6(A,e,j,t){let r=A.referenceType,n=j.enter("imageReference"),o=j.enter("label"),i=j.createTracker(t),a=i.move("!["),s=j.safe(A.alt,{before:a,after:"]",...i.current()});a+=i.move(s+"]["),o();let l=j.stack;j.stack=[],o=j.enter("reference");let k=j.safe(j.associationId(A),{before:a,after:"]",...i.current()});return o(),j.stack=l,n(),r==="full"||!s||s!==k?a+=i.move(k+"]"):r==="shortcut"?a=a.slice(0,-1):a+=i.move("]"),a}function Au(){return"!"}M6.peek=ju;function M6(A,e,j){let t=A.value||"",r="`",n=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(t);)r+="`";for(/[^ \r\n]/.test(t)&&(/^[ \r\n]/.test(t)&&/[ \r\n]$/.test(t)||/^`|`$/.test(t))&&(t=" "+t+" ");++n<j.unsafe.length;){let o=j.unsafe[n],i=j.compilePattern(o),a;if(o.atBreak)for(;a=i.exec(t);){let s=a.index;t.charCodeAt(s)===10&&t.charCodeAt(s-1)===13&&s--,t=t.slice(0,s)+" "+t.slice(a.index+1)}}return r+t+r}function ju(){return"`"}function C6(A,e){let j=Mj(A);return!!(!e.options.resourceLink&&A.url&&!A.title&&A.children&&A.children.length===1&&A.children[0].type==="text"&&(j===A.url||"mailto:"+j===A.url)&&/^[a-z][a-z+.-]+:/i.test(A.url)&&!/[\0- <>\u007F]/.test(A.url))}D6.peek=eu;function D6(A,e,j,t){let r=ee(j),n=r==='"'?"Quote":"Apostrophe",o=j.createTracker(t),i,a;if(C6(A,j)){let l=j.stack;j.stack=[],i=j.enter("autolink");let k=o.move("<");return k+=o.move(j.containerPhrasing(A,{before:k,after:">",...o.current()})),k+=o.move(">"),i(),j.stack=l,k}i=j.enter("link"),a=j.enter("label");let s=o.move("[");return s+=o.move(j.containerPhrasing(A,{before:s,after:"](",...o.current()})),s+=o.move("]("),a(),!A.url&&A.title||/[\0- \u007F]/.test(A.url)?(a=j.enter("destinationLiteral"),s+=o.move("<"),s+=o.move(j.safe(A.url,{before:s,after:">",...o.current()})),s+=o.move(">")):(a=j.enter("destinationRaw"),s+=o.move(j.safe(A.url,{before:s,after:A.title?" ":")",...o.current()}))),a(),A.title&&(a=j.enter(`title${n}`),s+=o.move(" "+r),s+=o.move(j.safe(A.title,{before:s,after:r,...o.current()})),s+=o.move(r),a()),s+=o.move(")"),i(),s}function eu(A,e,j){return C6(A,j)?"<":"["}O6.peek=tu;function O6(A,e,j,t){let r=A.referenceType,n=j.enter("linkReference"),o=j.enter("label"),i=j.createTracker(t),a=i.move("["),s=j.containerPhrasing(A,{before:a,after:"]",...i.current()});a+=i.move(s+"]["),o();let l=j.stack;j.stack=[],o=j.enter("reference");let k=j.safe(j.associationId(A),{before:a,after:"]",...i.current()});return o(),j.stack=l,n(),r==="full"||!s||s!==k?a+=i.move(k+"]"):r==="shortcut"?a=a.slice(0,-1):a+=i.move("]"),a}function tu(){return"["}function te(A){let e=A.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Hs(A){let e=te(A),j=A.options.bulletOther;if(!j)return e==="*"?"-":"*";if(j!=="*"&&j!=="+"&&j!=="-")throw new Error("Cannot serialize items with `"+j+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(j===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+j+"`) to be different");return j}function Qs(A){let e=A.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Pt(A){let e=A.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Us(A,e,j,t){let r=j.enter("list"),n=j.bulletCurrent,o=A.ordered?Qs(j):te(j),i=A.ordered?o==="."?")":".":Hs(j),a=e&&j.bulletLastUsed?o===j.bulletLastUsed:!1;if(!A.ordered){let l=A.children?A.children[0]:void 0;if((o==="*"||o==="-")&&l&&(!l.children||!l.children[0])&&j.stack[j.stack.length-1]==="list"&&j.stack[j.stack.length-2]==="listItem"&&j.stack[j.stack.length-3]==="list"&&j.stack[j.stack.length-4]==="listItem"&&j.indexStack[j.indexStack.length-1]===0&&j.indexStack[j.indexStack.length-2]===0&&j.indexStack[j.indexStack.length-3]===0&&(a=!0),Pt(j)===o&&l){let k=-1;for(;++k<A.children.length;){let c=A.children[k];if(c&&c.type==="listItem"&&c.children&&c.children[0]&&c.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(o=i),j.bulletCurrent=o;let s=j.containerFlow(A,t);return j.bulletLastUsed=o,j.bulletCurrent=n,r(),s}function Vs(A){let e=A.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Xs(A,e,j,t){let r=Vs(j),n=j.bulletCurrent||te(j);e&&e.type==="list"&&e.ordered&&(n=(typeof e.start=="number"&&e.start>-1?e.start:1)+(j.options.incrementListMarker===!1?0:e.children.indexOf(A))+n);let o=n.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||A.spread))&&(o=Math.ceil(o/4)*4);let i=j.createTracker(t);i.move(n+" ".repeat(o-n.length)),i.shift(o);let a=j.enter("listItem"),s=j.indentLines(j.containerFlow(A,i.current()),l);return a(),s;function l(k,c,u){return c?(u?"":" ".repeat(o))+k:(u?n:n+" ".repeat(o-n.length))+k}}function zs(A,e,j,t){let r=j.enter("paragraph"),n=j.enter("phrasing"),o=j.containerPhrasing(A,t);return n(),r(),o}function Ws(A,e,j,t){return(A.children.some(function(o){return vo(o)})?j.containerPhrasing:j.containerFlow).call(j,A,t)}function Ys(A){let e=A.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}x6.peek=ru;function x6(A,e,j,t){let r=Ys(j),n=j.enter("strong"),o=j.createTracker(t),i=o.move(r+r);return i+=o.move(j.containerPhrasing(A,{before:i,after:r,...o.current()})),i+=o.move(r+r),n(),i}function ru(A,e,j){return j.options.strong||"*"}function Zs(A,e,j,t){return j.safe(A.value,t)}function A7(A){let e=A.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function j7(A,e,j){let t=(Pt(j)+(j.options.ruleSpaces?" ":"")).repeat(A7(j));return j.options.ruleSpaces?t.slice(0,-1):t}var nj={blockquote:xs,break:g6,code:ws,definition:qs,emphasis:b6,hardBreak:g6,heading:Js,html:_6,image:y6,imageReference:S6,inlineCode:M6,link:D6,linkReference:O6,list:Us,listItem:Xs,paragraph:zs,root:Ws,strong:x6,text:Zs,thematicBreak:j7};var e7=[nu];function nu(A,e,j,t){if(e.type==="code"&&Le(e,t)&&(A.type==="list"||A.type===e.type&&Le(A,t)))return!1;if("spread"in j&&typeof j.spread=="boolean")return A.type==="paragraph"&&(A.type===e.type||e.type==="definition"||e.type==="heading"&&vt(e,t))?void 0:j.spread?1:0}var Cj=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],t7=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:Cj},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:Cj},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:Cj},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:Cj},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:Cj},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:Cj},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:Cj},{atBreak:!0,character:"~"}];var r7=document.createElement("i");function re(A){let e="&"+A+";";r7.innerHTML=e;let j=r7.textContent;return j.charCodeAt(j.length-1)===59&&A!=="semi"||j===e?!1:j}function Tt(A,e){let j=Number.parseInt(A,e);return j<9||j===11||j>13&&j<32||j>126&&j<160||j>55295&&j<57344||j>64975&&j<65008||(j&65535)===65535||(j&65535)===65534||j>1114111?"\uFFFD":String.fromCodePoint(j)}var ou=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function wt(A){return A.replace(ou,iu)}function iu(A,e,j){if(e)return e;if(j.charCodeAt(0)===35){let r=j.charCodeAt(1),n=r===120||r===88;return Tt(j.slice(n?2:1),n?16:10)}return re(j)||A}function n7(A){return A.label||!A.identifier?A.label||"":wt(A.identifier)}function o7(A){if(!A._compiled){let e=(A.atBreak?"[\\r\\n][\\t ]*":"")+(A.before?"(?:"+A.before+")":"");A._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(A.character)?"\\":"")+A.character+(A.after?"(?:"+A.after+")":""),"g")}return A._compiled}function i7(A,e,j){let t=e.indexStack,r=A.children||[],n=[],o=-1,i=j.before;t.push(-1);let a=e.createTracker(j);for(;++o<r.length;){let s=r[o],l;if(t[t.length-1]=o,o+1<r.length){let k=e.handle.handlers[r[o+1].type];k&&k.peek&&(k=k.peek),l=k?k(r[o+1],A,e,{before:"",after:"",...a.current()}).charAt(0):""}else l=j.after;n.length>0&&(i==="\r"||i===`
`)&&s.type==="html"&&(n[n.length-1]=n[n.length-1].replace(/(\r?\n|\r)$/," "),i=" ",a=e.createTracker(j),a.move(n.join(""))),n.push(a.move(e.handle(s,A,e,{...a.current(),before:i,after:l}))),i=n[n.length-1].slice(-1)}return t.pop(),n.join("")}function a7(A,e,j){let t=e.indexStack,r=A.children||[],n=e.createTracker(j),o=[],i=-1;for(t.push(-1);++i<r.length;){let a=r[i];t[t.length-1]=i,o.push(n.move(e.handle(a,A,e,{before:`
`,after:`
`,...n.current()}))),a.type!=="list"&&(e.bulletLastUsed=void 0),i<r.length-1&&o.push(n.move(au(a,r[i+1],A,e)))}return t.pop(),o.join("")}function au(A,e,j,t){let r=t.join.length;for(;r--;){let n=t.join[r](A,e,j,t);if(n===!0||n===1)break;if(typeof n=="number")return`
`.repeat(1+n);if(n===!1)return`

<!---->

`}return`

`}var su=/\r?\n|\r/g;function s7(A,e){let j=[],t=0,r=0,n;for(;n=su.exec(A);)o(A.slice(t,n.index)),j.push(n[0]),t=n.index+n[0].length,r++;return o(A.slice(t)),j.join("");function o(i){j.push(e(i,r,!i))}}function k7(A,e,j){let t=(j.before||"")+(e||"")+(j.after||""),r=[],n=[],o={},i=-1;for(;++i<A.unsafe.length;){let l=A.unsafe[i];if(!xt(A.stack,l))continue;let k=A.compilePattern(l),c;for(;c=k.exec(t);){let u="before"in l||!!l.atBreak,d="after"in l,E=c.index+(u?c[1].length:0);r.includes(E)?(o[E].before&&!u&&(o[E].before=!1),o[E].after&&!d&&(o[E].after=!1)):(r.push(E),o[E]={before:u,after:d})}}r.sort(lu);let a=j.before?j.before.length:0,s=t.length-(j.after?j.after.length:0);for(i=-1;++i<r.length;){let l=r[i];l<a||l>=s||l+1<s&&r[i+1]===l+1&&o[l].after&&!o[l+1].before&&!o[l+1].after||r[i-1]===l-1&&o[l].before&&!o[l-1].before&&!o[l-1].after||(a!==l&&n.push(l7(t.slice(a,l),"\\")),a=l,/[!-/:-@[-`{-~]/.test(t.charAt(l))&&(!j.encode||!j.encode.includes(t.charAt(l)))?n.push("\\"):(n.push("&#x"+t.charCodeAt(l).toString(16).toUpperCase()+";"),a++))}return n.push(l7(t.slice(a,s),j.after)),n.join("")}function lu(A,e){return A-e}function l7(A,e){let j=/\\(?=[!-/:-@[-`{-~])/g,t=[],r=[],n=A+e,o=-1,i=0,a;for(;a=j.exec(n);)t.push(a.index);for(;++o<t.length;)i!==t[o]&&r.push(A.slice(i,t[o])),r.push("\\"),i=t[o];return r.push(A.slice(i)),r.join("")}function c7(A){let e=A||{},j=e.now||{},t=e.lineShift||0,r=j.line||1,n=j.column||1;return{move:a,current:o,shift:i};function o(){return{now:{line:r,column:n},lineShift:t}}function i(s){t+=s}function a(s){let l=s||"",k=l.split(/\r?\n|\r/g),c=k[k.length-1];return r+=k.length-1,n=k.length===1?n+c.length:1+c.length+t,l}}function v6(A,e={}){let j={enter:r,indentLines:s7,associationId:n7,containerPhrasing:du,containerFlow:$u,createTracker:c7,compilePattern:o7,safe:Eu,stack:[],unsafe:[...t7],join:[...e7],handlers:{...nj},options:{},indexStack:[],handle:void 0};h6(j,e),j.options.tightDefinitions&&j.join.push(uu),j.handle=st("type",{invalid:ku,unknown:cu,handlers:j.handlers});let t=j.handle(A,void 0,j,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return t&&t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t;function r(n){return j.stack.push(n),o;function o(){j.stack.pop()}}}function ku(A){throw new Error("Cannot handle value `"+A+"`, expected node")}function cu(A){let e=A;throw new Error("Cannot handle unknown node `"+e.type+"`")}function uu(A,e){if(A.type==="definition"&&A.type===e.type)return 0}function du(A,e){return i7(A,this,e)}function $u(A,e){return a7(A,this,e)}function Eu(A,e){return k7(this,A,e)}var u7=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];var Bu=/["&'<>`]/g,pu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mu=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,fu=/[|\\{}()[\]^$+*?.]/g,d7=new WeakMap;function $7(A,e){if(A=A.replace(e.subset?Gu(e.subset):Bu,t),e.subset||e.escapeOnly)return A;return A.replace(pu,j).replace(mu,t);function j(r,n,o){return e.format((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)-56320+65536,o.charCodeAt(n+2),e)}function t(r,n,o){return e.format(r.charCodeAt(0),o.charCodeAt(n+1),e)}}function Gu(A){let e=d7.get(A);return e||(e=Fu(A),d7.set(A,e)),e}function Fu(A){let e=[],j=-1;for(;++j<A.length;)e.push(A[j].replace(fu,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}var Ru=/[\dA-Fa-f]/;function E7(A,e,j){let t="&#x"+A.toString(16).toUpperCase();return j&&e&&!Ru.test(String.fromCharCode(e))?t:t+";"}var Iu=/\d/;function B7(A,e,j){let t="&#"+String(A);return j&&e&&!Iu.test(String.fromCharCode(e))?t:t+";"}var p7=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"];var qt={nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203E",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203A",euro:"\u20AC"};var m7=["cent","copy","divide","gt","lt","not","para","times"];var f7={}.hasOwnProperty,P6={},Nt;for(Nt in qt)f7.call(qt,Nt)&&(P6[qt[Nt]]=Nt);var hu=/[^\dA-Za-z]/;function G7(A,e,j,t){let r=String.fromCharCode(A);if(f7.call(P6,r)){let n=P6[r],o="&"+n;return j&&p7.includes(n)&&!m7.includes(n)&&(!t||e&&e!==61&&hu.test(String.fromCharCode(e)))?o:o+";"}return""}function F7(A,e,j){let t=E7(A,e,j.omitOptionalSemicolons),r;if((j.useNamedReferences||j.useShortestReferences)&&(r=G7(A,e,j.omitOptionalSemicolons,j.attribute)),(j.useShortestReferences||!r)&&j.useShortestReferences){let n=B7(A,e,j.omitOptionalSemicolons);n.length<t.length&&(t=n)}return r&&(!j.useShortestReferences||r.length<t.length)?r:t}function oj(A,e){return $7(A,Object.assign({format:F7},e))}var gu=/^>|^->|<!--|-->|--!>|<!-$/g,bu=[">"],_u=["<",">"];function R7(A,e,j,t){return t.settings.bogusComments?"<?"+oj(A.value,Object.assign({},t.settings.characterReferences,{subset:bu}))+">":"<!--"+A.value.replace(gu,r)+"-->";function r(n){return oj(n,Object.assign({},t.settings.characterReferences,{subset:_u}))}}function I7(A,e,j,t){return"<!"+(t.settings.upperDoctype?"DOCTYPE":"doctype")+(t.settings.tightDoctype?"":" ")+"html>"}function ne(A,e){let j=String(A);if(typeof e!="string")throw new TypeError("Expected character");let t=0,r=j.indexOf(e);for(;r!==-1;)t++,r=j.indexOf(e,r+e.length);return t}var yu=/[ \t\n\f\r]/g;function Dj(A){return typeof A=="object"?A.type==="text"?h7(A.value):!1:h7(A)}function h7(A){return A.replace(yu,"")===""}var sA=g7(1),T6=g7(-1),Su=[];function g7(A){return e;function e(j,t,r){let n=j?j.children:Su,o=(t||0)+A,i=n[o];if(!r)for(;i&&Dj(i);)o+=A,i=n[o];return i}}var Mu={}.hasOwnProperty;function Lt(A){return e;function e(j,t,r){return Mu.call(A,j.tagName)&&A[j.tagName](j,t,r)}}var Ke=Lt({body:Du,caption:w6,colgroup:w6,dd:Pu,dt:vu,head:w6,html:Cu,li:xu,optgroup:Tu,option:wu,p:Ou,rp:b7,rt:b7,tbody:Nu,td:_7,tfoot:Lu,th:_7,thead:qu,tr:Ku});function w6(A,e,j){let t=sA(j,e,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&Dj(t.value.charAt(0)))}function Cu(A,e,j){let t=sA(j,e);return!t||t.type!=="comment"}function Du(A,e,j){let t=sA(j,e);return!t||t.type!=="comment"}function Ou(A,e,j){let t=sA(j,e);return t?t.type==="element"&&(t.tagName==="address"||t.tagName==="article"||t.tagName==="aside"||t.tagName==="blockquote"||t.tagName==="details"||t.tagName==="div"||t.tagName==="dl"||t.tagName==="fieldset"||t.tagName==="figcaption"||t.tagName==="figure"||t.tagName==="footer"||t.tagName==="form"||t.tagName==="h1"||t.tagName==="h2"||t.tagName==="h3"||t.tagName==="h4"||t.tagName==="h5"||t.tagName==="h6"||t.tagName==="header"||t.tagName==="hgroup"||t.tagName==="hr"||t.tagName==="main"||t.tagName==="menu"||t.tagName==="nav"||t.tagName==="ol"||t.tagName==="p"||t.tagName==="pre"||t.tagName==="section"||t.tagName==="table"||t.tagName==="ul"):!j||!(j.type==="element"&&(j.tagName==="a"||j.tagName==="audio"||j.tagName==="del"||j.tagName==="ins"||j.tagName==="map"||j.tagName==="noscript"||j.tagName==="video"))}function xu(A,e,j){let t=sA(j,e);return!t||t.type==="element"&&t.tagName==="li"}function vu(A,e,j){let t=sA(j,e);return!!(t&&t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd"))}function Pu(A,e,j){let t=sA(j,e);return!t||t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd")}function b7(A,e,j){let t=sA(j,e);return!t||t.type==="element"&&(t.tagName==="rp"||t.tagName==="rt")}function Tu(A,e,j){let t=sA(j,e);return!t||t.type==="element"&&t.tagName==="optgroup"}function wu(A,e,j){let t=sA(j,e);return!t||t.type==="element"&&(t.tagName==="option"||t.tagName==="optgroup")}function qu(A,e,j){let t=sA(j,e);return!!(t&&t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot"))}function Nu(A,e,j){let t=sA(j,e);return!t||t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot")}function Lu(A,e,j){return!sA(j,e)}function Ku(A,e,j){let t=sA(j,e);return!t||t.type==="element"&&t.tagName==="tr"}function _7(A,e,j){let t=sA(j,e);return!t||t.type==="element"&&(t.tagName==="td"||t.tagName==="th")}var y7=Lt({body:Qu,colgroup:Uu,head:Hu,html:Ju,tbody:Vu});function Ju(A){let e=sA(A,-1);return!e||e.type!=="comment"}function Hu(A){let e=new Set;for(let t of A.children)if(t.type==="element"&&(t.tagName==="base"||t.tagName==="title")){if(e.has(t.tagName))return!1;e.add(t.tagName)}let j=A.children[0];return!j||j.type==="element"}function Qu(A){let e=sA(A,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&Dj(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Uu(A,e,j){let t=T6(j,e),r=sA(A,-1,!0);return j&&t&&t.type==="element"&&t.tagName==="colgroup"&&Ke(t,j.children.indexOf(t),j)?!1:!!(r&&r.type==="element"&&r.tagName==="col")}function Vu(A,e,j){let t=T6(j,e),r=sA(A,-1);return j&&t&&t.type==="element"&&(t.tagName==="thead"||t.tagName==="tbody")&&Ke(t,j.children.indexOf(t),j)?!1:!!(r&&r.type==="element"&&r.tagName==="tr")}var Kt={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function S7(A,e,j,t){let r=t.schema,n=r.space==="svg"?!1:t.settings.omitOptionalTags,o=r.space==="svg"?t.settings.closeEmptyElements:t.settings.voids.includes(A.tagName.toLowerCase()),i=[],a;r.space==="html"&&A.tagName==="svg"&&(t.schema=It);let s=Xu(t,A.properties),l=t.all(r.space==="html"&&A.tagName==="template"?A.content:A);return t.schema=r,l&&(o=!1),(s||!n||!y7(A,e,j))&&(i.push("<",A.tagName,s?" "+s:""),o&&(r.space==="svg"||t.settings.closeSelfClosing)&&(a=s.charAt(s.length-1),(!t.settings.tightSelfClosing||a==="/"||a&&a!=='"'&&a!=="'")&&i.push(" "),i.push("/")),i.push(">")),i.push(l),!o&&(!n||!Ke(A,e,j))&&i.push("</"+A.tagName+">"),i.join("")}function Xu(A,e){let j=[],t=-1,r;if(e){for(r in e)if(e[r]!==null&&e[r]!==void 0){let n=zu(A,r,e[r]);n&&j.push(n)}}for(;++t<j.length;){let n=A.settings.tightAttributes?j[t].charAt(j[t].length-1):void 0;t!==j.length-1&&n!=='"'&&n!=="'"&&(j[t]+=" ")}return j.join("")}function zu(A,e,j){let t=zr(A.schema,e),r=A.settings.allowParseErrors&&A.schema.space==="html"?0:1,n=A.settings.allowDangerousCharacters?0:1,o=A.quote,i;if(t.overloadedBoolean&&(j===t.attribute||j==="")?j=!0:(t.boolean||t.overloadedBoolean)&&(typeof j!="string"||j===t.attribute||j==="")&&(j=!!j),j==null||j===!1||typeof j=="number"&&Number.isNaN(j))return"";let a=oj(t.attribute,Object.assign({},A.settings.characterReferences,{subset:Kt.name[r][n]}));return j===!0||(j=Array.isArray(j)?(t.commaSeparated?Ia:ha)(j,{padLeft:!A.settings.tightCommaSeparatedLists}):String(j),A.settings.collapseEmptyAttributes&&!j)?a:(A.settings.preferUnquoted&&(i=oj(j,Object.assign({},A.settings.characterReferences,{attribute:!0,subset:Kt.unquoted[r][n]}))),i!==j&&(A.settings.quoteSmart&&ne(j,o)>ne(j,A.alternative)&&(o=A.alternative),i=o+oj(j,Object.assign({},A.settings.characterReferences,{subset:(o==="'"?Kt.single:Kt.double)[r][n],attribute:!0}))+o),a+(i&&"="+i))}var Wu=["<","&"];function Jt(A,e,j,t){return j&&j.type==="element"&&(j.tagName==="script"||j.tagName==="style")?A.value:oj(A.value,Object.assign({},t.settings.characterReferences,{subset:Wu}))}function M7(A,e,j,t){return t.settings.allowDangerousHtml?A.value:Jt(A,e,j,t)}function C7(A,e,j,t){return t.all(A)}var D7=st("type",{invalid:Yu,unknown:Zu,handlers:{comment:R7,doctype:I7,element:S7,raw:M7,root:C7,text:Jt}});function Yu(A){throw new Error("Expected node, not `"+A+"`")}function Zu(A){let e=A;throw new Error("Cannot compile unknown node `"+e.type+"`")}var Ad={},jd={},ed=[];function q6(A,e){let j=e||Ad,t=j.quote||'"',r=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Invalid quote `"+t+"`, expected `'` or `\"`");return{one:td,all:rd,settings:{omitOptionalTags:j.omitOptionalTags||!1,allowParseErrors:j.allowParseErrors||!1,allowDangerousCharacters:j.allowDangerousCharacters||!1,quoteSmart:j.quoteSmart||!1,preferUnquoted:j.preferUnquoted||!1,tightAttributes:j.tightAttributes||!1,upperDoctype:j.upperDoctype||!1,tightDoctype:j.tightDoctype||!1,bogusComments:j.bogusComments||!1,tightCommaSeparatedLists:j.tightCommaSeparatedLists||!1,tightSelfClosing:j.tightSelfClosing||!1,collapseEmptyAttributes:j.collapseEmptyAttributes||!1,allowDangerousHtml:j.allowDangerousHtml||!1,voids:j.voids||u7,characterReferences:j.characterReferences||jd,closeSelfClosing:j.closeSelfClosing||!1,closeEmptyElements:j.closeEmptyElements||!1},schema:j.space==="svg"?It:Ra,quote:t,alternative:r}.one(Array.isArray(A)?{type:"root",children:A}:A,void 0,void 0)}function td(A,e,j){return D7(A,e,j,this)}function rd(A){let e=[],j=A&&A.children||ed,t=-1;for(;++t<j.length;)e[t]=this.one(j[t],t,A);return e.join("")}function Ht(A){let e=this,j={...e.data("settings"),...A};e.compiler=t;function t(r){return q6(r,j)}}function N6(A){if(typeof A!="string")throw new TypeError("Expected a string");return A.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Je(A,e,j){let r=Co((j||{}).ignore||[]),n=nd(e),o=-1;for(;++o<n.length;)Oo(A,"text",i);function i(s,l){let k=-1,c;for(;++k<l.length;){let u=l[k],d=c?c.children:void 0;if(r(u,d?d.indexOf(u):void 0,c))return;c=u}if(c)return a(s,l)}function a(s,l){let k=l[l.length-1],c=n[o][0],u=n[o][1],d=0,m=k.children.indexOf(s),$=!1,f=[];c.lastIndex=0;let R=c.exec(s.value);for(;R;){let y=R.index,b={index:R.index,input:R.input,stack:[...l,s]},G=u(...R,b);if(typeof G=="string"&&(G=G.length>0?{type:"text",value:G}:void 0),G===!1?c.lastIndex=y+1:(d!==y&&f.push({type:"text",value:s.value.slice(d,y)}),Array.isArray(G)?f.push(...G):G&&f.push(G),d=y+R[0].length,$=!0),!c.global)break;R=c.exec(s.value)}return $?(d<s.value.length&&f.push({type:"text",value:s.value.slice(d)}),k.children.splice(m,1,...f)):f=[s],m+f.length}}function nd(A){let e=[];if(!Array.isArray(A))throw new TypeError("Expected find and replace tuple or list of tuples");let j=!A[0]||Array.isArray(A[0])?A:[A],t=-1;for(;++t<j.length;){let r=j[t];e.push([od(r[0]),id(r[1])])}return e}function od(A){return typeof A=="string"?new RegExp(N6(A),"g"):A}function id(A){return typeof A=="function"?A:function(){return A}}function L6(A){Je(A,[/\r?\n|\r/g,ad])}function ad(){return{type:"break"}}function Qt(){return function(A){L6(A)}}var dA=Ej(/[A-Za-z]/),iA=Ej(/[\dA-Za-z]/),O7=Ej(/[#-'*+\--9=?A-Z^-~]/);function Oj(A){return A!==null&&(A<32||A===127)}var He=Ej(/\d/),x7=Ej(/[\dA-Fa-f]/),v7=Ej(/[!-/:-@[-`{-~]/);function C(A){return A!==null&&A<-2}function Q(A){return A!==null&&(A<0||A===32)}function q(A){return A===-2||A===-1||A===32}var xj=Ej(new RegExp("\\p{P}|\\p{S}","u")),VA=Ej(/\s/);function Ej(A){return e;function e(j){return j!==null&&j>-1&&A.test(String.fromCharCode(j))}}var K6="phrasing",J6=["autolink","link","image","label"];function Q6(){return{transforms:[dd],enter:{literalAutolink:sd,literalAutolinkEmail:H6,literalAutolinkHttp:H6,literalAutolinkWww:H6},exit:{literalAutolink:ud,literalAutolinkEmail:cd,literalAutolinkHttp:ld,literalAutolinkWww:kd}}}function U6(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:K6,notInConstruct:J6},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:K6,notInConstruct:J6},{character:":",before:"[ps]",after:"\\/",inConstruct:K6,notInConstruct:J6}]}}function sd(A){this.enter({type:"link",title:null,url:"",children:[]},A)}function H6(A){this.config.enter.autolinkProtocol.call(this,A)}function ld(A){this.config.exit.autolinkProtocol.call(this,A)}function kd(A){this.config.exit.data.call(this,A);let e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(A)}function cd(A){this.config.exit.autolinkEmail.call(this,A)}function ud(A){this.exit(A)}function dd(A){Je(A,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,$d],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Ed]],{ignore:["link","linkReference"]})}function $d(A,e,j,t,r){let n="";if(!P7(r)||(/^w/i.test(e)&&(j=e+j,e="",n="http://"),!Bd(j)))return!1;let o=pd(j+t);if(!o[0])return!1;let i={type:"link",title:null,url:n+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[i,{type:"text",value:o[1]}]:i}function Ed(A,e,j,t){return!P7(t,!0)||/[-\d_]$/.test(j)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+j,children:[{type:"text",value:e+"@"+j}]}}function Bd(A){let e=A.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function pd(A){let e=/[!"&'),.:;<>?\]}]+$/.exec(A);if(!e)return[A,void 0];A=A.slice(0,e.index);let j=e[0],t=j.indexOf(")"),r=ne(A,"("),n=ne(A,")");for(;t!==-1&&r>n;)A+=j.slice(0,t+1),j=j.slice(t+1),t=j.indexOf(")"),n++;return[A,j]}function P7(A,e){let j=A.input.charCodeAt(A.index-1);return(A.index===0||VA(j)||xj(j))&&(!e||j!==47)}function FA(A){return A.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}T7.peek=bd;function md(){this.buffer()}function fd(A){this.enter({type:"footnoteReference",identifier:"",label:""},A)}function Gd(){this.buffer()}function Fd(A){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},A)}function Rd(A){let e=this.resume(),j=this.stack[this.stack.length-1];j.type,j.identifier=FA(this.sliceSerialize(A)).toLowerCase(),j.label=e}function Id(A){this.exit(A)}function hd(A){let e=this.resume(),j=this.stack[this.stack.length-1];j.type,j.identifier=FA(this.sliceSerialize(A)).toLowerCase(),j.label=e}function gd(A){this.exit(A)}function bd(){return"["}function T7(A,e,j,t){let r=j.createTracker(t),n=r.move("[^"),o=j.enter("footnoteReference"),i=j.enter("reference");return n+=r.move(j.safe(j.associationId(A),{after:"]",before:n})),i(),o(),n+=r.move("]"),n}function V6(){return{enter:{gfmFootnoteCallString:md,gfmFootnoteCall:fd,gfmFootnoteDefinitionLabelString:Gd,gfmFootnoteDefinition:Fd},exit:{gfmFootnoteCallString:Rd,gfmFootnoteCall:Id,gfmFootnoteDefinitionLabelString:hd,gfmFootnoteDefinition:gd}}}function X6(A){let e=!1;return A&&A.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:j,footnoteReference:T7},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function j(t,r,n,o){let i=n.createTracker(o),a=i.move("[^"),s=n.enter("footnoteDefinition"),l=n.enter("label");return a+=i.move(n.safe(n.associationId(t),{before:a,after:"]"})),l(),a+=i.move("]:"),t.children&&t.children.length>0&&(i.shift(4),a+=i.move((e?`
`:" ")+n.indentLines(n.containerFlow(t,i.current()),e?w7:_d))),s(),a}}function _d(A,e,j){return e===0?A:w7(A,e,j)}function w7(A,e,j){return(j?"":"    ")+A}var yd=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];q7.peek=Cd;function z6(){return{canContainEols:["delete"],enter:{strikethrough:Sd},exit:{strikethrough:Md}}}function W6(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:yd}],handlers:{delete:q7}}}function Sd(A){this.enter({type:"delete",children:[]},A)}function Md(A){this.exit(A)}function q7(A,e,j,t){let r=j.createTracker(t),n=j.enter("strikethrough"),o=r.move("~~");return o+=j.containerPhrasing(A,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),n(),o}function Cd(){return"~"}function Dd(A){return A.length}function L7(A,e){let j=e||{},t=(j.align||[]).concat(),r=j.stringLength||Dd,n=[],o=[],i=[],a=[],s=0,l=-1;for(;++l<A.length;){let E=[],m=[],$=-1;for(A[l].length>s&&(s=A[l].length);++$<A[l].length;){let f=Od(A[l][$]);if(j.alignDelimiters!==!1){let R=r(f);m[$]=R,(a[$]===void 0||R>a[$])&&(a[$]=R)}E.push(f)}o[l]=E,i[l]=m}let k=-1;if(typeof t=="object"&&"length"in t)for(;++k<s;)n[k]=N7(t[k]);else{let E=N7(t);for(;++k<s;)n[k]=E}k=-1;let c=[],u=[];for(;++k<s;){let E=n[k],m="",$="";E===99?(m=":",$=":"):E===108?m=":":E===114&&($=":");let f=j.alignDelimiters===!1?1:Math.max(1,a[k]-m.length-$.length),R=m+"-".repeat(f)+$;j.alignDelimiters!==!1&&(f=m.length+f+$.length,f>a[k]&&(a[k]=f),u[k]=f),c[k]=R}o.splice(1,0,c),i.splice(1,0,u),l=-1;let d=[];for(;++l<o.length;){let E=o[l],m=i[l];k=-1;let $=[];for(;++k<s;){let f=E[k]||"",R="",y="";if(j.alignDelimiters!==!1){let b=a[k]-(m[k]||0),G=n[k];G===114?R=" ".repeat(b):G===99?b%2?(R=" ".repeat(b/2+.5),y=" ".repeat(b/2-.5)):(R=" ".repeat(b/2),y=R):y=" ".repeat(b)}j.delimiterStart!==!1&&!k&&$.push("|"),j.padding!==!1&&!(j.alignDelimiters===!1&&f==="")&&(j.delimiterStart!==!1||k)&&$.push(" "),j.alignDelimiters!==!1&&$.push(R),$.push(f),j.alignDelimiters!==!1&&$.push(y),j.padding!==!1&&$.push(" "),(j.delimiterEnd!==!1||k!==s-1)&&$.push("|")}d.push(j.delimiterEnd===!1?$.join("").replace(/ +$/,""):$.join(""))}return d.join(`
`)}function Od(A){return A==null?"":String(A)}function N7(A){let e=typeof A=="string"?A.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Z6(){return{enter:{table:xd,tableData:K7,tableHeader:K7,tableRow:Pd},exit:{codeText:Td,table:vd,tableData:Y6,tableHeader:Y6,tableRow:Y6}}}function xd(A){let e=A._align;this.enter({type:"table",align:e.map(function(j){return j==="none"?null:j}),children:[]},A),this.data.inTable=!0}function vd(A){this.exit(A),this.data.inTable=void 0}function Pd(A){this.enter({type:"tableRow",children:[]},A)}function Y6(A){this.exit(A)}function K7(A){this.enter({type:"tableCell",children:[]},A)}function Td(A){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,wd));let j=this.stack[this.stack.length-1];j.type,j.value=e,this.exit(A)}function wd(A,e){return e==="|"?e:A}function An(A){let e=A||{},j=e.tableCellPadding,t=e.tablePipeAlign,r=e.stringLength,n=j?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:c,table:o,tableCell:a,tableRow:i}};function o(u,d,E,m){return s(l(u,E,m),u.align)}function i(u,d,E,m){let $=k(u,E,m),f=s([$]);return f.slice(0,f.indexOf(`
`))}function a(u,d,E,m){let $=E.enter("tableCell"),f=E.enter("phrasing"),R=E.containerPhrasing(u,{...m,before:n,after:n});return f(),$(),R}function s(u,d){return L7(u,{align:d,alignDelimiters:t,padding:j,stringLength:r})}function l(u,d,E){let m=u.children,$=-1,f=[],R=d.enter("table");for(;++$<m.length;)f[$]=k(m[$],d,E);return R(),f}function k(u,d,E){let m=u.children,$=-1,f=[],R=d.enter("tableRow");for(;++$<m.length;)f[$]=a(m[$],u,d,E);return R(),f}function c(u,d,E){let m=nj.inlineCode(u,d,E);return E.stack.includes("tableCell")&&(m=m.replace(/\|/g,"\\$&")),m}}function jn(){return{exit:{taskListCheckValueChecked:J7,taskListCheckValueUnchecked:J7,paragraph:qd}}}function en(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Nd}}}function J7(A){let e=this.stack[this.stack.length-2];e.type,e.checked=A.type==="taskListCheckValueChecked"}function qd(A){let e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){let j=this.stack[this.stack.length-1];j.type;let t=j.children[0];if(t&&t.type==="text"){let r=e.children,n=-1,o;for(;++n<r.length;){let i=r[n];if(i.type==="paragraph"){o=i;break}}o===j&&(t.value=t.value.slice(1),t.value.length===0?j.children.shift():j.position&&t.position&&typeof t.position.start.offset=="number"&&(t.position.start.column++,t.position.start.offset++,j.position.start=Object.assign({},t.position.start)))}}this.exit(A)}function Nd(A,e,j,t){let r=A.children[0],n=typeof A.checked=="boolean"&&r&&r.type==="paragraph",o="["+(A.checked?"x":" ")+"] ",i=j.createTracker(t);n&&i.move(o);let a=nj.listItem(A,e,j,{...t,...i.current()});return n&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,s)),a;function s(l){return l+o}}function tn(){return[Q6(),V6(),z6(),Z6(),jn()]}function rn(A){return{extensions:[U6(),X6(A),W6(),An(A),en()]}}function cA(A,e,j,t){let r=A.length,n=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,j=j>0?j:0,t.length<1e4)o=Array.from(t),o.unshift(e,j),A.splice(...o);else for(j&&A.splice(e,j);n<t.length;)o=t.slice(n,n+1e4),o.unshift(e,0),A.splice(...o),n+=1e4,e+=1e4}function IA(A,e){return A.length>0?(cA(A,A.length,0,e),A):e}var H7={}.hasOwnProperty;function Ut(A){let e={},j=-1;for(;++j<A.length;)Ld(e,A[j]);return e}function Ld(A,e){let j;for(j in e){let r=(H7.call(A,j)?A[j]:void 0)||(A[j]={}),n=e[j],o;if(n)for(o in n){H7.call(r,o)||(r[o]=[]);let i=n[o];Kd(r[o],Array.isArray(i)?i:i?[i]:[])}}}function Kd(A,e){let j=-1,t=[];for(;++j<e.length;)(e[j].add==="after"?A:t).push(e[j]);cA(A,0,0,t)}var Jd={tokenize:Xd,partial:!0},Q7={tokenize:zd,partial:!0},U7={tokenize:Wd,partial:!0},V7={tokenize:Yd,partial:!0},Hd={tokenize:Zd,partial:!0},X7={name:"wwwAutolink",tokenize:Ud,previous:W7},z7={name:"protocolAutolink",tokenize:Vd,previous:Y7},ij={name:"emailAutolink",tokenize:Qd,previous:Z7},XA={};function on(){return{text:XA}}var vj=48;for(;vj<123;)XA[vj]=ij,vj++,vj===58?vj=65:vj===91&&(vj=97);XA[43]=ij;XA[45]=ij;XA[46]=ij;XA[95]=ij;XA[72]=[ij,z7];XA[104]=[ij,z7];XA[87]=[ij,X7];XA[119]=[ij,X7];function Qd(A,e,j){let t=this,r,n;return o;function o(k){return!nn(k)||!Z7.call(t,t.previous)||an(t.events)?j(k):(A.enter("literalAutolink"),A.enter("literalAutolinkEmail"),i(k))}function i(k){return nn(k)?(A.consume(k),i):k===64?(A.consume(k),a):j(k)}function a(k){return k===46?A.check(Hd,l,s)(k):k===45||k===95||iA(k)?(n=!0,A.consume(k),a):l(k)}function s(k){return A.consume(k),r=!0,a}function l(k){return n&&r&&dA(t.previous)?(A.exit("literalAutolinkEmail"),A.exit("literalAutolink"),e(k)):j(k)}}function Ud(A,e,j){let t=this;return r;function r(o){return o!==87&&o!==119||!W7.call(t,t.previous)||an(t.events)?j(o):(A.enter("literalAutolink"),A.enter("literalAutolinkWww"),A.check(Jd,A.attempt(Q7,A.attempt(U7,n),j),j)(o))}function n(o){return A.exit("literalAutolinkWww"),A.exit("literalAutolink"),e(o)}}function Vd(A,e,j){let t=this,r="",n=!1;return o;function o(k){return(k===72||k===104)&&Y7.call(t,t.previous)&&!an(t.events)?(A.enter("literalAutolink"),A.enter("literalAutolinkHttp"),r+=String.fromCodePoint(k),A.consume(k),i):j(k)}function i(k){if(dA(k)&&r.length<5)return r+=String.fromCodePoint(k),A.consume(k),i;if(k===58){let c=r.toLowerCase();if(c==="http"||c==="https")return A.consume(k),a}return j(k)}function a(k){return k===47?(A.consume(k),n?s:(n=!0,a)):j(k)}function s(k){return k===null||Oj(k)||Q(k)||VA(k)||xj(k)?j(k):A.attempt(Q7,A.attempt(U7,l),j)(k)}function l(k){return A.exit("literalAutolinkHttp"),A.exit("literalAutolink"),e(k)}}function Xd(A,e,j){let t=0;return r;function r(o){return(o===87||o===119)&&t<3?(t++,A.consume(o),r):o===46&&t===3?(A.consume(o),n):j(o)}function n(o){return o===null?j(o):e(o)}}function zd(A,e,j){let t,r,n;return o;function o(s){return s===46||s===95?A.check(V7,a,i)(s):s===null||Q(s)||VA(s)||s!==45&&xj(s)?a(s):(n=!0,A.consume(s),o)}function i(s){return s===95?t=!0:(r=t,t=void 0),A.consume(s),o}function a(s){return r||t||!n?j(s):e(s)}}function Wd(A,e){let j=0,t=0;return r;function r(o){return o===40?(j++,A.consume(o),r):o===41&&t<j?n(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?A.check(V7,e,n)(o):o===null||Q(o)||VA(o)?e(o):(A.consume(o),r)}function n(o){return o===41&&t++,A.consume(o),r}}function Yd(A,e,j){return t;function t(i){return i===33||i===34||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===63||i===95||i===126?(A.consume(i),t):i===38?(A.consume(i),n):i===93?(A.consume(i),r):i===60||i===null||Q(i)||VA(i)?e(i):j(i)}function r(i){return i===null||i===40||i===91||Q(i)||VA(i)?e(i):t(i)}function n(i){return dA(i)?o(i):j(i)}function o(i){return i===59?(A.consume(i),t):dA(i)?(A.consume(i),o):j(i)}}function Zd(A,e,j){return t;function t(n){return A.consume(n),r}function r(n){return iA(n)?j(n):e(n)}}function W7(A){return A===null||A===40||A===42||A===95||A===91||A===93||A===126||Q(A)}function Y7(A){return!dA(A)}function Z7(A){return!(A===47||nn(A))}function nn(A){return A===43||A===45||A===46||A===95||iA(A)}function an(A){let e=A.length,j=!1;for(;e--;){let t=A[e][1];if((t.type==="labelLink"||t.type==="labelImage")&&!t._balanced){j=!0;break}if(t._gfmAutolinkLiteralWalkedInto){j=!1;break}}return A.length>0&&!j&&(A[A.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),j}function xA(A){let e=[],j=-1,t=0,r=0;for(;++j<A.length;){let n=A.charCodeAt(j),o="";if(n===37&&iA(A.charCodeAt(j+1))&&iA(A.charCodeAt(j+2)))r=2;else if(n<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(n))||(o=String.fromCharCode(n));else if(n>55295&&n<57344){let i=A.charCodeAt(j+1);n<56320&&i>56319&&i<57344?(o=String.fromCharCode(n,i),r=1):o="\uFFFD"}else o=String.fromCharCode(n);o&&(e.push(A.slice(t,j),encodeURIComponent(o)),t=j+r+1,o=""),r&&(j+=r,r=0)}return e.join("")+A.slice(t)}function oe(A){if(A===null||Q(A)||VA(A))return 1;if(xj(A))return 2}function Bj(A,e,j){let t=[],r=-1;for(;++r<A.length;){let n=A[r].resolveAll;n&&!t.includes(n)&&(e=n(e,j),t.push(n))}return e}var Qe={name:"attention",tokenize:j$,resolveAll:A$};function A$(A,e){let j=-1,t,r,n,o,i,a,s,l;for(;++j<A.length;)if(A[j][0]==="enter"&&A[j][1].type==="attentionSequence"&&A[j][1]._close){for(t=j;t--;)if(A[t][0]==="exit"&&A[t][1].type==="attentionSequence"&&A[t][1]._open&&e.sliceSerialize(A[t][1]).charCodeAt(0)===e.sliceSerialize(A[j][1]).charCodeAt(0)){if((A[t][1]._close||A[j][1]._open)&&(A[j][1].end.offset-A[j][1].start.offset)%3&&!((A[t][1].end.offset-A[t][1].start.offset+A[j][1].end.offset-A[j][1].start.offset)%3))continue;a=A[t][1].end.offset-A[t][1].start.offset>1&&A[j][1].end.offset-A[j][1].start.offset>1?2:1;let k=Object.assign({},A[t][1].end),c=Object.assign({},A[j][1].start);Al(k,-a),Al(c,a),o={type:a>1?"strongSequence":"emphasisSequence",start:k,end:Object.assign({},A[t][1].end)},i={type:a>1?"strongSequence":"emphasisSequence",start:Object.assign({},A[j][1].start),end:c},n={type:a>1?"strongText":"emphasisText",start:Object.assign({},A[t][1].end),end:Object.assign({},A[j][1].start)},r={type:a>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},i.end)},A[t][1].end=Object.assign({},o.start),A[j][1].start=Object.assign({},i.end),s=[],A[t][1].end.offset-A[t][1].start.offset&&(s=IA(s,[["enter",A[t][1],e],["exit",A[t][1],e]])),s=IA(s,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",n,e]]),s=IA(s,Bj(e.parser.constructs.insideSpan.null,A.slice(t+1,j),e)),s=IA(s,[["exit",n,e],["enter",i,e],["exit",i,e],["exit",r,e]]),A[j][1].end.offset-A[j][1].start.offset?(l=2,s=IA(s,[["enter",A[j][1],e],["exit",A[j][1],e]])):l=0,cA(A,t-1,j-t+3,s),j=t+s.length-l-2;break}}for(j=-1;++j<A.length;)A[j][1].type==="attentionSequence"&&(A[j][1].type="data");return A}function j$(A,e){let j=this.parser.constructs.attentionMarkers.null,t=this.previous,r=oe(t),n;return o;function o(a){return n=a,A.enter("attentionSequence"),i(a)}function i(a){if(a===n)return A.consume(a),i;let s=A.exit("attentionSequence"),l=oe(a),k=!l||l===2&&r||j.includes(a),c=!r||r===2&&l||j.includes(t);return s._open=!!(n===42?k:k&&(r||!c)),s._close=!!(n===42?c:c&&(l||!k)),e(a)}}function Al(A,e){A.column+=e,A.offset+=e,A._bufferIndex+=e}var sn={name:"autolink",tokenize:e$};function e$(A,e,j){let t=0;return r;function r(u){return A.enter("autolink"),A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.enter("autolinkProtocol"),n}function n(u){return dA(u)?(A.consume(u),o):u===64?j(u):s(u)}function o(u){return u===43||u===45||u===46||iA(u)?(t=1,i(u)):s(u)}function i(u){return u===58?(A.consume(u),t=0,a):(u===43||u===45||u===46||iA(u))&&t++<32?(A.consume(u),i):(t=0,s(u))}function a(u){return u===62?(A.exit("autolinkProtocol"),A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.exit("autolink"),e):u===null||u===32||u===60||Oj(u)?j(u):(A.consume(u),a)}function s(u){return u===64?(A.consume(u),l):O7(u)?(A.consume(u),s):j(u)}function l(u){return iA(u)?k(u):j(u)}function k(u){return u===46?(A.consume(u),t=0,l):u===62?(A.exit("autolinkProtocol").type="autolinkEmail",A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.exit("autolink"),e):c(u)}function c(u){if((u===45||iA(u))&&t++<63){let d=u===45?c:k;return A.consume(u),d}return j(u)}}function T(A,e,j,t){let r=t?t-1:Number.POSITIVE_INFINITY,n=0;return o;function o(a){return q(a)?(A.enter(j),i(a)):e(a)}function i(a){return q(a)&&n++<r?(A.consume(a),i):(A.exit(j),e(a))}}var zA={tokenize:t$,partial:!0};function t$(A,e,j){return t;function t(n){return q(n)?T(A,r,"linePrefix")(n):r(n)}function r(n){return n===null||C(n)?e(n):j(n)}}var Vt={name:"blockQuote",tokenize:r$,continuation:{tokenize:n$},exit:o$};function r$(A,e,j){let t=this;return r;function r(o){if(o===62){let i=t.containerState;return i.open||(A.enter("blockQuote",{_container:!0}),i.open=!0),A.enter("blockQuotePrefix"),A.enter("blockQuoteMarker"),A.consume(o),A.exit("blockQuoteMarker"),n}return j(o)}function n(o){return q(o)?(A.enter("blockQuotePrefixWhitespace"),A.consume(o),A.exit("blockQuotePrefixWhitespace"),A.exit("blockQuotePrefix"),e):(A.exit("blockQuotePrefix"),e(o))}}function n$(A,e,j){let t=this;return r;function r(o){return q(o)?T(A,n,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):n(o)}function n(o){return A.attempt(Vt,e,j)(o)}}function o$(A){A.exit("blockQuote")}var Xt={name:"characterEscape",tokenize:i$};function i$(A,e,j){return t;function t(n){return A.enter("characterEscape"),A.enter("escapeMarker"),A.consume(n),A.exit("escapeMarker"),r}function r(n){return v7(n)?(A.enter("characterEscapeValue"),A.consume(n),A.exit("characterEscapeValue"),A.exit("characterEscape"),e):j(n)}}var zt={name:"characterReference",tokenize:a$};function a$(A,e,j){let t=this,r=0,n,o;return i;function i(k){return A.enter("characterReference"),A.enter("characterReferenceMarker"),A.consume(k),A.exit("characterReferenceMarker"),a}function a(k){return k===35?(A.enter("characterReferenceMarkerNumeric"),A.consume(k),A.exit("characterReferenceMarkerNumeric"),s):(A.enter("characterReferenceValue"),n=31,o=iA,l(k))}function s(k){return k===88||k===120?(A.enter("characterReferenceMarkerHexadecimal"),A.consume(k),A.exit("characterReferenceMarkerHexadecimal"),A.enter("characterReferenceValue"),n=6,o=x7,l):(A.enter("characterReferenceValue"),n=7,o=He,l(k))}function l(k){if(k===59&&r){let c=A.exit("characterReferenceValue");return o===iA&&!re(t.sliceSerialize(c))?j(k):(A.enter("characterReferenceMarker"),A.consume(k),A.exit("characterReferenceMarker"),A.exit("characterReference"),e)}return o(k)&&r++<n?(A.consume(k),l):j(k)}}var jl={tokenize:l$,partial:!0},Wt={name:"codeFenced",tokenize:s$,concrete:!0};function s$(A,e,j){let t=this,r={tokenize:b,partial:!0},n=0,o=0,i;return a;function a(G){return s(G)}function s(G){let O=t.events[t.events.length-1];return n=O&&O[1].type==="linePrefix"?O[2].sliceSerialize(O[1],!0).length:0,i=G,A.enter("codeFenced"),A.enter("codeFencedFence"),A.enter("codeFencedFenceSequence"),l(G)}function l(G){return G===i?(o++,A.consume(G),l):o<3?j(G):(A.exit("codeFencedFenceSequence"),q(G)?T(A,k,"whitespace")(G):k(G))}function k(G){return G===null||C(G)?(A.exit("codeFencedFence"),t.interrupt?e(G):A.check(jl,E,y)(G)):(A.enter("codeFencedFenceInfo"),A.enter("chunkString",{contentType:"string"}),c(G))}function c(G){return G===null||C(G)?(A.exit("chunkString"),A.exit("codeFencedFenceInfo"),k(G)):q(G)?(A.exit("chunkString"),A.exit("codeFencedFenceInfo"),T(A,u,"whitespace")(G)):G===96&&G===i?j(G):(A.consume(G),c)}function u(G){return G===null||C(G)?k(G):(A.enter("codeFencedFenceMeta"),A.enter("chunkString",{contentType:"string"}),d(G))}function d(G){return G===null||C(G)?(A.exit("chunkString"),A.exit("codeFencedFenceMeta"),k(G)):G===96&&G===i?j(G):(A.consume(G),d)}function E(G){return A.attempt(r,y,m)(G)}function m(G){return A.enter("lineEnding"),A.consume(G),A.exit("lineEnding"),$}function $(G){return n>0&&q(G)?T(A,f,"linePrefix",n+1)(G):f(G)}function f(G){return G===null||C(G)?A.check(jl,E,y)(G):(A.enter("codeFlowValue"),R(G))}function R(G){return G===null||C(G)?(A.exit("codeFlowValue"),f(G)):(A.consume(G),R)}function y(G){return A.exit("codeFenced"),e(G)}function b(G,O,L){let v=0;return F;function F(D){return G.enter("lineEnding"),G.consume(D),G.exit("lineEnding"),N}function N(D){return G.enter("codeFencedFence"),q(D)?T(G,w,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):w(D)}function w(D){return D===i?(G.enter("codeFencedFenceSequence"),_(D)):L(D)}function _(D){return D===i?(v++,G.consume(D),_):v>=o?(G.exit("codeFencedFenceSequence"),q(D)?T(G,S,"whitespace")(D):S(D)):L(D)}function S(D){return D===null||C(D)?(G.exit("codeFencedFence"),O(D)):L(D)}}}function l$(A,e,j){let t=this;return r;function r(o){return o===null?j(o):(A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),n)}function n(o){return t.parser.lazy[t.now().line]?j(o):e(o)}}var Ue={name:"codeIndented",tokenize:c$},k$={tokenize:u$,partial:!0};function c$(A,e,j){let t=this;return r;function r(s){return A.enter("codeIndented"),T(A,n,"linePrefix",5)(s)}function n(s){let l=t.events[t.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?o(s):j(s)}function o(s){return s===null?a(s):C(s)?A.attempt(k$,o,a)(s):(A.enter("codeFlowValue"),i(s))}function i(s){return s===null||C(s)?(A.exit("codeFlowValue"),o(s)):(A.consume(s),i)}function a(s){return A.exit("codeIndented"),e(s)}}function u$(A,e,j){let t=this;return r;function r(o){return t.parser.lazy[t.now().line]?j(o):C(o)?(A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),r):T(A,n,"linePrefix",5)(o)}function n(o){let i=t.events[t.events.length-1];return i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(o):C(o)?r(o):j(o)}}var ln={name:"codeText",tokenize:E$,resolve:d$,previous:$$};function d$(A){let e=A.length-4,j=3,t,r;if((A[j][1].type==="lineEnding"||A[j][1].type==="space")&&(A[e][1].type==="lineEnding"||A[e][1].type==="space")){for(t=j;++t<e;)if(A[t][1].type==="codeTextData"){A[j][1].type="codeTextPadding",A[e][1].type="codeTextPadding",j+=2,e-=2;break}}for(t=j-1,e++;++t<=e;)r===void 0?t!==e&&A[t][1].type!=="lineEnding"&&(r=t):(t===e||A[t][1].type==="lineEnding")&&(A[r][1].type="codeTextData",t!==r+2&&(A[r][1].end=A[t-1][1].end,A.splice(r+2,t-r-2),e-=t-r-2,t=r+2),r=void 0);return A}function $$(A){return A!==96||this.events[this.events.length-1][1].type==="characterEscape"}function E$(A,e,j){let t=this,r=0,n,o;return i;function i(c){return A.enter("codeText"),A.enter("codeTextSequence"),a(c)}function a(c){return c===96?(A.consume(c),r++,a):(A.exit("codeTextSequence"),s(c))}function s(c){return c===null?j(c):c===32?(A.enter("space"),A.consume(c),A.exit("space"),s):c===96?(o=A.enter("codeTextSequence"),n=0,k(c)):C(c)?(A.enter("lineEnding"),A.consume(c),A.exit("lineEnding"),s):(A.enter("codeTextData"),l(c))}function l(c){return c===null||c===32||c===96||C(c)?(A.exit("codeTextData"),s(c)):(A.consume(c),l)}function k(c){return c===96?(A.consume(c),n++,k):n===r?(A.exit("codeTextSequence"),A.exit("codeText"),e(c)):(o.type="codeTextData",l(c))}}var Yt=class{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,j){let t=j??Number.POSITIVE_INFINITY;return t<this.left.length?this.left.slice(e,t):e>this.left.length?this.right.slice(this.right.length-t+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-t+this.left.length).reverse())}splice(e,j,t){let r=j||0;this.setCursor(Math.trunc(e));let n=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return t&&Ve(this.left,t),n.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ve(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ve(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){let j=this.left.splice(e,Number.POSITIVE_INFINITY);Ve(this.right,j.reverse())}else{let j=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ve(this.left,j.reverse())}}};function Ve(A,e){let j=0;if(e.length<1e4)A.push(...e);else for(;j<e.length;)A.push(...e.slice(j,j+1e4)),j+=1e4}function Zt(A){let e={},j=-1,t,r,n,o,i,a,s,l=new Yt(A);for(;++j<l.length;){for(;j in e;)j=e[j];if(t=l.get(j),j&&t[1].type==="chunkFlow"&&l.get(j-1)[1].type==="listItemPrefix"&&(a=t[1]._tokenizer.events,n=0,n<a.length&&a[n][1].type==="lineEndingBlank"&&(n+=2),n<a.length&&a[n][1].type==="content"))for(;++n<a.length&&a[n][1].type!=="content";)a[n][1].type==="chunkText"&&(a[n][1]._isInFirstContentOfListItem=!0,n++);if(t[0]==="enter")t[1].contentType&&(Object.assign(e,B$(l,j)),j=e[j],s=!0);else if(t[1]._container){for(n=j,r=void 0;n--&&(o=l.get(n),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(r&&(l.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=n);r&&(t[1].end=Object.assign({},l.get(r)[1].start),i=l.slice(r,j),i.unshift(t),l.splice(r,j-r+1,i))}}return cA(A,0,Number.POSITIVE_INFINITY,l.slice(0)),!s}function B$(A,e){let j=A.get(e)[1],t=A.get(e)[2],r=e-1,n=[],o=j._tokenizer||t.parser[j.contentType](j.start),i=o.events,a=[],s={},l,k,c=-1,u=j,d=0,E=0,m=[E];for(;u;){for(;A.get(++r)[1]!==u;);n.push(r),u._tokenizer||(l=t.sliceStream(u),u.next||l.push(null),k&&o.defineSkip(u.start),u._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(l),u._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),k=u,u=u.next}for(u=j;++c<i.length;)i[c][0]==="exit"&&i[c-1][0]==="enter"&&i[c][1].type===i[c-1][1].type&&i[c][1].start.line!==i[c][1].end.line&&(E=c+1,m.push(E),u._tokenizer=void 0,u.previous=void 0,u=u.next);for(o.events=[],u?(u._tokenizer=void 0,u.previous=void 0):m.pop(),c=m.length;c--;){let $=i.slice(m[c],m[c+1]),f=n.pop();a.push([f,f+$.length-1]),A.splice(f,2,$)}for(a.reverse(),c=-1;++c<a.length;)s[d+a[c][0]]=d+a[c][1],d+=a[c][1]-a[c][0]-1;return s}var kn={tokenize:f$,resolve:m$},p$={tokenize:G$,partial:!0};function m$(A){return Zt(A),A}function f$(A,e){let j;return t;function t(i){return A.enter("content"),j=A.enter("chunkContent",{contentType:"content"}),r(i)}function r(i){return i===null?n(i):C(i)?A.check(p$,o,n)(i):(A.consume(i),r)}function n(i){return A.exit("chunkContent"),A.exit("content"),e(i)}function o(i){return A.consume(i),A.exit("chunkContent"),j.next=A.enter("chunkContent",{contentType:"content",previous:j}),j=j.next,r}}function G$(A,e,j){let t=this;return r;function r(o){return A.exit("chunkContent"),A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),T(A,n,"linePrefix")}function n(o){if(o===null||C(o))return j(o);let i=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(o):A.interrupt(t.parser.constructs.flow,j,e)(o)}}function Ar(A,e,j,t,r,n,o,i,a){let s=a||Number.POSITIVE_INFINITY,l=0;return k;function k($){return $===60?(A.enter(t),A.enter(r),A.enter(n),A.consume($),A.exit(n),c):$===null||$===32||$===41||Oj($)?j($):(A.enter(t),A.enter(o),A.enter(i),A.enter("chunkString",{contentType:"string"}),E($))}function c($){return $===62?(A.enter(n),A.consume($),A.exit(n),A.exit(r),A.exit(t),e):(A.enter(i),A.enter("chunkString",{contentType:"string"}),u($))}function u($){return $===62?(A.exit("chunkString"),A.exit(i),c($)):$===null||$===60||C($)?j($):(A.consume($),$===92?d:u)}function d($){return $===60||$===62||$===92?(A.consume($),u):u($)}function E($){return!l&&($===null||$===41||Q($))?(A.exit("chunkString"),A.exit(i),A.exit(o),A.exit(t),e($)):l<s&&$===40?(A.consume($),l++,E):$===41?(A.consume($),l--,E):$===null||$===32||$===40||Oj($)?j($):(A.consume($),$===92?m:E)}function m($){return $===40||$===41||$===92?(A.consume($),E):E($)}}function jr(A,e,j,t,r,n){let o=this,i=0,a;return s;function s(u){return A.enter(t),A.enter(r),A.consume(u),A.exit(r),A.enter(n),l}function l(u){return i>999||u===null||u===91||u===93&&!a||u===94&&!i&&"_hiddenFootnoteSupport"in o.parser.constructs?j(u):u===93?(A.exit(n),A.enter(r),A.consume(u),A.exit(r),A.exit(t),e):C(u)?(A.enter("lineEnding"),A.consume(u),A.exit("lineEnding"),l):(A.enter("chunkString",{contentType:"string"}),k(u))}function k(u){return u===null||u===91||u===93||C(u)||i++>999?(A.exit("chunkString"),l(u)):(A.consume(u),a||(a=!q(u)),u===92?c:k)}function c(u){return u===91||u===92||u===93?(A.consume(u),i++,k):k(u)}}function er(A,e,j,t,r,n){let o;return i;function i(c){return c===34||c===39||c===40?(A.enter(t),A.enter(r),A.consume(c),A.exit(r),o=c===40?41:c,a):j(c)}function a(c){return c===o?(A.enter(r),A.consume(c),A.exit(r),A.exit(t),e):(A.enter(n),s(c))}function s(c){return c===o?(A.exit(n),a(o)):c===null?j(c):C(c)?(A.enter("lineEnding"),A.consume(c),A.exit("lineEnding"),T(A,s,"linePrefix")):(A.enter("chunkString",{contentType:"string"}),l(c))}function l(c){return c===o||c===null||C(c)?(A.exit("chunkString"),s(c)):(A.consume(c),c===92?k:l)}function k(c){return c===o||c===92?(A.consume(c),l):l(c)}}function Pj(A,e){let j;return t;function t(r){return C(r)?(A.enter("lineEnding"),A.consume(r),A.exit("lineEnding"),j=!0,t):q(r)?T(A,t,j?"linePrefix":"lineSuffix")(r):e(r)}}var cn={name:"definition",tokenize:R$},F$={tokenize:I$,partial:!0};function R$(A,e,j){let t=this,r;return n;function n(u){return A.enter("definition"),o(u)}function o(u){return jr.call(t,A,i,j,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function i(u){return r=FA(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),u===58?(A.enter("definitionMarker"),A.consume(u),A.exit("definitionMarker"),a):j(u)}function a(u){return Q(u)?Pj(A,s)(u):s(u)}function s(u){return Ar(A,l,j,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(u)}function l(u){return A.attempt(F$,k,k)(u)}function k(u){return q(u)?T(A,c,"whitespace")(u):c(u)}function c(u){return u===null||C(u)?(A.exit("definition"),t.parser.defined.push(r),e(u)):j(u)}}function I$(A,e,j){return t;function t(i){return Q(i)?Pj(A,r)(i):j(i)}function r(i){return er(A,n,j,"definitionTitle","definitionTitleMarker","definitionTitleString")(i)}function n(i){return q(i)?T(A,o,"whitespace")(i):o(i)}function o(i){return i===null||C(i)?e(i):j(i)}}var un={name:"hardBreakEscape",tokenize:h$};function h$(A,e,j){return t;function t(n){return A.enter("hardBreakEscape"),A.consume(n),r}function r(n){return C(n)?(A.exit("hardBreakEscape"),e(n)):j(n)}}var dn={name:"headingAtx",tokenize:b$,resolve:g$};function g$(A,e){let j=A.length-2,t=3,r,n;return A[t][1].type==="whitespace"&&(t+=2),j-2>t&&A[j][1].type==="whitespace"&&(j-=2),A[j][1].type==="atxHeadingSequence"&&(t===j-1||j-4>t&&A[j-2][1].type==="whitespace")&&(j-=t+1===j?2:4),j>t&&(r={type:"atxHeadingText",start:A[t][1].start,end:A[j][1].end},n={type:"chunkText",start:A[t][1].start,end:A[j][1].end,contentType:"text"},cA(A,t,j-t+1,[["enter",r,e],["enter",n,e],["exit",n,e],["exit",r,e]])),A}function b$(A,e,j){let t=0;return r;function r(l){return A.enter("atxHeading"),n(l)}function n(l){return A.enter("atxHeadingSequence"),o(l)}function o(l){return l===35&&t++<6?(A.consume(l),o):l===null||Q(l)?(A.exit("atxHeadingSequence"),i(l)):j(l)}function i(l){return l===35?(A.enter("atxHeadingSequence"),a(l)):l===null||C(l)?(A.exit("atxHeading"),e(l)):q(l)?T(A,i,"whitespace")(l):(A.enter("atxHeadingText"),s(l))}function a(l){return l===35?(A.consume(l),a):(A.exit("atxHeadingSequence"),i(l))}function s(l){return l===null||l===35||Q(l)?(A.exit("atxHeadingText"),i(l)):(A.consume(l),s)}}var el=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$n=["pre","script","style","textarea"];var En={name:"htmlFlow",tokenize:M$,resolveTo:S$,concrete:!0},_$={tokenize:D$,partial:!0},y$={tokenize:C$,partial:!0};function S$(A){let e=A.length;for(;e--&&!(A[e][0]==="enter"&&A[e][1].type==="htmlFlow"););return e>1&&A[e-2][1].type==="linePrefix"&&(A[e][1].start=A[e-2][1].start,A[e+1][1].start=A[e-2][1].start,A.splice(e-2,2)),A}function M$(A,e,j){let t=this,r,n,o,i,a;return s;function s(p){return l(p)}function l(p){return A.enter("htmlFlow"),A.enter("htmlFlowData"),A.consume(p),k}function k(p){return p===33?(A.consume(p),c):p===47?(A.consume(p),n=!0,E):p===63?(A.consume(p),r=3,t.interrupt?e:B):dA(p)?(A.consume(p),o=String.fromCharCode(p),m):j(p)}function c(p){return p===45?(A.consume(p),r=2,u):p===91?(A.consume(p),r=5,i=0,d):dA(p)?(A.consume(p),r=4,t.interrupt?e:B):j(p)}function u(p){return p===45?(A.consume(p),t.interrupt?e:B):j(p)}function d(p){let aA="CDATA[";return p===aA.charCodeAt(i++)?(A.consume(p),i===aA.length?t.interrupt?e:w:d):j(p)}function E(p){return dA(p)?(A.consume(p),o=String.fromCharCode(p),m):j(p)}function m(p){if(p===null||p===47||p===62||Q(p)){let aA=p===47,gA=o.toLowerCase();return!aA&&!n&&$n.includes(gA)?(r=1,t.interrupt?e(p):w(p)):el.includes(o.toLowerCase())?(r=6,aA?(A.consume(p),$):t.interrupt?e(p):w(p)):(r=7,t.interrupt&&!t.parser.lazy[t.now().line]?j(p):n?f(p):R(p))}return p===45||iA(p)?(A.consume(p),o+=String.fromCharCode(p),m):j(p)}function $(p){return p===62?(A.consume(p),t.interrupt?e:w):j(p)}function f(p){return q(p)?(A.consume(p),f):F(p)}function R(p){return p===47?(A.consume(p),F):p===58||p===95||dA(p)?(A.consume(p),y):q(p)?(A.consume(p),R):F(p)}function y(p){return p===45||p===46||p===58||p===95||iA(p)?(A.consume(p),y):b(p)}function b(p){return p===61?(A.consume(p),G):q(p)?(A.consume(p),b):R(p)}function G(p){return p===null||p===60||p===61||p===62||p===96?j(p):p===34||p===39?(A.consume(p),a=p,O):q(p)?(A.consume(p),G):L(p)}function O(p){return p===a?(A.consume(p),a=null,v):p===null||C(p)?j(p):(A.consume(p),O)}function L(p){return p===null||p===34||p===39||p===47||p===60||p===61||p===62||p===96||Q(p)?b(p):(A.consume(p),L)}function v(p){return p===47||p===62||q(p)?R(p):j(p)}function F(p){return p===62?(A.consume(p),N):j(p)}function N(p){return p===null||C(p)?w(p):q(p)?(A.consume(p),N):j(p)}function w(p){return p===45&&r===2?(A.consume(p),H):p===60&&r===1?(A.consume(p),V):p===62&&r===4?(A.consume(p),Y):p===63&&r===3?(A.consume(p),B):p===93&&r===5?(A.consume(p),eA):C(p)&&(r===6||r===7)?(A.exit("htmlFlowData"),A.check(_$,tA,_)(p)):p===null||C(p)?(A.exit("htmlFlowData"),_(p)):(A.consume(p),w)}function _(p){return A.check(y$,S,tA)(p)}function S(p){return A.enter("lineEnding"),A.consume(p),A.exit("lineEnding"),D}function D(p){return p===null||C(p)?_(p):(A.enter("htmlFlowData"),w(p))}function H(p){return p===45?(A.consume(p),B):w(p)}function V(p){return p===47?(A.consume(p),o="",rA):w(p)}function rA(p){if(p===62){let aA=o.toLowerCase();return $n.includes(aA)?(A.consume(p),Y):w(p)}return dA(p)&&o.length<8?(A.consume(p),o+=String.fromCharCode(p),rA):w(p)}function eA(p){return p===93?(A.consume(p),B):w(p)}function B(p){return p===62?(A.consume(p),Y):p===45&&r===2?(A.consume(p),B):w(p)}function Y(p){return p===null||C(p)?(A.exit("htmlFlowData"),tA(p)):(A.consume(p),Y)}function tA(p){return A.exit("htmlFlow"),e(p)}}function C$(A,e,j){let t=this;return r;function r(o){return C(o)?(A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),n):j(o)}function n(o){return t.parser.lazy[t.now().line]?j(o):e(o)}}function D$(A,e,j){return t;function t(r){return A.enter("lineEnding"),A.consume(r),A.exit("lineEnding"),A.attempt(zA,e,j)}}var Bn={name:"htmlText",tokenize:O$};function O$(A,e,j){let t=this,r,n,o;return i;function i(B){return A.enter("htmlText"),A.enter("htmlTextData"),A.consume(B),a}function a(B){return B===33?(A.consume(B),s):B===47?(A.consume(B),b):B===63?(A.consume(B),R):dA(B)?(A.consume(B),L):j(B)}function s(B){return B===45?(A.consume(B),l):B===91?(A.consume(B),n=0,d):dA(B)?(A.consume(B),f):j(B)}function l(B){return B===45?(A.consume(B),u):j(B)}function k(B){return B===null?j(B):B===45?(A.consume(B),c):C(B)?(o=k,V(B)):(A.consume(B),k)}function c(B){return B===45?(A.consume(B),u):k(B)}function u(B){return B===62?H(B):B===45?c(B):k(B)}function d(B){let Y="CDATA[";return B===Y.charCodeAt(n++)?(A.consume(B),n===Y.length?E:d):j(B)}function E(B){return B===null?j(B):B===93?(A.consume(B),m):C(B)?(o=E,V(B)):(A.consume(B),E)}function m(B){return B===93?(A.consume(B),$):E(B)}function $(B){return B===62?H(B):B===93?(A.consume(B),$):E(B)}function f(B){return B===null||B===62?H(B):C(B)?(o=f,V(B)):(A.consume(B),f)}function R(B){return B===null?j(B):B===63?(A.consume(B),y):C(B)?(o=R,V(B)):(A.consume(B),R)}function y(B){return B===62?H(B):R(B)}function b(B){return dA(B)?(A.consume(B),G):j(B)}function G(B){return B===45||iA(B)?(A.consume(B),G):O(B)}function O(B){return C(B)?(o=O,V(B)):q(B)?(A.consume(B),O):H(B)}function L(B){return B===45||iA(B)?(A.consume(B),L):B===47||B===62||Q(B)?v(B):j(B)}function v(B){return B===47?(A.consume(B),H):B===58||B===95||dA(B)?(A.consume(B),F):C(B)?(o=v,V(B)):q(B)?(A.consume(B),v):H(B)}function F(B){return B===45||B===46||B===58||B===95||iA(B)?(A.consume(B),F):N(B)}function N(B){return B===61?(A.consume(B),w):C(B)?(o=N,V(B)):q(B)?(A.consume(B),N):v(B)}function w(B){return B===null||B===60||B===61||B===62||B===96?j(B):B===34||B===39?(A.consume(B),r=B,_):C(B)?(o=w,V(B)):q(B)?(A.consume(B),w):(A.consume(B),S)}function _(B){return B===r?(A.consume(B),r=void 0,D):B===null?j(B):C(B)?(o=_,V(B)):(A.consume(B),_)}function S(B){return B===null||B===34||B===39||B===60||B===61||B===96?j(B):B===47||B===62||Q(B)?v(B):(A.consume(B),S)}function D(B){return B===47||B===62||Q(B)?v(B):j(B)}function H(B){return B===62?(A.consume(B),A.exit("htmlTextData"),A.exit("htmlText"),e):j(B)}function V(B){return A.exit("htmlTextData"),A.enter("lineEnding"),A.consume(B),A.exit("lineEnding"),rA}function rA(B){return q(B)?T(A,eA,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):eA(B)}function eA(B){return A.enter("htmlTextData"),o(B)}}var Tj={name:"labelEnd",tokenize:q$,resolveTo:w$,resolveAll:T$},x$={tokenize:N$},v$={tokenize:L$},P$={tokenize:K$};function T$(A){let e=-1;for(;++e<A.length;){let j=A[e][1];(j.type==="labelImage"||j.type==="labelLink"||j.type==="labelEnd")&&(A.splice(e+1,j.type==="labelImage"?4:2),j.type="data",e++)}return A}function w$(A,e){let j=A.length,t=0,r,n,o,i;for(;j--;)if(r=A[j][1],n){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;A[j][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(A[j][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(n=j,r.type!=="labelLink")){t=2;break}}else r.type==="labelEnd"&&(o=j);let a={type:A[n][1].type==="labelLink"?"link":"image",start:Object.assign({},A[n][1].start),end:Object.assign({},A[A.length-1][1].end)},s={type:"label",start:Object.assign({},A[n][1].start),end:Object.assign({},A[o][1].end)},l={type:"labelText",start:Object.assign({},A[n+t+2][1].end),end:Object.assign({},A[o-2][1].start)};return i=[["enter",a,e],["enter",s,e]],i=IA(i,A.slice(n+1,n+t+3)),i=IA(i,[["enter",l,e]]),i=IA(i,Bj(e.parser.constructs.insideSpan.null,A.slice(n+t+4,o-3),e)),i=IA(i,[["exit",l,e],A[o-2],A[o-1],["exit",s,e]]),i=IA(i,A.slice(o+1)),i=IA(i,[["exit",a,e]]),cA(A,n,A.length,i),A}function q$(A,e,j){let t=this,r=t.events.length,n,o;for(;r--;)if((t.events[r][1].type==="labelImage"||t.events[r][1].type==="labelLink")&&!t.events[r][1]._balanced){n=t.events[r][1];break}return i;function i(c){return n?n._inactive?k(c):(o=t.parser.defined.includes(FA(t.sliceSerialize({start:n.end,end:t.now()}))),A.enter("labelEnd"),A.enter("labelMarker"),A.consume(c),A.exit("labelMarker"),A.exit("labelEnd"),a):j(c)}function a(c){return c===40?A.attempt(x$,l,o?l:k)(c):c===91?A.attempt(v$,l,o?s:k)(c):o?l(c):k(c)}function s(c){return A.attempt(P$,l,k)(c)}function l(c){return e(c)}function k(c){return n._balanced=!0,j(c)}}function N$(A,e,j){return t;function t(k){return A.enter("resource"),A.enter("resourceMarker"),A.consume(k),A.exit("resourceMarker"),r}function r(k){return Q(k)?Pj(A,n)(k):n(k)}function n(k){return k===41?l(k):Ar(A,o,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(k)}function o(k){return Q(k)?Pj(A,a)(k):l(k)}function i(k){return j(k)}function a(k){return k===34||k===39||k===40?er(A,s,j,"resourceTitle","resourceTitleMarker","resourceTitleString")(k):l(k)}function s(k){return Q(k)?Pj(A,l)(k):l(k)}function l(k){return k===41?(A.enter("resourceMarker"),A.consume(k),A.exit("resourceMarker"),A.exit("resource"),e):j(k)}}function L$(A,e,j){let t=this;return r;function r(i){return jr.call(t,A,n,o,"reference","referenceMarker","referenceString")(i)}function n(i){return t.parser.defined.includes(FA(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?e(i):j(i)}function o(i){return j(i)}}function K$(A,e,j){return t;function t(n){return A.enter("reference"),A.enter("referenceMarker"),A.consume(n),A.exit("referenceMarker"),r}function r(n){return n===93?(A.enter("referenceMarker"),A.consume(n),A.exit("referenceMarker"),A.exit("reference"),e):j(n)}}var pn={name:"labelStartImage",tokenize:J$,resolveAll:Tj.resolveAll};function J$(A,e,j){let t=this;return r;function r(i){return A.enter("labelImage"),A.enter("labelImageMarker"),A.consume(i),A.exit("labelImageMarker"),n}function n(i){return i===91?(A.enter("labelMarker"),A.consume(i),A.exit("labelMarker"),A.exit("labelImage"),o):j(i)}function o(i){return i===94&&"_hiddenFootnoteSupport"in t.parser.constructs?j(i):e(i)}}var mn={name:"labelStartLink",tokenize:H$,resolveAll:Tj.resolveAll};function H$(A,e,j){let t=this;return r;function r(o){return A.enter("labelLink"),A.enter("labelMarker"),A.consume(o),A.exit("labelMarker"),A.exit("labelLink"),n}function n(o){return o===94&&"_hiddenFootnoteSupport"in t.parser.constructs?j(o):e(o)}}var Xe={name:"lineEnding",tokenize:Q$};function Q$(A,e){return j;function j(t){return A.enter("lineEnding"),A.consume(t),A.exit("lineEnding"),T(A,e,"linePrefix")}}var wj={name:"thematicBreak",tokenize:U$};function U$(A,e,j){let t=0,r;return n;function n(s){return A.enter("thematicBreak"),o(s)}function o(s){return r=s,i(s)}function i(s){return s===r?(A.enter("thematicBreakSequence"),a(s)):t>=3&&(s===null||C(s))?(A.exit("thematicBreak"),e(s)):j(s)}function a(s){return s===r?(A.consume(s),t++,a):(A.exit("thematicBreakSequence"),q(s)?T(A,i,"whitespace")(s):i(s))}}var RA={name:"list",tokenize:z$,continuation:{tokenize:W$},exit:Z$},V$={tokenize:AE,partial:!0},X$={tokenize:Y$,partial:!0};function z$(A,e,j){let t=this,r=t.events[t.events.length-1],n=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return i;function i(u){let d=t.containerState.type||(u===42||u===43||u===45?"listUnordered":"listOrdered");if(d==="listUnordered"?!t.containerState.marker||u===t.containerState.marker:He(u)){if(t.containerState.type||(t.containerState.type=d,A.enter(d,{_container:!0})),d==="listUnordered")return A.enter("listItemPrefix"),u===42||u===45?A.check(wj,j,s)(u):s(u);if(!t.interrupt||u===49)return A.enter("listItemPrefix"),A.enter("listItemValue"),a(u)}return j(u)}function a(u){return He(u)&&++o<10?(A.consume(u),a):(!t.interrupt||o<2)&&(t.containerState.marker?u===t.containerState.marker:u===41||u===46)?(A.exit("listItemValue"),s(u)):j(u)}function s(u){return A.enter("listItemMarker"),A.consume(u),A.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||u,A.check(zA,t.interrupt?j:l,A.attempt(V$,c,k))}function l(u){return t.containerState.initialBlankLine=!0,n++,c(u)}function k(u){return q(u)?(A.enter("listItemPrefixWhitespace"),A.consume(u),A.exit("listItemPrefixWhitespace"),c):j(u)}function c(u){return t.containerState.size=n+t.sliceSerialize(A.exit("listItemPrefix"),!0).length,e(u)}}function W$(A,e,j){let t=this;return t.containerState._closeFlow=void 0,A.check(zA,r,n);function r(i){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,T(A,e,"listItemIndent",t.containerState.size+1)(i)}function n(i){return t.containerState.furtherBlankLines||!q(i)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,o(i)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,A.attempt(X$,e,o)(i))}function o(i){return t.containerState._closeFlow=!0,t.interrupt=void 0,T(A,A.attempt(RA,e,j),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}function Y$(A,e,j){let t=this;return T(A,r,"listItemIndent",t.containerState.size+1);function r(n){let o=t.events[t.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===t.containerState.size?e(n):j(n)}}function Z$(A){A.exit(this.containerState.type)}function AE(A,e,j){let t=this;return T(A,r,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(n){let o=t.events[t.events.length-1];return!q(n)&&o&&o[1].type==="listItemPrefixWhitespace"?e(n):j(n)}}var tr={name:"setextUnderline",tokenize:eE,resolveTo:jE};function jE(A,e){let j=A.length,t,r,n;for(;j--;)if(A[j][0]==="enter"){if(A[j][1].type==="content"){t=j;break}A[j][1].type==="paragraph"&&(r=j)}else A[j][1].type==="content"&&A.splice(j,1),!n&&A[j][1].type==="definition"&&(n=j);let o={type:"setextHeading",start:Object.assign({},A[r][1].start),end:Object.assign({},A[A.length-1][1].end)};return A[r][1].type="setextHeadingText",n?(A.splice(r,0,["enter",o,e]),A.splice(n+1,0,["exit",A[t][1],e]),A[t][1].end=Object.assign({},A[n][1].end)):A[t][1]=o,A.push(["exit",o,e]),A}function eE(A,e,j){let t=this,r;return n;function n(s){let l=t.events.length,k;for(;l--;)if(t.events[l][1].type!=="lineEnding"&&t.events[l][1].type!=="linePrefix"&&t.events[l][1].type!=="content"){k=t.events[l][1].type==="paragraph";break}return!t.parser.lazy[t.now().line]&&(t.interrupt||k)?(A.enter("setextHeadingLine"),r=s,o(s)):j(s)}function o(s){return A.enter("setextHeadingLineSequence"),i(s)}function i(s){return s===r?(A.consume(s),i):(A.exit("setextHeadingLineSequence"),q(s)?T(A,a,"lineSuffix")(s):a(s))}function a(s){return s===null||C(s)?(A.exit("setextHeadingLine"),e(s)):j(s)}}var tE={tokenize:lE,partial:!0};function fn(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:iE,continuation:{tokenize:aE},exit:sE}},text:{91:{name:"gfmFootnoteCall",tokenize:oE},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:rE,resolveTo:nE}}}}function rE(A,e,j){let t=this,r=t.events.length,n=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),o;for(;r--;){let a=t.events[r][1];if(a.type==="labelImage"){o=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return i;function i(a){if(!o||!o._balanced)return j(a);let s=FA(t.sliceSerialize({start:o.end,end:t.now()}));return s.codePointAt(0)!==94||!n.includes(s.slice(1))?j(a):(A.enter("gfmFootnoteCallLabelMarker"),A.consume(a),A.exit("gfmFootnoteCallLabelMarker"),e(a))}}function nE(A,e){let j=A.length,t;for(;j--;)if(A[j][1].type==="labelImage"&&A[j][0]==="enter"){t=A[j][1];break}A[j+1][1].type="data",A[j+3][1].type="gfmFootnoteCallLabelMarker";let r={type:"gfmFootnoteCall",start:Object.assign({},A[j+3][1].start),end:Object.assign({},A[A.length-1][1].end)},n={type:"gfmFootnoteCallMarker",start:Object.assign({},A[j+3][1].end),end:Object.assign({},A[j+3][1].end)};n.end.column++,n.end.offset++,n.end._bufferIndex++;let o={type:"gfmFootnoteCallString",start:Object.assign({},n.end),end:Object.assign({},A[A.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},a=[A[j+1],A[j+2],["enter",r,e],A[j+3],A[j+4],["enter",n,e],["exit",n,e],["enter",o,e],["enter",i,e],["exit",i,e],["exit",o,e],A[A.length-2],A[A.length-1],["exit",r,e]];return A.splice(j,A.length-j+1,...a),A}function oE(A,e,j){let t=this,r=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),n=0,o;return i;function i(k){return A.enter("gfmFootnoteCall"),A.enter("gfmFootnoteCallLabelMarker"),A.consume(k),A.exit("gfmFootnoteCallLabelMarker"),a}function a(k){return k!==94?j(k):(A.enter("gfmFootnoteCallMarker"),A.consume(k),A.exit("gfmFootnoteCallMarker"),A.enter("gfmFootnoteCallString"),A.enter("chunkString").contentType="string",s)}function s(k){if(n>999||k===93&&!o||k===null||k===91||Q(k))return j(k);if(k===93){A.exit("chunkString");let c=A.exit("gfmFootnoteCallString");return r.includes(FA(t.sliceSerialize(c)))?(A.enter("gfmFootnoteCallLabelMarker"),A.consume(k),A.exit("gfmFootnoteCallLabelMarker"),A.exit("gfmFootnoteCall"),e):j(k)}return Q(k)||(o=!0),n++,A.consume(k),k===92?l:s}function l(k){return k===91||k===92||k===93?(A.consume(k),n++,s):s(k)}}function iE(A,e,j){let t=this,r=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),n,o=0,i;return a;function a(d){return A.enter("gfmFootnoteDefinition")._container=!0,A.enter("gfmFootnoteDefinitionLabel"),A.enter("gfmFootnoteDefinitionLabelMarker"),A.consume(d),A.exit("gfmFootnoteDefinitionLabelMarker"),s}function s(d){return d===94?(A.enter("gfmFootnoteDefinitionMarker"),A.consume(d),A.exit("gfmFootnoteDefinitionMarker"),A.enter("gfmFootnoteDefinitionLabelString"),A.enter("chunkString").contentType="string",l):j(d)}function l(d){if(o>999||d===93&&!i||d===null||d===91||Q(d))return j(d);if(d===93){A.exit("chunkString");let E=A.exit("gfmFootnoteDefinitionLabelString");return n=FA(t.sliceSerialize(E)),A.enter("gfmFootnoteDefinitionLabelMarker"),A.consume(d),A.exit("gfmFootnoteDefinitionLabelMarker"),A.exit("gfmFootnoteDefinitionLabel"),c}return Q(d)||(i=!0),o++,A.consume(d),d===92?k:l}function k(d){return d===91||d===92||d===93?(A.consume(d),o++,l):l(d)}function c(d){return d===58?(A.enter("definitionMarker"),A.consume(d),A.exit("definitionMarker"),r.includes(n)||r.push(n),T(A,u,"gfmFootnoteDefinitionWhitespace")):j(d)}function u(d){return e(d)}}function aE(A,e,j){return A.check(zA,e,A.attempt(tE,e,j))}function sE(A){A.exit("gfmFootnoteDefinition")}function lE(A,e,j){let t=this;return T(A,r,"gfmFootnoteDefinitionIndent",5);function r(n){let o=t.events[t.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(n):j(n)}}function Gn(A){let j=(A||{}).singleTilde,t={name:"strikethrough",tokenize:n,resolveAll:r};return j==null&&(j=!0),{text:{126:t},insideSpan:{null:[t]},attentionMarkers:{null:[126]}};function r(o,i){let a=-1;for(;++a<o.length;)if(o[a][0]==="enter"&&o[a][1].type==="strikethroughSequenceTemporary"&&o[a][1]._close){let s=a;for(;s--;)if(o[s][0]==="exit"&&o[s][1].type==="strikethroughSequenceTemporary"&&o[s][1]._open&&o[a][1].end.offset-o[a][1].start.offset===o[s][1].end.offset-o[s][1].start.offset){o[a][1].type="strikethroughSequence",o[s][1].type="strikethroughSequence";let l={type:"strikethrough",start:Object.assign({},o[s][1].start),end:Object.assign({},o[a][1].end)},k={type:"strikethroughText",start:Object.assign({},o[s][1].end),end:Object.assign({},o[a][1].start)},c=[["enter",l,i],["enter",o[s][1],i],["exit",o[s][1],i],["enter",k,i]],u=i.parser.constructs.insideSpan.null;u&&cA(c,c.length,0,Bj(u,o.slice(s+1,a),i)),cA(c,c.length,0,[["exit",k,i],["enter",o[a][1],i],["exit",o[a][1],i],["exit",l,i]]),cA(o,s-1,a-s+3,c),a=s+c.length-2;break}}for(a=-1;++a<o.length;)o[a][1].type==="strikethroughSequenceTemporary"&&(o[a][1].type="data");return o}function n(o,i,a){let s=this.previous,l=this.events,k=0;return c;function c(d){return s===126&&l[l.length-1][1].type!=="characterEscape"?a(d):(o.enter("strikethroughSequenceTemporary"),u(d))}function u(d){let E=oe(s);if(d===126)return k>1?a(d):(o.consume(d),k++,u);if(k<2&&!j)return a(d);let m=o.exit("strikethroughSequenceTemporary"),$=oe(d);return m._open=!$||$===2&&!!E,m._close=!E||E===2&&!!$,i(d)}}}var rr=class{constructor(){this.map=[]}add(e,j,t){kE(this,e,j,t)}consume(e){if(this.map.sort(function(n,o){return n[0]-o[0]}),this.map.length===0)return;let j=this.map.length,t=[];for(;j>0;)j-=1,t.push(e.slice(this.map[j][0]+this.map[j][1]),this.map[j][2]),e.length=this.map[j][0];t.push(e.slice()),e.length=0;let r=t.pop();for(;r;){for(let n of r)e.push(n);r=t.pop()}this.map.length=0}};function kE(A,e,j,t){let r=0;if(!(j===0&&t.length===0)){for(;r<A.map.length;){if(A.map[r][0]===e){A.map[r][1]+=j,A.map[r][2].push(...t);return}r+=1}A.map.push([e,j,t])}}function tl(A,e){let j=!1,t=[];for(;e<A.length;){let r=A[e];if(j){if(r[0]==="enter")r[1].type==="tableContent"&&t.push(A[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(A[e-1][1].type==="tableDelimiterMarker"){let n=t.length-1;t[n]=t[n]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(j=!0);e+=1}return t}function Fn(){return{flow:{null:{name:"table",tokenize:cE,resolveAll:uE}}}}function cE(A,e,j){let t=this,r=0,n=0,o;return i;function i(F){let N=t.events.length-1;for(;N>-1;){let S=t.events[N][1].type;if(S==="lineEnding"||S==="linePrefix")N--;else break}let w=N>-1?t.events[N][1].type:null,_=w==="tableHead"||w==="tableRow"?G:a;return _===G&&t.parser.lazy[t.now().line]?j(F):_(F)}function a(F){return A.enter("tableHead"),A.enter("tableRow"),s(F)}function s(F){return F===124||(o=!0,n+=1),l(F)}function l(F){return F===null?j(F):C(F)?n>1?(n=0,t.interrupt=!0,A.exit("tableRow"),A.enter("lineEnding"),A.consume(F),A.exit("lineEnding"),u):j(F):q(F)?T(A,l,"whitespace")(F):(n+=1,o&&(o=!1,r+=1),F===124?(A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),o=!0,l):(A.enter("data"),k(F)))}function k(F){return F===null||F===124||Q(F)?(A.exit("data"),l(F)):(A.consume(F),F===92?c:k)}function c(F){return F===92||F===124?(A.consume(F),k):k(F)}function u(F){return t.interrupt=!1,t.parser.lazy[t.now().line]?j(F):(A.enter("tableDelimiterRow"),o=!1,q(F)?T(A,d,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):d(F))}function d(F){return F===45||F===58?m(F):F===124?(o=!0,A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),E):b(F)}function E(F){return q(F)?T(A,m,"whitespace")(F):m(F)}function m(F){return F===58?(n+=1,o=!0,A.enter("tableDelimiterMarker"),A.consume(F),A.exit("tableDelimiterMarker"),$):F===45?(n+=1,$(F)):F===null||C(F)?y(F):b(F)}function $(F){return F===45?(A.enter("tableDelimiterFiller"),f(F)):b(F)}function f(F){return F===45?(A.consume(F),f):F===58?(o=!0,A.exit("tableDelimiterFiller"),A.enter("tableDelimiterMarker"),A.consume(F),A.exit("tableDelimiterMarker"),R):(A.exit("tableDelimiterFiller"),R(F))}function R(F){return q(F)?T(A,y,"whitespace")(F):y(F)}function y(F){return F===124?d(F):F===null||C(F)?!o||r!==n?b(F):(A.exit("tableDelimiterRow"),A.exit("tableHead"),e(F)):b(F)}function b(F){return j(F)}function G(F){return A.enter("tableRow"),O(F)}function O(F){return F===124?(A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),O):F===null||C(F)?(A.exit("tableRow"),e(F)):q(F)?T(A,O,"whitespace")(F):(A.enter("data"),L(F))}function L(F){return F===null||F===124||Q(F)?(A.exit("data"),O(F)):(A.consume(F),F===92?v:L)}function v(F){return F===92||F===124?(A.consume(F),L):L(F)}}function uE(A,e){let j=-1,t=!0,r=0,n=[0,0,0,0],o=[0,0,0,0],i=!1,a=0,s,l,k,c=new rr;for(;++j<A.length;){let u=A[j],d=u[1];u[0]==="enter"?d.type==="tableHead"?(i=!1,a!==0&&(rl(c,e,a,s,l),l=void 0,a=0),s={type:"table",start:Object.assign({},d.start),end:Object.assign({},d.end)},c.add(j,0,[["enter",s,e]])):d.type==="tableRow"||d.type==="tableDelimiterRow"?(t=!0,k=void 0,n=[0,0,0,0],o=[0,j+1,0,0],i&&(i=!1,l={type:"tableBody",start:Object.assign({},d.start),end:Object.assign({},d.end)},c.add(j,0,[["enter",l,e]])),r=d.type==="tableDelimiterRow"?2:l?3:1):r&&(d.type==="data"||d.type==="tableDelimiterMarker"||d.type==="tableDelimiterFiller")?(t=!1,o[2]===0&&(n[1]!==0&&(o[0]=o[1],k=nr(c,e,n,r,void 0,k),n=[0,0,0,0]),o[2]=j)):d.type==="tableCellDivider"&&(t?t=!1:(n[1]!==0&&(o[0]=o[1],k=nr(c,e,n,r,void 0,k)),n=o,o=[n[1],j,0,0])):d.type==="tableHead"?(i=!0,a=j):d.type==="tableRow"||d.type==="tableDelimiterRow"?(a=j,n[1]!==0?(o[0]=o[1],k=nr(c,e,n,r,j,k)):o[1]!==0&&(k=nr(c,e,o,r,j,k)),r=0):r&&(d.type==="data"||d.type==="tableDelimiterMarker"||d.type==="tableDelimiterFiller")&&(o[3]=j)}for(a!==0&&rl(c,e,a,s,l),c.consume(e.events),j=-1;++j<e.events.length;){let u=e.events[j];u[0]==="enter"&&u[1].type==="table"&&(u[1]._align=tl(e.events,j))}return A}function nr(A,e,j,t,r,n){let o=t===1?"tableHeader":t===2?"tableDelimiter":"tableData",i="tableContent";j[0]!==0&&(n.end=Object.assign({},ie(e.events,j[0])),A.add(j[0],0,[["exit",n,e]]));let a=ie(e.events,j[1]);if(n={type:o,start:Object.assign({},a),end:Object.assign({},a)},A.add(j[1],0,[["enter",n,e]]),j[2]!==0){let s=ie(e.events,j[2]),l=ie(e.events,j[3]),k={type:i,start:Object.assign({},s),end:Object.assign({},l)};if(A.add(j[2],0,[["enter",k,e]]),t!==2){let c=e.events[j[2]],u=e.events[j[3]];if(c[1].end=Object.assign({},u[1].end),c[1].type="chunkText",c[1].contentType="text",j[3]>j[2]+1){let d=j[2]+1,E=j[3]-j[2]-1;A.add(d,E,[])}}A.add(j[3]+1,0,[["exit",k,e]])}return r!==void 0&&(n.end=Object.assign({},ie(e.events,r)),A.add(r,0,[["exit",n,e]]),n=void 0),n}function rl(A,e,j,t,r){let n=[],o=ie(e.events,j);r&&(r.end=Object.assign({},o),n.push(["exit",r,e])),t.end=Object.assign({},o),n.push(["exit",t,e]),A.add(j+1,0,n)}function ie(A,e){let j=A[e],t=j[0]==="enter"?"start":"end";return j[1][t]}var dE={name:"tasklistCheck",tokenize:$E};function Rn(){return{text:{91:dE}}}function $E(A,e,j){let t=this;return r;function r(a){return t.previous!==null||!t._gfmTasklistFirstContentOfListItem?j(a):(A.enter("taskListCheck"),A.enter("taskListCheckMarker"),A.consume(a),A.exit("taskListCheckMarker"),n)}function n(a){return Q(a)?(A.enter("taskListCheckValueUnchecked"),A.consume(a),A.exit("taskListCheckValueUnchecked"),o):a===88||a===120?(A.enter("taskListCheckValueChecked"),A.consume(a),A.exit("taskListCheckValueChecked"),o):j(a)}function o(a){return a===93?(A.enter("taskListCheckMarker"),A.consume(a),A.exit("taskListCheckMarker"),A.exit("taskListCheck"),i):j(a)}function i(a){return C(a)?e(a):q(a)?A.check({tokenize:EE},e,j)(a):j(a)}}function EE(A,e,j){return T(A,t,"whitespace");function t(r){return r===null?j(r):e(r)}}function nl(A){return Ut([on(),fn(),Gn(A),Fn(),Rn()])}var BE={};function ze(A){let e=this,j=A||BE,t=e.data(),r=t.micromarkExtensions||(t.micromarkExtensions=[]),n=t.fromMarkdownExtensions||(t.fromMarkdownExtensions=[]),o=t.toMarkdownExtensions||(t.toMarkdownExtensions=[]);r.push(nl(j)),n.push(tn()),o.push(rn(j))}var ol={tokenize:pE};function pE(A){let e=A.attempt(this.parser.constructs.contentInitial,t,r),j;return e;function t(i){if(i===null){A.consume(i);return}return A.enter("lineEnding"),A.consume(i),A.exit("lineEnding"),T(A,e,"linePrefix")}function r(i){return A.enter("paragraph"),n(i)}function n(i){let a=A.enter("chunkText",{contentType:"text",previous:j});return j&&(j.next=a),j=a,o(i)}function o(i){if(i===null){A.exit("chunkText"),A.exit("paragraph"),A.consume(i);return}return C(i)?(A.consume(i),A.exit("chunkText"),n):(A.consume(i),o)}}var al={tokenize:mE},il={tokenize:fE};function mE(A){let e=this,j=[],t=0,r,n,o;return i;function i(R){if(t<j.length){let y=j[t];return e.containerState=y[1],A.attempt(y[0].continuation,a,s)(R)}return s(R)}function a(R){if(t++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&f();let y=e.events.length,b=y,G;for(;b--;)if(e.events[b][0]==="exit"&&e.events[b][1].type==="chunkFlow"){G=e.events[b][1].end;break}$(t);let O=y;for(;O<e.events.length;)e.events[O][1].end=Object.assign({},G),O++;return cA(e.events,b+1,0,e.events.slice(y)),e.events.length=O,s(R)}return i(R)}function s(R){if(t===j.length){if(!r)return c(R);if(r.currentConstruct&&r.currentConstruct.concrete)return d(R);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},A.check(il,l,k)(R)}function l(R){return r&&f(),$(t),c(R)}function k(R){return e.parser.lazy[e.now().line]=t!==j.length,o=e.now().offset,d(R)}function c(R){return e.containerState={},A.attempt(il,u,d)(R)}function u(R){return t++,j.push([e.currentConstruct,e.containerState]),c(R)}function d(R){if(R===null){r&&f(),$(0),A.consume(R);return}return r=r||e.parser.flow(e.now()),A.enter("chunkFlow",{contentType:"flow",previous:n,_tokenizer:r}),E(R)}function E(R){if(R===null){m(A.exit("chunkFlow"),!0),$(0),A.consume(R);return}return C(R)?(A.consume(R),m(A.exit("chunkFlow")),t=0,e.interrupt=void 0,i):(A.consume(R),E)}function m(R,y){let b=e.sliceStream(R);if(y&&b.push(null),R.previous=n,n&&(n.next=R),n=R,r.defineSkip(R.start),r.write(b),e.parser.lazy[R.start.line]){let G=r.events.length;for(;G--;)if(r.events[G][1].start.offset<o&&(!r.events[G][1].end||r.events[G][1].end.offset>o))return;let O=e.events.length,L=O,v,F;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){if(v){F=e.events[L][1].end;break}v=!0}for($(t),G=O;G<e.events.length;)e.events[G][1].end=Object.assign({},F),G++;cA(e.events,L+1,0,e.events.slice(O)),e.events.length=G}}function $(R){let y=j.length;for(;y-- >R;){let b=j[y];e.containerState=b[1],b[0].exit.call(e,A)}j.length=R}function f(){r.write([null]),n=void 0,r=void 0,e.containerState._closeFlow=void 0}}function fE(A,e,j){return T(A,A.attempt(this.parser.constructs.document,e,j),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}var sl={tokenize:GE};function GE(A){let e=this,j=A.attempt(zA,t,A.attempt(this.parser.constructs.flowInitial,r,T(A,A.attempt(this.parser.constructs.flow,r,A.attempt(kn,r)),"linePrefix")));return j;function t(n){if(n===null){A.consume(n);return}return A.enter("lineEndingBlank"),A.consume(n),A.exit("lineEndingBlank"),e.currentConstruct=void 0,j}function r(n){if(n===null){A.consume(n);return}return A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),e.currentConstruct=void 0,j}}var ll={resolveAll:dl()},kl=ul("string"),cl=ul("text");function ul(A){return{tokenize:e,resolveAll:dl(A==="text"?FE:void 0)};function e(j){let t=this,r=this.parser.constructs[A],n=j.attempt(r,o,i);return o;function o(l){return s(l)?n(l):i(l)}function i(l){if(l===null){j.consume(l);return}return j.enter("data"),j.consume(l),a}function a(l){return s(l)?(j.exit("data"),n(l)):(j.consume(l),a)}function s(l){if(l===null)return!0;let k=r[l],c=-1;if(k)for(;++c<k.length;){let u=k[c];if(!u.previous||u.previous.call(t,t.previous))return!0}return!1}}}function dl(A){return e;function e(j,t){let r=-1,n;for(;++r<=j.length;)n===void 0?j[r]&&j[r][1].type==="data"&&(n=r,r++):(!j[r]||j[r][1].type!=="data")&&(r!==n+2&&(j[n][1].end=j[r-1][1].end,j.splice(n+2,r-n-2),r=n+2),n=void 0);return A?A(j,t):j}}function FE(A,e){let j=0;for(;++j<=A.length;)if((j===A.length||A[j][1].type==="lineEnding")&&A[j-1][1].type==="data"){let t=A[j-1][1],r=e.sliceStream(t),n=r.length,o=-1,i=0,a;for(;n--;){let s=r[n];if(typeof s=="string"){for(o=s.length;s.charCodeAt(o-1)===32;)i++,o--;if(o)break;o=-1}else if(s===-2)a=!0,i++;else if(s!==-1){n++;break}}if(i){let s={type:j===A.length||a||i<2?"lineSuffix":"hardBreakTrailing",start:{line:t.end.line,column:t.end.column-i,offset:t.end.offset-i,_index:t.start._index+n,_bufferIndex:n?o:t.start._bufferIndex+o},end:Object.assign({},t.end)};t.end=Object.assign({},s.start),t.start.offset===t.end.offset?Object.assign(t,s):(A.splice(j,0,["enter",s,e],["exit",s,e]),j+=2)}j++}return A}function $l(A,e,j){let t=Object.assign(j?Object.assign({},j):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),r={},n=[],o=[],i=[],a=!0,s={consume:y,enter:b,exit:G,attempt:v(O),check:v(L),interrupt:v(L,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:A,sliceStream:E,sliceSerialize:d,now:m,defineSkip:$,write:u},k=e.tokenize.call(l,s),c;return e.resolveAll&&n.push(e),l;function u(_){return o=IA(o,_),f(),o[o.length-1]!==null?[]:(F(e,0),l.events=Bj(n,l.events,l),l.events)}function d(_,S){return IE(E(_),S)}function E(_){return RE(o,_)}function m(){let{line:_,column:S,offset:D,_index:H,_bufferIndex:V}=t;return{line:_,column:S,offset:D,_index:H,_bufferIndex:V}}function $(_){r[_.line]=_.column,w()}function f(){let _;for(;t._index<o.length;){let S=o[t._index];if(typeof S=="string")for(_=t._index,t._bufferIndex<0&&(t._bufferIndex=0);t._index===_&&t._bufferIndex<S.length;)R(S.charCodeAt(t._bufferIndex));else R(S)}}function R(_){a=void 0,c=_,k=k(_)}function y(_){C(_)?(t.line++,t.column=1,t.offset+=_===-3?2:1,w()):_!==-1&&(t.column++,t.offset++),t._bufferIndex<0?t._index++:(t._bufferIndex++,t._bufferIndex===o[t._index].length&&(t._bufferIndex=-1,t._index++)),l.previous=_,a=!0}function b(_,S){let D=S||{};return D.type=_,D.start=m(),l.events.push(["enter",D,l]),i.push(D),D}function G(_){let S=i.pop();return S.end=m(),l.events.push(["exit",S,l]),S}function O(_,S){F(_,S.from)}function L(_,S){S.restore()}function v(_,S){return D;function D(H,V,rA){let eA,B,Y,tA;return Array.isArray(H)?aA(H):"tokenize"in H?aA([H]):p(H);function p(uA){return mj;function mj(MA){let PA=MA!==null&&uA[MA],WA=MA!==null&&uA.null,qj=[...Array.isArray(PA)?PA:PA?[PA]:[],...Array.isArray(WA)?WA:WA?[WA]:[]];return aA(qj)(MA)}}function aA(uA){return eA=uA,B=0,uA.length===0?rA:gA(uA[B])}function gA(uA){return mj;function mj(MA){return tA=N(),Y=uA,uA.partial||(l.currentConstruct=uA),uA.name&&l.parser.constructs.disable.null.includes(uA.name)?NA(MA):uA.tokenize.call(S?Object.assign(Object.create(l),S):l,s,vA,NA)(MA)}}function vA(uA){return a=!0,_(Y,tA),V}function NA(uA){return a=!0,tA.restore(),++B<eA.length?gA(eA[B]):rA}}}function F(_,S){_.resolveAll&&!n.includes(_)&&n.push(_),_.resolve&&cA(l.events,S,l.events.length-S,_.resolve(l.events.slice(S),l)),_.resolveTo&&(l.events=_.resolveTo(l.events,l))}function N(){let _=m(),S=l.previous,D=l.currentConstruct,H=l.events.length,V=Array.from(i);return{restore:rA,from:H};function rA(){t=_,l.previous=S,l.currentConstruct=D,l.events.length=H,i=V,w()}}function w(){t.line in r&&t.column<2&&(t.column=r[t.line],t.offset+=r[t.line]-1)}}function RE(A,e){let j=e.start._index,t=e.start._bufferIndex,r=e.end._index,n=e.end._bufferIndex,o;if(j===r)o=[A[j].slice(t,n)];else{if(o=A.slice(j,r),t>-1){let i=o[0];typeof i=="string"?o[0]=i.slice(t):o.shift()}n>0&&o.push(A[r].slice(0,n))}return o}function IE(A,e){let j=-1,t=[],r;for(;++j<A.length;){let n=A[j],o;if(typeof n=="string")o=n;else switch(n){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(n)}r=n===-2,t.push(o)}return t.join("")}var In={};Un(In,{attentionMarkers:()=>CE,contentInitial:()=>gE,disable:()=>DE,document:()=>hE,flow:()=>_E,flowInitial:()=>bE,insideSpan:()=>ME,string:()=>yE,text:()=>SE});var hE={42:RA,43:RA,45:RA,48:RA,49:RA,50:RA,51:RA,52:RA,53:RA,54:RA,55:RA,56:RA,57:RA,62:Vt},gE={91:cn},bE={[-2]:Ue,[-1]:Ue,32:Ue},_E={35:dn,42:wj,45:[tr,wj],60:En,61:tr,95:wj,96:Wt,126:Wt},yE={38:zt,92:Xt},SE={[-5]:Xe,[-4]:Xe,[-3]:Xe,33:pn,38:zt,42:Qe,60:[sn,Bn],91:mn,92:[un,Xt],93:Tj,95:Qe,96:ln},ME={null:[Qe,ll]},CE={null:[42,95]},DE={null:[]};function hn(A){let j=Ut([In,...(A||{}).extensions||[]]),t={defined:[],lazy:{},constructs:j,content:r(ol),document:r(al),flow:r(sl),string:r(kl),text:r(cl)};return t;function r(n){return o;function o(i){return $l(t,n,i)}}}function gn(A){for(;!Zt(A););return A}var El=/[\0\t\n\r]/g;function bn(){let A=1,e="",j=!0,t;return r;function r(n,o,i){let a=[],s,l,k,c,u;for(n=e+(typeof n=="string"?n.toString():new TextDecoder(o||void 0).decode(n)),k=0,e="",j&&(n.charCodeAt(0)===65279&&k++,j=void 0);k<n.length;){if(El.lastIndex=k,s=El.exec(n),c=s&&s.index!==void 0?s.index:n.length,u=n.charCodeAt(c),!s){e=n.slice(k);break}if(u===10&&k===c&&t)a.push(-3),t=void 0;else switch(t&&(a.push(-5),t=void 0),k<c&&(a.push(n.slice(k,c)),A+=c-k),u){case 0:{a.push(65533),A++;break}case 9:{for(l=Math.ceil(A/4)*4,a.push(-2);A++<l;)a.push(-1);break}case 10:{a.push(-4),A=1;break}default:t=!0,A=1}k=c+1}return i&&(t&&a.push(-5),e&&a.push(e),a.push(null)),a}}var pl={}.hasOwnProperty;function _n(A,e,j){return typeof e!="string"&&(j=e,e=void 0),OE(j)(gn(hn(j).document().write(bn()(A,e,!0))))}function OE(A){let e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:n(Hn),autolinkProtocol:v,autolinkEmail:v,atxHeading:n(Ln),blockQuote:n(MA),characterEscape:v,characterReference:v,codeFenced:n(PA),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:n(PA,o),codeText:n(WA,o),codeTextData:v,data:v,codeFlowValue:v,definition:n(qj),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:n(le),hardBreakEscape:n(Kn),hardBreakTrailing:n(Kn),htmlFlow:n(Jn,o),htmlFlowData:v,htmlText:n(Jn,o),htmlTextData:v,image:n(lk),label:o,link:n(Hn),listItem:n(kk),listItemValue:c,listOrdered:n(Qn,k),listUnordered:n(Qn),paragraph:n(ck),reference:p,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:n(Ln),strong:n(uk),thematicBreak:n($k)},exit:{atxHeading:a(),atxHeadingSequence:b,autolink:a(),autolinkEmail:mj,autolinkProtocol:uA,blockQuote:a(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:gA,characterReferenceMarkerNumeric:gA,characterReferenceValue:vA,characterReference:NA,codeFenced:a(m),codeFencedFence:E,codeFencedFenceInfo:u,codeFencedFenceMeta:d,codeFlowValue:F,codeIndented:a($),codeText:a(D),codeTextData:F,data:F,definition:a(),definitionDestinationString:y,definitionLabelString:f,definitionTitleString:R,emphasis:a(),hardBreakEscape:a(w),hardBreakTrailing:a(w),htmlFlow:a(_),htmlFlowData:F,htmlText:a(S),htmlTextData:F,image:a(V),label:eA,labelText:rA,lineEnding:N,link:a(H),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:aA,resourceDestinationString:B,resourceTitleString:Y,resource:tA,setextHeading:a(L),setextHeadingLineSequence:O,setextHeadingText:G,strong:a(),thematicBreak:a()}};ml(e,(A||{}).mdastExtensions||[]);let j={};return t;function t(h){let M={type:"root",children:[]},K={stack:[M],tokenStack:[],config:e,enter:i,exit:s,buffer:o,resume:l,data:j},U=[],Z=-1;for(;++Z<h.length;)if(h[Z][1].type==="listOrdered"||h[Z][1].type==="listUnordered")if(h[Z][0]==="enter")U.push(Z);else{let TA=U.pop();Z=r(h,TA,Z)}for(Z=-1;++Z<h.length;){let TA=e[h[Z][0]];pl.call(TA,h[Z][1].type)&&TA[h[Z][1].type].call(Object.assign({sliceSerialize:h[Z][2].sliceSerialize},K),h[Z][1])}if(K.tokenStack.length>0){let TA=K.tokenStack[K.tokenStack.length-1];(TA[1]||Bl).call(K,void 0,TA[0])}for(M.position={start:pj(h.length>0?h[0][1].start:{line:1,column:1,offset:0}),end:pj(h.length>0?h[h.length-2][1].end:{line:1,column:1,offset:0})},Z=-1;++Z<e.transforms.length;)M=e.transforms[Z](M)||M;return M}function r(h,M,K){let U=M-1,Z=-1,TA=!1,fj,YA,ke,ce;for(;++U<=K;){let bA=h[U];switch(bA[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{bA[0]==="enter"?Z++:Z--,ce=void 0;break}case"lineEndingBlank":{bA[0]==="enter"&&(fj&&!ce&&!Z&&!ke&&(ke=U),ce=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ce=void 0}if(!Z&&bA[0]==="enter"&&bA[1].type==="listItemPrefix"||Z===-1&&bA[0]==="exit"&&(bA[1].type==="listUnordered"||bA[1].type==="listOrdered")){if(fj){let Nj=U;for(YA=void 0;Nj--;){let ZA=h[Nj];if(ZA[1].type==="lineEnding"||ZA[1].type==="lineEndingBlank"){if(ZA[0]==="exit")continue;YA&&(h[YA][1].type="lineEndingBlank",TA=!0),ZA[1].type="lineEnding",YA=Nj}else if(!(ZA[1].type==="linePrefix"||ZA[1].type==="blockQuotePrefix"||ZA[1].type==="blockQuotePrefixWhitespace"||ZA[1].type==="blockQuoteMarker"||ZA[1].type==="listItemIndent"))break}ke&&(!YA||ke<YA)&&(fj._spread=!0),fj.end=Object.assign({},YA?h[YA][1].start:bA[1].end),h.splice(YA||U,0,["exit",fj,bA[2]]),U++,K++}if(bA[1].type==="listItemPrefix"){let Nj={type:"listItem",_spread:!1,start:Object.assign({},bA[1].start),end:void 0};fj=Nj,h.splice(U,0,["enter",Nj,bA[2]]),U++,K++,ke=void 0,ce=!0}}}return h[M][1]._spread=TA,K}function n(h,M){return K;function K(U){i.call(this,h(U),U),M&&M.call(this,U)}}function o(){this.stack.push({type:"fragment",children:[]})}function i(h,M,K){this.stack[this.stack.length-1].children.push(h),this.stack.push(h),this.tokenStack.push([M,K]),h.position={start:pj(M.start),end:void 0}}function a(h){return M;function M(K){h&&h.call(this,K),s.call(this,K)}}function s(h,M){let K=this.stack.pop(),U=this.tokenStack.pop();if(U)U[0].type!==h.type&&(M?M.call(this,h,U[0]):(U[1]||Bl).call(this,h,U[0]));else throw new Error("Cannot close `"+h.type+"` ("+cj({start:h.start,end:h.end})+"): it\u2019s not open");K.position.end=pj(h.end)}function l(){return Mj(this.stack.pop())}function k(){this.data.expectingFirstListItemValue=!0}function c(h){if(this.data.expectingFirstListItemValue){let M=this.stack[this.stack.length-2];M.start=Number.parseInt(this.sliceSerialize(h),10),this.data.expectingFirstListItemValue=void 0}}function u(){let h=this.resume(),M=this.stack[this.stack.length-1];M.lang=h}function d(){let h=this.resume(),M=this.stack[this.stack.length-1];M.meta=h}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function $(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h.replace(/(\r?\n|\r)$/g,"")}function f(h){let M=this.resume(),K=this.stack[this.stack.length-1];K.label=M,K.identifier=FA(this.sliceSerialize(h)).toLowerCase()}function R(){let h=this.resume(),M=this.stack[this.stack.length-1];M.title=h}function y(){let h=this.resume(),M=this.stack[this.stack.length-1];M.url=h}function b(h){let M=this.stack[this.stack.length-1];if(!M.depth){let K=this.sliceSerialize(h).length;M.depth=K}}function G(){this.data.setextHeadingSlurpLineEnding=!0}function O(h){let M=this.stack[this.stack.length-1];M.depth=this.sliceSerialize(h).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function v(h){let K=this.stack[this.stack.length-1].children,U=K[K.length-1];(!U||U.type!=="text")&&(U=dk(),U.position={start:pj(h.start),end:void 0},K.push(U)),this.stack.push(U)}function F(h){let M=this.stack.pop();M.value+=this.sliceSerialize(h),M.position.end=pj(h.end)}function N(h){let M=this.stack[this.stack.length-1];if(this.data.atHardBreak){let K=M.children[M.children.length-1];K.position.end=pj(h.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(M.type)&&(v.call(this,h),F.call(this,h))}function w(){this.data.atHardBreak=!0}function _(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h}function S(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h}function D(){let h=this.resume(),M=this.stack[this.stack.length-1];M.value=h}function H(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let M=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=M,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}function V(){let h=this.stack[this.stack.length-1];if(this.data.inReference){let M=this.data.referenceType||"shortcut";h.type+="Reference",h.referenceType=M,delete h.url,delete h.title}else delete h.identifier,delete h.label;this.data.referenceType=void 0}function rA(h){let M=this.sliceSerialize(h),K=this.stack[this.stack.length-2];K.label=wt(M),K.identifier=FA(M).toLowerCase()}function eA(){let h=this.stack[this.stack.length-1],M=this.resume(),K=this.stack[this.stack.length-1];if(this.data.inReference=!0,K.type==="link"){let U=h.children;K.children=U}else K.alt=M}function B(){let h=this.resume(),M=this.stack[this.stack.length-1];M.url=h}function Y(){let h=this.resume(),M=this.stack[this.stack.length-1];M.title=h}function tA(){this.data.inReference=void 0}function p(){this.data.referenceType="collapsed"}function aA(h){let M=this.resume(),K=this.stack[this.stack.length-1];K.label=M,K.identifier=FA(this.sliceSerialize(h)).toLowerCase(),this.data.referenceType="full"}function gA(h){this.data.characterReferenceType=h.type}function vA(h){let M=this.sliceSerialize(h),K=this.data.characterReferenceType,U;K?(U=Tt(M,K==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):U=re(M);let Z=this.stack[this.stack.length-1];Z.value+=U}function NA(h){let M=this.stack.pop();M.position.end=pj(h.end)}function uA(h){F.call(this,h);let M=this.stack[this.stack.length-1];M.url=this.sliceSerialize(h)}function mj(h){F.call(this,h);let M=this.stack[this.stack.length-1];M.url="mailto:"+this.sliceSerialize(h)}function MA(){return{type:"blockquote",children:[]}}function PA(){return{type:"code",lang:null,meta:null,value:""}}function WA(){return{type:"inlineCode",value:""}}function qj(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function le(){return{type:"emphasis",children:[]}}function Ln(){return{type:"heading",depth:0,children:[]}}function Kn(){return{type:"break"}}function Jn(){return{type:"html",value:""}}function lk(){return{type:"image",title:null,url:"",alt:null}}function Hn(){return{type:"link",title:null,url:"",children:[]}}function Qn(h){return{type:"list",ordered:h.type==="listOrdered",start:null,spread:h._spread,children:[]}}function kk(h){return{type:"listItem",spread:h._spread,checked:null,children:[]}}function ck(){return{type:"paragraph",children:[]}}function uk(){return{type:"strong",children:[]}}function dk(){return{type:"text",value:""}}function $k(){return{type:"thematicBreak"}}}function pj(A){return{line:A.line,column:A.column,offset:A.offset}}function ml(A,e){let j=-1;for(;++j<e.length;){let t=e[j];Array.isArray(t)?ml(A,t):xE(A,t)}}function xE(A,e){let j;for(j in e)if(pl.call(e,j))switch(j){case"canContainEols":{let t=e[j];t&&A[j].push(...t);break}case"transforms":{let t=e[j];t&&A[j].push(...t);break}case"enter":case"exit":{let t=e[j];t&&Object.assign(A[j],t);break}}}function Bl(A,e){throw A?new Error("Cannot close `"+A.type+"` ("+cj({start:A.start,end:A.end})+"): a different token (`"+e.type+"`, "+cj({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+cj({start:e.start,end:e.end})+") is still open")}function or(A){let e=this;e.parser=j;function j(t){return _n(t,{...e.data("settings"),...A,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function fl(A,e){let j={type:"element",tagName:"blockquote",properties:{},children:A.wrap(A.all(e),!0)};return A.patch(e,j),A.applyData(e,j)}function Gl(A,e){let j={type:"element",tagName:"br",properties:{},children:[]};return A.patch(e,j),[A.applyData(e,j),{type:"text",value:`
`}]}function Fl(A,e){let j=e.value?e.value+`
`:"",t={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(t.className=["language-"+r[0]]);let n={type:"element",tagName:"code",properties:t,children:[{type:"text",value:j}]};return e.meta&&(n.data={meta:e.meta}),A.patch(e,n),n=A.applyData(e,n),n={type:"element",tagName:"pre",properties:{},children:[n]},A.patch(e,n),n}function Rl(A,e){let j={type:"element",tagName:"del",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function Il(A,e){let j={type:"element",tagName:"em",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function hl(A,e){let j=typeof A.options.clobberPrefix=="string"?A.options.clobberPrefix:"user-content-",t=String(e.identifier).toUpperCase(),r=xA(t.toLowerCase()),n=A.footnoteOrder.indexOf(t),o,i=A.footnoteCounts.get(t);i===void 0?(i=0,A.footnoteOrder.push(t),o=A.footnoteOrder.length):o=n+1,i+=1,A.footnoteCounts.set(t,i);let a={type:"element",tagName:"a",properties:{href:"#"+j+"fn-"+r,id:j+"fnref-"+r+(i>1?"-"+i:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};A.patch(e,a);let s={type:"element",tagName:"sup",properties:{},children:[a]};return A.patch(e,s),A.applyData(e,s)}function gl(A,e){let j={type:"element",tagName:"h"+e.depth,properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function bl(A,e){if(A.options.allowDangerousHtml){let j={type:"raw",value:e.value};return A.patch(e,j),A.applyData(e,j)}}function ir(A,e){let j=e.referenceType,t="]";if(j==="collapsed"?t+="[]":j==="full"&&(t+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+t}];let r=A.all(e),n=r[0];n&&n.type==="text"?n.value="["+n.value:r.unshift({type:"text",value:"["});let o=r[r.length-1];return o&&o.type==="text"?o.value+=t:r.push({type:"text",value:t}),r}function _l(A,e){let j=String(e.identifier).toUpperCase(),t=A.definitionById.get(j);if(!t)return ir(A,e);let r={src:xA(t.url||""),alt:e.alt};t.title!==null&&t.title!==void 0&&(r.title=t.title);let n={type:"element",tagName:"img",properties:r,children:[]};return A.patch(e,n),A.applyData(e,n)}function yl(A,e){let j={src:xA(e.url)};e.alt!==null&&e.alt!==void 0&&(j.alt=e.alt),e.title!==null&&e.title!==void 0&&(j.title=e.title);let t={type:"element",tagName:"img",properties:j,children:[]};return A.patch(e,t),A.applyData(e,t)}function Sl(A,e){let j={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};A.patch(e,j);let t={type:"element",tagName:"code",properties:{},children:[j]};return A.patch(e,t),A.applyData(e,t)}function Ml(A,e){let j=String(e.identifier).toUpperCase(),t=A.definitionById.get(j);if(!t)return ir(A,e);let r={href:xA(t.url||"")};t.title!==null&&t.title!==void 0&&(r.title=t.title);let n={type:"element",tagName:"a",properties:r,children:A.all(e)};return A.patch(e,n),A.applyData(e,n)}function Cl(A,e){let j={href:xA(e.url)};e.title!==null&&e.title!==void 0&&(j.title=e.title);let t={type:"element",tagName:"a",properties:j,children:A.all(e)};return A.patch(e,t),A.applyData(e,t)}function Dl(A,e,j){let t=A.all(e),r=j?vE(j):Ol(e),n={},o=[];if(typeof e.checked=="boolean"){let l=t[0],k;l&&l.type==="element"&&l.tagName==="p"?k=l:(k={type:"element",tagName:"p",properties:{},children:[]},t.unshift(k)),k.children.length>0&&k.children.unshift({type:"text",value:" "}),k.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),n.className=["task-list-item"]}let i=-1;for(;++i<t.length;){let l=t[i];(r||i!==0||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`}),l.type==="element"&&l.tagName==="p"&&!r?o.push(...l.children):o.push(l)}let a=t[t.length-1];a&&(r||a.type!=="element"||a.tagName!=="p")&&o.push({type:"text",value:`
`});let s={type:"element",tagName:"li",properties:n,children:o};return A.patch(e,s),A.applyData(e,s)}function vE(A){let e=!1;if(A.type==="list"){e=A.spread||!1;let j=A.children,t=-1;for(;!e&&++t<j.length;)e=Ol(j[t])}return e}function Ol(A){let e=A.spread;return e??A.children.length>1}function xl(A,e){let j={},t=A.all(e),r=-1;for(typeof e.start=="number"&&e.start!==1&&(j.start=e.start);++r<t.length;){let o=t[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){j.className=["contains-task-list"];break}}let n={type:"element",tagName:e.ordered?"ol":"ul",properties:j,children:A.wrap(t,!0)};return A.patch(e,n),A.applyData(e,n)}function vl(A,e){let j={type:"element",tagName:"p",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function Pl(A,e){let j={type:"root",children:A.wrap(A.all(e))};return A.patch(e,j),A.applyData(e,j)}function Tl(A,e){let j={type:"element",tagName:"strong",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}var ar=wl("end"),sr=wl("start");function wl(A){return e;function e(j){let t=j&&j.position&&j.position[A]||{};if(typeof t.line=="number"&&t.line>0&&typeof t.column=="number"&&t.column>0)return{line:t.line,column:t.column,offset:typeof t.offset=="number"&&t.offset>-1?t.offset:void 0}}}function yn(A){let e=sr(A),j=ar(A);if(e&&j)return{start:e,end:j}}function ql(A,e){let j=A.all(e),t=j.shift(),r=[];if(t){let o={type:"element",tagName:"thead",properties:{},children:A.wrap([t],!0)};A.patch(e.children[0],o),r.push(o)}if(j.length>0){let o={type:"element",tagName:"tbody",properties:{},children:A.wrap(j,!0)},i=sr(e.children[1]),a=ar(e.children[e.children.length-1]);i&&a&&(o.position={start:i,end:a}),r.push(o)}let n={type:"element",tagName:"table",properties:{},children:A.wrap(r,!0)};return A.patch(e,n),A.applyData(e,n)}function Nl(A,e,j){let t=j?j.children:void 0,n=(t?t.indexOf(e):1)===0?"th":"td",o=j&&j.type==="table"?j.align:void 0,i=o?o.length:e.children.length,a=-1,s=[];for(;++a<i;){let k=e.children[a],c={},u=o?o[a]:void 0;u&&(c.align=u);let d={type:"element",tagName:n,properties:c,children:[]};k&&(d.children=A.all(k),A.patch(k,d),d=A.applyData(k,d)),s.push(d)}let l={type:"element",tagName:"tr",properties:{},children:A.wrap(s,!0)};return A.patch(e,l),A.applyData(e,l)}function Ll(A,e){let j={type:"element",tagName:"td",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function Kl(A,e){let j={type:"text",value:Mo(String(e.value))};return A.patch(e,j),A.applyData(e,j)}function Jl(A,e){let j={type:"element",tagName:"hr",properties:{},children:[]};return A.patch(e,j),A.applyData(e,j)}var Hl={blockquote:fl,break:Gl,code:Fl,delete:Rl,emphasis:Il,footnoteReference:hl,heading:gl,html:bl,imageReference:_l,image:yl,inlineCode:Sl,linkReference:Ml,link:Cl,listItem:Dl,list:xl,paragraph:vl,root:Pl,strong:Tl,table:ql,tableCell:Ll,tableRow:Nl,text:Kl,thematicBreak:Jl,toml:lr,yaml:lr,definition:lr,footnoteDefinition:lr};function lr(){}var Ql=typeof self=="object"?self:globalThis,PE=(A,e)=>{let j=(r,n)=>(A.set(n,r),r),t=r=>{if(A.has(r))return A.get(r);let[n,o]=e[r];switch(n){case 0:case-1:return j(o,r);case 1:{let i=j([],r);for(let a of o)i.push(t(a));return i}case 2:{let i=j({},r);for(let[a,s]of o)i[t(a)]=t(s);return i}case 3:return j(new Date(o),r);case 4:{let{source:i,flags:a}=o;return j(new RegExp(i,a),r)}case 5:{let i=j(new Map,r);for(let[a,s]of o)i.set(t(a),t(s));return i}case 6:{let i=j(new Set,r);for(let a of o)i.add(t(a));return i}case 7:{let{name:i,message:a}=o;return j(new Ql[i](a),r)}case 8:return j(BigInt(o),r);case"BigInt":return j(Object(BigInt(o)),r)}return j(new Ql[n](o),r)};return t},Dn=A=>PE(new Map,A)(0);var ae="",{toString:TE}={},{keys:wE}=Object,At=A=>{let e=typeof A;if(e!=="object"||!A)return[0,e];let j=TE.call(A).slice(8,-1);switch(j){case"Array":return[1,ae];case"Object":return[2,ae];case"Date":return[3,ae];case"RegExp":return[4,ae];case"Map":return[5,ae];case"Set":return[6,ae]}return j.includes("Array")?[1,j]:j.includes("Error")?[7,j]:[2,j]},$r=([A,e])=>A===0&&(e==="function"||e==="symbol"),qE=(A,e,j,t)=>{let r=(o,i)=>{let a=t.push(o)-1;return j.set(i,a),a},n=o=>{if(j.has(o))return j.get(o);let[i,a]=At(o);switch(i){case 0:{let l=o;switch(a){case"bigint":i=8,l=o.toString();break;case"function":case"symbol":if(A)throw new TypeError("unable to serialize "+a);l=null;break;case"undefined":return r([-1],o)}return r([i,l],o)}case 1:{if(a)return r([a,[...o]],o);let l=[],k=r([i,l],o);for(let c of o)l.push(n(c));return k}case 2:{if(a)switch(a){case"BigInt":return r([a,o.toString()],o);case"Boolean":case"Number":case"String":return r([a,o.valueOf()],o)}if(e&&"toJSON"in o)return n(o.toJSON());let l=[],k=r([i,l],o);for(let c of wE(o))(A||!$r(At(o[c])))&&l.push([n(c),n(o[c])]);return k}case 3:return r([i,o.toISOString()],o);case 4:{let{source:l,flags:k}=o;return r([i,{source:l,flags:k}],o)}case 5:{let l=[],k=r([i,l],o);for(let[c,u]of o)(A||!($r(At(c))||$r(At(u))))&&l.push([n(c),n(u)]);return k}case 6:{let l=[],k=r([i,l],o);for(let c of o)(A||!$r(At(c)))&&l.push(n(c));return k}}let{message:s}=o;return r([i,{name:a,message:s}],o)};return n},On=(A,{json:e,lossy:j}={})=>{let t=[];return qE(!(e||j),!!e,new Map,t)(A),t};var se=typeof structuredClone=="function"?(A,e)=>e&&("json"in e||"lossy"in e)?Dn(On(A,e)):structuredClone(A):(A,e)=>Dn(On(A,e));function NE(A,e){let j=[{type:"text",value:"\u21A9"}];return e>1&&j.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),j}function LE(A,e){return"Back to reference "+(A+1)+(e>1?"-"+e:"")}function Ul(A){let e=typeof A.options.clobberPrefix=="string"?A.options.clobberPrefix:"user-content-",j=A.options.footnoteBackContent||NE,t=A.options.footnoteBackLabel||LE,r=A.options.footnoteLabel||"Footnotes",n=A.options.footnoteLabelTagName||"h2",o=A.options.footnoteLabelProperties||{className:["sr-only"]},i=[],a=-1;for(;++a<A.footnoteOrder.length;){let s=A.footnoteById.get(A.footnoteOrder[a]);if(!s)continue;let l=A.all(s),k=String(s.identifier).toUpperCase(),c=xA(k.toLowerCase()),u=0,d=[],E=A.footnoteCounts.get(k);for(;E!==void 0&&++u<=E;){d.length>0&&d.push({type:"text",value:" "});let f=typeof j=="string"?j:j(a,u);typeof f=="string"&&(f={type:"text",value:f}),d.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:typeof t=="string"?t:t(a,u),className:["data-footnote-backref"]},children:Array.isArray(f)?f:[f]})}let m=l[l.length-1];if(m&&m.type==="element"&&m.tagName==="p"){let f=m.children[m.children.length-1];f&&f.type==="text"?f.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...d)}else l.push(...d);let $={type:"element",tagName:"li",properties:{id:e+"fn-"+c},children:A.wrap(l,!0)};A.patch(s,$),i.push($)}if(i.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:n,properties:{...se(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:A.wrap(i,!0)},{type:"text",value:`
`}]}}var xn={}.hasOwnProperty,KE={};function Xl(A,e){let j=e||KE,t=new Map,r=new Map,n=new Map,o={...Hl,...j.handlers},i={all:s,applyData:HE,definitionById:t,footnoteById:r,footnoteCounts:n,footnoteOrder:[],handlers:o,one:a,options:j,patch:JE,wrap:UE};return at(A,function(l){if(l.type==="definition"||l.type==="footnoteDefinition"){let k=l.type==="definition"?t:r,c=String(l.identifier).toUpperCase();k.has(c)||k.set(c,l)}}),i;function a(l,k){let c=l.type,u=i.handlers[c];if(xn.call(i.handlers,c)&&u)return u(i,l,k);if(i.options.passThrough&&i.options.passThrough.includes(c)){if("children"in l){let{children:E,...m}=l,$=se(m);return $.children=i.all(l),$}return se(l)}return(i.options.unknownHandler||QE)(i,l,k)}function s(l){let k=[];if("children"in l){let c=l.children,u=-1;for(;++u<c.length;){let d=i.one(c[u],l);if(d){if(u&&c[u-1].type==="break"&&(!Array.isArray(d)&&d.type==="text"&&(d.value=Vl(d.value)),!Array.isArray(d)&&d.type==="element")){let E=d.children[0];E&&E.type==="text"&&(E.value=Vl(E.value))}Array.isArray(d)?k.push(...d):k.push(d)}}}return k}}function JE(A,e){A.position&&(e.position=yn(A))}function HE(A,e){let j=e;if(A&&A.data){let t=A.data.hName,r=A.data.hChildren,n=A.data.hProperties;if(typeof t=="string")if(j.type==="element")j.tagName=t;else{let o="children"in j?j.children:[j];j={type:"element",tagName:t,properties:{},children:o}}j.type==="element"&&n&&Object.assign(j.properties,se(n)),"children"in j&&j.children&&r!==null&&r!==void 0&&(j.children=r)}return j}function QE(A,e){let j=e.data||{},t="value"in e&&!(xn.call(j,"hProperties")||xn.call(j,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:A.all(e)};return A.patch(e,t),A.applyData(e,t)}function UE(A,e){let j=[],t=-1;for(e&&j.push({type:"text",value:`
`});++t<A.length;)t&&j.push({type:"text",value:`
`}),j.push(A[t]);return e&&A.length>0&&j.push({type:"text",value:`
`}),j}function Vl(A){let e=0,j=A.charCodeAt(e);for(;j===9||j===32;)e++,j=A.charCodeAt(e);return A.slice(e)}function Er(A,e){let j=Xl(A,e),t=j.one(A,void 0),r=Ul(j),n=Array.isArray(t)?{type:"root",children:t}:t||{type:"root",children:[]};return r&&("children"in n,n.children.push({type:"text",value:`
`},r)),n}function Br(A,e){return A&&"run"in A?async function(j,t){let r=Er(j,{file:t,...e});await A.run(r,t)}:function(j,t){return Er(j,{file:t,...A||e})}}function pr(A){let e=this;e.compiler=j;function j(t){return v6(t,{...e.data("settings"),...A,extensions:e.data("toMarkdownExtensions")||[]})}}function vn(A){if(A)throw A}var Gr=Rr(rk(),1);function jt(A){if(typeof A!="object"||A===null)return!1;let e=Object.getPrototypeOf(A);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in A)&&!(Symbol.iterator in A)}function Pn(){let A=[],e={run:j,use:t};return e;function j(...r){let n=-1,o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);i(null,...r);function i(a,...s){let l=A[++n],k=-1;if(a){o(a);return}for(;++k<r.length;)(s[k]===null||s[k]===void 0)&&(s[k]=r[k]);r=s,l?nk(l,i)(...s):o(null,...s)}}function t(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return A.push(r),e}}function nk(A,e){let j;return t;function t(...o){let i=A.length>o.length,a;i&&o.push(r);try{a=A.apply(this,o)}catch(s){let l=s;if(i&&j)throw l;return r(l)}i||(a&&a.then&&typeof a.then=="function"?a.then(n,r):a instanceof Error?r(a):n(a))}function r(o,...i){j||(j=!0,e(o,...i))}function n(o){r(null,o)}}var ok=function(A){let t=this.constructor.prototype,r=t[A],n=function(){return r.apply(n,arguments)};return Object.setPrototypeOf(n,t),n};var VE={}.hasOwnProperty,Nn=class A extends ok{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Pn()}copy(){let e=new A,j=-1;for(;++j<this.attachers.length;){let t=this.attachers[j];e.use(...t)}return e.data((0,Gr.default)(!0,{},this.namespace)),e}data(e,j){return typeof e=="string"?arguments.length===2?(qn("data",this.frozen),this.namespace[e]=j,this):VE.call(this.namespace,e)&&this.namespace[e]||void 0:e?(qn("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[j,...t]=this.attachers[this.freezeIndex];if(t[0]===!1)continue;t[0]===!0&&(t[0]=void 0);let r=j.call(e,...t);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();let j=fr(e),t=this.parser||this.Parser;return Tn("parse",t),t(String(j),j)}process(e,j){let t=this;return this.freeze(),Tn("process",this.parser||this.Parser),wn("process",this.compiler||this.Compiler),j?r(void 0,j):new Promise(r);function r(n,o){let i=fr(e),a=t.parse(i);t.run(a,i,function(l,k,c){if(l||!k||!c)return s(l);let u=k,d=t.stringify(u,c);zE(d)?c.value=d:c.result=d,s(l,c)});function s(l,k){l||!k?o(l):n?n(k):j(void 0,k)}}}processSync(e){let j=!1,t;return this.freeze(),Tn("processSync",this.parser||this.Parser),wn("processSync",this.compiler||this.Compiler),this.process(e,r),ak("processSync","process",j),t;function r(n,o){j=!0,vn(n),t=o}}run(e,j,t){ik(e),this.freeze();let r=this.transformers;return!t&&typeof j=="function"&&(t=j,j=void 0),t?n(void 0,t):new Promise(n);function n(o,i){let a=fr(j);r.run(e,a,s);function s(l,k,c){let u=k||e;l?i(l):o?o(u):t(void 0,u,c)}}}runSync(e,j){let t=!1,r;return this.run(e,j,n),ak("runSync","run",t),r;function n(o,i){vn(o),r=i,t=!0}}stringify(e,j){this.freeze();let t=fr(j),r=this.compiler||this.Compiler;return wn("stringify",r),ik(e),r(e,t)}use(e,...j){let t=this.attachers,r=this.namespace;if(qn("use",this.frozen),e!=null)if(typeof e=="function")a(e,j);else if(typeof e=="object")Array.isArray(e)?i(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function n(s){if(typeof s=="function")a(s,[]);else if(typeof s=="object")if(Array.isArray(s)){let[l,...k]=s;a(l,k)}else o(s);else throw new TypeError("Expected usable value, not `"+s+"`")}function o(s){if(!("plugins"in s)&&!("settings"in s))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(s.plugins),s.settings&&(r.settings=(0,Gr.default)(!0,r.settings,s.settings))}function i(s){let l=-1;if(s!=null)if(Array.isArray(s))for(;++l<s.length;){let k=s[l];n(k)}else throw new TypeError("Expected a list of plugins, not `"+s+"`")}function a(s,l){let k=-1,c=-1;for(;++k<t.length;)if(t[k][0]===s){c=k;break}if(c===-1)t.push([s,...l]);else if(l.length>0){let[u,...d]=l,E=t[c][1];jt(E)&&jt(u)&&(u=(0,Gr.default)(!0,E,u)),t[c]=[s,u,...d]}}}},Fr=new Nn().freeze();function Tn(A,e){if(typeof e!="function")throw new TypeError("Cannot `"+A+"` without `parser`")}function wn(A,e){if(typeof e!="function")throw new TypeError("Cannot `"+A+"` without `compiler`")}function qn(A,e){if(e)throw new Error("Cannot call `"+A+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ik(A){if(!jt(A)||typeof A.type!="string")throw new TypeError("Expected node, got `"+A+"`")}function ak(A,e,j){if(!j)throw new Error("`"+A+"` finished async. Use `"+e+"` instead")}function fr(A){return XE(A)?A:new Ce(A)}function XE(A){return!!(A&&typeof A=="object"&&"message"in A&&"messages"in A)}function zE(A){return typeof A=="string"||WE(A)}function WE(A){return!!(A&&typeof A=="object"&&"byteLength"in A&&"byteOffset"in A)}var YE=/^(#{1,6})\s+(.+)$/m,ZE=/\*\*(.*?)\*\*/,AB=/\*(.*?)\*/,jB=/^\s*[-*+]\s+(.+)$/m,eB=/^\s*(\d+)\.\s+(.+)$/m,tB=/^>\s+(.+)$/m,rB=/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/,nB=/`([^`]+)`/,oB=/```[\s\S]*?```/,iB=/^\s*\|(.+\|)+\s*$/m,aB=/~~(.*?)~~/,sB=/^\s*[-*+]\s+\[[ x]\]\s+\S/m,lB=/^(-{3,}|_{3,})\s*$/m,kB=/!\[([^\]]*)\]\((https?:\/\/[^)]+)\)/,cB=/<(https?:\/\/[^>]+)>/;function UM(A){return!A||A.length===0?!1:[YE,ZE,AB,jB,eB,tB,rB,nB,oB,iB,aB,sB,lB,kB,cB].some(j=>j.test(A))}function uB(A){return Fr().use(or).use(Qt).use(ze).use(Br,{allowDangerousHtml:!0,handlers:{break:function(j,t){let r={type:"element",tagName:"br",properties:{},children:[]};return j.patch(t,r),[j.applyData(t,r)]}}}).use(Ht,{allowDangerousHtml:!0}).processSync(A).toString()}function VM(A,e){let j=uB(A),t=document.createElement("div");return t.innerHTML=j,So.fromSchema(e).parseSlice(t,{preserveWhitespace:!0})}function XM(A,e,j){let t={},r;for(r in j.nodes){let a=j.nodes[r].spec.toMarkdown;t[r]=(...s)=>a(...s,e)}let n={},o;for(o in j.marks){let a=j.marks[o].spec.toMarkdown;n[o]=(...s)=>a(...s,e)}let i=xo(A,{schema:j,nodeHandlers:t,markHandlers:n});return Fr().use(ze).use(pr,{handlers:{text(...a){let[s]=a;return s.data?.avoidEscaping?s.value:nj.text(...a)}},bullet:"-",emphasis:"_"}).stringify(i)}function sk(A){return A.type==="existing"||A.type==="temporary"}function rC({stackElement:A,tree:e}){return A?A.type==="arrayItem"?e.getNodeWithTrait(A.collectionId,Jj):e.getNodeWithTrait(A.type==="temporary"?A.collectionId:e.getParent(A.itemId)?.id,Jj):null}function nC({treeStore:A,contentManagementStore:e,stackElement:j}){if(!j)return null;if(j.type==="existing")return A.tree.getNodeWithTrait(j.itemId,Fj);if(j.type==="temporary")return e.temporaryItemCache.get(j.itemId)??null;if(j.type==="arrayItem"){let t=A.tree.getNodeWithTrait(j.collectionItemId,Fj);return t||(e.temporaryItemCache.get(j.collectionItemId)??null)}Gj(j)}function oC(A){return A.findLast(sk)??null}function iC(A){return A.reduce((e,j)=>sk(j)?e+1:e,0)}function aC(A,e=[]){let j=A.stores.selectionStore.ids.length===1?A.stores.selectionStore.ids.at(0):void 0,t=$B(A,e),r=t.at(0),n=A.tree.getNodeWithTrait(j,Fj);if(n){if(!r)return[{itemId:n.id,type:"existing"}];if(r.type==="existing")return r.itemId===n.id?t:(I(t.length===1,"Must dismiss overlay stack before changing selection"),[{itemId:n.id,type:"existing"}]);if(r.type==="temporary")throw new Error("Must save temporary item stack before selecting a collection item");if(r.type==="arrayItem")return t;Gj(r)}if(!r||r.type==="temporary")return t;if(r.type==="existing")return A.stores.chromeStore.mainView!==2?t:(I(t.length===1,"Must dismiss overlay stack before de-selecting collection item"),[]);if(r.type==="arrayItem")return t;Gj(r)}function $B(A,e){let j=[];for(let t=0;t<e.length;t++){let r=e[t];if(!r)continue;r.type==="temporary"&&A.tree.has(r.itemId)&&(r={type:"existing",itemId:r.itemId});let n=j.at(-1)??null;if(!EB(A,r,n))break;j.push(r),t>0&&r.type==="temporary"&&I(!!r.saveAction,"Temporary items in the stack must have saveAction, except when they are the first")}return j}function EB(A,e,j){if(e.type==="temporary")return I(!A.tree.has(e.itemId),"Temporary stack element must not exist in the tree. It should be turned existing before passing it to validateOverlayStackElement."),A.tree.has(e.collectionId)&&A.stores.contentManagementStore.temporaryItemCache.has(e.itemId);if(e.type==="existing")return A.tree.has(e.itemId);if(e.type==="arrayItem"){if(!j||j.type!=="existing"&&j.type!=="temporary"||j.itemId!==e.collectionItemId||j.type==="temporary"&&j.collectionId!==e.collectionId)return!1;let t=A.tree.getNodeWithTrait(e.collectionId,Jj);if(!t)return!1;let r=A.tree.getNodeWithTrait(e.collectionItemId,Fj)??A.stores.contentManagementStore.temporaryItemCache.get(e.collectionItemId);if(!r||r.parentid&&r.parentid!==e.collectionId)return!1;let n=t.getVariable(e.arrayFieldId);if(!n||!bo(n))return!1;let o=r.getControlProp(e.arrayFieldId);return!o||!Io(o)||!ao(o.value)?!1:o.value.some(({type:i,id:a})=>i==="object"&&a===e.arrayItemId)}Gj(e)}function lC(A,e){let j=e.getItemIds(A.id);if(j)return j[0]}function cC(A){return Object.entries(A)}function*uC(A){let e=Object.keys(A);for(let j of e)yield[j,A[j]]}export{Ia as a,ha as b,pA as c,Ce as d,ms as e,yc as f,f6 as g,Rs as h,Is as i,lC as j,Ma as k,c0 as l,Ca as m,mB as n,aa as o,sa as p,fB as q,E0 as r,uj as s,p0 as t,Yj as u,m0 as v,xa as w,De as x,D0 as y,Jk as z,O0 as A,Hk as B,Qk as C,e6 as D,va as E,x0 as F,Pa as G,v0 as H,o6 as I,i6 as J,a6 as K,Yk as L,Pm as M,PB as N,TB as O,Ea as P,ks as Q,Ec as R,Bc as S,pa as T,G6 as U,Oc as V,gs as W,vc as X,bs as Y,_s as Z,ys as _,qc as $,R6 as aa,Nc as ba,LF as ca,KF as da,tR as ea,Kc as fa,Jc as ga,Ds as ha,Dj as ia,Qt as ja,or as ka,Br as la,Fr as ma,UM as na,uB as oa,VM as pa,XM as qa,rC as ra,nC as sa,oC as ta,iC as ua,aC as va,$B as wa,cC as xa,uC as ya};
//# sourceMappingURL=https://app.framerstatic.com/chunk-6MRAOEJR.mjs.map
